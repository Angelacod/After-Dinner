<!doctype html>
<html id="ixtHomePage" class="en_GB ItxHomePage">
	<head>
<!-- BEGIN pre-common head -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 

<meta content="Score serious style points with Bershka’s latest trends for this spring summer 2019. Make an impact with jeans, shirts, shoes or accessories for women & men." name="description">
<title>Bershka United Kingdom | Trends for Women & Men</title>
<meta http-equiv="content-language" content="en-GB"><meta property="og:title" content="Bershka United Kingdom | Trends for Women & Men" />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://static.bershka.net/4/static/itxwebstandard/logo/logo.png?t=201905170335002121485607" />
<meta property="og:url" content="https://www.bershka.com/gb/" />
<meta property="og:description" content="Score serious style points with Bershka’s latest trends for this spring summer 2019. Make an impact with jeans, shirts, shoes or accessories for women & men." /><meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@Bershka"/>
<meta property="twitter:title" content="Bershka United Kingdom | Trends for Women & Men"/>
<meta property="twitter:description" content="Score serious style points with Bershka’s latest trends for this spring summer 2019. Make an impact with jeans, shirts, shoes or accessories for women & men."/>
<meta property="twitter:image" content="https://static.bershka.net/4/static/itxwebstandard/logo/logo.png?t=201905170335002121485607"/><link rel="image_src" href="https://static.bershka.net/4/static/itxwebstandard/logo/logo.png?t=201905170335002121485607" /><link rel="canonical" href="https://www.bershka.com/gb/" />
<link rel="alternate" hreflang="x-default" href="https://www.bershka.com/" />
<link rel="alternate" hreflang="en-AL" href="https://www.bershka.com/al/" />
<link rel="alternate" hreflang="fr-DZ" href="https://www.bershka.com/dz/" />
<link rel="alternate" hreflang="en-DZ" href="https://www.bershka.com/dz/en/" />
<link rel="alternate" hreflang="es-AD" href="https://www.bershka.com/ad/" />
<link rel="alternate" hreflang="ca-AD" href="https://www.bershka.com/ad/ca/" />
<link rel="alternate" hreflang="fr-AD" href="https://www.bershka.com/ad/fr/" />
<link rel="alternate" hreflang="en-AD" href="https://www.bershka.com/ad/en/" />
<link rel="alternate" hreflang="en-AM" href="https://www.bershka.com/am/" />
<link rel="alternate" hreflang="de-AT" href="https://www.bershka.com/at/" />
<link rel="alternate" hreflang="en-AT" href="https://www.bershka.com/at/en/" />
<link rel="alternate" hreflang="en-AZ" href="https://www.bershka.com/az/" />
<link rel="alternate" hreflang="en-BH" href="https://www.bershka.com/bh/" />
<link rel="alternate" hreflang="ru-BY" href="https://www.bershka.com/by/" />
<link rel="alternate" hreflang="en-BY" href="https://www.bershka.com/by/en/" />
<link rel="alternate" hreflang="fr-BE" href="https://www.bershka.com/be/" />
<link rel="alternate" hreflang="en-BE" href="https://www.bershka.com/be/en/" />
<link rel="alternate" hreflang="nl-BE" href="https://www.bershka.com/be/nl/" />
<link rel="alternate" hreflang="en-BA" href="https://www.bershka.com/ba/" />
<link rel="alternate" hreflang="bg-BG" href="https://www.bershka.com/bg/" />
<link rel="alternate" hreflang="en-BG" href="https://www.bershka.com/bg/en/" />
<link rel="alternate" hreflang="zh-CN" href="https://www.bershka.cn/cn/" />
<link rel="alternate" hreflang="en-CN" href="https://www.bershka.cn/cn/en/" />
<link rel="alternate" hreflang="en-TW" href="https://www.bershka.com/tw/" />
<link rel="alternate" hreflang="en-HK" href="https://www.bershka.com/hk/" />
<link rel="alternate" hreflang="en-MO" href="https://www.bershka.com/mo/" />
<link rel="alternate" hreflang="es-CO" href="https://www.bershka.com/co/" />
<link rel="alternate" hreflang="en-CO" href="https://www.bershka.com/co/en/" />
<link rel="alternate" hreflang="es-CR" href="https://www.bershka.com/cr/" />
<link rel="alternate" hreflang="en-CR" href="https://www.bershka.com/cr/en/" />
<link rel="alternate" hreflang="hr-HR" href="https://www.bershka.com/hr/" />
<link rel="alternate" hreflang="en-HR" href="https://www.bershka.com/hr/en/" />
<link rel="alternate" hreflang="en-CY" href="https://www.bershka.com/cy/" />
<link rel="alternate" hreflang="cs-CZ" href="https://www.bershka.com/cz/" />
<link rel="alternate" hreflang="en-CZ" href="https://www.bershka.com/cz/en/" />
<link rel="alternate" hreflang="en-DK" href="https://www.bershka.com/dk/" />
<link rel="alternate" hreflang="da-DK" href="https://www.bershka.com/dk/da/" />
<link rel="alternate" hreflang="es-DO" href="https://www.bershka.com/do/" />
<link rel="alternate" hreflang="en-DO" href="https://www.bershka.com/do/en/" />
<link rel="alternate" hreflang="es-EC" href="https://www.bershka.com/ec/" />
<link rel="alternate" hreflang="en-EC" href="https://www.bershka.com/ec/en/" />
<link rel="alternate" hreflang="en-EG" href="https://www.bershka.com/eg/" />
<link rel="alternate" hreflang="fr-EG" href="https://www.bershka.com/eg/fr/" />
<link rel="alternate" hreflang="es-SV" href="https://www.bershka.com/sv/" />
<link rel="alternate" hreflang="en-SV" href="https://www.bershka.com/sv/en/" />
<link rel="alternate" hreflang="es-ES" href="https://www.bershka.com/es/" />
<link rel="alternate" hreflang="ca-ES" href="https://www.bershka.com/es/ca/" />
<link rel="alternate" hreflang="gl-ES" href="https://www.bershka.com/es/gl/" />
<link rel="alternate" hreflang="eu-ES" href="https://www.bershka.com/es/eu/" />
<link rel="alternate" hreflang="en-ES" href="https://www.bershka.com/es/en/" />
<link rel="alternate" hreflang="et-EE" href="https://www.bershka.com/ee/" />
<link rel="alternate" hreflang="en-EE" href="https://www.bershka.com/ee/en/" />
<link rel="alternate" hreflang="fi-FI" href="https://www.bershka.com/fi/" />
<link rel="alternate" hreflang="en-FI" href="https://www.bershka.com/fi/en/" />
<link rel="alternate" hreflang="fr-FR" href="https://www.bershka.com/fr/" />
<link rel="alternate" hreflang="en-FR" href="https://www.bershka.com/fr/en/" />
<link rel="alternate" hreflang="en-GE" href="https://www.bershka.com/ge/" />
<link rel="alternate" hreflang="de-DE" href="https://www.bershka.com/de/" />
<link rel="alternate" hreflang="en-DE" href="https://www.bershka.com/de/en/" />
<link rel="alternate" hreflang="el-GR" href="https://www.bershka.com/gr/" />
<link rel="alternate" hreflang="en-GR" href="https://www.bershka.com/gr/en/" />
<link rel="alternate" hreflang="es-GT" href="https://www.bershka.com/gt/" />
<link rel="alternate" hreflang="en-GT" href="https://www.bershka.com/gt/en/" />
<link rel="alternate" hreflang="es-HN" href="https://www.bershka.com/hn/" />
<link rel="alternate" hreflang="en-HN" href="https://www.bershka.com/hn/en/" />
<link rel="alternate" hreflang="hu-HU" href="https://www.bershka.com/hu/" />
<link rel="alternate" hreflang="en-HU" href="https://www.bershka.com/hu/en/" />
<link rel="alternate" hreflang="en-ID" href="https://www.bershka.com/id/" />
<link rel="alternate" hreflang="en-IE" href="https://www.bershka.com/ie/" />
<link rel="alternate" hreflang="en-IL" href="https://www.bershka.com/il/" />
<link rel="alternate" hreflang="it-IT" href="https://www.bershka.com/it/" />
<link rel="alternate" hreflang="en-IT" href="https://www.bershka.com/it/en/" />
<link rel="alternate" hreflang="ja-JP" href="https://www.bershka.com/jp/" />
<link rel="alternate" hreflang="en-JP" href="https://www.bershka.com/jp/en/" />
<link rel="alternate" hreflang="en-JO" href="https://www.bershka.com/jo/" />
<link rel="alternate" hreflang="en-KZ" href="https://www.bershka.com/kz/" />
<link rel="alternate" hreflang="en-XK" href="https://www.bershka.com/xk/" />
<link rel="alternate" hreflang="en-KW" href="https://www.bershka.com/kw/" />
<link rel="alternate" hreflang="lv-LV" href="https://www.bershka.com/lv/" />
<link rel="alternate" hreflang="en-LV" href="https://www.bershka.com/lv/en/" />
<link rel="alternate" hreflang="en-LB" href="https://www.bershka.com/lb/" />
<link rel="alternate" hreflang="fr-LB" href="https://www.bershka.com/lb/fr/" />
<link rel="alternate" hreflang="lt-LT" href="https://www.bershka.com/lt/" />
<link rel="alternate" hreflang="en-LT" href="https://www.bershka.com/lt/en/" />
<link rel="alternate" hreflang="fr-LU" href="https://www.bershka.com/lu/" />
<link rel="alternate" hreflang="de-LU" href="https://www.bershka.com/lu/de/" />
<link rel="alternate" hreflang="en-LU" href="https://www.bershka.com/lu/en/" />
<link rel="alternate" hreflang="en-MK" href="https://www.bershka.com/mk/" />
<link rel="alternate" hreflang="en-MY" href="https://www.bershka.com/my/" />
<link rel="alternate" hreflang="en-MT" href="https://www.bershka.com/mt/" />
<link rel="alternate" hreflang="fr-MA" href="https://www.bershka.com/ma/" />
<link rel="alternate" hreflang="es-MA" href="https://www.bershka.com/ma/es/" />
<link rel="alternate" hreflang="en-MA" href="https://www.bershka.com/ma/en/" />
<link rel="alternate" hreflang="es-MX" href="https://www.bershka.com/mx/" />
<link rel="alternate" hreflang="en-MX" href="https://www.bershka.com/mx/en/" />
<link rel="alternate" hreflang="en-ME" href="https://www.bershka.com/me/" />
<link rel="alternate" hreflang="nl-NL" href="https://www.bershka.com/nl/" />
<link rel="alternate" hreflang="en-NL" href="https://www.bershka.com/nl/en/" />
<link rel="alternate" hreflang="es-NI" href="https://www.bershka.com/ni/" />
<link rel="alternate" hreflang="en-NI" href="https://www.bershka.com/ni/en/" />
<link rel="alternate" hreflang="en-OM" href="https://www.bershka.com/om/" />
<link rel="alternate" hreflang="fr-OM" href="https://www.bershka.com/om/fr/" />
<link rel="alternate" hreflang="es-PA" href="https://www.bershka.com/pa/" />
<link rel="alternate" hreflang="en-PA" href="https://www.bershka.com/pa/en/" />
<link rel="alternate" hreflang="en-PH" href="https://www.bershka.com/ph/" />
<link rel="alternate" hreflang="pl-PL" href="https://www.bershka.com/pl/" />
<link rel="alternate" hreflang="en-PL" href="https://www.bershka.com/pl/en/" />
<link rel="alternate" hreflang="pt-PT" href="https://www.bershka.com/pt/" />
<link rel="alternate" hreflang="en-PT" href="https://www.bershka.com/pt/en/" />
<link rel="alternate" hreflang="en-QA" href="https://www.bershka.com/qa/" />
<link rel="alternate" hreflang="ro-RO" href="https://www.bershka.com/ro/" />
<link rel="alternate" hreflang="en-RO" href="https://www.bershka.com/ro/en/" />
<link rel="alternate" hreflang="ru-RU" href="https://www.bershka.com/ru/" />
<link rel="alternate" hreflang="en-RU" href="https://www.bershka.com/ru/en/" />
<link rel="alternate" hreflang="en-SA" href="https://www.bershka.com/sa/" />
<link rel="alternate" hreflang="en-RS" href="https://www.bershka.com/rs/" />
<link rel="alternate" hreflang="en-SG" href="https://www.bershka.com/sg/" />
<link rel="alternate" hreflang="sk-SK" href="https://www.bershka.com/sk/" />
<link rel="alternate" hreflang="en-SK" href="https://www.bershka.com/sk/en/" />
<link rel="alternate" hreflang="sl-SI" href="https://www.bershka.com/si/" />
<link rel="alternate" hreflang="en-SI" href="https://www.bershka.com/si/en/" />
<link rel="alternate" hreflang="ko-KR" href="https://www.bershka.com/kr/" />
<link rel="alternate" hreflang="en-KR" href="https://www.bershka.com/kr/en/" />
<link rel="alternate" hreflang="sv-SE" href="https://www.bershka.com/se/" />
<link rel="alternate" hreflang="en-SE" href="https://www.bershka.com/se/en/" />
<link rel="alternate" hreflang="de-CH" href="https://www.bershka.com/ch/" />
<link rel="alternate" hreflang="it-CH" href="https://www.bershka.com/ch/it/" />
<link rel="alternate" hreflang="fr-CH" href="https://www.bershka.com/ch/fr/" />
<link rel="alternate" hreflang="en-CH" href="https://www.bershka.com/ch/en/" />
<link rel="alternate" hreflang="en-TH" href="https://www.bershka.com/th/" />
<link rel="alternate" hreflang="en-TN" href="https://www.bershka.com/tn/" />
<link rel="alternate" hreflang="tr-TR" href="https://www.bershka.com/tr/" />
<link rel="alternate" hreflang="en-TR" href="https://www.bershka.com/tr/en/" />
<link rel="alternate" hreflang="en-UA" href="https://www.bershka.com/ua/" />
<link rel="alternate" hreflang="en-AE" href="https://www.bershka.com/ae/" />
<link rel="alternate" hreflang="en-GB" href="https://www.bershka.com/gb/" />
<link rel="alternate" hreflang="en-US" href="https://www.bershka.com/us/" />
<link rel="alternate" hreflang="es-US" href="https://www.bershka.com/us/es/" />
<link rel="alternate" hreflang="es-VE" href="https://www.bershka.com/ve/" />
<link rel="alternate" hreflang="en-VE" href="https://www.bershka.com/ve/en/" />


<!-- BEGIN SPOT=BK3_ESpot_HeadBegin -->
<meta name="google-site-verification" content="5MJInby56CNf2FHSh7xKVq3p1mmTzQUrTZf3U8YXGGk" />
<meta name="google-site-verification" content="FMaKnCxmMYj4WR1mjf7_7WUIuyWGen5TfRbyMiU3WRk" />
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion_async.js" async></script>
<!-- <script src="//cdn.optimizely.com/js/2716260860.js"></script> -->

<!-- END SPOT=BK3_ESpot_HeadBegin -->

<!-- BEGIN SPOT=BK3_ESpot_HomePageHead -->
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "WebSite",
	"url": "https://www.bershka.com/gb/-1/",
	"potentialAction": {
		"@type": "SearchAction",
		"target": "https://www.bershka.com/gb/-1/search.html?query={search_term_string}",
		"query-input": "required name=search_term_string"
	}
}
</script>
<!-- END SPOT=BK3_ESpot_HomePageHead -->


<link rel="stylesheet" type="text/css" href="/static/itxwebstandard/css/itx-core-main.min.css?t=2019042416012446db2121485607" />
<link rel="stylesheet" type="text/css" href="https://static.bershka.net/4/static/itxwebstandard/css/itx-custom-main.min.css?t=201905170335002121485607" />

<script type="text/javascript" src="/static/itxwebstandard/js/itx-core-api.min.js?t=2019042416012446db2121485607" crossorigin="anonymous"></script>
<script type="text/javascript" src="/static/itxwebstandard/js/rest-map.min.js?t=2019042416012446db2121485607"></script>
<script type="text/javascript" src="/static/itxwebstandard/js/44009506/-1/40259534/BK3_ESpot_I18N.min.js?t=201905170335002121485607" crossorigin="anonymous"></script>

<!-- Begin JS Attachments -->
<!-- End JS Attachments -->

<!-- Begin CSS Attachments -->
<!-- End CSS Attachments -->




<script type="text/javascript" crossorigin="anonymous">
	inditex.iBrand = "bershka";
	inditex.iBrandId = 4;
	inditex.iIsMobile = false;
	inditex.iIsMobileOn = false;
	inditex.iPage = "ItxHomePage";
	inditex.iParams = {"storeId":["44009506"]};
	inditex.iStoreId = 44009506;
	inditex.iStoreIdentifier = "BershkaGB";
	inditex.iLangId = -1;
	inditex.iCatalogId = 40259534;
	inditex.iLayout = "itxwebstandard";
	inditex.iRegistryTs = "201905170335002121485607";
	inditex.iCustomTs = "2019042416012446db2121485607";
	inditex.iProxyHostMobile = "www.bershka.com";
	inditex.iProxyHostStandard = "www.bershka.com";
	inditex.iProxyPortMobile = 80;
	inditex.iProxyPortStandard = 80;
	inditex.iProxySecurePortMobile = 443;
	inditex.iProxySecurePortStandard = 443;
	inditex.iProxyContextPathMobile = "/";
	inditex.iProxyContextPathStandard = "/";
	inditex.iSecureSet = ["ItxCheckoutPage","ItxIFrameHelperPage","ItxOrderConfirmationPage"];
	inditex.iLocale = "en_GB";
	inditex.iCountryCode = "GB";
	inditex.iCountryName = "United Kingdom";
	inditex.iSpotPrefix = "BK3_ESpot_";
	inditex.iCategoryId = null;
	inditex.iCategoryKey = null;
	inditex.iProductId = null;
	inditex.iMaxLastProductListLength = 6;
	inditex.iAsyncPaymentPollingTries = 5;
	inditex.iAsyncPaymentPollingInterval = 5000;
	inditex.iGoogleMapsUser = "gme-itxecommerceireland";
	inditex.iGoogleMapsKey = "ABQIAAAAuLM0t2_kkFjBTv19NCnv4xQ1eARysJDSA6Rsmys1__vV4q3ogRSAPpMJQEtE6PZS8bUt68TqwWpmdA";
	inditex.iGoogleMapsChannel = "Bershka";
	inditex.iGaKeyAnt = null;
	inditex.iGaKey1 = "UA-2867307-6";
	inditex.iGaKey2 = null;
    inditex.iGooglePlacesKey = null;
	inditex.iGooglePlacesEnabled = true;
	inditex.iEnableGoogleMapsCountryRestriction = false;
	inditex.iGoogleMapsVersion = "3";
	inditex.iGaDomain = ".www.bershka.com";
	inditex.iEnableUniversalAnalytics = "1";
	inditex.iAppId = 1;
	inditex.iIsWebResponsive = true;
	inditex.iSolrPublicUrlServer = "www.bershka.com/data";
	inditex.iTmpUrlLangStandard = true;
	inditex.iTmpUrlLangMobile = true;
	inditex.iMaxProductsShopCart = 25;
	inditex.iMaxProductsRegShopCart = 1000;
	inditex.iMaxProductsBussinessShopCart = 1000;
	inditex.iMaxProductsWishList = 1000;
	inditex.iGoogleMapsRegexPublic = "^$";
	inditex.iSecureEnabled = true;
	inditex.iBaiduMapsKey = "";
	inditex.iBaiduHttps = false;
	inditex.iMapLocationFromStoreEnabled = true;
	inditex.iSequenceFromStockEnabled = true;
    inditex.iEnableOptimizelyAnalyticsIntegration = false;
    inditex.iParseMspotEnabled = false;
    inditex.iGoogleMapsRegion = false;
    inditex.iGoogleMapsLanguage = true;
    inditex.iSafeCartEnabled = false;
    inditex.iMpulseEnabled = true;
    inditex.iProxyRestContextPathMobile = "/itxrest/";
	inditex.iProxyRestContextPathStandard = "/itxrest/";
	inditex.iRestVersion = "2";
	inditex.iRemoveCategoryRequest = false;
	inditex.iPhysicalStore = null;
	inditex.iCityStores = null;
	inditex.iUnifiedProductUrlEnabled = false;
	inditex.iWebChatAsyncEnabled = false
	inditex.iUnifiedCategoryUrlEnabled = false;
	inditex.iNewSearchPageEnabled = true;
	inditex.iSearchTerm = null;
	inditex.iIMUTCCookieTTL = 365;
	inditex.iWebJsRedirectStoreDisabled = false;
	inditex.iFrontVersion = "8.2.1.1";
</script>

<!-- Universal Analytics -->
	<script type="text/javascript">
		window['ga-disable-'+inditex.iGaKey1] = true;
		window['ga-disable-'+inditex.iGaKey2] = true; 
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	</script>
<!-- End Universal Analytics -->
<!-- END pre-common head -->
<link rel="apple-touch-icon" sizes="57x57" href="/static/itxwebstandard/images/favicons/apple-touch-icon-57x57.png?t=2019042416012446db2121485607">
<link rel="apple-touch-icon" sizes="60x60" href="/static/itxwebstandard/images/favicons/apple-touch-icon-60x60.png?t=2019042416012446db2121485607">
<link rel="apple-touch-icon" sizes="72x72" href="/static/itxwebstandard/images/favicons/apple-touch-icon-72x72.png?t=2019042416012446db2121485607">
<link rel="apple-touch-icon" sizes="76x76" href="/static/itxwebstandard/images/favicons/apple-touch-icon-76x76.png?t=2019042416012446db2121485607">
<link rel="apple-touch-icon" sizes="114x114" href="/static/itxwebstandard/images/favicons/apple-touch-icon-114x114.png?t=2019042416012446db2121485607">
<link rel="apple-touch-icon" sizes="120x120" href="/static/itxwebstandard/images/favicons/apple-touch-icon-120x120.png?t=2019042416012446db2121485607">
<link rel="apple-touch-icon" sizes="144x144" href="/static/itxwebstandard/images/favicons/apple-touch-icon-144x144.png?t=2019042416012446db2121485607">
<link rel="apple-touch-icon" sizes="152x152" href="/static/itxwebstandard/images/favicons/apple-touch-icon-152x152.png?t=2019042416012446db2121485607">
<link rel="apple-touch-icon" sizes="180x180" href="/static/itxwebstandard/images/favicons/apple-touch-icon-180x180.png?t=2019042416012446db2121485607">
<link rel="icon" type="image/png" href="/static/itxwebstandard/images/favicons/favicon-32x32.png?t=2019042416012446db2121485607" sizes="32x32">
<link rel="icon" type="image/png" href="/static/itxwebstandard/images/favicons/favicon-194x194.png?t=2019042416012446db2121485607" sizes="194x194">
<link rel="icon" type="image/png" href="/static/itxwebstandard/images/favicons/favicon-96x96.png?t=2019042416012446db2121485607" sizes="96x96">
<link rel="icon" type="image/png" href="/static/itxwebstandard/images/favicons/android-chrome-192x192.png?t=2019042416012446db2121485607" sizes="192x192">
<link rel="icon" type="image/png" href="/static/itxwebstandard/images/favicons/favicon-16x16.png?t=2019042416012446db2121485607" sizes="16x16">
<link rel="manifest" href="/static/itxwebstandard/images/favicons/manifest.json?t=2019042416012446db2121485607">
<link rel="shortcut icon" href="/static/itxwebstandard/images/favicons/favicon.ico?t=2019042416012446db2121485607">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/itxwebstandard/images/favicons/mstile-144x144.png?t=2019042416012446db2121485607">
<meta name="msapplication-config" content="/static/itxwebstandard/images/favicons/browserconfig.xml?t=2019042416012446db2121485607">
<meta name="theme-color" content="#ffffff">
<link rel="preload" href="/static/itxwebstandard/images/sprite.svg?t=20190318" as="image">
<link rel="preload" href="/static/itxwebstandard/css/fonts/bentonsanscond-regular-webfont.woff" as="font" crossorigin>
<link rel="preload" href="/static/itxwebstandard/css/fonts/bentonsanscond-medium-webfont.woff" as="font" type="font/woff" crossorigin>
<link rel="preload" href="/static/itxwebstandard/css/fonts/libre-franklin.woff2"  type="font/woff2" as="font" crossorigin>

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1">
<link rel="preload" href="/static/itxwebstandard/images/sprite.svg?t=20190318" as="image">
<link rel="preload" href="/static/itxwebstandard/css/fonts/bentonsanscond-regular-webfont.woff" as="font" crossorigin>
<link rel="preload" href="/static/itxwebstandard/css/fonts/bentonsanscond-medium-webfont.woff" as="font" type="font/woff" crossorigin>
<link rel="preload" href="/static/itxwebstandard/css/fonts/libre-franklin.woff2"  type="font/woff2" as="font" crossorigin>

<!-- END page head -->

<!-- BEGIN post-common head -->
<script type="text/javascript" src="https://static.bershka.net/4/static/itxwebstandard/js/itx-custom-api.min.js?t=201905170335002121485607" crossorigin="anonymous"></script>
<!-- BEGIN SPOT=BK3_ESpot_Inditex -->
<script src="https://cdn.optimizely.com/js/2716260860.js"></script>
<!-- END SPOT=BK3_ESpot_Inditex -->

<!-- Begin Mpulse -->
<script type="text/javascript">
if ((window.inditex && window.inditex.iPage == "ItxOrderConfirmationPage") ){
	window.BOOMR_config = window.BOOMR_config || {};

	window.BOOMR_config.autorun = false;
}

var mpulseSpaCustomPages = ["ItxProductPage","ItxCategoryPage"];
if (mpulseSpaCustomPages.indexOf(inditex.iPage) != -1) {
    window.BOOMR_config = window.BOOMR_config || {};

    window.BOOMR_config.autorun = false;
    
    window.BOOMR_config.History = {
        enabled: true,
        auto: true
    };
}


(function() {
    if (window.BOOMR && window.BOOMR.version) {
        return;
    }
    var dom, doc, where, iframe = document.createElement("iframe"),
        win = window;

    function boomerangSaveLoadTime(e) {
        win.BOOMR_onload = (e && e.timeStamp) || new Date().getTime();
    }
    if (win.addEventListener) {
        win.addEventListener("load", boomerangSaveLoadTime, false);
    } else if (win.attachEvent) {
        win.attachEvent("onload", boomerangSaveLoadTime);
    }

    iframe.src = "javascript:void(0)";
    iframe.title = "";
    iframe.role = "presentation";
    (iframe.frameElement || iframe).style.cssText = "width:0;height:0;border:0;display:none;";
    
    var soastaIframeAfterMetas = false;
    if (soastaIframeAfterMetas) {
        var lastHrefLangTag;
        var canonicalTag;
        var links = document.getElementsByTagName("link");
        if (links) {
            for (i=0; i<links.length; i++){
                var title = links[i].getAttribute("rel");
                if (title == "alternate"){
                    lastHrefLangTag = links[i];
                } else if (title == "canonical") {
                    canonicalTag = links[i];
                }
            }
        }
        if (lastHrefLangTag) {
            where = lastHrefLangTag;
            where.parentNode.insertBefore(iframe, where.nextSibling);
        } else if (canonicalTag) {
            where = canonicalTag;
            where.parentNode.insertBefore(iframe, where.nextSibling);
        } else {
            where = document.getElementsByTagName("script")[0];
            where.parentNode.insertBefore(iframe, where);
        }
    } else {
        where = document.getElementsByTagName("script")[0];
        where.parentNode.insertBefore(iframe, where);
    }

    try {
        doc = iframe.contentWindow.document;
    } catch (e) {
        dom = document.domain;
        iframe.src = "javascript:var d=document.open();d.domain='" + dom + "';void(0);";
        doc = iframe.contentWindow.document;
    }
    doc.open()._l = function() {
        var js = this.createElement("script");
        if (dom) {
            this.domain = dom;
        }
        js.id = "boomr-if-as";
        js.src = "//c.go-mpulse.net/boomerang/" +
             "AB2DA-8NFHH-SFFX7-3W7D2-5FEF7";
        BOOMR_lstart = new Date().getTime();
        this.body.appendChild(js);
    };
    doc.write('<body onload="document._l();">');
    doc.close();
})();
</script>
<!-- End Mpulse -->
<!-- BEGIN SPOT=BK3_ESpot_HeadEnd -->
<style>
nav li[ng-class$="\=1010025004}"], nav li[ng-class$="\=1010025048}"], nav li[ng-class$="\=1010025051}"] {
  color: red;
}
.mainMenu  li[ng-class$='==1010072036}'], .mainMenu  li[ng-class$='==1010072037}'], .mainMenu  li[ng-class$='==1010072038}'], .mainMenu  li[ng-class$='==1010072039}'], .mainMenu  li[ng-class$='==1010072040}'], .mainMenu  li[ng-class$='==1010072041}']{
          color:red;
        }
</style>

<style>
.mainMenu .wow-category:after {
    padding-left: 0px;
	content: "WOW! ";
    color: #fc2f2f;
    font-size: 9px;
    font-family: "bentonsansmedium";
    line-height: 2px;
    vertical-align: top;
    margin-left: -10px;
    cursor: pointer;

	-webkit-animation-name: blinkerHeader;
    -webkit-animation-duration: 3s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
    -moz-animation-name: blinkerHeader;
    -moz-animation-duration: 3s;
    -moz-animation-timing-function: linear;
    -moz-animation-iteration-count: infinite;
    animation-name: blinkerHeader;
    animation-duration: 3s;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
}

.subMenu .wow-category a:after,
.sideBarDevices .wow-category a:after {
    padding-left: 0px;
	content: "WOW! ";
    color: #fc2f2f;
    font-size: 9px;
    font-family: "bentonsansmedium";
	vertical-align: top;
    margin-left: 8px;
    font-weight: normal;

	-webkit-animation-name: blinkerHeader;
    -webkit-animation-duration: 3s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
    -moz-animation-name: blinkerHeader;
    -moz-animation-duration: 3s;
    -moz-animation-timing-function: linear;
    -moz-animation-iteration-count: infinite;
    animation-name: blinkerHeader;
    animation-duration: 3s;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
}
</style>

<script>
inditex.ixSpecialMenuMapping.ISWOW=function(categoryId, key, element) {
  $(element).addClass('wow-category');
}
</script><script>
/* FIX_ECOMBSKA-4177 */
inditex.retargetingFacebookPixel=function() {};
</script>
<script>
inditex.iXMinDeltaToShow={
  "default": 5
}
</script><script>
	if(inditex.iCategoryId == "1010193133" || inditex.iCategoryId == "1010193132" || inditex.iPage == "ItxHomePage"){
		$('head').append('<meta name="apple-itunes-app" content="app-id=427769832"/>');
	}
</script>
<!-- END SPOT=BK3_ESpot_HeadEnd -->

<!-- END post-common head -->
<script type='text/javascript'>inditex.xActivePromotions={"GB":[{"type":"price","promotion":{"min":40},"location":"all","left":{"text":{"-1":"You've only got {0} to receive free shipping"}},"reached":{"text":{"-1":"Free shipping"}},"persistent":false}]};</script><!-- BEGIN SPOT=BK3_ESpot_GDPR_CONFIG -->
<script>
inditex.xGDPRConfig={
                  version: 1,
                  documentBasePath: "https://static.bershka.net/4/static/itxwebstandard/docs/",
                  documents: {
                                              privacyPolicy: {
                                                                          "en_GB": {
                                                                                         summary: "privacypolicy/privacy_policy_"+"en_GB"+".pdf?20190517033500",
                                                                                         complete: "privacypolicy/privacy_policy_"+"en_GB"+".pdf?20190517033500"
                                                                          }
                                              }
                  },

                  defaultPreserve: "none",
                  locations: {
                                            "wishlist-share": { document: "privacyPolicy" },
                                            "account-userdata": { document: "privacyPolicy" },
                                            "account-data": { document: "privacyPolicy" },
                                            "checkout-wallet": { document: "privacyPolicy" },
                                            "checkout-newsletter": { document: "privacyPolicy" },
                                            "checkout-privacy": { document: "privacyPolicy" },
                                            "checkout-shipping": { document: "privacyPolicy" },
                                            "social-login": { document: "privacyPolicy" },
                                            "social-newsletter": { document: "privacyPolicy" },
                                            "chat": { document: "privacyPolicy" },
                                            "registration": { document: "privacyPolicy" },
                                            "registration-newsletter": { document: "privacyPolicy" },
                                            "physical-giftcard-privacy": { document: "privacyPolicy" },
                                            "virtual-giftcard-privacy": { document: "privacyPolicy" },
                                            "contact": { document: "privacyPolicy" },
                                            "footer-privacypolicy": { document: "privacyPolicy" },
                                            "newsletter": { document: "privacyPolicy" }, 
                                            "account-newsletter": {
                                                           document: "privacyPolicy",
                                                           preserve: "session"
                                            },
                                            "account-comingsoonbacksoon": {
                                                           document: "privacyPolicy",
                                                           preserve: "session"
                                            },
                                            "detail-comingsoonbacksoon": {
                                                           document: "privacyPolicy",
                                                           preserve: "session"
                                            }
                  }
};
</script>

<!-- END SPOT=BK3_ESpot_GDPR_CONFIG -->
	<script>bazadebezolkohpepadr="1253833605"</script><script type="text/javascript" src="https://www.bershka.com/akam/10/4abbf91c" defer></script></head>
	<body data-ng-controller="ItxHomePageCtrl" data-ga-logic="/Home">
<!-- BEGIN SPOT=BK3_ESpot_BodyBegin -->
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-KTCZRM"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KTCZRM');</script>
<!-- End Google Tag Manager -->

<style>
@media screen and (min-width:128px) and (max-width:768px){
    .item.with-colors .image a:after { display:none;}
    /* New styles for 3 box method shipment */
    .checkout-inner > ul > li:first-child{
        margin-top:-15px;
    }
    .shippingMethodSelection.item-3>li {
      width: 100%;
      padding: 5px 15px;
    }
    .shippingMethodSelection.item-3>li>div {
      height: auto;
      padding: 0;
    }
    .shippingMethodSelection.item-3>li>div>span:first-child {
      margin-top: 40px;
    }
    .shippingMethodSelection.item-3>li>div>span {
      margin-bottom: 0;
    }
    .shippingMethodSelection.item-3>li>div .prices {
      position: relative;
      top: -55px;
      right: 10px;
      margin-left: 10%;
      margin-right: auto;
    }
    #Editorial-link {
    display:none;
    }
}
</style>
<script>
  // Actions based on media queries.
  $(function() {
    enquire.register("screen and (min-width:769px)", {
         match : function() {
             setInterval(function(){
               if($('#resultsWrapper > .productGrid').hasClass('grid-col2')){
                 $('#resultsWrapper > .productGrid').addClass('grid-col6');
               }
             }, 600);    
          }
        });
  });
</script>

<style>
  @media screen and (min-width:128px) and (max-width:768px) {
      .commonHead { -webkit-transform:translateZ(0);
      -webkit-backface-visibility: hidden;}
  }
</style>

<!-- END SPOT=BK3_ESpot_BodyBegin -->

<!-- Facebook connect -->
<!-- Contenerdor para html a mostrar en modal -->
<div id="modal" class="modal"></div>

<!-- Contenerdor para html a mostrar en modal -->
<div id="modal-select-size" class="modal"></div>

<!-- Contenedor para quickShop de producto -->
<div id="modal-qs" class="modal modal-qs"></div>

<!-- Contenerdor para html a mostrar en modal (auxiliar) -->
<div id="aux_modal" class="modal"></div>

<!-- Contenerdor para html a mostrar en modal (auxiliar) -->
<div id="modal-pad20" class="modal modal-pad20"></div>

<!-- Contenerdor para html a mostrar en modal (mensajes de success) -->
<div id="message_modal" class="modal"></div>

<div id="gdpr_modal" class="modal"></div>

<!-- Contenerdor para html a mostrar en modal (mensajes de error) -->
<div id="error_modal" class="modal"></div>

<!-- Aviso de cookies -->
<div class="modalWarnContainer" ng-controller="ItxCommonLayersCtrl">
	<!-- Aviso de cambio de country -->
	<div class="modalCountryChange modalWarn hide">
		<div class="cw-wrapper clearfix">
			<h4 ng-bind-html="getCountryText()"></h4>
			<span class="country-selection" ng-click="openCountrySelection()">Change location</span>
			<div class="country-question">Want to save your location?</div>
			<ul class="save-current-country">
				<li ng-click="saveCurrentCountry(false)">No</li>
				<li ng-click="saveCurrentCountry(true)">Yes</li>
			</ul>
		</div>
	</div>
	<div id="updatedPrivacyPolicy" class="modalWarn privacyPolicyWarn hide">
		<div class="cw-wrapper clearfix">
			<div class="alpha90"></div>
			<span class="ico ico-close" onclick="inditex.closeUpdatedPrivacyPolicyWarn()"></span>
<!-- BEGIN SPOT=BK3_ESpot_PrivacyPolicyUpdated -->
<p>We’ve updated the information in our <a href="javascript:;" onclick="inditex.openPrivacyPolicy()" class="under">Privacy Policy</a> on how we use your personal data.</p>

<!-- END SPOT=BK3_ESpot_PrivacyPolicyUpdated -->
		</div>
	</div>
	<div id="cookiesWarn" class="modalWarn cookiesWarn hide" ng-class="{'combined-cookies-privacy': GDPRHelper.isNewVersion}">
		<div class="cw-wrapper clearfix">
			<div class="alpha90"></div>
			<span class="ico ico-close" ng-click="closeCookies()"></span>
			<div ng-if="GDPRHelper.isNewVersion">
<!-- BEGIN SPOT=BK3_ESpot_PrivacyPolicyUpdated -->
<p>We’ve updated the information in our <a href="javascript:;" onclick="inditex.openPrivacyPolicy()" class="under">Privacy Policy</a> on how we use your personal data.</p>

<!-- END SPOT=BK3_ESpot_PrivacyPolicyUpdated -->
			</div>
<!-- BEGIN SPOT=BK3_ESpot_CookiesWarn -->
<p>We use our own and third-party cookies to improve your experience and our services by analysing the navigation of our website. If you continue browsing, we assume that you accept their use. <div><a href="javascript:;" class="under push-right" ng-click="inditex.openCookiesPolicy()">+Info</a></div></p>

<!-- END SPOT=BK3_ESpot_CookiesWarn -->
		</div>
	</div>
</div>

<!-- Popup de eliminar elemento de la cesta -->
<div id='confirmItemDelete' class="hide">
	<div class="container">
		<span class="title">Remove product</span>
		<span class="content">Are you sure you want to delete the product?</span>
		<div class="buttons">
			<button class='btn-cta1 proceedToAction'>Delete</button>
			<button class='btn-cta2 cancelAction'>Cancel</button>
		</div>
	</div>
</div>

<!-- Popup compra teen -->
<div id='confirmTeenPay' class="hide">
	<div class="container">
		<span class="title">REQUEST PAYMENT VIA YOUPAY</span>
		<span class="content">Next, we'll send a notification to the IPay profile linked to your account asking them to accept payment for your order. </span>
		<div class="buttons">
			<button class='btn-cta1 proceedToAction'>
				<span>Continue</span>
			</button>
			<a class='btn-cta2 cancelAction'>
				<span class="bold">Cancel</span>
			</a>
		</div>
	</div>
</div>

<!-- Popup teen añadido -->
<div id='addTeenTeenPay' class="hide">
	<div class="container">
		<span class="title">REQUEST SENT</span>
		<span class="content"></span>
		<div class="buttons">
			<button class='btn-cta1 proceedToAction'>
				<span>GO BACK TO MY ACCOUNT</span>
			</button>
		</div>
	</div>
</div>

<!-- Popup sponsor añadido -->
<div id='addSponsorTeenPay' class="hide">
	<div class="container">
		<span class="title">REQUEST SENT</span>
		<span class="content"></span>
		<div class="buttons">
			<button class='btn-cta1 proceedToAction'>
				<span>GO BACK TO MY ACCOUNT</span>
			</button>
		</div>
	</div>
</div>

<div id='confirmRejectOrder' class="hide">
	<div class="container">
		<span class="title">Are you sure you want to decline this order?</span>
		<span class="content">Remember that if you decline it, you won't be able to restore it.</span>
		<div class="buttons">
			<button class='btn-cta1 proceedToAction'>
				<span>Decline order</span>
			</button>
			<a class='btn-cta2 cancelAction'>
				<span class="bold">Cancel</span>
			</a>
		</div>
	</div>
</div>

<!-- Popup aviso same day en TR -->
<div id='hasSameDayMethod' class='hide'>
	<div class="container">
		<span class="title">GET YOUR ORDER SOONER!</span>
		<span class="content">SAME DAY delivery is available for the selected neighbourhood!<br>Change your shipping method now and get your order as soon as possible!</span>
		<div class="buttons">
			<button class='btn-cta1 changeShippingMethod proceedToAction'>Change delivery method</button>
			<button class='btn-cta2 continueToPayment proceedToAction'>Continue without change</button>
		</div>
	</div>
</div>

<!-- Popup de cancelar pedido -->
<div id='confirmCancelOrder' class="confirmCancelOrder hide">
	<div class="confirmCancelOrder">
		<h4>Are you sure you want to cancel the order?</h4>
		<button class='btn-wide proceedToAction'>Cancel this order</button>
	</div>
</div>

<!-- Popup de mostrar pedidos sin estar logado -->
<div id='ordersMustBeLogged' class="ordersMustBeLogged hide">
	<div>
		<h4>You must log in to see the status of your order or follow the instructions in the confirmation email if you placed your order as a guest.</h4>
	</div>
</div>

<!-- Popup Confirmacíón de Baja automática de newsletter -->
<div id="confirmUnsubscribeNewsletter" class="hide"  ng-controller="ItxCommonLayersCtrl"> 
	<img src="/static/itxwebstandard/images/logo.svg?t=2019042416012446db2121485607" alt="Bershka" class="logoModal">
	<div class="content">
		<span class="ico ico-letter"></span>
		<p class="newsletterSubtitle">You have unsubscribed from our newsletter. </p>
		<p>This will be processed within a maximum of 7 days.</p>
	</div>
	<button class='btn-cta1 proceedToAction'>Accept</button>
</div>

<span id="mouseTip" class="mouseTip strong hide">Close</span>

<chat bsk-outside=".footer-extra"></chat>

<!-- Common templates on all pages -->

	<script type="text/ng-template" id="tplGridProduct">
<div class="grid-item-container" ng-class="{'product-is-bundle': !$ctrl.bIsProductBean, 'product-with-colors': $ctrl.iColors.length>1, 'no-stock-for-filter': $ctrl.iProduct.x_is_out_of_stock }"
	bsk-in-viewport="$ctrl.inViewport()" bsk-in-viewport-threshold="50%"
	bsk-track="$ctrl.trackProduct()" resettable="$ctrl.isResettable()">
	<div ng-if="$ctrl.isInViewport">
		<div class="image">
			<div ng-if="::($ctrl.aDetailImages.length>1 && !$ctrl.iProduct.isDoubleSize && !$ctrl.iProduct.isBanner)">
				<img src="/static/itxwebstandard/images/right.png?t=2019042416012446db2121485607" class="image-arrow hide-mobile previous" ng-click="$ctrl.setPreviousActiveImage($event, true)">
				<img src="/static/itxwebstandard/images/left.png?t=2019042416012446db2121485607" class="image-arrow hide-mobile next" ng-click="$ctrl.setNextActiveImage($event, true)">
			</div>
			<a ng-href="{{$ctrl.iDetailURL}}" ng-click="$ctrl.goToProduct($event)" title="{{$ctrl.formatedReference}}" ng-class="{'no-link': !$ctrl.iDetailURL || $ctrl.iDetailURL == 'javascript:;'}">
				<div class="overlay-hover"></div>
	           	<div class="out-of-stock out-of-stock-text" ng-if="!$ctrl.hasStock($ctrl.iSelectedColor)">Out of stock</div>
	
				<bsk-video autoplay loop muted width="100%" height="100%" only-in-viewport inline
					ng-if="$ctrl.iCurrentImage.video" class="principalImg isVideo video{{::$ctrl.iProduct.bundleId}}"
					video-poster="$ctrl.iCurrentImage.poster" video-urls="$ctrl.iCurrentImage.src">
				</bsk-video>
	
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAM1CAMAAADXY7BjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTQyREQxQTNBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTQyREQxQTJBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjJGREM5MkFEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjJGREM5M0FEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrQaECUAAAAGUExURQAAAAAAAKVnuc8AAAABdFJOUwBA5thmAAACF0lEQVR42uzBAQ0AAADCoPdPbQ8HFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcGECDAAILQABH8QQ9gAAAABJRU5ErkJggg=="
					class="principalImg img{{::$ctrl.iProduct.id}}" ng-if="!$ctrl.iCurrentImage.video && !$ctrl.iProduct.isDoubleSize"> 
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAAM1CAMAAAAYXazhAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUY1NUE3NjNBREExMTFFNzkyQUNEMDZERUYxNTQ5QzAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUY1NUE3NjJBREExMTFFNzkyQUNEMDZERUYxNTQ5QzAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjJGREM5MkFEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjJGREM5M0FEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnoY+UMAAAAGUExURQAAAAAAAKVnuc8AAAABdFJOUwBA5thmAAAEFElEQVR42uzBMQEAAADCoPVPbQo/oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjibAAA0lAAFdC64JAAAAAElFTkSuQmCC"
					class="principalImg img{{::$ctrl.iProduct.id}}" ng-if="!$ctrl.iCurrentImage.video && $ctrl.iProduct.isDoubleSize">
				 
				<div class="colorsText ng-hide" ng-show="::($ctrl.iColors.length > 1 && $ctrl.bIsProductBean)">
					+ colours
				</div>
			</a>
			<!-- 
			 <div class="badges" ng-if="::$ctrl.iLabels.length">
				<img class="badge strong" ng-repeat="label in ::$ctrl.iLabels" ng-src="{{::$ctrl.label}}" />
			 </div>
			 -->
			 <div ng-if="::($ctrl.isOpenForSale && !$ctrl.bIsGiftCard && !$ctrl.iProduct.isBanner)">
				 <div class="addToWish hide-mobile item-action-element item-action-element-addtowish" ng-if="::$ctrl.bIsProductBean" bsk-click="$ctrl.showProductQuickWish($event)" ng-class="{'in-wishlist': $ctrl.iProduct.inWishList}">			
					<span class="ico ico-centered ico-wish-min"></span>
					<span class="add-wish-text item-action-text hide-mobile">Add to Wishlist</span>
				 </div>
	
				 <div class="addToBag hide-mobile item-action-element item-action-element-addtobag" ng-if="::(!$ctrl.iProduct.isBanner)" bsk-click="$ctrl.showProductQuickShop($event)">
					<span class="add-bag-text item-action-text hide-mobile">Quick view</span>
					<span class="ico ico-eye-sm ico-centered"></span>
				 </div>		 
			 </div>
		</div>
		<div class="prodinfo banner-info cursor-pointer" ng-if="::$ctrl.iProduct.isBanner && $ctrl.shownProduct.name" ng-click="$ctrl.goToProduct($event)">
			<a ng-href="{{$ctrl.iDetailURL}}" class="linkTags hashtags ellipsis" ng-bind-html="$ctrl.shownProduct.name | to_trusted"></a>
		</div>
		<div class="prodinfo" ng-if="::(!$ctrl.iProduct.isBanner)">	
			<div ng-if="$ctrl.iProduct.x_is_out_of_stock" class="outStockInfo">
				<div ng-if="$ctrl.hasOutOfStockFilters($ctrl.iProduct.x_is_out_of_stock_filters, 'size')">
					<span class="outStockInfoText">Size out of stock:</span>
					<span class="outStockSizeInfo" ng-repeat="outStock in $ctrl.getOutOfStockFilters($ctrl.iProduct.x_is_out_of_stock_filters, 'size')">{{outStock.name}}</span>
				</div>
			</div>
			
			<div class="product-label-container ellipsis" ng-if="$ctrl.aProductLabels.length">
				<bsk-label text="{{$ctrl.aProductLabels[0].value}}" segment="0" class="product-label"></bsk-label>
			</div>

			<a ng-href="{{$ctrl.iDetailURL}}" ng-click="$ctrl.goToProduct($event)" class="linkTags hashtags ellipsis" ng-bind-html="$ctrl.shownProduct.name | to_trusted"></a>
	
			<static-product-price range="::$ctrl.iRangePrice" delta-position="back"></static-product-price>
	
			<ul class="color-swatches" ng-class="::{invisible: $ctrl.iColors.length<=1 || ($ctrl.iProduct.colors.hasDoubleSize.length && $ctrl.iProduct.colors.hasDoubleSize.length!=$ctrl.iProduct.colors.length)}">
				<li ng-repeat="color in ::$ctrl.iColors" ng-class="::{ 'stock-forced-visible': !$ctrl.hasStock(color) }">
					<a href="javascript:;" ng-click="$ctrl.selectColor(color)" ng-class="{active: color.id == $ctrl.iSelectedColor.id}">
						<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAATSURBVHjaYvj//z8DAAAA//8DAAj8Av7TpXVhAAAAAElFTkSuQmCC" alt-src="{{::color.colorCut}}" class="on-demand-check">
					</a>
					<span class="prodColorInfo">{{::color.name}}</span>
				</li>
			</ul>
			<span class="last-sizes-info" ng-if="$ctrl.iProduct.isLastSizes">
				Available in:  {{::$ctrl.iProduct.lastSizes | joinBy:$ctrl.constants.lastSizesSeparator}}
			</span>
		</div>
	</div>
	<div ng-if="!$ctrl.isInViewport" class="product-placeholder">
		<div class="image image-placeholder">
			<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAM1CAMAAADXY7BjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTQyREQxQTNBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTQyREQxQTJBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjJGREM5MkFEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjJGREM5M0FEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrQaECUAAAAGUExURQAAAAAAAKVnuc8AAAABdFJOUwBA5thmAAACF0lEQVR42uzBAQ0AAADCoPdPbQ8HFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcGECDAAILQABH8QQ9gAAAABJRU5ErkJggg=="
				class="principalImg" ng-if="::(!$ctrl.iProduct.isDoubleSize)"> 
			<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAAM1CAMAAAAYXazhAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUY1NUE3NjNBREExMTFFNzkyQUNEMDZERUYxNTQ5QzAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUY1NUE3NjJBREExMTFFNzkyQUNEMDZERUYxNTQ5QzAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjJGREM5MkFEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjJGREM5M0FEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnoY+UMAAAAGUExURQAAAAAAAKVnuc8AAAABdFJOUwBA5thmAAAEFElEQVR42uzBMQEAAADCoPVPbQo/oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjibAAA0lAAFdC64JAAAAAElFTkSuQmCC"
				class="principalImg" ng-if="::$ctrl.iProduct.isDoubleSize">
		</div>
		<div class="prodinfo">
			<span class="linkTags hashtags">&nbsp;</span>
			<span class="prices">&nbsp;</span>
			<ul class="color-swatches">
				<li>
					<span class="color-placeholder"></span>
				</li>
			</ul>		
		</div>
	</div>
</div>
	</script>
	<script type="text/ng-template" id="tplGridSize">
<div class="grid-size-selector">
	<ul>
		<li class="view-element grid-size-text">
			<span>See</span>
		</li>
		<li data-ng-click="$ctrl.setGridCols(2)" class="view-2-link greyHover view-element">
			<a href="javascript:;" class="view-element-link" ng-class="{selected : $ctrl.gridCols == 2}">2</a>
		</li>
		<li data-ng-click="$ctrl.setGridCols(3)" class="view-3-link greyHover view-element">
			<a href="javascript:;" class="view-element-link" ng-class="{selected : $ctrl.gridCols == 3}">3</a>
		</li>
		<li data-ng-click="$ctrl.setGridCols(6)" class="view-6-link greyHover view-element">
			<a href="javascript:;" class="view-element-link" ng-class="{selected : $ctrl.gridCols == 6}">6</a>
		</li>
		<li class="grid-product-grid-size view-mobile-toggle" ng-switch="$ctrl.gridCols">
			<div ng-click="$ctrl.setGridCols(2)" ng-switch-when="1">
				<i class="ico ico-square-black"></i><i class="ico ico-multi-square-empty"></i>
			</div>
			<div ng-click="$ctrl.setGridCols(1)" ng-switch-when="2">
				<i class="ico ico-square-empty"></i><i class="ico ico-multi-square-black"></i>
			</div>
		</li>
	</ul>
</div>	</script>
	<script type="text/ng-template" id="tplShopCartItem">
<div class="cart-product-item shopCart-item" ng-show="$ctrl.iProduct.quantity>0"
	ng-class="{'out-of-stock': $ctrl.isOutOfStock(), 'low-in-stock': $ctrl.isLowInStock(), 'cart-product-small': $ctrl.iFormatMini, 'cart-product-edit': $ctrl.iEditMode, 'cart-product-editable': $ctrl.iEditable || $ctrl.iQuantityEditable, 'only-one-unit': $ctrl.iProduct.quantity == 1 }">
	<div class="cart-product-in-progress overlay-loader ng-hide" ng-show="$ctrl.iEditInProgress"><div><span></span><span></span><span></span><span></span><span></span></div></div>
	<div class="out-of-stock-notice font-bold">
		<span class="out-of-stock-notice-low">???shopcart.lowInStock???</span>
		<span class="out-of-stock-notice-out">Out of stock</span>&nbsp;
		<a href="javascript:;" ng-click="$ctrl.openNotificationModal()" ng-if="$ctrl.isBackSoonEnabled()" class="out-of-stock-notice-backsoon">
			<span>Notify me when it is available</span>
		</a>
	</div>
	  
	<div class="cart-product-item-table table">
		<div class="cart-product-item-container table-row">
			<div class="cart-product-item-element cart-product-image table-cell">
				<a ng-href="{{$ctrl.getProductURL()}}" ng-click="$ctrl.productClick($event)" ng-if="::(!$ctrl.isCheckout)">
					<img src="" ng-src="{{$ctrl.getProductImage()}}">
				</a>
				<img src="" ng-src="{{$ctrl.getProductImage()}}" ng-if="::$ctrl.isCheckout">
			</div>
		
			<div class="cart-product-item-element cart-product-description table-cell">
				<div class="cart-product-description-container">
					<div class="table-row">
						<div class="cart-product-description-texts">
							<a class="cart-product-description-name font-bold" ng-href="{{$ctrl.getProductURL()}}" ng-click="$ctrl.productClick($event)" ng-if="::(!$ctrl.isCheckout)">{{::$ctrl.iProduct.name}}</a>
							<span class="cart-product-description-name font-bold" ng-if="::$ctrl.isCheckout">{{::$ctrl.iProduct.name}}</a>
							<span class="cart-product-description-ref hide-small-or-mobile">{{::$ctrl.getFormatedReference()}}</span>
						</div>
					</div>
					<div class="table-row is-small-or-mobile">
						<div class="cart-product-mobile-description">
							<span class="cart-product-item-value" ng-if="!$ctrl.iEditMode" ng-class="{invisible: $ctrl.isGiftCard || $ctrl.isGiftWrap}">{{$ctrl.iProduct.color}}</span>
							<select ng-model="$ctrl.selectedColor" ng-options="color as color.name for color in $ctrl.iProductDetail.colors"  options-attributes options-attributes-class="$ctrl.getColorClass" options-attributes-disabled="$ctrl.isColorDisabled" ng-if="$ctrl.iEditMode && $ctrl.iEditable"></select>
							
							<span class="cart-product-item-value" ng-if="!$ctrl.iEditMode" ng-class="{invisible: $ctrl.isGiftCard || $ctrl.isGiftWrap || $ctrl.isGift || $ctrl.hideOneSize}">{{$ctrl.iProduct.size}}</span> 
							<select ng-model="$ctrl.selectedSize" ng-options="size as (size.name+getBackSoonText(size)) for size in $ctrl.selectedColor.sizes" options-attributes options-attributes-class="$ctrl.getSizeClass" options-attributes-disabled="$ctrl.isSizeDisabled" ng-if="$ctrl.iEditMode && !$ctrl.hideOneSize && $ctrl.iEditable"></select>
							
							<div class="cart-product-item-value" ng-if="!$ctrl.iEditMode">
								<span ng-if="!$ctrl.isGiftCard && !$ctrl.isGiftWrap">x{{$ctrl.iProduct.quantity}}</span>
								<product-price range="$ctrl.iRange" delta-position="none" is-gift="$ctrl.isGift" class="cart-product-price-value push-right font-bold" ng-if="::$ctrl.iFormatMini"></product-price>
							</div>
							<quantity-editor ng-model="$ctrl.selectedQuantity" ng-if="$ctrl.iEditMode && $ctrl.iQuantityEditable" enable-input="0" increment="{{$ctrl.isOutOfStock()?0:1}}"></quantity-editor>
						</div>
					</div>
				</div>
			</div>
		
			<div class="cart-product-item-element cart-product-size hide-small-or-mobile table-cell">
				<span class="cart-product-item-value font-bold" ng-if="!$ctrl.iEditMode || !$ctrl.iEditable" ng-class="::{invisible: $ctrl.isGiftCard || $ctrl.isGiftWrap || $ctrl.isGift || $ctrl.hideOneSize}">{{$ctrl.iProduct.size}}</span> 
				<select ng-model="$ctrl.selectedSize" ng-options="size as (size.name+$ctrl.getBackSoonText(size)) for size in $ctrl.selectedColor.sizes" options-attributes options-attributes-class="$ctrl.getSizeClass" options-attributes-disabled="$ctrl.isSizeDisabled" ng-if="$ctrl.iEditMode && $ctrl.iEditable && !$ctrl.isGift && !$ctrl.hideOneSize"></select>
			</div>
			<div class="cart-product-item-element cart-product-color hide-small-or-mobile table-cell">
				<span class="cart-product-item-value font-bold" ng-if="!$ctrl.iEditMode || !$ctrl.iEditable" ng-class="::{invisible: $ctrl.isGiftCard || $ctrl.isGiftWrap || $ctrl.isGift}">{{$ctrl.iProduct.color}}</span>
				<select ng-model="$ctrl.selectedColor" ng-options="color as color.name for color in $ctrl.iProductDetail.colors"  options-attributes options-attributes-class="$ctrl.getColorClass" options-attributes-disabled="$ctrl.isColorDisabled" ng-if="$ctrl.iEditMode && $ctrl.iEditable && !$ctrl.isGift"></select>
			</div>
			<div class="cart-product-item-element cart-product-quantity hide-small-or-mobile table-cell">
				<span class="cart-product-item-value font-bold" ng-if="!$ctrl.iEditMode || !$ctrl.iQuantityEditable" ng-class="{invisible: $ctrl.isGiftCard || $ctrl.isGiftWrap}">x{{$ctrl.iProduct.quantity}}</span>
				<quantity-editor ng-model="$ctrl.selectedQuantity" ng-if="$ctrl.iEditMode && $ctrl.iQuantityEditable" enable-input="1" class="{invisible: $ctrl.isItemQuantityEditable()}" increment="{{$ctrl.isOutOfStock()?0:1}}"></quantity-editor>
			</div>
			<div class="cart-product-item-element cart-product-price hide-small-or-mobile table-cell">
				<product-price range="$ctrl.iRange" delta-position="none" is-gift="$ctrl.isGift" class="cart-product-item-value font-bold"></product-price>
			</div>
			
			<div class="cart-product-item-element cart-product-actions table-cell vue-margin">
				<product-price range="$ctrl.iRange" delta-position="none" is-gift="$ctrl.isGift" class="cart-product-item-value font-bold is-small-or-mobile"></product-price>
				<div ng-if="::($ctrl.iEditable || $ctrl.iQuantityEditable)" class="cart-product-actions-container">
					<div class="cart-product-actions-action" ng-if="!$ctrl.iEditMode && $ctrl.iQuantityEditable && !$ctrl.isGift">
						<span ng-click="$ctrl.remove()" class="cart-product-actions-action-link cart-product-actions-action-link-remove">Delete</span>
					</div>
					<div class="cart-product-actions-action" ng-if="!$ctrl.iEditMode && !$ctrl.isGift">
						<span ng-click="$ctrl.loadDetail()" class="cart-product-actions-action-link" ng-class="::{invisible: $ctrl.isGiftCard || $ctrl.isGiftWrap}">Edit</span>
					</div>
					<div class="cart-product-actions-action" ng-if="$ctrl.iEditMode">
						<span ng-click="$ctrl.cancelDetail()" class="cart-product-actions-action-link">Cancel</span>
					</div>
					<div class="cart-product-actions-action" ng-if="$ctrl.iEditMode">
						<span ng-click="$ctrl.closeDetail()" class="cart-product-actions-action-link">Update</span>
					</div>
				</div>
			</div>
		</div>
	</div>

</div>	</script>
	<script type="text/ng-template" id="tplBskAddress">
<div class="address-container {{$ctrl.addressStyle}}">
	<div class="address-data-name">{{$ctrl.address.firstName}} {{$ctrl.address.middleName}} {{$ctrl.lastName}}</div>
	<div>{{$ctrl.address.addressLines[0]}}</div>
	<div>{{$ctrl.address.addressLines[1]}}</div>
	<div>{{$ctrl.address.zipCode}} {{$ctrl.cityName}}</div>
	<div>{{$ctrl.address.stateName}}</div>
	<div>{{$ctrl.address.countryName}}</div>
	<div ng-if="$ctrl.address.phones.length">Mobile: <span class="address-data-phone-countrycode">{{$ctrl.address.phones[0].countryCode}}</span> <span class="address-data-phone-number">{{$ctrl.address.phones[0].subscriberNumber}}</span></div>
	<div class="address-data-email">{{$ctrl.address.email}}</div>
</div>
	</script>
	<script type="text/ng-template" id="tplBskSeo">
<div class="seo-container" ng-if="$ctrl.h1">
	<h1 class="seo-title" ng-bind-html="$ctrl.h1 | to_trusted"></h1>
	<h2 class="seo-description" ng-bind-html="$ctrl.positioning | to_trusted" ng-if="$ctrl.positioning"></h2>
</div>
	</script>
	<script type="text/ng-template" id="tplBskSeoLinks">
<div class="seo-link-container" ng-if="$ctrl.subcategories.length">
	<div class="seo-link-element" ng-repeat="category in $ctrl.subcategories track by category.id" special-menu special-menu-key="{{::category.key}}" special-menu-category-id="{{::category.id}}" ng-class="{active: $ctrl.isSelected(category)}">
		<a class="seo-link" ng-href="{{::category._config.url}}" ng-click="$ctrl.selectCategory(category,$event)">
			<span ng-bind-html="::category._config.name | to_trusted"></span>
			<span class="ico ico-close-red ico-centered"></span>
		</a>
	</div>
</div>
	</script>
	<script type="text/ng-template" id="tplBskDate">
<ng-form name="inlineDateForm" novalidate>
	<ul class="date-container">
		<li ng-repeat="order in ::dateSegments" class="form-control-container date-element date-element-{{::order.type}}">
			<div class="form-control-container" ng-class="{'ng-valid':inlineDateForm[order.type].$valid && inlineDateForm[order.type].$viewValue != undefined, 'ng-invalid':!inlineDateForm[order.type].$valid && inlineDateForm[order.type].$touched}">
				<select trigger-persist valtype="date" name="{{::order.type}}" ng-model="values[order.type]" ng-options="option.id as option.name for option in order.options" ng-required="required">
					<option style="display: none" value="">{{::order.defaultValue}}</option>
				</select>
			</div>
		</li>
	</ul>
</ng-form>	</script>
	<script type="text/ng-template" id="tplBskPassword">
<ng-form name="$ctrl.bskPasswordField">
	<div class="form-control-container" ng-class="{'ng-valid':$ctrl.bskPasswordField.password.$valid, 'ng-invalid':!$ctrl.bskPasswordField.password.$valid && $ctrl.bskPasswordField.password.$touched}">
		<input ng-if="::$ctrl.secured" type="password" equal-to="{{$ctrl.equalTo}}" ng-attr-type="{{$ctrl.clearText?'text':'password'}}" name="password" ng-model="$ctrl.password" ng-model-options="{allowInvalid: true}" required autocomplete="off" secure-password itx-placeholder placeholder="{{::$ctrl.placeholder}}" disabled>
		<input ng-if="::(!$ctrl.secured)" type="password" equal-to="{{$ctrl.equalTo}}" ng-attr-type="{{$ctrl.clearText?'text':'password'}}" name="password" ng-model="$ctrl.password" ng-model-options="{allowInvalid: true}" required autocomplete="off" itx-placeholder placeholder="{{::$ctrl.placeholder}}" disabled>
		<span class="ico show-password" ng-mousedown="$ctrl.clearText=!$ctrl.clearText;$event.preventDefault()" ng-show="$ctrl.password" ng-class="$ctrl.clearText?'ico-eye-hover-sm':'ico-eye-sm'"></span>
	</div>
	<div class="fieldMessage longMessage password-hint ng-hide" ng-if="::$ctrl.hint" ng-show="$ctrl.password.length && !$ctrl.bskPasswordField.password.$touched && !$ctrl.bskPasswordField.password.$valid">
		<span>The password must contain a minimum of 8 characters including a lower-case letter, an upper-case letter and a number. Please do not repeat the same character more than three times. *</span>
	</div>		
	<form-error-messages for="password"></form-error-messages>
</ng-form>
	</script>
	<script type="text/ng-template" id="tplQuantityEditor">
<div class="wrap-quantity">
	<div class="quantity-editor-less quantity-editor-actuator" ng-click="$ctrl.decrementQuantity()" ng-if="$ctrl.bDecrementVisible">
		<span class="ico ico-minus"></span>
	</div>
	<input type="text" class="quantity-editor-value quantity-editor-value number" ng-model="$ctrl.iQuantity" ng-if="::$ctrl.bEnableInput">
	<span type="text" class="quantity-editor-value quantity-editor-value number" ng-if="::(!$ctrl.bEnableInput)">{{$ctrl.iQuantity}}</span>
	<div class="quantity-editor-more quantity-editor-actuator" ng-click="$ctrl.incrementQuantity()" ng-if="$ctrl.bIncrementVisible">
		<span class="ico ico-plus"></span>
	</div>
</div>	</script>
	<script type="text/ng-template" id="tplBskCarousel">
<div class="bsk-carousel-content">
	<div class="carousel-loading overlay-loader">
		<div><span></span><span></span><span></span><span></span><span></span></div>
	</div>
	<div class="bsk-carousel-slides-container">
		<div class="bsk-carousel-slides disable-select bsk-carousel-transition" ng-transclude ng-swipe-left="$ctrl.nextSlide(true)" ng-swipe-right="$ctrl.previousSlide(true)"></div>
	</div>
	<bsk-carousel-dots index="$ctrl.index" page-size="$ctrl.currentSettings.slides" pager="$ctrl.currentSettings.dotsPage" number="$ctrl.numSlides" ng-if="$ctrl.numSlides && $ctrl.currentSettings.dots && ($ctrl.showPrevious || $ctrl.showNext)"></bsk-carousel-dots>
	<img ng-src="{{$ctrl.currentSettings.leftArrow}}" class="image-arrow bsk-carousel-control previous" ng-click="$ctrl.previousSlide(false, $event)" ng-show="$ctrl.showPrevious && $ctrl.currentSettings.controls">
	<img ng-src="{{$ctrl.currentSettings.rightArrow}}" class="image-arrow bsk-carousel-control next" ng-click="$ctrl.nextSlide(false, $event)" ng-show="$ctrl.showNext && $ctrl.currentSettings.controls">
</div>	</script>
	<script type="text/ng-template" id="tplBskCarouselDots">
<div class="bsk-carousel-dots-container" ng-click="$event.stopPropagation()">
	<div class="bsk-carousel-dots">
		<div class="bsk-carousel-dots-page bsk-carousel-transition" ng-if="$ctrl.pager">
			<div class="bsk-carousel-dot bsk-carousel-dot-selected invisible" ng-duplicate="$ctrl.pageSize"></div>  
		</div>
		<div class="bsk-carousel-dot" ng-class="{'bsk-carousel-dot-selected': $index>=$ctrl.index && $index<($ctrl.index+$ctrl.pageSize) }" ng-click="$ctrl.setSlide($index)" ng-duplicate="$ctrl.number"></div>
	</div>
</div>
	</script>

	<script type="text/ng-template" id="tplBskSort">
<div off-click="$ctrl.close()" ng-class="{'sort-open': $ctrl.opened}"> 
	<span class="sort-select-label hide-mobile">Sort:</span>
	<div class="sort-select">
		<div class="hide-mobile" ng-click="$ctrl.toggle()">
			<span class="sort-select-text hide-mobile" ng-bind-html="$ctrl.sortService.active.name | to_trusted"></span><span class="ico ico-mobile ico-centered ico-sort-small hide-mobile"></span>
		</div>
		<div class="sort-select is-mobile" ng-click="$ctrl.toggle()">
			<span class="ico ico-mobile ico-sort-small ico-centered ico-centered"></span><span class="sort-select-text ico-centered">Sort</span>
		</div>
		<div ng-if="$ctrl.opened" class="sort-elements">
			<div class="sort-modal-title clearfix is-mobile">
				<div class="sort-modal-title-element sort-modal-title-element-back push-left" ng-click="$ctrl.close()">
					<span class="ico ico-mobile ico-arrow-left-white-small ico-centered"></span><span class="category-modal-title-element-text  category-modal-title-element-text-back ico-centered">Back</span>
				</div>
				<div class="sort-modal-title-element sort-modal-title-element-clear push-right" ng-click="$ctrl.sortService.clearSorting()">
					<span class="ico ico-mobile ico-trashcan-small ico-centered"></span><span class="category-modal-title-element-text category-modal-title-element-text-clear ico-centered">Remove filters</span>
				</div>
			</div>
			<div class="sort-modal-title-spacer sort-modal-title-element is-mobile"></div>
			<ul class="sort-element-select-options" ng-cloak>
			 	<li class="sort-element-select-option" ng-repeat="sort in $ctrl.getMethods() track by sort.type" ng-class="{active: sort==$ctrl.sortService.active}">
					<a class="checkbox sort-element-select-check is-mobile" ng-click="$ctrl.selectMethod(sort)"></a>
			 		<a href="javascript:;" class="sort-element-select-text" ng-click="$ctrl.selectMethod(sort)">
			 			<span class="sort-content-element-text" ng-bind-html="::sort.name | to_trusted"></span>
			 		</a>
				</li>
			</ul>
			<div class="sort-modal-footer-spacer sort-modal-footer-element is-mobile"></div>
			<div class="sort-modal-footer is-mobile">
				<div class="sort-modal-footer-element" ng-click="$ctrl.close()">
					<button class="inverse">View results</button>
				</div>
			</div>
		</div>
	</div>
</div>
	</script>
	<script type="text/ng-template" id="tplProductFilter">
<div class="filter-container filter-container-{{::$ctrl.type}}" ng-if="$ctrl.canBeFiltered()" ng-class="$ctrl.getFilterClass()">
	<div class="filter-title filter-grey-border filter-title-{{::$ctrl.type}}" ng-click="$ctrl.toggleContent()" ng-if="::$ctrl.showTitle">
		<span class="filter-title-text ellipsis strong">{{::$ctrl.getTitleText()}}</span>
		<span class="filter-title-ico ico ico-arrow-down-gray-sm"></span>
	</div>
	<div class="filter-content filter-content-{{::$ctrl.type}}">
		<ng-transclude></ng-transclude>
		<ul ng-if="::(!$ctrl.showRange)" ng-cloak>
			<li class="filter-content-element filter-content-all" ng-if="::$ctrl.showAll">
				<a class="checkbox filter-content-element-check filter-grey-border" ng-click="$ctrl.clearActive()" ng-class="{active: !$ctrl.hasActiveFilters()}" ng-if="$ctrl.showCheck"></a>
				<a class="filter-content-element-link" ng-click="$ctrl.clearActive()" ng-class="{active: !$ctrl.hasActiveFilters()}">
					<span class="filter-content-element-text ellipsis">{{::$ctrl.getShowAllText()}}</span>
				</a>
			</li>
			<li ng-repeat="filterGroup in $ctrl.getFilters()" on-repeat-end="$ctrl.onRepeatEnd()" class="filter-content-element-group filter-content-element-group-{{::$ctrl.numberOfFilterGroups()}}">
				<ul class="filter-content-element-group-container">
					<li class="filter-content-element-group-title filter-content-element ellipsis filter-content-all" ng-if="::filterGroup.title">
						<span class="filter-content-element-group-title-text" ng-bind-html="::filterGroup.title | to_trusted"></span>
					</li>
					<product-filter-element ng-repeat="filter in filterGroup" filter="filter" type="{{::$ctrl.type}}"></product-filter-element>
				</ul>
			</li>
		</ul>
		<div class="filter-content-slider" ng-if="::$ctrl.showRange" ng-cloak>
			<product-filter-element-range type="{{::$ctrl.type}}"></product-filter-element-range>
		</div>
	</div>
</div>
	</script>
	<script type="text/ng-template" id="tplProductFilterElement">
<li class="filter-content-element" ng-class="{'filter-content-element-disabled': !$ctrl.filter.enabled}">
	<span class="checkbox filter-content-element-check filter-grey-border" ng-class="{active: $ctrl.isActive()}" ng-if="::$ctrl.$container.showCheck" ng-click="$ctrl.toggleFilter()"></span>
	<div class="filter-content-element-link" ng-class="[{active: $ctrl.isActive()}, $ctrl.filter.clazz]" ng-click="$ctrl.toggleFilter()" ng-style="::$ctrl.filter.style">
		<img class="filter-content-element-image" ng-src="{{$ctrl.getFilterImage()}}" ng-if="::$ctrl.$container.showImage">
		<a class="filter-content-element-text ellipsis" ng-bind-html="::$ctrl.filter.name | to_trusted"
			ng-if="::($ctrl.$container.showText && $ctrl.$container.asLink)" category-label="{{::$ctrl.filter.label}}"
			ng-href="{{$ctrl.filter.url}}" ng-click="$event.preventDefault()"></a>
		<span class="filter-content-element-text ellipsis" ng-bind-html="::$ctrl.filter.name | to_trusted"
			ng-if="::($ctrl.$container.showText && !$ctrl.$container.asLink)" category-label="{{::$ctrl.filter.label}}"></span>
	</div>
</li>
	</script>
	<script type="text/ng-template" id="tplProductFilterElementRange">
<div ng-show="$ctrl.canBeFiltered()">
	<div class="filter-content-slider-values clearfix">
		<div class="filter-content-slider-value-min filter-content-slider-value" ng-bind-html="$ctrl.labels.min | to_trusted"></div>
		<div class="filter-content-slider-value-max filter-content-slider-value push-right" ng-bind-html="$ctrl.labels.max | to_trusted"></div>
	</div>
	<div class="filter-content-slider-container">
		<div class="filter-content-slider-actuator slider-h"></div>
	</div>
</div>
	</script>
	<script type="text/ng-template" id="tplBreadcrumb">
<span class="category-breadcrumb-container">
	<span ng-if="$ctrl.category" ng-repeat="category in $ctrl.path track by category.id" class="category-breadcrumb-element" ng-class="{'category-breadcrumb-element-link': category._config.url}">
		<a ng-href="{{::category._config.url}}" ng-if="::category._config.url" class="{{::category._config.css}} ico-centered breadcrumb-text-capitalize" ng-click="$ctrl.selectCategory(category, $event)" ng-bind-html="::category._config.name.toLowerCase() | to_trusted"></a>
		<span class="{{::category._config.css}}" ng-if="::!category._config.url" ng-bind-html="::category._config.name | to_trusted"></span>
		<span class="category-breadcrumb-separator ico ico-arrow-down-gray-sm ico-centered" ng-if="!$last"></span>
	</span>
	<span ng-if="$ctrl.search" class="category-breadcrumb-element-link ico-centered">
		<a href="javascript:;" ng-click="$ctrl.goBackToSearch()" ng-bind-html="$ctrl.backToSearchText | to_trusted"></a>
	</span>
	<span ng-if="$ctrl.product && ($ctrl.category || $ctrl.search)" class="ico-centered category-breadcrumb-element-link">
		<span class="category-breadcrumb-separator ico ico-arrow-down-gray-sm ico-centered"></span>
		<span ng-if="$ctrl.product" ng-bind-html="$ctrl.product.name | to_trusted"></span>
	</span>
</span>
	</script>
	<script type="text/ng-template" id="tplBskTop">
<div ng-click="$ctrl.toTop()" class="bsk-top-container">
	<span class="toTop-arrow"></span>
	<span class="toTop-stick"></span>
</div>	</script>
	<script type="text/ng-template" id="tplBskPrices">
<!-- BEGIN SPOT=BK3_ESpot_tplBskPrices -->

<!-- END SPOT=BK3_ESpot_tplBskPrices -->
	</script>
	<script type="text/ng-template" id="tplMinicartItems">
<minicart-items-list animated="{{$ctrl.animated}}" items="$ctrl.shopCartService.getShopCartItems()"></minicart-items-list>	</script>
	<script type="text/ng-template" id="tplMinicartItemsList">

<div class="mc-products">
	<div id="mc-scrollup" ng-show="$ctrl.showMiniCartScrolls()" ng-click="$ctrl.scrollToPreviousIndex()" ng-class="{disabled: $ctrl.isTop()}">
		<span class="ico ico-flipped ico-arrow-down-gray-sm"></span>
	</div>
		<div class="mc-products-list">
			<div class="mc-items-container">
				<shop-cart-item ng-repeat="item in $ctrl.items track by item.sku" product="item" in-stock="$ctrl.inStock" small></shop-cart-item>
			</div>
		</div>
	<div id="mc-scrolldown" ng-show="$ctrl.showMiniCartScrolls()" ng-click="$ctrl.scrollToNextIndex()" ng-class="{disabled: $ctrl.isBottom()}">
		<span class="ico ico-arrow-down-gray-sm"></span>
	</div>
</div>	</script>
	<script type="text/ng-template" id="tplBskTax">
<div class="bskTax">
	<a href="javascript:;" class="sp-item-tax" ng-click="$ctrl.openTermsAndConditions()" ng-if="::($ctrl.taxIncluded && $ctrl.taxAsLink)">* VAT included</a>
	<span ng-if="::($ctrl.taxIncluded && !$ctrl.taxAsLink)" class="sp-item-tax">* VAT included</span>
    <span ng-if="::!$ctrl.taxIncluded" class="sp-item-tax">* Before taxes</span>
    <span ng-if="::$ctrl.extended" class="sp-item-ext-tax"> / excluding shipping costs</span>
</div>	</script>
	<script type="text/ng-template" id="tplBskPromotions">
<div class="promotion-table">
	<div ng-repeat="promotion in $ctrl.promotions" class="promotion-container promotion-{{promotion.type}} {{promotion.clazz}}">
		<div class="promotion-icon">
			<span class="ico ico-promotion-{{promotion.type}}"></span>
		</div>
		<div class="promotion-text">
			<span class="shopcart-message" ng-bind-html="promotion.text | to_trusted"></span>
		</div>
	</div>
</div>
	</script>
	<script type="text/ng-template" id="tplOlapicCarousel">
<div class="olapic_carousel" ng-class="{olapic_product: $ctrl.product}" ng-if="$ctrl.olapicService.active && $ctrl.items.length">
	<hr class="cross-selling-line" ng-if="$ctrl.showSeparator==1"></hr>
	<div class="olapicCar_titles">
		<!-- BEGIN SPOT=BK3_ESpot_Olapic_titles -->
<h3>#bershkastyle</h3>
<p>Want to be part of our #bershkastyle world?</p>
<p>Share your look, mention @bershkacollection and include #bershkastyle in the photo title. See you soon!</p>
<!-- END SPOT=BK3_ESpot_Olapic_titles -->
	</div>
	<div class="olapicCar_slider">
		<a class="olapicCar_navPrev ico" ng-click="$ctrl.movePrev($event)" href="#" ng-show="$ctrl._showArrows()"></a>
		<div class="olapicCar_listContainer" ng-swipe-left="$ctrl.moveNext($event)" ng-swipe-right="$ctrl.movePrev($event)">
			<ul class="olapicCar_carousel">
				<li ng-repeat='item in $ctrl.items' ng-attr-style='background-image: url({{item.images.mobile}})'  ng-click='$ctrl.openModal(item, $event)' class="olapic_item" >
					<a href='#'>
						<span class='olapicCar_username'>@{{item.userName}}</span>
					</a>
				</li>
				<li ng-if="$ctrl.items.length<4" ng-click='$ctrl.upload($event)' class="olapicCar_addPhotoSlide" ng-class="{hide: $ctrl.hideAddPhotoSlide}">
						<p class="olapicCar_addPhotoSlide_text">We want to see your look<br/>Share it on social media with the hashtag #bershkastyle</p>
				</li>
			</ul>
		</div>
		<a class="olapicCar_navNext ico" ng-click="$ctrl.moveNext($event)" href="#" ng-show="$ctrl._showArrows()"></a>
	</div>
	<div class="olapicCar_footer">
		<div class="olapicCar_legalLinks">
			<a ng-href='{{$ctrl.olapicService.getTermsAndConditionsUrl()}}' class="olapicCar_legalTerms">Terms and conditions</a>
			<a ng-href='{{$ctrl.olapicLinkSrc}}' class="olapicCar_Olapiclink" target='_blank'>Olapic</a>
		</div>
		<div class="olapicCar_footerButtons">
			<a href='#' ng-click='$ctrl.upload($event)' class="olapicCar_addPhoto" >Add photo</a>
			<a ng-href='{{$ctrl.olapicService.getSeeGalleryUrl()}}' class="olapicCar_seeGallery">See gallery</a>
		</div>
	</div>
	<olapic-slider version="{{$ctrl.version}}" apikey="{{$ctrl.apikey}}" items="$ctrl.items" selected="$ctrl.olapicService.selected"></olapic-slider>
</div>	</script>
	<script type="text/ng-template" id="tplOlapicShowcase">
<div class="olapic_showcase" ng-class="{olapic_product: $ctrl.product}" ng-if="$ctrl.olapicService.active && $ctrl.items.length">
	<hr class="cross-selling-line" ng-if="$ctrl.showSeparator==1"></hr>
	<div class="olapic-showcase_titles">
		<!-- BEGIN SPOT=BK3_ESpot_Olapic_titles -->
<h3>#bershkastyle</h3>
<p>Want to be part of our #bershkastyle world?</p>
<p>Share your look, mention @bershkacollection and include #bershkastyle in the photo title. See you soon!</p>
<!-- END SPOT=BK3_ESpot_Olapic_titles -->
	</div>
	<div class="olapic-showcase_slider">
		<div class="olapic-showcase_listContainer clearfix" ng-swipe-left="$ctrl.moveNext($event)" ng-swipe-right="$ctrl.movePrev($event)">
			<ul class="olapic-showcase olapic-showcase-first">
				<li ng-repeat='item in $ctrl.items | limitTo:1' ng-attr-style='background-image: url({{item.images.normal}})'  ng-click='$ctrl.openModal(item, $event)' class="olapic_item" >
					<span class="olapic-showcase-icon ico ico-olapic-plus"></span>
					<a href='#'>
						<div class="olapic-showcase-mask">
							<span class="olapic-showcase-username">@{{item.userName}}</span>
							<span class="olapic-showcase-buy">shop</span>
						</div>
						<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
					</a>
				</li>
			</ul>
			<ul class="olapic-showcase olapic-showcase-top clearfix">
				<li ng-repeat='item in $ctrl.items | limitTo:$ctrl.maxElements:1' ng-attr-style='background-image: url({{item.images.mobile}})'  ng-click='$ctrl.openModal(item, $event)' class="olapic_item" >
					<span class="olapic-showcase-icon ico ico-olapic-plus"></span>
					<a href='#'>
						<div class="olapic-showcase-mask">
							<span class="olapic-showcase-username">@{{item.userName}}</span>
							<span class="olapic-showcase-buy">shop</span>
						</div>
						<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
					</a>
				</li>
			</ul>
			<ul class="olapic-showcase olapic-showcase-bottom clearfix">
				<li ng-repeat='item in $ctrl.items | limitTo:$ctrl.maxElements:$ctrl.startPoint' ng-attr-style='background-image: url({{item.images.mobile}})'  ng-click='$ctrl.openModal(item, $event)' class="olapic_item" >
					<span class="olapic-showcase-icon ico ico-olapic-plus"></span>
					<a href='#'>
						<div class="olapic-showcase-mask">
							<span class="olapic-showcase-username">@{{item.userName}}</span>
							<span class="olapic-showcase-buy">shop</span>
						</div>
						<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
					</a>
				</li>
			</ul>
		</div>
	</div>
	<div class="olapic-showcase_footer">
		<div class="olapic-showcase_legalLinks">
			<a ng-href='{{$ctrl.olapicService.getTermsAndConditionsUrl()}}' class="olapic-showcase_legalTerms">Terms and conditions</a>
		</div>
		<div class="olapic-showcase_footerButtons">
			<a href='#' ng-click='$ctrl.upload($event)' class="olapic-showcase_addPhoto btn btn-lg" >Add photo</a>
			<a ng-href='{{$ctrl.olapicService.getSeeGalleryUrl()}}' class="olapic-showcase_seeGallery btn btn-lg">See gallery</a>
		</div>
	</div>
	<olapic-slider version="{{$ctrl.version}}" apikey="{{$ctrl.apikey}}" items="$ctrl.items" selected="$ctrl.olapicService.selected"></olapic-slider>
</div>	</script>
	<script type="text/ng-template" id="tplOlapicGallery">
<div class="olapic_gallery clearfix" ng-show="$ctrl.items.length">
    <div class="olapicGal_titles">
        <!-- BEGIN SPOT=BK3_ESpot_Olapic_titles -->
<h3>#bershkastyle</h3>
<p>Want to be part of our #bershkastyle world?</p>
<p>Share your look, mention @bershkacollection and include #bershkastyle in the photo title. See you soon!</p>
<!-- END SPOT=BK3_ESpot_Olapic_titles -->
    </div>
    <div class="olapicGal_Buttons">
        <a href='#'' ng-click='$ctrl.upload($event)' class="olapicGal_addPhoto btn btn-lg" >Add photo</a>
    </div>
    <div class="olapicGal_wrapper">
        <div class="olapicGal_container">
            <ul class="olapicGal_list">
                <li ng-repeat='item in $ctrl.items' ng-attr-style='background-image: url({{item.images.normal}})'  ng-click='item.hasStreams && $ctrl.launchItem(item)' class="olapicGal_item" ng-class="{'selectable': item.hasStreams}">
                	<span class="olapic-showcase-icon ico ico-olapic-plus"></span>
                    <a href=''>
                        <div class="olapic-showcase-mask">
							<span class="olapic-showcase-username">@{{item.userName}}</span>
							<span class="olapic-showcase-buy">shop</span>
						</div>
						<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="olapicGal_footer" bsk-in-viewport="$ctrl.loadMoreItems()" bsk-in-viewport-persistent="1" bsk-out-viewport="$ctrl.release()">
        <div class="olapicCar_legalLinks">
            <a ng-href='{{$ctrl.olapicService.getTermsAndConditionsUrl()}}' class="olapicGal_legalTerms">Terms and conditions</a>
            <a ng-href='{{$ctrl.olapicLinkSrc}}' class="olapicGal_Olapiclink" target='_blank'>Olapic</a>
        </div>
    </div>
    <olapic-slider version="{{$ctrl.version}}" apikey="{{$ctrl.apikey}}" items="$ctrl.items" selected="$ctrl.olapicService.selected"></olapic-slider>
</div>	</script>
	<script type="text/ng-template" id="tplOlapicSlider">
<div class="olapicSli_overlay" ng-show="$ctrl.selected" ng-cloak ng-click="$ctrl._hidePopup()">
    <div class="olapicSli_main">
        <a class="olapicSli_prev ico" ng-click="$ctrl.viewItem(-1);$event.stopPropagation()"></a>
        <div class="olapicSli_container" ng-click="$event.stopPropagation()">
            <a class="olapicSli_close ico ico-close" ng-click="$ctrl._hidePopup();$event.stopPropagation()"></a>
            <div class="olapicSli_leftCol">
                <div class="olapicSli_featuredPhoto">
                    <div class="olapicSli_mainImg" ng-attr-style="background-image: url({{$ctrl.selected.images.normal}});"></div>
                </div>
                <span class="olapicSli_openReport ico" ng-click="$ctrl.openReport();$event.stopPropagation()"></span>
                <!-- REPORT -->
                <div class="olapicSli_report" ng-show="$ctrl.showReportPanel">
                    <form ng-hide="$ctrl.reportSended" method="POST">
                        <ul>
                            <li><p>Are you sure you want to report this photo?</p></li>
                            <li><p>That means it’s inappropriate, has broken a law or infringed upon a right. If this photo is reported, it will be automatically deleted from the gallery and cannot be viewed again, so it’s important to be sure before reporting it. Please wait 20 minutes for the cache to be emptied and the image to be deleted.</p></li>
                            <li class="olapicSli_report_email">
                                <input type="email" placeholder="my@email.com" ng-model="$ctrl.report.email" />
                                <span ng-show="$ctrl.olapicSli_report_error">Invalid address!</span>
                            </li>
                            <li class="olapicSli_report_reason">   
                                <input type="text" placeholder="reason" ng-model="$ctrl.report.reason">
                            </li>
                            <li class="olapicSli_report_buttons">
                                <a class="olapicSli_report_buttons_cancel" ng-click="$ctrl.closeReport();$event.stopPropagation()">Cancel</a>
                                <button class="olapicSli_report_buttons_report" ng-click="$ctrl.sendReport();$event.stopPropagation()">Report</button>
                            </li>
                        </ul>
                    </form>
                    <div class="olapicSli_reportSended" ng-show="$ctrl.reportSended">
                        <p ng-hide="$ctrl.reportSendedError">Photo reported</p>
                        <p ng-hide="$ctrl.reportSendedError">Please wait 20 minutes for the cache to be emptied and the photo to be removed</p>
                        <p ng-show="$ctrl.reportSendedError">The photo has now been reported</p>
                        <div class="olapicSli_reportSended_buttons">
                            <button class="olapicSli_report_close" ng-click="$ctrl.closeReport();$event.stopPropagation()">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="olapicSli_rightCol">
                <div class="olapicSli_author">
                     <a class="olapicSli_authorLink" ng-href="{{$ctrl.selected.originalUrl}}" target="_blank">

                        <img class="olapicSli_authorAvatar" ng-src="{{$ctrl.selected.uploaderImage}}">
                        <!--<span class="olapicSli_authorSource ico {{$ctrl.selected.source}}" > </span>-->
                        <div class="olapicSli_authorNames">
                            <p class="olapicSli_authorRealName">{{$ctrl.selected.userRealName}}</p>
                            <p class="olapicSli_authorUserName" target="_blank" href="">@{{$ctrl.selected.userName}}</p>
                        </div>
                    </a>
                    <p class="olapicSli_caption">{{$ctrl.selected.caption}}</p>
                </div>
                <div class="olapicSli_streamsList" ng-show="$ctrl.selected.streams">
                    <span class="olapicSli_stream_prev ico" ng-click="$ctrl.prevStreams();$event.stopPropagation()" ng-show="$ctrl.showPrevBut"></span>
                    <div class="olapicSli_streamsListWrapper">
                        <ul ng-style="{width: $ctrl.streamsWidth}" class="olapicSli_stream_ul" >
                            <li ng-repeat="stream in $ctrl.selected.streams" class="olapicSli_stream">
                                <a ng-href="{{stream.url}}" ng-click="$event.preventDefault(); $event.stopPropagation(); $ctrl.gotoProduct(stream, $index);">
                                    <span class="olapicSli_stream_name">{{stream.name}}</span>
                                    <span class="olapicSli_stream_image" style="background-image: url({{stream.image}});"></span>
                                    <span class="olapicSli_stream_buy">shop</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <span class="olapicSli_stream_next ico" ng-click="$ctrl.nextStreams();$event.stopPropagation()" ng-show="$ctrl.showNextBut"></span>
                </div>
                <ul class="olapicSli_social" ng-show="$ctrl.showSocialLinks">
                    <li class="olapicSli_social_fb ico" ng-click="$ctrl.openSocial('fb');$event.stopPropagation()"></li>
                    <li class="olapicSli_social_tw ico" ng-click="$ctrl.openSocial('tw');$event.stopPropagation()"></li>
                    <li class="olapicSli_social_pt ico" ng-click="$ctrl.openSocial('pt');$event.stopPropagation()"></li>
                </ul>
            </div>        
        </div>
        <a class="olapicSli_next ico" ng-click="$ctrl.viewItem(1);$event.stopPropagation()"></a>
    </div>
</div>
	</script>
	<script type="text/ng-template" id="tplBskStoreAddress">
<div class="store-address-container" ng-click="$ctrl.action($event)" ng-class="{'store-address-compressible': $ctrl.isCompressible, 'has-actions': $ctrl.hasActions}">
	<span class="store-expand ico ico-plus" ng-class="$ctrl.compressed?'ico-plus':'ico-minus'" ng-click="$ctrl.toggle($event)"></span> 
	<div class="store-icon" ng-click="$ctrl.execute('favourite',$event)" ng-if="!$ctrl.globalDisabledFavourite && $ctrl.hasAction('favourite')">
		<span class="ico" ng-class="$ctrl.store.app.isFavourite?'ico-wish-min-selected':'ico-wish-min'"></span>
	</div>
	<div class="store-address">
		<div class="store-address-component store-name">Bershka - {{$ctrl.store.city}}</div>
		<div class="store-address-component store-address-component-name" ng-if="$ctrl.name">{{$ctrl.name}}</div>
		<div class="store-address-component store-address-component-address" ng-repeat="addressLine in $ctrl.store.addressLines">{{addressLine}}</div>
	</div>
	<div class="expanded-info" ng-cloak ng-show="!$ctrl.compressed">
		<div class="store-address">
			<div class="store-address-component store-address-component-city">{{$ctrl.store.zipCode}} - {{$ctrl.store.city}} - {{$ctrl.store.countryName}}</div>
			<div class="store-address-component store-address-component-pone" ng-repeat="phone in $ctrl.store.phones">{{phone}}</div>
			<div class="store-address-component store-address-component-sections">{{$ctrl.getSections()}}</div>
		</div>
		<div class="container-links clearfix" ng-if="$ctrl.hasActions"> 
			<span class="container-links-action change-store-see" ng-click="$ctrl.execute('see',$event)" ng-if="$ctrl.hasAction('see')">See on the map</span>
			<span class="container-links-action change-store-favourite" ng-click="$ctrl.execute('favourite',$event)" ng-if="!$ctrl.globalDisabledFavourite && $ctrl.hasAction('favourite')">
				<span class="change-store-favourite-text" ng-if="!$ctrl.store.app.isFavourite">Remove from favourites</span>
				<span class="change-store-favourite-text" ng-if="$ctrl.store.app.isFavourite">Add to favourites</span>
			</span>
			<span class="container-links-action change-store-select" ng-if="$ctrl.hasAction('select')">Select store</span>
		</div>
	</div>
</div>
	</script>
	<script type="text/ng-template" id="tplBskDroppointAddress">
<div class="droppoint-address-container" ng-click="$ctrl.action($event)" ng-class="{'droppoint-address-compressible': $ctrl.isCompressible, 'has-actions': $ctrl.hasActions}">
	<span class="droppoint-expand ico ico-plus" ng-class="$ctrl.compressed?'ico-plus':'ico-minus'" ng-click="$ctrl.toggle($event)"></span> 
	<div class="droppoint-icon" ng-click="$ctrl.execute('favourite',$event)" ng-if="!$ctrl.globalDisabledFavourite && $ctrl.hasAction('favourite')">
		<span class="ico" ng-class="$ctrl.store.app.isFavourite?'ico-wish-min-selected':'ico-wish-min'"></span>
	</div>
	<div class="droppoint-address">
		<div class="droppoint-address-component droppoint-name">{{$ctrl.store.city}} - {{$ctrl.store.name}}</div>
		<div class="droppoint-address-component">
			<span>{{$ctrl.store.street}}</span>
			<span ng-if="$ctrl.store.homeNo"> - {{$ctrl.store.homeNo}}</span>
		</div>
	</div>
	<div  class="expanded-info" ng-cloak ng-show="!$ctrl.compressed">
		<div class="droppoint-address">
			<div class="droppoint-address-component">
			 	<span>{{$ctrl.store.zipCode}} - {{$ctrl.store.city}}</span>
				<span ng-if="$ctrl.store.countryName"> - {{$ctrl.store.countryName}}</span>
			 </div>
			<div class="droppoint-address-component" ng-if="$ctrl.store.telephone">{{$ctrl.store.telephone}}</div>
		</div>
		<div class="showOpeningHours" ng-click="$ctrl.store.showHours=true; $event.stopPropagation()">Hours</div>
		<div class="container-links clearfix" ng-if="$ctrl.hasActions">
			<span class="container-links-action change-droppoint-see" ng-click="$ctrl.execute('see',$event)" ng-if="$ctrl.hasAction('see')">See on the map</span>
			<span class="container-links-action change-droppoint-favourite" ng-click="$ctrl.execute('favourite',$event)" ng-if="!$ctrl.globalDisabledFavourite && $ctrl.hasAction('favourite')">
				<span class="change-droppoint-favourite-text" ng-if="!$ctrl.store.app.isFavourite">Remove from favourites</span>
				<span class="change-droppoint-favourite-text" ng-if="$ctrl.store.app.isFavourite">Add to favourites</span>
			</span>
			<span class="container-links-action change-store-select" ng-click="$ctrl.execute('select',$event)" ng-if="$ctrl.hasAction('select')">Select pick-up point</span>
		</div>
		<div class="droppointOpeningHours" ng-show="$ctrl.store.showHours">
			<span class="ico ico-close closeOpeningHours" ng-click="$ctrl.store.showHours=false; $event.stopPropagation();"></span>
			<ul>
				<li><span>Monday:</span> {{$ctrl.store.app.openingHours.mondayTime}}</li>
				<li><span>Tuesday:</span> {{$ctrl.store.app.openingHours.tuesdayTime}}</li>
				<li><span>Wednesday:</span> {{$ctrl.store.app.openingHours.wednesdayTime}}</li>
				<li><span>Thursday:</span> {{$ctrl.store.app.openingHours.thursdayTime}}</li>
				<li><span>Friday:</span> {{$ctrl.store.app.openingHours.fridayTime}}</li>
				<li><span>Saturday:</span> {{$ctrl.store.app.openingHours.saturndayTime}}</li>
				<li><span>Sunday:</span> {{$ctrl.store.app.openingHours.sundayTime}}</li>
			</ul>
		</div>
	</div>
</div>
	</script>
	<script type="text/ng-template" id="tplUserAddress">
<div class="user-address-container">
	<div class="user-address-component user-address-component-name" ng-if="$ctrl.showName">
		{{$ctrl.address.firstName}}
		<span ng-if="$ctrl.userAddresses.hasMiddleName">&nbsp;{{$ctrl.address.middleName}}</span>
		<span ng-if="$ctrl.userAddresses.hasLastName">&nbsp;{{$ctrl.address.lastName}}</span>
	</div>
	<div class="user-address-component user-address-component-email" ng-if="$ctrl.showEmail">{{$ctrl.address.email}}</div>
	<div class="user-address-component user-address-component-address1" ng-if="$ctrl.address && $ctrl.showAddress">{{$ctrl.address.addressLines[0]}}</div>
	<div class="user-address-component user-address-component-address2" ng-if="$ctrl.address && $ctrl.showAddress && $ctrl.address.addressLines[1]">{{$ctrl.address.addressLines[1]}}</div>
	<div class="user-address-component user-address-component-city" ng-if="$ctrl.showCity">
		<span class="user-address-component-zipCode" ng-if="$ctrl.address.zipCode">{{$ctrl.address.zipCode}}&nbsp;</span>
		<span class="user-address-component-city" ng-if="$ctrl.city">{{$ctrl.city}}&nbsp;</span>
		<span class="user-address-component-district" ng-if="$ctrl.district">{{$ctrl.district}}&nbsp;</span>
		<span class="user-address-component-province" ng-if="$ctrl.userAddresses.showProvince">{{$ctrl.province.name}}</span>
	</div>
	<div class="user-address-component user-address-component-country" ng-if="$ctrl.showCountry">{{$ctrl.address.countryName}}</div>
	<div class="user-address-component user-address-component-phone" ng-if="$ctrl.showPhone"><span class="user-address-component-phone-label">Telephone:</span>&nbsp;<span class="user-address-component-phone-value">{{$ctrl.address.phones[0].countryCode}}&nbsp;{{$ctrl.address.phones[0].subscriberNumber}}</span></div>
</div>	</script>
	<script type="text/ng-template" id="tplProvinceField">
<ng-form name="$ctrl.provinceForm" novalidate>
	<ul>
		<!-- States - Provinces -->
		<li class="formControl province-field-province" ng-if="$ctrl.showProvince">
			<label class="formLabel" for="province" bsk-required ng-if="$ctrl.showLabels">Province</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.provinceForm.province.$valid, 'ng-invalid':!$ctrl.provinceForm.province.$valid && $ctrl.provinceForm.province.$touched}">
				<select trigger-persist name="province" ng-model="$ctrl.dest.stateCode" ng-options="state.code as state.name for state in $ctrl.states" ng-change="$ctrl.loadCities()" required>
					<option style="display: none" value="" class="select-default-value">Province *</option>
				</select>
			</div>
			<form-error-messages for="province"></form-error-messages>
		</li>			
		<!-- Cities -->
		<li class="formControl province-field-city">
			<label class="formLabel" for="city" bsk-required ng-if="$ctrl.showLabels">City</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.provinceForm.city.$valid, 'ng-invalid':!$ctrl.provinceForm.city.$valid && $ctrl.provinceForm.city.$touched}">
				<input trigger-root="focus,blur" ng-if="!$ctrl.dropdownCities" ng-model="$ctrl.dest.city" type="text" name="city" required itx-placeholder placeholder="{{$ctrl.showPlaceholders?'City *':''}}">
				<select trigger-persist ng-disabled="!$ctrl.cities" ng-if="$ctrl.dropdownCities" name="city" ng-options="(city.id + '#' + city.name) as city.name for city in $ctrl.cities" ng-change="$ctrl.loadDistricts()" ng-model="$ctrl.dest.city" required>
					<option style="display: none" value="" class="select-default-value">City *</option>
				</select>
			</div>
			<form-error-messages for="city"></form-error-messages>
		</li>
		<!-- Districts -->
		<li ng-if="$ctrl.dropdownDistricts" class="formControl province-field-colony">
			<label class="formLabel" for="colony" bsk-required ng-if="$ctrl.showLabels">Colony</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.provinceForm.colony.$valid, 'ng-invalid':!$ctrl.provinceForm.colony.$valid && $ctrl.provinceForm.colony.$touched}">
				<select trigger-persist ng-disabled="!$ctrl.districts" ng-options="(district.id + '#' + district.name) as district.name for district in $ctrl.districts" ng-model="$ctrl.dest.colony" name="colony" required>
					<option style="display: none" value="" class="select-default-value">Colony *</option>
				</select>
			</div>
			<form-error-messages for="colony"></form-error-messages>
		</li>
		<li ng-if="$ctrl.countryCode == 'MX'" class="formControl province-field-colony">
			<label class="formLabel" for="colony" bsk-required ng-if="$ctrl.showLabels">Colony</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.provinceForm.colony.$valid, 'ng-invalid':!$ctrl.provinceForm.colony.$valid && $ctrl.provinceForm.colony.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.dest.colony" type="text" name="colony" maxlength="120" required itx-placeholder placeholder="{{$ctrl.showPlaceholders?'Colony *':''}}">
			</div>
			<form-error-messages for="colony"></form-error-messages>
		</li>
		<li ng-if="$ctrl.countryCode == 'MX'" class="formControl province-field-municipality">
			<label class="formLabel" for="municipality" bsk-required ng-if="$ctrl.showLabels">Municipal area</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.provinceForm.municipality.$valid, 'ng-invalid':!$ctrl.provinceForm.municipality.$valid && $ctrl.provinceForm.municipality.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.dest.municipality" type="text" name="municipality" maxlength="120" required itx-placeholder placeholder="{{$ctrl.showPlaceholders?'Municipal area *':''}}">
			</div>
			<form-error-messages for="municipality"></form-error-messages>
		</li>
	</ul>
</ng-form>	</script>
	<script type="text/ng-template" id="tplCountryField">
<div>
	<select ng-if="$ctrl.showSelect" ng-model-options="{getterSetter: true}" ng-model="$ctrl.selectedCountry" ng-change="$ctrl.changed()"> 
		<option ng-repeat="country in $ctrl.UECountries track by country.name" value="{{country.code}}">{{ country.name }}</option>
	</select>
	<div ng-if="!$ctrl.showSelect" class="readonly">{{::$ctrl.dest.countryName}}</div>
</div>	</script>
	<script type="text/ng-template" id="tplPhoneField">
<ng-form name="$ctrl.phoneForm" ng-class="{'phone-validation-enabled': $ctrl.validate && $ctrl.phoneHelpers.validate, 'phone-waiting-recheck': $ctrl.deltaToCheck}">
	<ul class="phone-field">
		<li ng-if="$ctrl.canChangePrefix">
			<phone-prefix-field prefix="$ctrl.phone.countryCode" change="$ctrl.prefixChanged(prefix)"></phone-prefix-field>
		</li>
		<li ng-if="!$ctrl.canChangePrefix" class="phone-country-code phone-readonly">
			<span class="phone-country-code-text">{{$ctrl.phone.countryCode}}</div>
		</li>
		<li class="phone-number" ng-if="!$ctrl.readonly">
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.phoneForm.phone.$valid, 'ng-invalid':!$ctrl.phoneForm.phone.$valid && $ctrl.phoneForm.phone.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.phone.subscriberNumber" name="phone" type="tel" phone-number="{{$ctrl.phone.countryCode}}" required itx-placeholder placeholder="{{$ctrl.placeholder}}" class="phone-number-text">
			</div>
		</li>
		<li class="phone-number phone-readonly" ng-if="$ctrl.readonly">
			<span class="phone-number-text">{{$ctrl.phone.subscriberNumber}}</span>
		</li>
		<li class="phone-validation-send" ng-if="$ctrl.validate && $ctrl.phoneHelpers.validate">
			<button ng-click="$ctrl.sendValidation()" class="btn-cta1" ng-disabled="!$ctrl.canValidate">
				<span class="text">Send</span>
				<span class="countdown" ng-if="$ctrl.deltaToCheck">&nbsp;({{$ctrl.deltaToCheck}})</span>
			</button>
		</li>
		<li class="phone-validation-error-message">
			<form-error-messages class="phone-validation-info-error" for="phone" ng-if="!$ctrl.readonly"></form-error-messages>
			<span class="phone-validation-info-timer" ng-if="$ctrl.validate && $ctrl.phoneHelpers.validate && $ctrl.deltaToCheck">The verification code can be resent after 60 seconds.</div>
		</li>
	</ul>

	<div class="phone-validation-code formControl" ng-if="$ctrl.validate && $ctrl.phoneHelpers.validate">
		<label class="formLabel" for="code">Verification code</label>
		<div class="form-control-container" ng-class="{'ng-valid':$ctrl.phoneForm.code.$valid, 'ng-invalid':!$ctrl.phoneForm.code.$valid && $ctrl.phoneForm.code.$touched}">
			<input type="text" ng-model="$ctrl.phone.validation" name="code" required ng-minlength="$ctrl.phoneConstants.MINLENGTH" ng-maxlength="$ctrl.phoneConstants.MAXLENGTH" ng-pattern="$ctrl.phoneConstants.REGEX" autocomplete="off">
		</div>
		<form-error-messages for="code"></form-error-messages>
	</div>
</ng-form>	</script>
	<script type="text/ng-template" id="tplPhonePrefixField">
<div class="form-control-container phone-prefix" >
	<div class="phone-prefix-value">{{ $ctrl.prefix }}</div>
	<select class="phone-prefix-dropdown-list" ng-model="$ctrl.selected" ng-options="country as country.label for country in $ctrl.countries" ng-change="$ctrl.changed()" tabindex="-1">
		<option style="display:none" value="">Market prefix*</option>
	</select>
<div>	</script>
	<script type="text/ng-template" id="tplBskMap">
<div id="map" class="mapWrapper"></div>
	</script>
	<script type="text/ng-template" id="tplBskOxxo">
<div>
	<p class="oxxoNoBarcode" ng-if="!$ctrl.barcode">
		To complete the payment process, please click  <a ng-href="{{::$ctrl.redirectUrl}}" target="_blank">here</a>
	</p>
	<svg ng-if="$ctrl.order._barcode" class="oxxo-barcode"></svg>
</div>
	</script>
	<script type="text/ng-template" id="tplFormMessages">
<div class="field-error-message" ng-messages="$ctrl.form[$ctrl.name].$error" ng-show="$ctrl.form[$ctrl.name].$touched">
	<span ng-message="required">This field is mandatory</span>
	<span ng-message="fullEmail">Email address not valid</span>
	<span ng-message="email">Email address not valid</span>
	<span ng-message="postalCode">Post code not valid</span>
	<span ng-message="postalCodeRestricted">Post code not valid for deliveries</span>
	<span ng-message="securePassword" class="longMessage">The password must contain a minimum of 8 characters including a lower-case letter, an upper-case letter and a number. Please do not repeat the same character more than three times.</span>
	<span ng-message="cardNumber">The value entered is not valid</span>
	<span ng-message="idNumber">The value entered is not valid</span>
	<span ng-message="idNumberNif">The value entered is not valid</span>
	<span ng-message="idNumberCif">The Tax identification number is not valid</span>
	<span ng-message="phoneNumber">Telephone not valid</span>
	<span ng-message="number">Please enter a number</span>
	<span ng-message="equalTo">Passwords must match</span>
	<span ng-message="minlength">{{$ctrl.getFormattedText("validation.minLength", $ctrl.form[$ctrl.name].$reasons.minlength)}}</span>
	<span ng-message="maxlength">{{$ctrl.getFormattedText("validation.maxLength", $ctrl.form[$ctrl.name].$reasons.maxlength)}}</span>
	<span ng-message="dynamic">Invalid format</span>
	<span ng-message="registrationNumber">Invalid format</span>
	<span ng-message="validEmail">Email address not valid</span>
</div>	</script>
	<script type="text/ng-template" id="tplBskLabel">
<div class="label-container ellipsis">
	<span ng-repeat="segment in $ctrl.segments" ng-style="segment.style" ng-bind-html="segment.text | to_trusted"></span>
</div>	</script>
	<script type="text/ng-template" id="tplBskPrivacyPolicy">
<ul class="bskPPcheck">
	<li class="check">
		<div class="bskPPcheckAllClass">
			<label ng-click="bskPPcheckAllClick()">
				<input  id="bskPPcheckAll" name="bskPPcheckAll" type="checkbox" class="checkbox" custom-checkbox>
				<span ng-bind-html="core.text('privacyPolicy.checkAll')"></span>
			</label>
		</div>
	</li>
	<li class="check indented">
		<div class="bskPPcheckOverseasClass">
			<label ng-click="bskPPcheckOverSeasClick()" >
				<input id="bskPPcheckOverSeas" ng-model="bskPPcheckOverSeas" name="bskPPcheckOverSeas" type="checkbox" class="checkbox" custom-checkbox>
				<div>
					<span ng-bind-html="core.text('privacyPolicy.overSeas')"></span>&nbsp;
					<a href="javascript:;" data-ng-click="core.openOverSeasPolicy();stopPropagation($event);" ng-bind-html="core.text('privacyPolicy.readMore')" class="under"></a>
				</div>
			</label>
		</div>
	</li>
	<li class="check indented">
		<div class="bskPPcheckConsentClass">
			<label ng-click="bskPPcheckConsentClick()">
				<input id="bskPPcheckConsent" name="bskPPcheckConsent" ng-model="bskPPcheckConsent" type="checkbox" class="checkbox" custom-checkbox>
				<div>
					<span ng-if="!mandatoryNewsletter" ng-bind-html="core.text('privacyPolicy.consent')"></span>&nbsp;
					<span ng-if="mandatoryNewsletter" ng-bind-html="core.text('privacyPolicy.consentNewsletter')"></span>&nbsp;
					<a href="javascript:;" ng-if="!mandatoryNewsletter" data-ng-click="core.openConsentPolicy();stopPropagation($event);" class="under"  ng-bind-html="core.text('privacyPolicy.readMore')"></a>
					<a href="javascript:;" ng-if="mandatoryNewsletter" data-ng-click="core.openConsentNewsletterPolicy();stopPropagation($event);" class="under"  ng-bind-html="core.text('privacyPolicy.readMore')"></a>
				</div>
			</label>
		</div>
	</li>
	<li ng-show="allPPfields" class="check indented bskPPNewsletterExtra" >
		<label>
			<a class="checkbox" data-ng-click="regNewsletter=!regNewsletter" data-ng-class="{active: regNewsletter}"></a>
			<div>
				<span class="confirmationChecks-familyFont" ng-bind-html="core.text('privacyPolicy.consentNewsletter')"></span>&nbsp;
				<a href="javascript:;" data-ng-click="core.openConsentNewsletterPolicy();stopPropagation($event);" class="under"  ng-bind-html="core.text('privacyPolicy.readMore')"></a>
			</div>
		</label>
	</li>
</ul>'
		</script>
	<script type="text/ng-template" id="tplBskPrivacyPolicy2">
<ng-form name="$ctrl.bskPrivacyPolicy">
	<ul class="bskPPcheck marginTop20" ng-if="$ctrl.detailedPrivacyPolicy">
		<li>
			<div class="bskPPcheckAllClass" ng-click="$ctrl.checkAllClick()">
				<div class="relative push-left marginTop4">
					<input ng-model="$ctrl.checkAll" name="checkAll" type="checkbox" class="checkbox" custom-checkbox>
				</div>
				<div class="literature" ng-click="$ctrl.checkAll=!$ctrl.checkAll">
					<span>Check all</span>
				</div>
			</div>
		</li>
		<li class="indented marginTop10">
			<div class="bskppCheckOverseas">
				<div class="relative push-left marginTop4">
					<input ng-model="$ctrl.checkOverseas" name="checkOverseas" type="checkbox" class="checkbox" custom-checkbox required>
				</div>
				<div ng-click="$ctrl.checkOverseas=!$ctrl.checkOverseas" class="literature">
					<span>Consent to Overseas Transfer of Personal Information</span>&nbsp;
					<a href="javascript:;" ng-click="$ctrl.openOverSeasPolicy();$event.stopPropagation()" class="under">Read more</a>
				</div>
			</div>
		</li>
		<li class="indented marginTop10">
			<div class="bskPPConsent">
				<div class="relative push-left marginTop4">
					<input ng-model="$ctrl.checkConsent" name="checkConsent" type="checkbox" class="checkbox" custom-checkbox required>
				</div>
				<div ng-click="$ctrl.checkConsent=!$ctrl.checkConsent" class="literature">
					<span>Consent to the Collection and Use of the Personal Information</span>&nbsp;
					<a href="javascript:;" ng-click="$ctrl.openConsentPolicy();$event.stopPropagation()" class="under">Read more</a>
				</div>
			</div>
		</li>
		<li ng-if="$ctrl.showNewsletter" class="indented marginTop10">
			<div class="bskPPNewsletterExtra">
				<div class="relative push-left marginTop4">
					<input ng-model="$ctrl.checkNewsletter" name="registerNewsletter" type="checkbox" class="checkbox" custom-checkbox ng-required="$ctrl.isNewsletter==1">
				</div>
				<div ng-click="$ctrl.checkNewsletter=!$ctrl.checkNewsletter" class="literature">
					<span>Personal Information for the subscription to the Newsletter </span>&nbsp;
					<a href="javascript:;" ng-click="$ctrl.openConsentNewsletterPolicy();$event.stopPropagation()" class="under">Read more</a>
				</div>
			</div>
		</li>
	</ul>
	<ul ng-if="!$ctrl.detailedPrivacyPolicy" class="marginTop20">
		<li ng-if="$ctrl.showNewsletter">
			<div class="bskPPNewsletterExtraClass">
				<label>
					<input ng-model="$ctrl.checkNewsletter" name="registerNewsletter" type="checkbox" class="checkbox" custom-checkbox ng-required="$ctrl.isNewsletter==1">
					<div ng-click="$ctrl.checkNewsletter=!$ctrl.checkNewsletter">
						<span>Personal Information for the subscription to the Newsletter </span>&nbsp;
						<a href="javascript:;" ng-click="$ctrl.openConsentNewsletterPolicy();$event.stopPropagation()" class="under">Read more</a>
					</div>
				</label>
			</div>
		</li>
	</ul>
</ng-form>	</script>
	<script type="text/ng-template" id="tplLocalizedPrice">
<span ng-bind-html="$ctrl.getPriceHtml() | to_trusted" ng-if="$ctrl.priceHelpers.showPrices" ng-class="{'price-free': $ctrl.price == 0 && !$ctrl.shoFullPrice}"></span>	</script>
	<script type="text/ng-template" id="tplStaticLocalizedPrice">
<span ng-bind-html="::$ctrl.getPriceHtml() | to_trusted" ng-if="$ctrl.priceHelpers.showPrices" ng-class="{'price-free': $ctrl.price == 0 && !$ctrl.shoFullPrice}"></span>	</script>
	<script type="text/ng-template" id="tplProductPrice">
<span class="product-price prices" ng-class="{'is-gift': $ctrl.isGift, 'price-free': $ctrl.price == 0 && !$ctrl.shoFullPrice && !$ctrl.isGift}" ng-bind-html="$ctrl.getPriceHtml() | to_trusted" ng-if="$ctrl.priceHelpers.showPrices"></span>	</script>
	<script type="text/ng-template" id="tplStaticProductPrice">
<span class="product-price prices" ng-bind-html="::$ctrl.getPriceHtml() | to_trusted" ng-if="$ctrl.priceHelpers.showPrices"  ng-class="::{'is-gift': $ctrl.isGift, 'price-free': $ctrl.price == 0 && !$ctrl.shoFullPrice && !$ctrl.isGift}"></span>	</script>
	<script type="text/ng-template" id="tplBskProducts">
<div class="no-print product-detail-container" ng-if="$ctrl.products.length">
	<product-list products="$ctrl.products" slider-settings="$ctrl.settings" cart="{{::$ctrl.cart}}" quickshop="{{:$ctrl.quickshop}}" wishlist="{{::$ctrl.wishlist}}" image-type="{{::$ctrl.imageType}}" image-size="{{::$ctrl.imageSize}}"></product-list>
</div>
	</script>
	<script type="text/ng-template" id="tplCtaCheckout">
<div class="cta-checkout clearfix" ng-click="$event.stopPropagation()">
	<ng-transclude></ng-transclude>
	<div class="cta-checkout-container">
		<div class="cta-checkout-pre">
			<span class="cta-checkout-total">Total: </span>
			<localized-price price="{{$ctrl.price}}" class="cta-checkout-value"></localized-price>
			<bsk-tax ng-if="$ctrl.shopCartService.getTotalProductsPrice() == $ctrl.shopCartService.getTotalPrice()"></bsk-tax>
		</div>
		<div class="cta-checkout-post">
			<div class="cta-checkout-action cta-checkout-pay">
				<button ng-click="$ctrl.buttonClick()" class="ellipsis inverse" ng-disabled="$ctrl.disabled" >
					<localized-price price="{{$ctrl.price}}" class="cta-checkout-value"></localized-price>
					<span class="cta-checkout-separator">&nbsp;|&nbsp;</span>
					<span class="cta-checkout-text" ng-bind-html="$ctrl.label | to_trusted"></span>
				</button>
			</div>
			<div class="cta-checkout-action cta-checkout-teen" ng-if="$ctrl.teenPayEnabled">
				<button ng-click="$ctrl.buttonTeen()" class="ellipsis" ng-disabled="$ctrl.disabled">
					<span class="cta-checkout-text">REQUEST PAYMENT VIA YOUPAY</span>
				</button>
			</div>
			<div class="cta-checkout-action cta-checkout-teen" ng-if="$ctrl.sponsorPayEnabled">
				<button ng-click="$ctrl.rejectTeenOrder()" class="ellipsis" ng-disabled="$ctrl.disabled">
					<span class="cta-checkout-text">CANCEL REQUEST</span>
				</button>
			</div>
		</div>
	</div>
</div>
	</script>

	<script type="text/ng-template" id="tplSearchBar">
<div class="ixtSearchBar search-bar-header">    
	<div class="searchBar__inputContainer">
		<i class="ico ico-big ico-search-big"></i>
		<input class="search-field hide-mobile" ng-model="$ctrl.query" type="search" ng-enter="$ctrl.search()" ng-change="$ctrl.update()" itx-placeholder placeholder="Search..." bsk-focus-input>
		<input class="search-field is-mobile" ng-model="$ctrl.query" type="search" ng-enter="$ctrl.search()" ng-change="$ctrl.update()" itx-placeholder placeholder="Search" bsk-focus-input>
		<div class="searchBar__predictionContainer search-field ng-hide" ng-show="searchService.prediction">   
			<span class="searchBar__cloneInput">{{ searchService.query }}</span><span class="searchBar__prediction">{{ searchService.prediction }}</span>   
		</div>
	</div>
	<div class="search-sugestion" ng-if="$ctrl.showSugestion()" ng-cloak>Did you mean: <a href="javascript:;" ng-click="$ctrl.searchSugestion()" class="search-sugestion-link">{{ searchService.sugested }}</a></div>
</div>
	</script>
	<script type="text/ng-template" id="tplSearchFacet">
<div ng-class="$ctrl.category._config.clazz" ng-style="$ctrl.category._config.style" class="facet-{{::$ctrl.facet.id}}">
	<a class="facet" ng-class="$ctrl.facet.selected?'selected':'deselected'" ng-click="$ctrl.searchByFacet($event)">
		<span class="facet-text" ng-bind-html="::$ctrl.facet.value | to_trusted"></span>
		<span class="facet-quantity hide-mobile">&nbsp;({{::$ctrl.facet.count}})</span>
	</a>
<!--
	<div ng-if="$ctrl.facet.subfacets && $ctrl.facet.subfacets.length" class="subfacets">
		<search-facet facet="facet" depth="{{$ctrl.depth+1}}" ng-repeat="facet in $ctrl.facet.subfacets" ng-if="facet.count"></search-facet>
	</div>
-->
</div>
	</script>
	<script type="text/ng-template" id="tplSearchFacets">
<div class="strong facets-container" ng-cloak ng-if="$ctrl.searchService.currentSearch.facets && $ctrl.searchService.currentSearch.facets.length">
	<div class="facets">
		<div ng-if="$ctrl.showFacetAll" class="facets-show-all">
			<a class="facet" ng-class="$ctrl.searchService.selectedFilters?'selected':'deselected'" ng-click="$ctrl.clearFacets()">
				<span class="facet-text">All</span>
				<span class="facet-quantity">&nbsp;{{$ctrl.searchService.currentSearch.numFound}}</span>
			</a>   
		</div> 
		<search-facet ng-repeat="facet in $ctrl.searchService.currentSearch.facets" facet="facet" ng-if="facet.count"></search-facet>
	</div>

	<ul ng-show="$ctrl.searchService.currentFeatured.sponsored.length > 0" ng-class="hide-mobile">
		<li><h4>Other</h4></li>
		<li ng-repeat="sponsored in $ctrl.searchService.currentFeatured.sponsored">
			<a ng-href="{{ sponsored.url }}" target="_blank"><span class="ico ico-doc3"></span>{{ sponsored.title }}</a>
		</li>
	</ul>
</div>
	</script>
	<script type="text/ng-template" id="tplSearchSuggestion">
<div class="suggestion-container" ng-if="$ctrl.elements.length">
	<div class="suggestion-title suggestion-empty-info grid-item-container clearfix">
		<a ng-href="{{::$ctrl.suggestionUrl}}" class="suggestion-title-text" ng-click="$ctrl.search($event)">{{::$ctrl.suggestion.suggestion}}</a><span class="suggestion-title-size"> ({{::$ctrl.suggestion.numFound}})</span>
		<a ng-href="{{::$ctrl.suggestionUrl}}" class="suggestion-title-search push-right" ng-click="$ctrl.search($event)">see all</a>
	</div>
	<bsk-carousel class="suggestion-slider" settings="::$ctrl.settings">
		<search-item product="element" ng-repeat="element in ::$ctrl.elements" on-repeat-end-notify class="item" bsk-carousel-slide></search-item>
	</bsk-carousel>
</div>
	</script>
	<script type="text/ng-template" id="tplSearchSuggestions">
<div class="results-suggestions">
	<div class="suggestion-empty-info grid-item-container">
		<div class="suggestion-empty suggestion-empty-info-element" ng-bind-html="$ctrl.searchEmpty() | to_trusted"></div>
		<div class="suggestions-similar suggestion-empty-info-element">Similar searches:</div>
	</div>
	<search-suggestion suggestion="suggestion" ng-repeat="suggestion in $ctrl.searchService.currentSearch.suggestions"></search-suggestion>
</div>
	</script>
	<script type="text/ng-template" id="tplSearchResults">
<div class="results-list" infinite-scroll="$ctrl.loadMoreResults()" infinite-scroll-distance="$ctrl.scrollDistance"
		infinite-scroll-disabled="$ctrl.searchService.loading" infinite-scroll-immediate-check="false" infinite-scroll-container="$ctrl.container">
	<div class="productGrid clearfix">
		<search-item product="doc" ng-repeat="doc in $ctrl.searchService.currentSearch.docs" class="item">
	</div>
	<bsk-top class="bskToTop" bsk-outside="footer"></bsk-top>
</div>
	</script>
	<script type="text/ng-template" id="tplSearchEmpty">
<div class="noResults" ng-show="$ctrl.searchService.currentSearch.docs.length == 0">
	<!-- BEGIN SPOT=BK3_ESpot_Top_Search_Empty -->

<!-- END SPOT=BK3_ESpot_Top_Search_Empty -->
	<h2>Try again!</h2>
	<p>No products were found of your search of:</p>
	<h4>{{$ctrl.searchService.query}}</h4>
	<p>Try your search again using these tips:</p>
	<p>Double check the spelling. Try varying the spelling.</p>
	<p>Sometimes a more general term will lead you to the similar products.</p>
<!-- BEGIN SPOT=BK3_ESpot_Bottom_Search_Empty -->

<!-- END SPOT=BK3_ESpot_Bottom_Search_Empty -->
</div> 
	</script>
	<script type="text/ng-template" id="tplCategoryDetail">
<div class="category-page-container" ng-class="{'min-height-80': $ctrl.hasValidCategory && $ctrl.hasProducts() }">
	<div class="category-table grid-cols-{{$ctrl.gridCols}}" ng-cloak ng-class="{'filters-hidden': !$ctrl.filtersOpened || $ctrl.allProductsBanners}">
		<category-countdown category="$ctrl.loadedCategory" ng-if="$ctrl.categoryCountdown.enabled"></category-countdown>
		<div id="gridHeader" class="grid-product-header clearfix ng-hide" ng-if="!$ctrl.allProductsBanners" ng-show="$ctrl.hasProducts()" fixed-element fixed-element-scroll="false" fixed-element-visibility="$ctrl.hasProducts()"> 
			<div class="push-left filter-button" ng-click="$ctrl.toggleFilters()">
				<div class="hide-mobile">
					<span class="text" ng-if="$ctrl.filtersOpened">Hide filters</span>
					<span class="text" ng-if="!$ctrl.filtersOpened">Show filters</span>
					<span class="filter-title-ico ico ico-arrow-down-gray-sm"></span>
				</div>
				<div class="is-mobile">
					<span class="ico ico-mobile ico-centered ico-filter-small"></span><span class="grid-product-header-filter ico-centered">Filter</span>
				</div>
			</div>
			<bsk-breadcrumb class="category-breadcrumb limit-max-width hide-mobile push-left" category="$ctrl.loadedCategory"></bsk-breadcrumb>
			<div class="grid-product-header-element grid-product-header-sort"">
				<bsk-sort class="sort-elements-container"></bsk-sort>
			</div>
			<bsk-grid-size storage-key="GRID_COLUMNS" change="$ctrl.updateGridColumns(columns)" class="grid-product-header-element view push-right"></bsk-grid-size>
		</div>
		<div class="clearfix category-container" ng-if="$ctrl.hasProducts() || (!$ctrl.hasVisibleProducts() && !$ctrl.loadingGrid)">
			<div fixed-element fixed-element-offset-top="35" fixed-element-visibility="$ctrl.filtersOpened" ng-show="$ctrl.filtersOpened" class="fixed-filters-container" ng-if="!$ctrl.allProductsBanners">
				<bsk-filters close="$ctrl.closeFilters()" class="fixed-filters-container" ng-show="$ctrl.filtersOpened"></bsk-filters>
			</div>
			<div class="productGrid clearfix" id="productGrid">
<!-- BEGIN SPOT=BK3_ESpot_Top_Grid -->
<style>

        /**
         * Swiper 4.4.6
         * Most modern mobile touch slider and framework with hardware accelerated transitions
         * http://www.idangero.us/swiper/
         *
         * Copyright 2014-2018 Vladimir Kharlampidi
         *
         * Released under the MIT License
         *
         * Released on: December 19, 2018
         */
        
        .swiper-container {
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            list-style: none;
            padding: 0;
            z-index: 1
        }
        
        .swiper-container-no-flexbox .swiper-slide {
            float: left
        }
        
        .swiper-container-vertical>.swiper-wrapper {
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -webkit-flex-direction: column;
            -ms-flex-direction: column;
            flex-direction: column
        }
        
        .swiper-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            z-index: 1;
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-transition-property: -webkit-transform;
            transition-property: -webkit-transform;
            -o-transition-property: transform;
            transition-property: transform;
            transition-property: transform, -webkit-transform;
            -webkit-box-sizing: content-box;
            box-sizing: content-box
        }
        
        .swiper-container-android .swiper-slide,
        .swiper-wrapper {
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0)
        }
        
        .swiper-container-multirow>.swiper-wrapper {
            -webkit-flex-wrap: wrap;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap
        }
        
        .swiper-container-free-mode>.swiper-wrapper {
            -webkit-transition-timing-function: ease-out;
            -o-transition-timing-function: ease-out;
            transition-timing-function: ease-out;
            margin: 0 auto
        }
        
        .swiper-slide {
            -webkit-flex-shrink: 0;
            -ms-flex-negative: 0;
            flex-shrink: 0;
            width: 100%;
            height: 100%;
            position: relative;
            -webkit-transition-property: -webkit-transform;
            transition-property: -webkit-transform;
            -o-transition-property: transform;
            transition-property: transform;
            transition-property: transform, -webkit-transform
        }
        
        .swiper-slide-invisible-blank {
            visibility: hidden
        }
        
        .swiper-container-autoheight,
        .swiper-container-autoheight .swiper-slide {
            height: auto
        }
        
        .swiper-container-autoheight .swiper-wrapper {
            -webkit-box-align: start;
            -webkit-align-items: flex-start;
            -ms-flex-align: start;
            align-items: flex-start;
            -webkit-transition-property: height, -webkit-transform;
            transition-property: height, -webkit-transform;
            -o-transition-property: transform, height;
            transition-property: transform, height;
            transition-property: transform, height, -webkit-transform
        }
        
        .swiper-container-3d {
            -webkit-perspective: 1200px;
            perspective: 1200px
        }
        
        .swiper-container-3d .swiper-cube-shadow,
        .swiper-container-3d .swiper-slide,
        .swiper-container-3d .swiper-slide-shadow-bottom,
        .swiper-container-3d .swiper-slide-shadow-left,
        .swiper-container-3d .swiper-slide-shadow-right,
        .swiper-container-3d .swiper-slide-shadow-top,
        .swiper-container-3d .swiper-wrapper {
            -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d
        }
        
        .swiper-container-3d .swiper-slide-shadow-bottom,
        .swiper-container-3d .swiper-slide-shadow-left,
        .swiper-container-3d .swiper-slide-shadow-right,
        .swiper-container-3d .swiper-slide-shadow-top {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10
        }
        
        .swiper-container-3d .swiper-slide-shadow-left {
            background-image: -webkit-gradient(linear, right top, left top, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));
            background-image: -webkit-linear-gradient(right, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: -o-linear-gradient(right, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: linear-gradient(to left, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))
        }
        
        .swiper-container-3d .swiper-slide-shadow-right {
            background-image: -webkit-gradient(linear, left top, right top, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));
            background-image: -webkit-linear-gradient(left, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: -o-linear-gradient(left, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: linear-gradient(to right, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))
        }
        
        .swiper-container-3d .swiper-slide-shadow-top {
            background-image: -webkit-gradient(linear, left bottom, left top, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));
            background-image: -webkit-linear-gradient(bottom, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: -o-linear-gradient(bottom, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: linear-gradient(to top, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))
        }
        
        .swiper-container-3d .swiper-slide-shadow-bottom {
            background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));
            background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: -o-linear-gradient(top, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: linear-gradient(to bottom, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))
        }
        
        .swiper-container-wp8-horizontal,
        .swiper-container-wp8-horizontal>.swiper-wrapper {
            -ms-touch-action: pan-y;
            touch-action: pan-y
        }
        
        .swiper-container-wp8-vertical,
        .swiper-container-wp8-vertical>.swiper-wrapper {
            -ms-touch-action: pan-x;
            touch-action: pan-x
        }
        
        .swiper-button-next,
        .swiper-button-prev {
            position: absolute;
            top: 50%;
            width: 27px;
            height: 44px;
            margin-top: -22px;
            z-index: 10;
            cursor: pointer;
            background-size: 27px 44px;
            background-position: center;
            background-repeat: no-repeat
        }
        
        .swiper-button-next.swiper-button-disabled,
        .swiper-button-prev.swiper-button-disabled {
            opacity: .35;
            cursor: auto;
            pointer-events: none
        }
        
        .swiper-button-prev,
        .swiper-container-rtl .swiper-button-next {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M0%2C22L22%2C0l2.1%2C2.1L4.2%2C22l19.9%2C19.9L22%2C44L0%2C22L0%2C22L0%2C22z'%20fill%3D'%23007aff'%2F%3E%3C%2Fsvg%3E");
            left: 10px;
            right: auto
        }
        
        .swiper-button-next,
        .swiper-container-rtl .swiper-button-prev {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M27%2C22L27%2C22L5%2C44l-2.1-2.1L22.8%2C22L2.9%2C2.1L5%2C0L27%2C22L27%2C22z'%20fill%3D'%23007aff'%2F%3E%3C%2Fsvg%3E");
            right: 10px;
            left: auto
        }
        
        .swiper-button-prev.swiper-button-white,
        .swiper-container-rtl .swiper-button-next.swiper-button-white {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M0%2C22L22%2C0l2.1%2C2.1L4.2%2C22l19.9%2C19.9L22%2C44L0%2C22L0%2C22L0%2C22z'%20fill%3D'%23ffffff'%2F%3E%3C%2Fsvg%3E")
        }
        
        .swiper-button-next.swiper-button-white,
        .swiper-container-rtl .swiper-button-prev.swiper-button-white {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M27%2C22L27%2C22L5%2C44l-2.1-2.1L22.8%2C22L2.9%2C2.1L5%2C0L27%2C22L27%2C22z'%20fill%3D'%23ffffff'%2F%3E%3C%2Fsvg%3E")
        }
        
        .swiper-button-prev.swiper-button-black,
        .swiper-container-rtl .swiper-button-next.swiper-button-black {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M0%2C22L22%2C0l2.1%2C2.1L4.2%2C22l19.9%2C19.9L22%2C44L0%2C22L0%2C22L0%2C22z'%20fill%3D'%23000000'%2F%3E%3C%2Fsvg%3E")
        }
        
        .swiper-button-next.swiper-button-black,
        .swiper-container-rtl .swiper-button-prev.swiper-button-black {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M27%2C22L27%2C22L5%2C44l-2.1-2.1L22.8%2C22L2.9%2C2.1L5%2C0L27%2C22L27%2C22z'%20fill%3D'%23000000'%2F%3E%3C%2Fsvg%3E")
        }
        
        .swiper-button-lock {
            display: none
        }
        
        .swiper-pagination {
            position: absolute;
            text-align: center;
            -webkit-transition: .3s opacity;
            -o-transition: .3s opacity;
            transition: .3s opacity;
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
            z-index: 10
        }
        
        .swiper-pagination.swiper-pagination-hidden {
            opacity: 0
        }
        
        .swiper-container-horizontal>.swiper-pagination-bullets,
        .swiper-pagination-custom,
        .swiper-pagination-fraction {
            bottom: 10px;
            left: 0;
            width: 100%
        }
        
        .swiper-pagination-bullets-dynamic {
            overflow: hidden;
            font-size: 0
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet {
            -webkit-transform: scale(.33);
            -ms-transform: scale(.33);
            transform: scale(.33);
            position: relative
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active {
            -webkit-transform: scale(1);
            -ms-transform: scale(1);
            transform: scale(1)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main {
            -webkit-transform: scale(1);
            -ms-transform: scale(1);
            transform: scale(1)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev {
            -webkit-transform: scale(.66);
            -ms-transform: scale(.66);
            transform: scale(.66)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev {
            -webkit-transform: scale(.33);
            -ms-transform: scale(.33);
            transform: scale(.33)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next {
            -webkit-transform: scale(.66);
            -ms-transform: scale(.66);
            transform: scale(.66)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next {
            -webkit-transform: scale(.33);
            -ms-transform: scale(.33);
            transform: scale(.33)
        }
        
        .swiper-pagination-bullet {
            width: 8px;
            height: 8px;
            display: inline-block;
            border-radius: 100%;
            background: #000;
            opacity: .2
        }
        
        button.swiper-pagination-bullet {
            border: none;
            margin: 0;
            padding: 0;
            -webkit-box-shadow: none;
            box-shadow: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none
        }
        
        .swiper-pagination-clickable .swiper-pagination-bullet {
            cursor: pointer
        }
        
        .swiper-pagination-bullet-active {
            opacity: 1;
            background: #007aff
        }
        
        .swiper-container-vertical>.swiper-pagination-bullets {
            right: 10px;
            top: 50%;
            -webkit-transform: translate3d(0, -50%, 0);
            transform: translate3d(0, -50%, 0)
        }
        
        .swiper-container-vertical>.swiper-pagination-bullets .swiper-pagination-bullet {
            margin: 6px 0;
            display: block
        }
        
        .swiper-container-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic {
            top: 50%;
            -webkit-transform: translateY(-50%);
            -ms-transform: translateY(-50%);
            transform: translateY(-50%);
            width: 8px
        }
        
        .swiper-container-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet {
            display: inline-block;
            -webkit-transition: .2s top, .2s -webkit-transform;
            transition: .2s top, .2s -webkit-transform;
            -o-transition: .2s transform, .2s top;
            transition: .2s transform, .2s top;
            transition: .2s transform, .2s top, .2s -webkit-transform
        }
        
        .swiper-container-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet {
            margin: 0 4px
        }
        
        .swiper-container-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic {
            left: 50%;
            -webkit-transform: translateX(-50%);
            -ms-transform: translateX(-50%);
            transform: translateX(-50%);
            white-space: nowrap
        }
        
        .swiper-container-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet {
            -webkit-transition: .2s left, .2s -webkit-transform;
            transition: .2s left, .2s -webkit-transform;
            -o-transition: .2s transform, .2s left;
            transition: .2s transform, .2s left;
            transition: .2s transform, .2s left, .2s -webkit-transform
        }
        
        .swiper-container-horizontal.swiper-container-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet {
            -webkit-transition: .2s right, .2s -webkit-transform;
            transition: .2s right, .2s -webkit-transform;
            -o-transition: .2s transform, .2s right;
            transition: .2s transform, .2s right;
            transition: .2s transform, .2s right, .2s -webkit-transform
        }
        
        .swiper-pagination-progressbar {
            background: rgba(0, 0, 0, .25);
            position: absolute
        }
        
        .swiper-pagination-progressbar .swiper-pagination-progressbar-fill {
            background: #007aff;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            -webkit-transform: scale(0);
            -ms-transform: scale(0);
            transform: scale(0);
            -webkit-transform-origin: left top;
            -ms-transform-origin: left top;
            transform-origin: left top
        }
        
        .swiper-container-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill {
            -webkit-transform-origin: right top;
            -ms-transform-origin: right top;
            transform-origin: right top
        }
        
        .swiper-container-horizontal>.swiper-pagination-progressbar,
        .swiper-container-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite {
            width: 100%;
            height: 4px;
            left: 0;
            top: 0
        }
        
        .swiper-container-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,
        .swiper-container-vertical>.swiper-pagination-progressbar {
            width: 4px;
            height: 100%;
            left: 0;
            top: 0
        }
        
        .swiper-pagination-white .swiper-pagination-bullet-active {
            background: #fff
        }
        
        .swiper-pagination-progressbar.swiper-pagination-white {
            background: rgba(255, 255, 255, .25)
        }
        
        .swiper-pagination-progressbar.swiper-pagination-white .swiper-pagination-progressbar-fill {
            background: #fff
        }
        
        .swiper-pagination-black .swiper-pagination-bullet-active {
            background: #000
        }
        
        .swiper-pagination-progressbar.swiper-pagination-black {
            background: rgba(0, 0, 0, .25)
        }
        
        .swiper-pagination-progressbar.swiper-pagination-black .swiper-pagination-progressbar-fill {
            background: #000
        }
        
        .swiper-pagination-lock {
            display: none
        }
        
        .swiper-scrollbar {
            border-radius: 10px;
            position: relative;
            -ms-touch-action: none;
            background: rgba(0, 0, 0, .1)
        }
        
        .swiper-container-horizontal>.swiper-scrollbar {
            position: absolute;
            left: 1%;
            bottom: 3px;
            z-index: 50;
            height: 5px;
            width: 98%
        }
        
        .swiper-container-vertical>.swiper-scrollbar {
            position: absolute;
            right: 3px;
            top: 1%;
            z-index: 50;
            width: 5px;
            height: 98%
        }
        
        .swiper-scrollbar-drag {
            height: 100%;
            width: 100%;
            position: relative;
            background: rgba(0, 0, 0, .5);
            border-radius: 10px;
            left: 0;
            top: 0
        }
        
        .swiper-scrollbar-cursor-drag {
            cursor: move
        }
        
        .swiper-scrollbar-lock {
            display: none
        }
        
        .swiper-zoom-container {
            width: 100%;
            height: 100%;
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-pack: center;
            -webkit-justify-content: center;
            -ms-flex-pack: center;
            justify-content: center;
            -webkit-box-align: center;
            -webkit-align-items: center;
            -ms-flex-align: center;
            align-items: center;
            text-align: center
        }
        
        .swiper-zoom-container>canvas,
        .swiper-zoom-container>img,
        .swiper-zoom-container>svg {
            max-width: 100%;
            max-height: 100%;
            -o-object-fit: contain;
            object-fit: contain
        }
        
        .swiper-slide-zoomed {
            cursor: move
        }
        
        .swiper-lazy-preloader {
            width: 42px;
            height: 42px;
            position: absolute;
            left: 50%;
            top: 50%;
            margin-left: -21px;
            margin-top: -21px;
            z-index: 10;
            -webkit-transform-origin: 50%;
            -ms-transform-origin: 50%;
            transform-origin: 50%;
            -webkit-animation: swiper-preloader-spin 1s steps(12, end) infinite;
            animation: swiper-preloader-spin 1s steps(12, end) infinite
        }
        
        .swiper-lazy-preloader:after {
            display: block;
            content: '';
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D'0%200%20120%20120'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20xmlns%3Axlink%3D'http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink'%3E%3Cdefs%3E%3Cline%20id%3D'l'%20x1%3D'60'%20x2%3D'60'%20y1%3D'7'%20y2%3D'27'%20stroke%3D'%236c6c6c'%20stroke-width%3D'11'%20stroke-linecap%3D'round'%2F%3E%3C%2Fdefs%3E%3Cg%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(30%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(60%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(90%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(120%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(150%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.37'%20transform%3D'rotate(180%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.46'%20transform%3D'rotate(210%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.56'%20transform%3D'rotate(240%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.66'%20transform%3D'rotate(270%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.75'%20transform%3D'rotate(300%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.85'%20transform%3D'rotate(330%2060%2C60)'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");
            background-position: 50%;
            background-size: 100%;
            background-repeat: no-repeat
        }
        
        .swiper-lazy-preloader-white:after {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D'0%200%20120%20120'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20xmlns%3Axlink%3D'http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink'%3E%3Cdefs%3E%3Cline%20id%3D'l'%20x1%3D'60'%20x2%3D'60'%20y1%3D'7'%20y2%3D'27'%20stroke%3D'%23fff'%20stroke-width%3D'11'%20stroke-linecap%3D'round'%2F%3E%3C%2Fdefs%3E%3Cg%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(30%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(60%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(90%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(120%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(150%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.37'%20transform%3D'rotate(180%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.46'%20transform%3D'rotate(210%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.56'%20transform%3D'rotate(240%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.66'%20transform%3D'rotate(270%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.75'%20transform%3D'rotate(300%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.85'%20transform%3D'rotate(330%2060%2C60)'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E")
        }
        
        @-webkit-keyframes swiper-preloader-spin {
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg)
            }
        }
        
        @keyframes swiper-preloader-spin {
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg)
            }
        }
        
        .swiper-container .swiper-notification {
            position: absolute;
            left: 0;
            top: 0;
            pointer-events: none;
            opacity: 0;
            z-index: -1000
        }
        
        .swiper-container-fade.swiper-container-free-mode .swiper-slide {
            -webkit-transition-timing-function: ease-out;
            -o-transition-timing-function: ease-out;
            transition-timing-function: ease-out
        }
        
        .swiper-container-fade .swiper-slide {
            pointer-events: none;
            -webkit-transition-property: opacity;
            -o-transition-property: opacity;
            transition-property: opacity
        }
        
        .swiper-container-fade .swiper-slide .swiper-slide {
            pointer-events: none
        }
        
        .swiper-container-fade .swiper-slide-active,
        .swiper-container-fade .swiper-slide-active .swiper-slide-active {
            pointer-events: auto
        }
        
        .swiper-container-cube {
            overflow: visible
        }
        
        .swiper-container-cube .swiper-slide {
            pointer-events: none;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            z-index: 1;
            visibility: hidden;
            -webkit-transform-origin: 0 0;
            -ms-transform-origin: 0 0;
            transform-origin: 0 0;
            width: 100%;
            height: 100%
        }
        
        .swiper-container-cube .swiper-slide .swiper-slide {
            pointer-events: none
        }
        
        .swiper-container-cube.swiper-container-rtl .swiper-slide {
            -webkit-transform-origin: 100% 0;
            -ms-transform-origin: 100% 0;
            transform-origin: 100% 0
        }
        
        .swiper-container-cube .swiper-slide-active,
        .swiper-container-cube .swiper-slide-active .swiper-slide-active {
            pointer-events: auto
        }
        
        .swiper-container-cube .swiper-slide-active,
        .swiper-container-cube .swiper-slide-next,
        .swiper-container-cube .swiper-slide-next+.swiper-slide,
        .swiper-container-cube .swiper-slide-prev {
            pointer-events: auto;
            visibility: visible
        }
        
        .swiper-container-cube .swiper-slide-shadow-bottom,
        .swiper-container-cube .swiper-slide-shadow-left,
        .swiper-container-cube .swiper-slide-shadow-right,
        .swiper-container-cube .swiper-slide-shadow-top {
            z-index: 0;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden
        }
        
        .swiper-container-cube .swiper-cube-shadow {
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            background: #000;
            opacity: .6;
            -webkit-filter: blur(50px);
            filter: blur(50px);
            z-index: 0
        }
        
        .swiper-container-flip {
            overflow: visible
        }
        
        .swiper-container-flip .swiper-slide {
            pointer-events: none;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            z-index: 1
        }
        
        .swiper-container-flip .swiper-slide .swiper-slide {
            pointer-events: none
        }
        
        .swiper-container-flip .swiper-slide-active,
        .swiper-container-flip .swiper-slide-active .swiper-slide-active {
            pointer-events: auto
        }
        
        .swiper-container-flip .swiper-slide-shadow-bottom,
        .swiper-container-flip .swiper-slide-shadow-left,
        .swiper-container-flip .swiper-slide-shadow-right,
        .swiper-container-flip .swiper-slide-shadow-top {
            z-index: 0;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden
        }
        
        .swiper-container-coverflow .swiper-wrapper {
            -ms-perspective: 1200px
        }
        
        </style>
        
          <!-- Demo styles -->
          <style>
            .swiper-container {
              width: 100%;
              height: 100%;
            }
            .swiper-slide {
              text-align: center;
              font-size: 18px;
              background: #fff;
              /* Center slide text vertically */
              display: block;
            }
        
        
            .swiper-container .img-responsive{
                width:100%;
            }
        
            .carousel-pants{
                margin: 20px 20px;
            }
        
            .carousel-pants h2{
                font-size: 23px;
                font-weight: bold;
                text-transform: initial;
                letter-spacing: 0.9px;
                margin-bottom: 20px;
            }
        
            .carousel-pants p{
                font-size: 16px;
                margin-top: 25px;
                display: inline-block;
            }
        
            .carousel-pants .close{
                margin-left: 7px;
                display: none;
            }
        
            .carousel-pants .close img{
                width: 13px;
                vertical-align: middle;
            }
        
            .carousel-pants .swiper-button-next {
                background-image: url("https://static.bershka.net/4/static/itxwebstandard/images/home/carrusel/pants/Icn_arrow_right.svg?20190517033500");
                top: calc(50% - 25px);
                right: 0;
            }
            .carousel-pants .swiper-button-prev {
                background-image: url("https://static.bershka.net/4/static/itxwebstandard/images/home/carrusel/pants/Icn_arrow_left.svg?20190517033500");
                top: calc(50% - 25px);
                left: 0;
            }
            .carousel-pants .swiper-button-next, .swiper-button-prev{
                width: 40px;
                background-size: 40px 44px;
            }
            .carousel-pants .swiper-button-next.swiper-button-disabled, .swiper-button-prev.swiper-button-disabled{
                opacity: 0;
            }
            .carousel-pants .swiper-container .swiper-slide.active .close{
                display: inline-block;
            }
            .carousel-pants .swiper-container .swiper-slide.active p{
                font-weight: bold;
            }
            .carousel-pants .swiper-container .swiper-slide{
                cursor: pointer;
                opacity: 1;
            }
            .carousel-pants .swiper-container .swiper-slide.opacity{
                cursor: pointer;
                opacity: 0.5;
            }
            .carousel-pants .swiper-number-products{
                color: #B2B2B2;
            }
        
        
        
        .carousel-pants .scrolling-wrapper {
          overflow-x: scroll;
          overflow-y: hidden;
          white-space: nowrap;
        }
        .carousel-pants .scrolling-wrapper .card {
          display: inline-block;
        }
        
        .carousel-pants .scrolling-wrapper-flexbox {
          display: flex;
          flex-wrap: nowrap;
          overflow-x: auto;
        }
        .carousel-pants .scrolling-wrapper-flexbox .card {
          flex: 0 0 auto;
          margin-right: 3px;
        }
        
        .carousel-pants .card {
          border: 1px solid white;
          width: 150px;
        }
        
        .carousel-pants .card p{
            font-weight: bold;
            font-size: 14px;
        }
        
        .carousel-pants .scrolling-wrapper, .carousel-pants .scrolling-wrapper-flexbox {
          width: 100%;
          -webkit-overflow-scrolling: touch;
          text-align: center;
        }
        .carousel-pants .scrolling-wrapper::-webkit-scrollbar, .carousel-pants .scrolling-wrapper-flexbox::-webkit-scrollbar {
          display: none;
        }
        
        .carousel-pants .hr{
            height: 1px;
            color: #E1E1E1;
            display: block;
            opacity: 0.5;
            margin-top: 35px;
        }
        
        @media (min-width: 769px){
            .carousel-pants.no-desktop {
                display: none;
            }
            /* #pantone-man .swiper-wrapper,
            #pantone-woman .swiper-wrapper{
                display: flex;
                justify-content: center;
            } */
            #pantone-man,
            #pantone-woman{
                display: none;
            }
        }
        
        @media (max-width: 768px){
            .carousel-pants.no-mobile {
                display: none;
            }
            .carousel-pants{
                margin: 10px 8px;
            }
            .carousel-pants p {
                font-size: 14px;
                margin-top: 15px;
                display: inline-block;
                margin-bottom: 10px;
            }
            .carousel-pants .hr{
                height: 1px;
                color: #E1E1E1;
                display: block;
                opacity: 0.5;
                margin-top: inherit;
            }
        }
        
        
          </style>
        
          <!-- Swiper -->
          <div class="carousel-pants" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193216">
            <div data-translations="Carousel">
                <!--<h2 class="no-mobile txtFit"></h2>-->
                <div class="swiper-container" swiper category-id="1010193216">
                    <div class="swiper-wrapper">
                    </div>
                    <!-- Add Arrows -->
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
        
        
            <!-- Swiper -->
          <div class="carousel-pants" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193217">
            <div data-translations="Carousel">
                <!--<h2 class="no-mobile txtShirts"></h2>-->
                <div class="swiper-container" swiper category-id="1010193217">
                    <div class="swiper-wrapper">
                    </div>
                    <!-- Add Arrows -->
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
        
        <!-- Swiper -->
          <div class="carousel-pants" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010276029">
            <div data-translations="Carousel">
                <!--<h2 class="no-mobile txtFit"></h2>-->
                <div class="swiper-container" swiper category-id="1010276029">
                    <div class="swiper-wrapper">
                    </div>
                    <!-- Add Arrows -->
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
        
          <!-- Swiper -->
          <div class="carousel-pants" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193238">
            <div data-translations="Carousel">
                <!--<h2 class="no-mobile txtFit"></h2>-->
                <div class="swiper-container" swiper category-id="1010193238">
                    <div class="swiper-wrapper">
                    </div>
                    <!-- Add Arrows -->
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
        
        
          <!-- Swiper pantone woman-->
          <div class="carousel-pants" id="pantone-woman" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010358016">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010358016">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
          <!-- Swiper pantone man-->
          <div class="carousel-pants" id="pantone-man" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010358017">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010358017">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->


          <!-- Swiper shoes woman-->
          <div class="carousel-pants" id="shoes-woman" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193192">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010193192">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->


          <!-- Swiper shoes man-->
          <div class="carousel-pants" id="shoes-man" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193202">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010193202">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->


        <!-- Swiper shoes man-->
          <div class="carousel-pants" id="camisetas-man" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193239">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010193239">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
<!-- END SPOT=BK3_ESpot_Top_Grid -->
<!-- BEGIN SPOT=BK3_ESpot_Top_Grid_null -->

<!-- END SPOT=BK3_ESpot_Top_Grid_null -->
				<bsk-category-seo-links ng-if="$ctrl.hasProducts() && $ctrl.showSeoHeader" category="$ctrl.loadedCategory" class="category-seo-links" ng-class="{'top-category-seo-links': $ctrl.showSeoHeader}"></bsk-category-seo-links>
				<div id="grid_images">
					<div class="no-results ng-hide" ng-show="!$ctrl.hasVisibleProducts() && !$ctrl.loadingGrid">
						<div class="no-results-content">
							<h2 class="no-results-title">OOOPS!</h2>
							<p class="no-results-text">Sorry, no items have been found with the selected characteristics</p>
						</div>							
					</div>
	
					<div ng-repeat="subgrid in $ctrl.subgrids track by $index" ng-if="$ctrl.subgrids.length && $ctrl.showSubgrids" class="subgrid-container">
						<div ng-if="subgrid.hasVisibleProducts()" class="subgrid-container-hider">
							<div class="subgrid-title-container grid-item-container" ng-if="::(subgrid.title || subgrid.description)">
								<div class="subgrid-title-text subgrid-title-element" ng-if="::subgrid.title">{{::subgrid.title}}</div>
								<div class="subgrid-title-description subgrid-title-element" ng-if="::subgrid.description">{{::subgrid.description}}</div>
							</div>
							<br ng-repeat-start="product in subgrid.products"
								ng-cloak
								ng-if="product.isSeparator && $ctrl.showSeparators && $ctrl.isFiltered(product) && product.visibleIndex!=0"
								on-repeat-end="$ctrl.goToProduct()">
							<grid-product
								ng-repeat-end
								class="item item-{{::product.bundleId}}"
								product="product"
								ng-show="$ctrl.isFiltered(product)"
								ng-class="{'double-size': product.isDoubleSize, 'has-videos': product.hasVideos, 'is-separator': product.isSeparator, 'is-banner': product.isBanner}"></grid-product>
						</div>
					</div>
					<div ng-if="!$ctrl.subgrids.length || !$ctrl.showSubgrids">
						<br ng-repeat-start="product in $ctrl.gridProductService.products"
							ng-cloak
							ng-if="product.isSeparator && $ctrl.showSeparators && $ctrl.isFiltered(product) && product.visibleIndex!=0"
							on-repeat-end="$ctrl.goToProduct()">
						<grid-product
							ng-repeat-end
							class="item item-{{::product.bundleId}}"
							product="product"
							ng-show="$ctrl.isFiltered(product)"
							ng-class="{'double-size': product.isDoubleSize, 'has-videos': product.hasVideos, 'is-separator': product.isSeparator, 'is-banner': product.isBanner}"></grid-product>
						<div ng-if="$ctrl.lastSizesProductService.hasVisibleProducts() && $ctrl.loadedCategory._config.showLastSizes">
							<div class="last-sizes-title-container clearfix"">
								<span class="last-sizes-title-text">{{$ctrl.loadedCategory._config.lastSizesTitle}}</span>
								<span class="last-sizes-title-quantity">{{$ctrl.getNumberResultsText($ctrl.lastSizesProductService)}}</span>
							</div>
							<grid-product
								ng-repeat="product in $ctrl.lastSizesProductService.products"
								class="item item-{{::product.bundleId}}"
								product="product"
								ng-show="$ctrl.isFiltered(product)"
								ng-class="{'double-size': product.isDoubleSize, 'has-videos': product.hasVideos}"></grid-product>
						</div>
					</div>
					<bsk-category-seo ng-if="$ctrl.hasProducts() && !$ctrl.allProductsBanners" category="$ctrl.loadedCategory" class="category-seo-footer"></bsk-category-seo>
					<bsk-category-seo-links exclusive ng-if="$ctrl.hasProducts() && !$ctrl.showSeoHeader && !$ctrl.allProductsBanners" category="$ctrl.loadedCategory" class="category-seo-links"></bsk-category-seo-links>
				</div>
				<!-- Category mobile navigation -->
				<div class="category-nav">
					<a class="nav-button prev btn btn-cta2" ng-href="{{$ctrl.prevCategory._config.url}}" ng-if="$ctrl.prevCategory" ng-click="$ctrl.goToCategory($ctrl.prevCategory,$event)">
						<span class="ico ico-arrow-left"></span>
						<span class="nav-button-text" ng-bind-html="$ctrl.prevCategory.name | to_trusted"></span>
					</a>
					<a class="nav-button next btn btn-cta2" ng-href="{{$ctrl.nextCategory._config.url}}" ng-if="$ctrl.nextCategory" ng-click="$ctrl.goToCategory($ctrl.nextCategory, $event)">
						<span class="nav-button-text" ng-bind-html="$ctrl.nextCategory.name | to_trusted"></span>
						<span class="ico ico-arrow-right"></span>
					</a>
				</div>
<!-- BEGIN SPOT=BK3_ESpot_Bottom_Grid -->

<!-- END SPOT=BK3_ESpot_Bottom_Grid -->
<!-- BEGIN SPOT=BK3_ESpot_Bottom_Grid_null -->

<!-- END SPOT=BK3_ESpot_Bottom_Grid_null -->
			</div>
		</div>
	</div>
	
	<bsk-top bsk-outside="footer" class="bskToTop" ng-if="$ctrl.hasProducts()"></bsk-top>
	
	<div id="fixed-chat" class="fixed-chat table full-width" ng-if="$ctrl.gridChatEnabled" bsk-outside="footer">
		<span class="full-width table-cell need-help-text strong">Need Help?</span>
		<div class="table-cell">
			<contact show-title="0" show-email-info="0" show-phone-info="0" show-hours-info="0"></contact>
		</div>
	</div>
	
	<bsk-last-viewed cart="1" wishlist="1" class="last-viewed-container" ng-if="$ctrl.hasProducts()"></bsk-last-viewed>
</div>
	</script>

	<script type="text/ng-template" id="tplCategoryCountdown">
<div class="countdown-container" ng-style="::$ctrl.constants.style.container" ng-if="$ctrl.showCountdown" ng-class="{'is-private-sale': $ctrl.categoryFactory.oCategory._config.isPrivateSale}">
	<div class="countdown-message" ng-style="::$ctrl.constants.style.text" ng-if="!$ctrl.categoryFactory.oCategory._config.isPrivateSale">
		<span ng-if="$ctrl.days > 0">Last few days!</span>
		<span ng-if="$ctrl.days == 0 && $ctrl.hours > 0">Last few hours!</span>
		<span ng-if="$ctrl.days == 0 && $ctrl.hours == 0">Last few minutes!</span>
	</div>
	<div class="countdown-message" ng-style="::$ctrl.constants.style.text" ng-if="$ctrl.categoryFactory.oCategory._config.isPrivateSale">
		<span ng-if="$ctrl.days > 0">Final days of exclusive access!</span>
		<span ng-if="$ctrl.days == 0 && $ctrl.hours > 0">Final hours of exclusive access!</span>
		<span ng-if="$ctrl.days == 0 && $ctrl.hours == 0">Final minutes of exclusive access!</span>
	</div>
	<div class="countdown-count">
		<div class="countdown-days countdown-segment" ng-if="$ctrl.days > 0">
			<div class="count" ng-style="::$ctrl.constants.style.count">{{$ctrl.days}}</div>
			<div class="label" ng-style="::$ctrl.constants.style.label">days</div>
		</div>
		<div class="countdown-separator countdown-segment" ng-if="$ctrl.days > 0">
			<div class="count" ng-style="::$ctrl.constants.style.count">:</div>
			<div class="label" ng-style="::$ctrl.constants.style.label">&nbsp;</div>
		</div>
		<div class="countdown-hours countdown-segment">
			<div class="count" ng-style="::$ctrl.constants.style.count">{{$ctrl.hours}}</div>
			<div class="label" ng-style="::$ctrl.constants.style.label">hours</div>			
		</div>
		<div class="countdown-separator countdown-segment">
			<div class="count" ng-style="::$ctrl.constants.style.count">:</div>
			<div class="label" ng-style="::$ctrl.constants.style.label">&nbsp;</div>
		</div>
		<div class="countdown-minutes countdown-segment">
			<div class="count" ng-style="::$ctrl.constants.style.count">{{$ctrl.minutes}}</div>
			<div class="label" ng-style="::$ctrl.constants.style.label">min.</div>			
		</div>
		<div class="countdown-separator countdown-segment">
			<div class="count" ng-style="::$ctrl.constants.style.count">:</div>
			<div class="label" ng-style="::$ctrl.constants.style.label">&nbsp;</div>
		</div>
		<div class="countdown-seconds countdown-segment">
			<div class="count" ng-style="::$ctrl.constants.style.count">{{$ctrl.seconds}}</div>
			<div class="label" ng-style="::$ctrl.constants.style.label">sec.</div>			
		</div>
	</div>
</div>	</script>

	<script type="text/ng-template" id="tplTipologyCarousel">
<bsk-carousel class="cross-selling-slider" settings="$ctrl.settings" ng-if="$ctrl.descriptors" on-demand="{{::$ctrl.onDemand}}" on-demand-wait="{{::$ctrl.onDemand}}">
	<tipology-slider bsk-carousel-slide ng-repeat="descriptor in $ctrl.descriptors" on-repeat-end-notify class="item cross-selling-slider-item" descriptor="descriptor"
		image-path="{{$ctrl.imagePath}}"></tipology-slider>
</bsk-carousel>
	</script>
	<script type="text/ng-template" id="tplTipologySlider">
<div class="grid-item-container related-product-container related-tipology" ng-class="{active: $ctrl.descriptor.selected}">
	<div class="related-tipology-mask"></div>
	<div class="image">
		<a ng-href="{{$ctrl.descriptor.category._config.linkCategoryUrl}}" ng-click="$ctrl.goToCategory($event)">
			<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAM1CAMAAADXY7BjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTQyREQxQTNBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTQyREQxQTJBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjJGREM5MkFEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjJGREM5M0FEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrQaECUAAAAGUExURQAAAAAAAKVnuc8AAAABdFJOUwBA5thmAAACF0lEQVR42uzBAQ0AAADCoPdPbQ8HFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcGECDAAILQABH8QQ9gAAAABJRU5ErkJggg=="
				ng-attr-alt-src="{{$ctrl.image}}" bsk-alt="$ctrl.descriptor.label">
		</a>
	</div>
	<div class="prodinfo" ng-if="$ctrl.descriptor.label">
		<a ng-href="{{$ctrl.descriptor.category._config.linkCategoryUrl}}" ng-click="$ctrl.goToCategory($event)">
			<span class="hashtags ellipsis" ng-bind-html="$ctrl.descriptor.label | to_trusted"></span>
		</a>
	</div>
</div>
	</script>

	<script type="text/ng-template" id="tplChat">
<div class="chat-container"><!-- ng-hide="$ctrl.deviceService.isTabletScreen() && $ctrl.$rootScope.menuVisible"> --> 
    <div class="itx-chat-client" ng-class="{'open': $ctrl.chatHelper.maximized}">
        <div class="itx-chat-title">
            <img src="/static/itxwebstandard/images/chat.svg?t=2019042416012446db2121485607" />
            <span>Chat</span>
            <img src="/static/itxwebstandard/images/minimizar.svg?t=2019042416012446db2121485607" class="itx-chat-minimize" ng-click="$ctrl.chatHelper.hide()" />
        </div>
        <div class="itx-chat-window">
        </div>
        <div class="itx-chat-attachment-window">
            <button type="button" class="itx-attachment-button"><img src="/static/itxwebstandard/images/adjuntar.svg?t=2019042416012446db2121485607"/></button>
            <input type="file" class="itx-input-file" accept="image/*" />
        </div>
        <div class="itx-chat-input-window">
            <input type="text" class="itx-chat-input" maxlength="250"/>
        </div>
        <div class="itx-chat-button-window">
            <button type="button" class="itx-chat-button"><img src="/static/itxwebstandard/images/enviar.svg?t=2019042416012446db2121485607" /></button>
        </div>
        <div class="itx-chat-selector-window">
            <input type="text" ng-model="$ctrl.name" name="name" placeholder="Name" />
            <input type="text" ng-model="$ctrl.email" name="mail" placeholder="Email" />
            <select class="itx-chat-selector">
            </select>
			<div class="itx-chat-pp" ng-if="$ctrl.GDPRHelper.active" ng-click="$ctrl.chatPrivacyCheck()">
				<a class="checkbox" ng-class="{active: $ctrl.privacyPolicy}"></a>
				<div class="itx-chat-pp-text">
					<span class="cursor-pointer">By joining the bershka.com chat, you confirm that you have been able to read and understand on the use of my personal data explained in the <a class="under" href="javascript:;" ng-click="chatCtrl.openPrivacyPolicy()">Privacy Policy</a> </span>
				</div>
			</div>
            <p class="itx-chat-pp" ng-if="!$ctrl.GDPRHelper.active">By accesing our chat you are accepting bershka.com Privacy Policy</p>
            <button class="itx-chat-init-button" ng-disabled="!$ctrl.loginIsValid()"  ng-click="$ctrl.chatHelper.track.submit()" >Start chat</button>
        </div>
    </div>
    <span class="itx-chat-place" ng-if="$ctrl.chatHelper.visible && $ctrl.deviceService.isDesktopScreen()">
        <button class="itx-chat-open-button" ng-click="$ctrl.chatHelper.show(); $ctrl.chatHelper.track.open();">
            <span>Chat</span>
        </button>
        <span class="messages" ng-if="$ctrl.chatHelper.unReadedMessages">{{ $ctrl.chatHelper.unReadedMessages }}</span>
    </span>
</div>
	</script>

	<script type="text/ng-template" id="tplBskCaptcha">
<div class="bsk-captcha">
	<ng-form name="$ctrl.captchaForm"> 
		<div class="captcha-input">
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.captchaForm.captcha.$valid, 'ng-invalid':!$ctrl.captchaForm.captcha.$valid && $ctrl.captchaForm.captcha.$touched}">
				<input type="text" name="captcha" ng-model="$ctrl.ngModel" required itx-placeholder ng-attr-placeholder="{{$ctrl.placeholder}}">
			</div>
			<form-error-messages for="captcha"></form-error-messages>
		</div>
		<div class="captcha-image">
			<img ng-src="{{$ctrl.img}}" class="captcha-image-real">
			<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL4AAAAyCAQAAABID6m1AAAAWElEQVR42u3QQREAAAwCoNm/9FJ4fiACOWaiQL585MtHvnzky0e+fOTLR7585MtHvnzky0e+fPnIl498+ciXj3z5yJePfPnIl498+ciXj3z58pEvH/nyaXq0YgAznAVsZAAAAABJRU5ErkJggg==" class="captcha-image-placeholder">
		</div>
		<div class="captcha-actions" ng-if="$ctrl.showReload || $ctrl.showTextToSpeech || $ctrl.showHelp">
			<div class="captcha-reload captcha-action" ng-if="$ctrl.showReload" ng-click="$ctrl.reload()"><span class="ico ico-round-arrow-black"></span></div>
			<div class="captcha-text-to-speech captcha-action" ng-if="$ctrl.showTextToSpeech" ng-click="$ctrl.read()"><span class="ico ico-text-to-speech"></span></div>
			<div class="captcha-info captcha-action" ng-if="$ctrl.showHelp" ng-click="$ctrl.help()"><span class="ico ico-help-small"></span></div>
		</div>
	</ng-form>
</div>	</script>

	<script type="text/ng-template" id="tplProductList">
<bsk-carousel class="cross-selling-slider" settings="$ctrl.settings" ng-if="$ctrl.products" on-demand="{{::$ctrl.onDemand}}" on-demand-wait="{{::$ctrl.onDemand}}">
	<related-product bsk-carousel-slide ng-repeat="product in $ctrl.products" on-repeat-end-notify class="item cross-selling-slider-item" product="product"
		index="$index" cart="{{::$ctrl.cart}}" wishlist="{{::$ctrl.wishlist}}" quickshop="{{::$ctrl.quickshop}}" source="{{::$ctrl.source}}" image-type="{{::$ctrl.imageType}}" image-size="{{::$ctrl.imageSize}}"></related-product>
</bsk-carousel>
	</script>
	<script type="text/ng-template" id="tplRelatedProduct">
<div class="grid-item-container related-product-container">
	<div class="image">
		<a ng-href="{{$ctrl.sProductUrl}}" ng-click="$ctrl.showQuickShop($event)" ng-if="::$ctrl.hasLinks">
			<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAM1CAMAAADXY7BjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTQyREQxQTNBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTQyREQxQTJBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjJGREM5MkFEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjJGREM5M0FEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrQaECUAAAAGUExURQAAAAAAAKVnuc8AAAABdFJOUwBA5thmAAACF0lEQVR42uzBAQ0AAADCoPdPbQ8HFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcGECDAAILQABH8QQ9gAAAABJRU5ErkJggg=="
				ng-attr-alt-src="{{$ctrl.sCurrentImageUrl}}" bsk-alt="$ctrl.product.name">
		</a>		
		<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAM1CAMAAADXY7BjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTQyREQxQTNBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTQyREQxQTJBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjJGREM5MkFEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjJGREM5M0FEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrQaECUAAAAGUExURQAAAAAAAKVnuc8AAAABdFJOUwBA5thmAAACF0lEQVR42uzBAQ0AAADCoPdPbQ8HFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcGECDAAILQABH8QQ9gAAAABJRU5ErkJggg=="
			ng-attr-alt-src="{{$ctrl.sCurrentImageUrl}}" bsk-alt="$ctrl.product.name" ng-if="::(!$ctrl.hasLinks)">
		<div ng-if="::($ctrl.showWishlist==1)" class="cross-selling-shortcut-container hide-mobile">
			<div ng-click="$ctrl.showQuickWish($event)" class="cross-selling-shortcut cross-selling-shortcut-wishlist">
				<span class="ico" ng-class="$ctrl.isProductInWishlist()?'ico-wish-min-selected':'ico-wish-min'"></span>
				<span class="hide-mobile">Save</span> 
			</div>
		</div>
	</div>
	<div class="prodinfo">
		<a ng-href="{{$ctrl.sProductUrl}}" ng-click="$ctrl.showQuickShop($event)" ng-if="::$ctrl.hasLinks">
			<span class="hashtags ellipsis" ng-bind-html="$ctrl.product.name | to_trusted"></span>
		</a>
		<span class="hashtags ellipsis" ng-bind-html="$ctrl.product.name | to_trusted" ng-if="::(!$ctrl.hasLinks)"></span>
		<static-product-price class="prices" range="$ctrl.product.price" delta-position="back"></static-product-price>
		<button class="btn cross-selling-button hide-mobile" ng-if="::$ctrl.showCart" ng-click="$ctrl.showQuickShop($event)" >Add to shopping cart</button>
	</div>
</div>
	</script>
	<script type="text/ng-template" id="tplCarouselUtils">
<product-list products="$ctrl.products" slider-settings="$ctrl.settings" cart="{{::$ctrl.cart}}" wishlist="{{::$ctrl.wishlist}}" quickshop="{{::$ctrl.quickshop}}" image-type="{{::$ctrl.imageType}}" image-size="{{::$ctrl.imageSize}}" on-demand="{{::$ctrl.onDemand}}" ng-if="$ctrl.products.length"></product-list>	</script>

	<script type="text/ng-template" id="tplLookBookProduct">
<div>
	<div class="image">
		<a ng-href="{{$ctrl.selectedColor.url}}"
			ng-click="$ctrl.goToProductPage()">
			<img ng-src="{{$ctrl.selectedColor.image.BUNDLE_COMPONENT.LARGE[0]}}" />
		</a>
	</div>
	<div class="product-info prodinfo">
		<div class="tags">
			<span ng-repeat="hash in ::$ctrl.hashTags">{{::hash}}</span>
		</div>
		<product-price range="$ctrl.product.price" class="prices" delta-position="back"></product-price>
		<div class="container-colors" ng-if="$ctrl.showColors">
			<ul class="colors lookbook-colors">
				<li ng-repeat="color in $ctrl.product.colors">
					<a href="javascript:;"
						ng-class="{active: color == $ctrl.selectedColor}"
						ng-click="$ctrl.selectedColor = color">
						<img ng-src="{{color.colorCut}}">
					</a>
				</li>
			</ul>
		</div>
		<div class="container-sizes">
			<ul class="sizes lookbook-sizes">
				<li ng-repeat="size in $ctrl.selectedColor.sizes">
					<a href="javascript:;"
						ng-class="$ctrl.getSizeClass(size)"
						ng-click="$ctrl.selectSize(size)">{{size.name}}</a>
				</li>
			</ul>
		</div>
		<progress-button bsk-disabled="!$ctrl.selectedSize" class="block btn btn-lg" ng-if="$ctrl.isOpenForSale" ng-click="$ctrl.addToCart()" value="progressButtonValue" in-progress="Adding product..." complete="&#10004; Product added!" bsk-disabled="$ctrl.priceZero">Add to basket</progress-button>					
	</div>
</div>
	</script>

	<script type="text/ng-template" id="tplAccountAddress">
<ng-form name="$ctrl.addressForm" class="labeled-form" novalidate>
    <ul>
    	<li class="formControl" ng-if="$ctrl.showAddressName">
			<label class="formLabel" for="addresName" bsk-required>Address name</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.addressName.$valid && $ctrl.addressForm.addressName.$viewValue.length, 'ng-invalid':!$ctrl.addressForm.addressName.$valid && $ctrl.addressForm.addressName.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.addressName" type="text" name="addressName" maxlength="120" required />
			</div>
			<form-error-messages for="addressName"></form-error-messages>
		</li>
        <li class="switch-tabs" ng-if="$ctrl.showBillingData">
			<div class="selector-container">
				<div class="switch-tab" id="deliveryPrivate" ng-class="{ 'active': !$ctrl.address.isCompany }" ng-click="$ctrl.addressForm.isCompany=false">
					<input trigger-persist type="radio" name="typeButton" class="privateButton" ng-model="$ctrl.address.isCompany" ng-value="false">
					<label for="privateButton" class="font-bold">Individual</label>
				</div>
				<div class="switch-tab" id="deliveryCompany" ng-class="{ 'active': $ctrl.address.isCompany }" ng-click="$ctrl.addressForm.isCompany=true">
					<input trigger-persist type="radio" name="typeButton" class="companyButton" ng-model="$ctrl.address.isCompany" ng-value="true">
					<label for="companyButton" class="font-bold">Company</label>
				</div>
			</div>
		</li>
        <li class="formControl" ng-if="$ctrl.showBillingData">
			<div ng-if="$ctrl.address.isCompany">
				<label class="formLabel" bsk-required>Tax identification number</label>
				<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.nif.$valid, 'ng-invalid':!$ctrl.addressForm.nif.$valid && $ctrl.addressForm.nif.$touched}">
					<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.company.vatin" id-number-cif type="text" name="nif" country-code="{{$ctrl.address.countryCode}}" required>
				</div>
			</div>
			<div ng-if="!$ctrl.address.isCompany && $ctrl.core.iStoreJSON.countryCode!='GB' && $ctrl.core.iStoreJSON.countryCode!='IE'">
				<label class="formLabel" for="maData-nif" ng-show="$ctrl.isNIFRequired()" bsk-required>ID number</label>
            	<label class="formLabel" for="maData-nif" ng-show="!$ctrl.isNIFRequired()">ID number</label>
				<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.nif.$valid &&  $ctrl.addressForm.nif.$viewValue.length, 'ng-invalid':!$ctrl.addressForm.nif.$valid && $ctrl.addressForm.nif.$viewValue.length}">
					<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.vatin" id-number-nif country-code="{{$ctrl.address.countryCode}}" type="text" name="nif">
				</div>
			</div>
			<form-error-messages for="nif"></form-error-messages>
		</li>

        <li ng-if="$ctrl.address.isCompany && $ctrl.registrationNumberRequired && $ctrl.showBillingData" class="formControl" >
			<label class="formLabel" for="registrationNumber" bsk-required>Registration number</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.registrationNumber.$valid, 'ng-invalid':!$ctrl.addressForm.registrationNumber.$valid && $ctrl.addressForm.registrationNumber.$touched}">
				<input trigger-root="focus,blur" trigger-persist registration-number ng-model="$ctrl.address.company.registrationNumber" type="text" name="registrationNumber" required>
			</div>
			<form-error-messages for="registrationNumber"></form-error-messages>
		</li>
		
        <li ng-if="$ctrl.address.isCompany && $ctrl.showBillingData" class="formControl" >
			<label class="formLabel" for="billingCompany" bsk-required>Company name</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.billingCompany.$valid, 'ng-invalid':!$ctrl.addressForm.billingCompany.$valid && $ctrl.addressForm.billingCompany.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.company.name" type="text" name="billingCompany" required>
			</div>
			<form-error-messages for="billingCompany"></form-error-messages>
		</li>

		<li class="formControl" ng-if="$ctrl.showBillingData && $ctrl.enablePEC===$ctrl.address.countryCode">
			<label class="formLabel" for="PEC">PEC (Posta Elettronica Certificata)</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.addressForm.PEC.$valid && $ctrl.addressForm.PEC.$touched, 'ng-invalid':$ctrl.addressForm.PEC.$valid===false && $ctrl.addressForm.PEC.$touched}">
				<input trigger-root="focus,blur" trigger-persist type="text" name="PEC" ng-model="$ctrl.address.PEC" ng-required="!$ctrl.address.receiverCode.length && $ctrl.address.isCompany" full-email valid-email>
			</div>
			<form-error-messages for="PEC"></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.showBillingData && $ctrl.enablePEC===$ctrl.address.countryCode">
			<label class="formLabel" for="receiverCode">Recipient's code</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.addressForm.receiverCode.$valid && $ctrl.adress.receiverCode.length}">
				<input trigger-root="focus,blur" trigger-persist type="text" name="receiverCode" ng-model="$ctrl.address.receiverCode" pec>
			</div>
			<form-error-messages for="receiverCode"></form-error-messages>
		</li>

        <!-- Turkey -->
        <li ng-if="$ctrl.core.iStoreJSON.countryCode === 'TR' && $ctrl.address.isCompany && $ctrl.showBillingData" class="formControl"  >
			<label class="formLabel" for="taxOffice" bsk-required>???orderShipping.taxOffice???</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.taxOffice.$valid, 'ng-invalid':!$ctrl.addressForm.taxOffice.$valid && $ctrl.addressForm.taxOffice.$touched}">
				<input trigger-root="focus,blur" ng-class="$ctrl.address.isCompany? '' : 'ignore'" trigger-persist registration-number ng-model="$ctrl.address.taxOffice" type="text" name="taxOffice" required>
			</div>
			<form-error-messages for="taxOffice"></form-error-messages>
		</li>
        <!-- End Turkey -->
        <li class="formControl">
			<label class="formLabel" for="firstName" bsk-required>Name</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.firstName.$valid, 'ng-invalid':!$ctrl.addressForm.firstName.$valid && $ctrl.addressForm.firstName.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.firstName" type="text" name="firstName" maxlength="120" required>
			</div>
			<form-error-messages for="firstName"></form-error-messages>
		</li>
        <li class="formControl" ng-if="$ctrl.core.isPatronymic()">
			<label class="formLabel" for="middlename" bsk-required>Middle name</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.addressForm.middleName.$valid, 'ng-invalid':!$ctrl.addressForm.middleName.$valid && $ctrl.addressForm.middleName.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-class="$ctrl.core.isPatronymic() ? '' : 'ignore'" ng-model="$ctrl.address.middleName" type="text" name="middlename" maxlength="120" required>
			</div>
			<form-error-messages for="middlename"></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.core.hasLastName()">
			<label class="formLabel" for="lastName" bsk-required>Surname(s)</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.lastName.$valid, 'ng-invalid':!$ctrl.addressForm.lastName.$valid && $ctrl.addressForm.lastName.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.lastName" type="text" name="lastName" maxlength="120" required>
			</div>
			<form-error-messages for="lastName"></form-error-messages>
		</li>
        <li class="formControl" ng-if="$ctrl.isDaumEnabled()" ng-cloak>
			<label class="formLabel" for="zipCode" bsk-required>Post code</label>
			<button type="button" class="btn-md" ng-click="$ctrl.searchDaum()">Address Search</button>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.zipCode.$valid, 'ng-invalid':!$ctrl.addressForm.zipCode.$valid && $ctrl.addressForm.zipCode.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.zipCode" type="text" name="zipCode" required postal-code>
			</div>
			<form-error-messages for="zipCode"></form-error-messages>
		</li>
        <li class="formControl">
			<label class="formLabel" for="address" bsk-required>ADDRESS. (Enter here: House Number or Building Name, Flat Number, Street)</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.address.$valid, 'ng-invalid':!$ctrl.addressForm.address.$valid && $ctrl.addressForm.address.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.addressLines[0]" type="text" name="address" maxlength="{{::$ctrl.core.xGetMaxLength()}}" required>
			</div>
			<form-error-messages for="address"></form-error-messages>
		</li>
        <li class="formControl">
			<label class="formLabel" for="address2">Complete your address</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.addressForm.address2.$valid && !!$ctrl.addressForm.address2.$viewValue.length}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.addressLines[1]" type="text" name="address2" maxlength="{{::$ctrl.core.xGetMaxLength2()}}" >
			</div>
			<form-error-messages for="address2"></form-error-messages>
		</li>
        <li class="formControl" ng-if="!$ctrl.isDaumEnabled()" ng-cloak>
			<label class="formLabel" for="zipCode" bsk-required country-exception="tr,ie">Post code</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.addressForm.zipCode.$valid && $ctrl.addressForm.zipCode.$viewValue.length, 'ng-invalid':!$ctrl.addressForm.zipCode.$valid && $ctrl.addressForm.zipCode.$touched}">
				<input trigger-root="focus,blur" trigger-persist ng-model="$ctrl.address.zipCode" type="text" name="zipCode" ng-required="$ctrl.core.iStoreJSON.countryCode!='TR' && $ctrl.core.iStoreJSON.countryCode!='IE'" country-code="{{$ctrl.address.countryCode}}" postal-code>
			</div>
			<form-error-messages for="zipCode"></form-error-messages>
		</li>
		<province-field for="$ctrl.address" ng-cloak ng-if="$ctrl.address" country-code="{{$ctrl.address.countryCode}}"></province-field>
        <li class="formControl">
            <label for="maData-country" bsk-required>Country</label>
            <input ng-if="!$ctrl.showBillingData" type="text" name="billingCountry" readonly ng-value="$ctrl.address.countryName">
            <country-field ng-if="$ctrl.showBillingData" dest="$ctrl.address" change="$ctrl.countryChanged(countryCode)"></country-field>
        </li>
        <li class="formControl">
        	<label class="formLabel" for="phone" bsk-required>Telephone</label>
        	<phone-field phone="$ctrl.address.phones[0]" email="{{$ctrl.core.iUserJSON.email}}" novalidate></phone-field>
        </li>
        <li class="formControl" ng-if="$ctrl.showBillingData">
			<label class="formLabel" for="gender" bsk-required >Gender</label>
			<div class="form-control-container" ng-class="{'ng-valid':$ctrl.address.gender.$valid && $ctrl.address.gender.length, 'ng-invalid':!$ctrl.address.gender.$valid && $ctrl.address.gender.$touched}">
				<ul class="genderField">
                    <li class="check">
                        <label ng-click="$ctrl.address.gender!='F'?$ctrl.address.gender='F':''">
                             <a class="checkbox" ng-class="{active: $ctrl.address.gender=='F'}"></a>
                            <span>WOMAN</span>
                        </label>
                    </li>
                    <li class="check">
                        <label ng-click="$ctrl.address.gender!='M'?$ctrl.address.gender='M':''">
                             <a class="checkbox" ng-class="{active: $ctrl.address.gender=='M'}"></a>
                            <span>MAN</span>
                        </label>
                    </li>
                </ul>
			</div>
			<form-error-messages for="gender"></form-error-messages>
		</li>
        <li class="formControl" ng-if="$ctrl.showBillingData">
            <label for="maData-birthdate" ng-if="$ctrl.isBirthdayRequired" bsk-required>Date of birth</label>			       
            <bsk-date ng-model="$ctrl.address.birthdate" ng-if="$ctrl.isBirthdayRequired" format="mm-dd" range="-10,-100" required></bsk-date>
            <label for="maData-birthdate" ng-if="!$ctrl.isBirthdayRequired">Date of birth</label>			       
            <bsk-date ng-model="$ctrl.address.birthdate" ng-if="!$ctrl.isBirthdayRequired" format="mm-dd" range="-10,-100"></bsk-date>
        </li>
        <li class="formControl nospace ng-hide">
            <ul>
                <li class="check">
                    <label>
                        <input id="maData-mobile" type="radio" name="maData-tel1-type" value="mobile" class="hidden radio" checked="checked" custom-radiobutton>
                        <span>Mobile</span>
                    </label>
                </li>
                <li class="check">
                    <label>
                        <input id="maData-landLine" type="radio" name="maData-tel1-type" value="landLine" class="hidden radio" custom-radiobutton>
                        <span>Landline</span>
                    </label>
                </li>
            </ul>
        </li>
        <li class="formControl text-right last" ng-if="!$ctrl.hideButton">
			<button class="btn-wide" ng-disabled="$ctrl.addressForm.$invalid" ng-click="$ctrl.launchCallBack()" ng-transclude></button>
		</li>
    </ul>
</ng-form>	</script>

	<script type="text/ng-template" id="tplBskReturnsMethods">
<div>
	<!-- STORE RETURNS -->
	<section id="store-return" class="ng-hide" ng-show="$ctrl.returnMethods.methods.STORERETURN">
		<a zum-waypoint="waypoints" down="maretwp.strret" up="maretwp.strret" offset="25%" class="anchor" name="strret"></a>
		<h2>Returns to physical store</h2>
		<div ng-if="!$ctrl.returnMethods.hasSFI()" ng-cloak>
			<p ng-show="!inditex.iStoreJSON.details.isPaperLessEnabled">The easiest way to make you return is to visit one of our Bershka stores.<br></p>
			<p ng-show="inditex.iStoreJSON.details.isPaperLessEnabled">To return or exchange an item, all you have to do is visit any Bershka store and show your electronic receipt, on paper or on your mobile, at the till.</p>
			<p ng-show="inditex.iStoreJSON.details.isPaperLessEnabled">Remember that your electronic receipt can be found attached to your order confirmation email, or in My Orders/Order History.</p>
<!-- BEGIN SPOT=BK3_ESpot_OrderReturnStoreMessage -->

<!-- END SPOT=BK3_ESpot_OrderReturnStoreMessage -->
			<div class="text-right">
				<button ng-click="$ctrl.goToStoreLocatorPage()" class="btn-wide">STORE FINDER</button>
			</div>
		</div>
		<div ng-if="$ctrl.returnMethods.hasSFI() && !$ctrl.returnMethods.uniqueOrder" ng-cloak>
			<ul>
				<li ng-repeat="order in $ctrl.returnOrders.orders" ng-click="$ctrl.selectReturn('STORERETURN');$ctrl.returnOrders.selectOrder(order)">
					<p>{{order.id}}</p>
				</li>
			</ul> 
		</div>
		<div ng-if="$ctrl.returnMethods.hasSFI() && $ctrl.returnMethods.uniqueOrder" ng-cloak class="text-right">
			<button ng-click="$ctrl.selectReturn('STORERETURN')" class="btn-wide">Continue</button>
		</div>
	</section>
	<hr class="dashed" ng-show="($ctrl.returnMethods.methods.DROPOFFRETURN) && !$ctrl.returnMethods.selected">
	<!-- DROPOFF RETURNS -->
	<section id="dropoff-return" class="ng-hide" ng-show="$ctrl.returnMethods.methods.DROPOFFRETURN">
	<a zum-waypoint="waypoints" down="maretwp.dropret" up="maretwp.dropret" offset="25%" class="anchor" name="dropret"></a>
		<h2>Drop off returns</h2>			
		<div class="table fixed-layout text-center flex-fallback home-return-graph">
			<div class="table-row">
				<div id="help-step-2" class="table-cell">
					<span class="ico60 ico60-hr02"></span>
					<p>Select the items you want to return and the reason.</p>
				</div>
				<div id="help-step-3" class="table-cell">
					<span class="ico60 ico60-hr03"></span>
					<p>Place the items in a bag or box.</p>
				</div>
				<div id="help-step-4" class="table-cell">
					<span class="ico60 ico60-hr04"></span>
					<p>Use our search tool to find your nearest drop off point.</p>
				</div>
				<div id="help-step-5" class="table-cell">
					<span class="ico60 ico60-hr05"></span>
					<p>Once you receive a confirmation email, you must follow the instructions to return your package.</p>
				</div>
				<div id="help-step-6" class="table-cell">
					<span class="ico60 ico60-hr06"></span>
					<p>Your refund will be placed once we receive your return.</p>
				</div>
			</div>
		</div>

		<div class="text-right">
			<button ng-click="$ctrl.selectReturn('DROPOFFRETURN')" class="btn-wide">Continue</button>
		</div>
	</section>
	<hr class="dashed" ng-show="($ctrl.returnMethods.methods.HOMERETURN) && !$ctrl.returnMethods.selected">
	<!-- HOME RETURNS -->
	<section id="home-return" ng-show="$ctrl.returnMethods.methods.HOMERETURN">
		<a zum-waypoint="waypoints" down="maretwp.hmret" up="maretwp.strret" offset="25%" class="anchor" name="hmret"></a>
		<h2>Home return</h2>

		<div class="table fixed-layout text-center flex-fallback home-return-graph">
			<div class="table-row">
				<div id="help-step-2" class="table-cell">
					<span class="ico60 ico60-hr02"></span>
					<p>Select the items you want to return and the reason.</p>
				</div>
				<div id="help-step-3" class="table-cell">
					<span class="ico60 ico60-hr03"></span>
					<p>Place the items in a bag or box.</p>
				</div>
				<div id="help-step-4" class="table-cell">
					<span class="ico60 ico60-hr04"></span>
					<p>Enter the number of packages you will be giving to the courier and your address.</p>
				</div>
				<div id="help-step-5" class="table-cell">
					<span class="ico60 ico60-hr05"></span>
					<p>You will receive an email shortly that will contain all the details on how to return your items</p>
				</div>
				<div id="help-step-6" class="table-cell">
					<span class="ico60 ico60-hr06"></span>
					<p>Your refund will be placed once we receive your return.</p>
				</div>
			</div>
		</div>

		<div class="text-right">
			<button ng-click="$ctrl.selectReturn('HOMERETURN')" class="btn-wide">Continue</button>
		</div>
	</section>
</div>	</script>
	<script type="text/ng-template" id="tplBskReturnsOrders">
<h4>Your orders</h4>
<p ng-show="$ctrl.orders.length == 0">There are no orders to return</p>
<div ng-show="$ctrl.orders.length > 0">
	<p>Select the order you would like to return</p>
	<hr class="dashed noMarginBottom marginTop20">
	<ul class="track" ng-repeat="order in $ctrl.orders">
		<li> 
			<div class="order-head cursor-pointer" ng-click="$ctrl.selectOrder(order)">
				<div class="order-num">
					<h4 ng-bind="core.text('myaccount.returns.orderN') + '' + order.id"></h4>
				</div>
				<div class="order-date">
					<span ng-bind="core.xFormatDate(order.date)"></span>
				</div>
				<div class="order-status">
					<span class="productPrice" ng-bind-html="core.getPriceHtml(core.formatPrice(order.totalOrder)) | to_trusted">
					</span>
				</div>
				<div class="order-toggle">
					<span class="ico plus-minus"></span>
				</div>
			</div> 
			<hr class="dashed">
		</li>		
	</ul>
</div>
	</script>
	<script type="text/ng-template" id="tplBskReturnsOffsetMenu">
<aside ng-class="{offset : $ctrl.offsetMenu, fixCtrl: !$ctrl.offsetMenu}" class="hide-mobile">
	<div class="breadcrumb" ng-show="inditex.iStoreJSON.countryCode!='US'">
		<span><a data-ng-click="$ctrl.goToSection('strret')" href="javascript:;">Returns</a></span>
		<span data-ng-cloak ng-class="{hidden : !waypoints.maretwp.strret}">Returns to physical store</span>
		<span data-ng-cloak ng-class="{hidden : !waypoints.maretwp.hmret}">Home return</span>
	</div>
	<div class="breadcrumb" ng-show="inditex.iStoreJSON.countryCode=='US'">
	</div>
	<ul>
		<li class="ng-hide" ng-class="{current : $ctrl.returnMethods.selected=='STORERETURN'}" ng-show="$ctrl.returnMethods.methods.STORERETURN">
			<a data-ng-click="$ctrl.goToSection('strret')" href="javascript:;">
				<span class="ico40 ico40-return-store"></span>
				<span>
					<h4>Returns to physical store</h4>
					<p>The easiest way to return articles is to go to a Bershka store with the sales receipt or bill; it is not necessary to bring the original packaging.</p>
				</span>
			</a>
		</li>
		<li class="ng-hide" ng-class="{current : $ctrl.returnMethods.selected=='DROPOFFRETURN'}" ng-show="$ctrl.returnMethods.methods.DROPOFFRETURN">
			<a data-ng-click="$ctrl.goToSection('dropret')" href="javascript:;">
				<span class="ico40 ico40-standard"></span>
				<span>
					<h4>Drop off returns</h4>
					<p>Choose one of the collection points in your city to drop off your parcel.</p>
				</span>
			</a>
		</li>
		<li class="ng-hide" ng-class="{current : $ctrl.returnMethods.selected=='HOMERETURN'}" ng-show="$ctrl.returnMethods.methods.HOMERETURN">
			<a data-ng-click="$ctrl.goToSection('hmret')" href="javascript:;">
				<span class="ico40 ico40-return-home"></span>
				<span>
					<h4>Home return</h4>
					<p>We can send a courier to pick up your package</p>
				</span>
			</a>
		</li>
	</ul>
</aside>	</script>
	<script type="text/ng-template" id="tplBskReturnsOrderItems">
<form class="return-order-items" novalidate method="POST">
	<h2 ng-show="$ctrl.returnMethodsFactory.selected=='DROPOFFRETURN'" class="ng-hide">Drop off returns</h2>
	<p ng-show="$ctrl.returnMethodsFactory.selected=='DROPOFFRETURN'">You can find the available drop off locations here <a ng-href="{{$ctrl.dropPageUrl}}" target="_blank" class="dropPageUrl">{{$ctrl.dropPageUrl}}</a>

	<h4 class="step-title">1. Select the item</h4>
	<p>Select the order you would like to return</p>
	<table class="return-order-summary">
		<tr>
			<td>

			</td>
			<td>
				<h4>Description</h4>
			</td>
			<td>
				<h4>Size</h4>
			</td>
			<td>
				<h4>units</h4>
			</td>
			<td>
				<h4>Amount</h4>
			</td>
		</tr>
		<tr ng-class="{selected: item.selected, noReturn: !item.isReturnable}" ng-repeat-start="item in $ctrl.returnOrdersFactory.selected.items track by $index" ng-show="item.reference != 'XGIFTSKU'">
			<td>
				<ul>
					<li class="formControl nospace check">
						<label for="itemId" ng-click="item.selected = !item.selected">
							<input name="itemId" id="itemId" type="checkbox" class="checkbox">
							<a id="checkitemId" class="checkbox" ng-class="{active: item.selected}"></a>
						</label>
					</li>
				</ul>
			</td>
			<td>
				<div class="vert-helper">
					<img ng-src="{{$ctrl.getProductImage(item)}}">
					<span ng-bind="item.name" class="strong"></span>
				</div>
			</td>
			<td>
				<span ng-bind="item.size"></span>
			</td>
			<td>
				<span ng-show="!item.selected || item.quantity <= 1" ng-bind="item.quantity"></span>
				<ul ng-show="item.selected && item.quantity > 1">
					<li class="formControl nospace qtySel">
						<select name="itemQty" ng-options="i for i in $ctrl.getNumber(item.quantity)" ng-model="item.returnQty"></select>
					</li>
				</ul>
			</td>
			<td>
			<span class="productPrice" ng-bind-html="$ctrl.getPrice(item)  | to_trusted">
			</span>
			</td>
		</tr>
		<tr ng-show="!item.isReturnable" class="ng-hide myAccount-noreturnableContainer">
			<td colspan="5">
				<span ng-show="!item.isReturnable" class="no-return-warning">No returns on this product. If you have any concerns, please contact<a href="javascript:;" ng-href="mailto:{{$ctrl.core.iStoreJSON.details.supportEmail}}" class="under"> Customer Services</a></span>
			</td>
		</tr>
		<tr ng-repeat-end>
			<td colspan="5">
				<ul>
					<li class="formControl nospace return-reason" ng-class="{valid: item.returnReason}">
						<label for="itemReason" class="sr-only">Select a reason</label>
						<select name="itemReason" ng-class="{ignore: !item.selected}" ng-options="reason.description for reason in $ctrl.returnReasons track by reason.id" ng-model="item.returnReason">
							<option style="display:none" value="">Select a reason</option>
						</select>
					</li>
				</ul>
			</td>
		</tr>
	</table>
<!-- BEGIN SPOT=BK3_ESpot_OrderReturnStoreMessage -->

<!-- END SPOT=BK3_ESpot_OrderReturnStoreMessage -->
	<div class="text-right marginTop40">
		<button class="btn-wide float-left" ng-click="$ctrl.goBack()">Back</button>
		<button class="btn-wide push-right" bsk-disabled="!$ctrl.hasItemsSelected()" ng-click="$ctrl.continue()">Continue</button>
	</div>
</form>	</script>
	<script type="text/ng-template" id="tplBskReturnsAddressForm">
<form name="$ctrl.returnForm" novalidate class="return-address-form labeled-form" method="POST">
	<h4 class="step-title">Supplementary address details</h4>
	<p ng-hide="$ctrl.returnMethods.selected == 'DROPOFFRETURN'" class="noMargin">Enter the pick-up address</p>
	<ul class="returns">
		<li ng-if="$ctrl.returnMethods.selected=='HOMERETURN'"> 
			<ul>
				<li class="formControl">
					<label class="formLabel" for="name" bsk-required>Name</label>
					<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnForm.name.$valid, 'ng-invalid': $ctrl.returnForm.name.$invalid && $ctrl.returnForm.name.$touched}">
						<input ng-model="$ctrl.returnAddress.address.firstName" type="text" name="name" ng-maxlength="120" required>
					</div>
					<form-error-messages for="name"></form-error-messages>
				</li>
				<li ng-if="$ctrl.isPatronymic()" class="formControl">
                    <label class="formLabel" for="middlename" bsk-required>Middle name</label>
                    <div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnForm.middleName.$valid, 'ng-invalid': $ctrl.returnForm.middleName.$invalid && $ctrl.returnForm.middlename.$touched}">
                    	<input type="text" name="middleName" ng-class="$ctrl.isPatronymic() ? '' : 'ignore'" ng-model="$ctrl.returnAddress.address.middleName" maxlength="120" required>
                    </div>
                    <form-error-messages for="middlename"></form-error-messages>
                </li>
                <li class="formControl" ng-if="$ctrl.hasLastName()">
                    <label class="formLabel" for="lastName" bsk-required>Surname(s)</label>
                    <div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnForm.lastName.$valid, 'ng-invalid': $ctrl.returnForm.lastName.$invalid && $ctrl.returnForm.lastName.$touched}">
                    	<input type="text" name="lastName" ng-model="$ctrl.returnAddress.address.lastName" ng-maxlength="120" ng-class="$ctrl.hasLastName()?'':'ignore'" required>
                    </div>
                    <form-error-messages for="lastName"></form-error-messages>
                </li>
                <li class="formControl">
                    <label for="address" bsk-required>ADDRESS. (Enter here: House Number or Building Name, Flat Number, Street)</label>
                    <div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnForm.address.$valid, 'ng-invalid': $ctrl.returnForm.address.$invalid && $ctrl.returnForm.address.$touched}">
                    	<input type="text" name="address" ng-model="$ctrl.returnAddress.address.addressLines[0]" maxlength="{{::inditex.xGetMaxLength()}}" required>
                    </div>
                    <form-error-messages for="address"></form-error-messages>
                </li>
                <li class="formControl" ng-if="$ctrl.daumService.isDaumEnabled()">
                    <label for="address2" bsk-required>Complete your address</label>
                    <div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnForm.address2.$valid, 'ng-invalid': $ctrl.returnForm.address2.$invalid && $ctrl.returnForm.address2.$touched}">
                    	<input type="text" name="address2" ng-model="$ctrl.returnAddress.address.addressLines[1]" maxlength="{{::inditex.xGetMaxLength2()}}" required>
                    </div>
                    <form-error-messages for="address2"></form-error-messages>
                </li>
                <li class="formControl" class="formControl" ng-if="!$ctrl.daumService.isDaumEnabled()" ng-cloak>
                    <label for="zipCode" bsk-required>Post code</label>
                    <div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnForm.zipCode.$valid, 'ng-invalid': $ctrl.returnForm.zipCode.$invalid && $ctrl.returnForm.zipCode.$touched}">
                    	<input type="text" name="zipCode" ng-model="$ctrl.returnAddress.address.zipCode" required postal-code>
                    </div>
                    <form-error-messages for="zipCode"></form-error-messages>                
                </li>
                 <li class="formControl" class="formControl" ng-class="$ctrl.daumService.isDaumEnabled() ? 'validDaum' : ''" ng-if="$ctrl.daumService.isDaumEnabled()" ng-cloak>
                    <label for="zipCode" class="daumLabel">Post code</label>
                    <button type="button" class="btn-md" ng-if="$ctrl.daumService.isDaumEnabled()" ng-click="$ctrl.searchDaum()">Address Search</button>
                    <div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnForm.zipCode.$valid, 'ng-invalid': $ctrl.returnForm.zipCode.$invalid && $ctrl.returnForm.zipCode.$touched}"> 
                    	<input type="text" name="zipCode" ng-model="$ctrl.returnAddress.address.zipCode" required postal-code>
                    </div>
                    <form-error-messages for="zipCode"></form-error-messages>
                </li>
                <li class="formControl">
                	<province-field for="$ctrl.returnAddress.address"></province-field>
                </li>
                <li class="formControl">
                    <label for="retCountry">Country</label>
                    <input type="text" name="retCountry" readonly ng-value="$ctrl.returnForm.countryName || $ctrl.getCountry()" ng-model="$ctrl.returnAddress.address.countryName">
                </li>
                <li class="formControl">
					<label class="formLabel" for="phone" bsk-required>Telephone</label>
					<!--<ul class="phoneField">
						<li>
							<div class="readonly">{{::$ctrl.returnAddress.address.prefixCode || $ctrl.getPhonePrefix()}}</div>
						</li>
						<li>
							<div class="form-control-container" ng-class="{'ng-valid':$ctrl.returnForm.phone.$valid, 'ng-invalid':!$ctrl.returnForm.phone.$valid && $ctrl.returnForm.phone.$touched}">
								<input ng-model="$ctrl.returnAddress.address.phone" name="phone" type="tel" phone-number="{{$ctrl.returnAddress.address.phone}}" required>
							</div>
						</li>
					</ul>-->
					<phone-field phone="$ctrl.returnAddress.address.phone" email="{{$ctrl.returnAddress.address.email}}"></phone-field>
				</li>
                <!-- Japan -->
		        <li ng-if="$ctrl.showDrdReturn" class="formControl">
		            <label for="datetime" bsk-required>Delivery date</label>
		            <div class="form-control-container" ng-class="{'ng-valid':$ctrl.returnForm.datetime.$valid, 'ng-invalid':$ctrl.returnForm.datetime.$invalid && $ctrl.returnForm.datetime.$touched}">
			            <select  ng-options="option.datetime as option.formattedDate for option in $ctrl.ddd_ShippingDateOptions.shippingDates track by option.datetime" ng-model="$ctrl.returnAddress.address.datetime" name="datetime" ng-class="showDrdReturn ? '' : 'ignore'" required>
			                <option style="display:none" value="">Delivery date</option>
			          	</select>
			        </div>
			        <form-error-messages for="datetime"></form-error-messages>
		        </li>
		         <li ng-if="$ctrl.showDrdReturn" class="formControl">
		            <label for="idTimeRange" bsk-required>Time slot</label>
		             <div class="form-control-container" ng-class="{'ng-valid':$ctrl.returnForm.idTimeRange.$valid, 'ng-invalid':$ctrl.returnForm.idTimeRange.$invalid && $ctrl.returnForm.idTimeRange.$touched}">
			            <select ng-options="option.idTimeRange as option.description for option in $ctrl.ddd_ShippingRangeOptions.shippingRanges track by option.idTimeRange" ng-model="$ctrl.returnAddress.address.idTimeRange"  name="idTimeRange" ng-class="$ctrl.showDrdReturn? '' : 'ignore'" required>
			                <option style="display:none" value="">Time slot</option>
			          	</select>
			        </div>
			        <form-error-messages for="idTimeRange"></form-error-messages>
		        </li>
	            <li class="formControl">
	            	<hr class="dashed">
	            </li>
			</ul>
		</li>
		<li> 
			<ul>
				<li class="formControl">
	            	<label for="retPckNum">Number of packages</label>
	                <ul class="return-packages">
	                    <li class="return-packages-select">
	                    	<div class="form-control-container" ng-class="{'ng-invalid': !$ctrl.returnOrder.returnPackageNumber && $ctrl.returnOrder.returnPackageNumber.$touched}">
			                    <select name="retPckNum" ng-options="i for i in $ctrl.getNumber($ctrl.getMaxPackageNumber())" ng-model="$ctrl.returnOrder.returnPackageNumber">
			                    </select>
	                        </div>
	                    </li>
	                    <li class="return-packages-text">
	                        <span>How many packages will you be retourning?</span>
	                    </li>
	                </ul>
	                <form-error-messages for="retPckNum"></form-error-messages>
	            </li>
	            <li class="formControl text-right action-buttons">
	            	<button class="btn-wide float-left" ng-if="!$ctrl.returnOrders.isRMAReq" ng-click="$ctrl.goBack()">Back</button>
	            	<button class="btn-wide" ng-disabled="$ctrl.returnForm.$invalid" ng-click="$ctrl.continue()">Continue</button>
	            </li>
			</ul>
		</li>
	</ul>
</form>	</script>
	<script type="text/ng-template" id="tplBskReturnsPayment">
<form trigger-valid name="$ctrl.returnPaymentForm" novalidate class="return-payment-form labeled-form" method="POST">
	<h4 class="step-title sfiSelectRefundTitle">Select refund method</h4>
	<p class="sfiSelectRefundDesc">Select the return method</p>
	<ul>
		<li class="formControl">
			<label for="retPOD-method">Methods</label>
			<select id="retPOD-method" name="bankTransferBankMethod" ng-model="$ctrl.returnPayment.paymentData.returnMethodMode" ng-options="item.key as item.value for item in $ctrl.returnPayment.returnPaymentMethods" required>
				<option style="display:none" value="">Select the return method</option>
			</select>
		</li>
	</ul>
	<p ng-if="$ctrl.returnPayment.paymentData.returnMethodMode == 'bankTransfer'">Important note: please provide us your full bank account details and make sure they are correct so that we can correctly refund you. For any doubt please review the help showed in each box text:</p>
	<ul ng-if="$ctrl.returnPayment.paymentData.returnMethodMode == 'bankTransfer'">

		<li class="formControl" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.accountNumber">
			<label bsk-required>Customer’s current bank account number</label> 
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.accountNumber.$valid, 'ng-invalid': $ctrl.returnPaymentForm.accountNumber.$invalid && $ctrl.returnPaymentForm.accountNumber.$touched}">
                <input type="text" name="accountNumber" ng-minlength="{{$ctrl.returnPayment.returnFields.bankTransfer.accountNumber.minLength}}" ng-maxlength="{{$ctrl.returnPayment.returnFields.bankTransfer.accountNumber.maxLength}}" ng-model="$ctrl.returnPayment.paymentData.accountNumber" required>
            </div>
            <form-error-messages for="accountNumber" ></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.bankAccountType">
			<label for="bankAccountType" bsk-required>Account type</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.bankAccountType.$valid, 'ng-invalid': $ctrl.returnPaymentForm.bankAccountType.$invalid && $ctrl.returnPaymentForm.bankAccountType.$touched}">
					<select id="bankAccountType" name="bankTransferBankAccountType" ng-model="$ctrl.returnPayment.paymentData.bankAccountType" ng-options="item.code as item.name for item in $ctrl.returnPayment.bankAccountTypes track by item.code" required>
					<option style="display:none" value="">Account type</option>
				</select>
			</div>
			<form-error-messages for="bankAccountType"></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.bicCode">
			<label bsk-required>Bank branch tax identification code (BIC)</label> 
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.bicCode.$valid, 'ng-invalid': $ctrl.returnPaymentForm.bicCode.$invalid && $ctrl.returnPaymentForm.bicCode.$touched}">
                <input type="text" name="bicCode" ng-model="$ctrl.returnPayment.paymentData.bicCode" ng-minlength="{{$ctrl.returnPayment.returnFields.bankTransfer.bicCode.minLength}}" ng-maxlength="{{$ctrl.returnPayment.returnFields.bankTransfer.bicCode.maxLength}}" required>
            </div>
            <form-error-messages for="bicCode" ></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.innCode">
			<label bsk-required>Tax register number of bank (inn)</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.innCode.$valid, 'ng-invalid': $ctrl.returnPaymentForm.innCode.$invalid && $ctrl.returnPaymentForm.innCode.$touched}">
                <input type="text" name="innCode" ng-model="$ctrl.returnPayment.paymentData.innCode" ng-minlength="{{$ctrl.returnPayment.returnFields.bankTransfer.innCode.minLength}}" ng-maxlength="{{$ctrl.returnPayment.returnFields.bankTransfer.innCode.maxLength}}" required >
            </div>
            <form-error-messages for="innCode"></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.firstName">
			<label bsk-required>customer´s name in bank account</label> 
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.firstName.$valid, 'ng-invalid': $ctrl.returnPaymentForm.firstName.$invalid && $ctrl.returnPaymentForm.firstName.$touched}">
                <input type="text" name="firstName" ng-model="$ctrl.returnPayment.paymentData.firstName" ng-maxlength="120" required katakana>
            </div>
            <form-error-messages for="firstName"></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.middleName">
			<label bsk-required>Patronymic of the bank account holder</label> 
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.middleName.$valid, 'ng-invalid': $ctrl.returnPaymentForm.middleName.$invalid && $ctrl.returnPaymentForm.middleName.$touched}">
                <input type="text" name="middleName" ng-model="$ctrl.returnPayment.paymentData.middleName" ng-maxlength="120" required>
            </div>
            <form-error-messages for="middleName"></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.lastName">
			<label bsk-required>Surname of the bank account holder</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.lastName.$valid, 'ng-invalid': $ctrl.returnPaymentForm.lastName.$invalid && $ctrl.returnPaymentForm.lastName.$touched}">
                <input type="text" name="lastName" ng-model="$ctrl.returnPayment.paymentData.lastName" ng-maxlength="120" required>
            </div>
            <form-error-messages for="lastName"></form-error-messages>
		</li>
		<li class="formControl podFormBankInput" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.bankNameSORL">
			<label bsk-required>customer´s bank name</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.bankName.$valid, 'ng-invalid': $ctrl.returnPaymentForm.bankName.$invalid && $ctrl.returnPaymentForm.bankName.$touched}">
				<input type="text" name="bankName" ng-model="$ctrl.returnPayment.paymentData.bankName" required ng-keypress="$ctrl.solrBanksRequest()">
			</div>
			<div id="cn-banks" class="search-banks" ng-show="$ctrl.returnPayment.sfiSearchOn">
				<div class="itx-dropdown-container">
					<div class="itx-dropdown-list">
						<div class="itx-dropdown-item" ng-repeat="bank in $ctrl.sfiBanks">
							<a ng-click="$ctrl.selectSfiBank(bank)"><span ng-bind="bank.name"></span></a>
						</div>
					</div>
				</div>
			</div>
			<form-error-messages for="bankName"></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.bankName">
			<label bsk-required>customer´s bank name</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.bankName.$valid, 'ng-invalid': $ctrl.returnPaymentForm.bankName.$invalid && $ctrl.returnPaymentForm.bankName.$touched}">
                <input type="text" name="bankName" ng-model="$ctrl.returnPayment.paymentData.bankName" ng-maxlength="120" required>
            </div>
            <form-error-messages for="bankName"></form-error-messages>
		</li>
		<li class="formControl podFormBankInput" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.bankBranchCode">
			<label for="bankBranchCode" bsk-required>Branch code</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.bankBranchCode.$valid, 'ng-invalid': $ctrl.returnPaymentForm.bankBranchCode.$invalid && $ctrl.returnPaymentForm.bankBranchCode.$touched}">
				<input type="text" name="bankBranchCode" ng-model="$ctrl.returnPayment.paymentData.bankBranchCode" ng-minlength="{{$ctrl.returnPayment.returnFields.bankTransfer.bankBranchCode.minLength}}" ng-maxlength="{{$ctrl.returnPayment.returnFields.bankTransfer.bankBranchCode.maxLength}}" required />
			</div>
			<form-error-messages for="bankBranchCode" ></form-error-messages>
		</li>
		<li class="formControl podFormBankInput" ng-if="$ctrl.returnPayment.returnFields.bankTransfer.bankBranchName">
			<label for="bankBranchName" bsk-required>Branch name</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.bankBranchName.$valid, 'ng-invalid': $ctrl.returnPaymentForm.bankBranchName.$invalid && $ctrl.returnPaymentForm.bankBranchName.$touched}">
				<input type="text" name="bankBranchName" ng-model="$ctrl.returnPayment.paymentData.bankBranchName" required />
			</div>
			<form-error-messages for="bankBranchName"></form-error-messages>
		</li>
	</ul>
	<ul ng-if="$ctrl.returnPayment.paymentData.returnMethodMode == 'postForm'"> 
		<li class="formControl" >
			<label bsk-required>customer´s name in bank account</label> 
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.firstName.$valid, 'ng-invalid': $ctrl.returnPaymentForm.firstName.$invalid && $ctrl.returnPaymentForm.firstName.$touched}">
                <input type="text" name="firstName" ng-model="$ctrl.returnPayment.paymentData.firstName" required>
            </div>
            <form-error-messages for="firstName"></form-error-messages>
		</li>
		<li class="formControl">
			<label bsk-required>Patronymic of the bank account holder</label> 
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.middleName.$valid, 'ng-invalid': $ctrl.returnPaymentForm.middleName.$invalid && $ctrl.returnPaymentForm.middleName.$touched}">
                <input type="text" name="middleName" ng-model="$ctrl.returnPayment.paymentData.middleName" required>
            </div>
            <form-error-messages for="middleName"></form-error-messages>
		</li>
		<li class="formControl" >
			<label bsk-required>Customer surname</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.lastName.$valid, 'ng-invalid': $ctrl.returnPaymentForm.lastName.$invalid && $ctrl.returnPaymentForm.lastName.$touched}">
                <input type="text" name="lastName" ng-model="$ctrl.returnPayment.paymentData.lastName" required>
            </div>
            <form-error-messages for="lastName"></form-error-messages>
		</li>
		<li class="formControl">
			<label bsk-required>Pick-up address</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.address.$valid, 'ng-invalid': $ctrl.returnPaymentForm.address.$invalid && $ctrl.returnPaymentForm.address.$touched}">
                <input type="text" name="address" ng-model="$ctrl.returnPayment.paymentData.address" required>
            </div>
            <form-error-messages for="address"></form-error-messages>
		</li>
		<li class="formControl">
			<label bsk-required>Post Code</label>
			<div class="form-control-container" ng-class="{'ng-valid': $ctrl.returnPaymentForm.zipCode.$valid, 'ng-invalid': $ctrl.returnPaymentForm.zipCode.$invalid && $ctrl.returnPaymentForm.zipCode.$touched}">
                <input type="text" name="zipCode" ng-model="$ctrl.returnPayment.paymentData.zipCode"  required postal-code>
            </div>
            <form-error-messages for="zipCode"></form-error-messages>
		</li>
		<li class="formControl">
        	<province-field for="$ctrl.returnPayment.paymentData"></province-field>
        </li>
        <li class="formControl">
			<label class="formLabel" for="phone" bsk-required>Telephone</label>
			<ul class="phoneField">
				<li>
					<div class="readonly">{{$ctrl.postFormPrefix}}</div>
				</li>
				<li>
					<div class="form-control-container" ng-class="{'ng-valid':$ctrl.returnPaymentForm.phone.$valid, 'ng-invalid':!$ctrl.returnPaymentForm.phone.$valid && $ctrl.returnPaymentForm.phone.$touched}">
						<input ng-model="$ctrl.returnPayment.paymentData.phone" name="phone" type="tel" phone-number required>
					</div>
				</li>
			</ul>
			<form-error-messages for="phone"></form-error-messages>
		</li>
	</ul>
	<ul>
		<li class="formControl">
			<label>
        		<span class="reqField">* This field is mandatory</span>
        	</label>
		</li>
		<li class="formControl returnPaymentButtons">
        	<div class="text-right action-buttons">
        		<button class="btn-wide float-left" ng-if="!$ctrl.returnOrders.isRMAReq && !$ctrl.returnOrders.isRMA" ng-click="$ctrl.goBack()"><span class="btn-arrow-left"></span>Back</button>
        		<button class="btn-wide inverse" ng-click="$ctrl.continue()" bsk-disabled="$ctrl.returnPaymentForm.$invalid">Continue</button>
        	</div>
        </li>
	</ul>

</form>	</script>
	<script type="text/ng-template" id="tplBskReturnsConfirmation">
<div class="return-confirmation">
		<div class="last-step" ng-if="!$ctrl.returnRequest.confirmedReturn">
			<h4 ng-show="!$ctrl.isPatronymic()" class="step-title">Verify and confirm your information</h4>
			<p ng-show="$ctrl.returnMethods.selected=='HOMERETURN'">Please make sure all the pick-up address information is correct</p>	

			<div class="double-address">
				<!-- HOME RETURN -->
				<div ng-if="$ctrl.returnMethods.selected=='HOMERETURN'" class="return-address">
					<h4>Return address</h4>
					<span ng-bind="$ctrl.returnAddress.address.firstName + ' ' +  ($ctrl.isPatronymic()?$ctrl.returnAddress.address.middleName+ ' ' :'') + ($ctrl.core.hasLastName() ?$ctrl.returnAddress.address.lastName:'')" data-name='nameUser'></span>
					<span ng-bind="$ctrl.returnAddress.address.addressLines[0] + ($ctrl.returnAddress.address.addressLines[1]? ' ' + $ctrl.returnAddress.address.addressLines[1]:'')"></span>
					<span ng-bind="$ctrl.returnAddress.address.zipCode + ' ' + (($ctrl.core.iStoreJSON.countryCode == 'TR' || core.iStoreJSON.countryCode == 'CN') && $ctrl.returnAddress.address.city.indexOf('#') != -1 ? $ctrl.returnAddress.address.city.split('#')[1] : $ctrl.returnAddress.address.city)"></span>
					<span ng-bind="$ctrl.returnAddres.address.countryName"></span>
					<span ng-bind="$ctrl.core.text('order.mobile') + ': ' + ($ctrl.returnAddress.address.prefixCode || $ctrl.getPhonePrefix()) + ' ' + $ctrl.returnAddress.address.phone"></span>
				</div>		

				<!-- RUSIA -->
				<div ng-show="$ctrl.returnOrders.selected.sfiCreditEnabled">
					<h4>Refund method details</h4>
					<div class="return-address">
						<span ng-bind="$ctrl.returnPayment.selected.firstName + ' ' + $ctrl.returnPayment.selected.middleName + ' ' + $ctrl.returnPayment.selected.lastName"></span>
						<span ng-if="$ctrl.returnPayment.selected.bicCode" >{{$ctrl.returnPayment.selected.bicCode}}</span>
						<span ng-if="$ctrl.returnPayment.selected.innCode" >{{$ctrl.returnPayment.selected.innCode}}</span>
						<span ng-if="$ctrl.returnPayment.selected.bankName" >{{$ctrl.returnPayment.selected.bankName}}</span>
						<span ng-if="$ctrl.returnPayment.selected.bankcode" >{{$ctrl.returnPayment.selected.bankCode}}</span>
						<span ng-if="$ctrl.returnPayment.selected.bankBranchName" >{{$ctrl.returnPayment.selected.bankBranchName}}</span>
						<span ng-if="$ctrl.returnPayment.selected.bankBranchCode" >{{$ctrl.returnPayment.selected.bankBranchCode}}</span>
						<span ng-if="$ctrl.returnPayment.selected.accountNumber" >{{$ctrl.returnPayment.selected.accountNumber}}</span>
						<span ng-if="$ctrl.returnPayment.selected.address" >{{$ctrl.returnPayment.selected.address}}</span>
						<span ng-if="$ctrl.returnPayment.selected.city" >{{$ctrl.returnPayment.selected.city}}</span>
						<span ng-if="$ctrl.returnPayment.selected.stateName" >{{$ctrl.returnPayment.selected.stateName}}</span>
						<span ng-if="$ctrl.returnPayment.selected.zipCode" >{{$ctrl.returnPayment.selected.zipCode}}</span>
						<span ng-if="$ctrl.returnPayment.selected.phone" >{{$ctrl.core.text('order.mobile')}}: {{$ctrl.returnPayment.selected.phone}} 
					</div>	
				</div>
			</div>

			<hr class="dashed">

			<div class="clearfix marginTop40">
				<h4 class="push-left">Return total</h4>
				<h4 class="push-right">
				<span class="productPrice" ng-bind-html="$ctrl.getTotalRefoundPrice() | to_trusted">
				</span>
				</h4>
			</div>
			<div class="returnConfirmButtons text-right margBott20">
				<button class="btn-wide float-left" ng-click="$ctrl.goBack()"><span class="btn-arrow-left"></span>Back</button>
				<button class="btn-wide inverse" ng-click="$ctrl.confirm()">Confirm</button>
			</div>
		</div>
		<div ng-if="$ctrl.returnRequest.confirmedReturn">
				<h2 class="green step-title"><span class="ico ico-check-green ib-bottom"></span>Thank you for completing needed information.</h2>
				<p>You will receive the transfer shortly. If you have any problem, please contact our customer service.</p>

				<div ng-show="!$ctrl.isPatronymic() && !$ctrl.isPaperLessEnabled()" class="wrap40">
					<div class="ib-middle">
						<span class="ico60 ico60-hr07"></span>
					</div>
					<div class="ib-middle marginLeft20">
						<span>Remember to print your receipt</span>
					</div>
				</div>

				<div ng-show="$ctrl.isPatronymic()" class="wrap40 table flex-fallback text-center ret-confirm-ru">
					<div class="table-row">
						<div class="table-cell">
							<span class="ico60 ico60-hr02"></span>
							<p>Form</p>
						</div>
						<div class="table-cell">
							<span class="ico60 ico60-hr07"></span>
							<p>Ticket</p>
						</div>
						<div class="table-cell">
							<span class="ico60 ico60-hr08"></span>
							<p>Copy of Passport</p>
						</div>
						<div class="table-cell">
							<span class="ico60 ico60-hr09"></span>
							<p>Payment receipt</p>
						</div>
					</div>
				</div>
		</div>
</div>	</script>

	<script type="text/ng-template" id="tplReturnAddress">
<div class="checkoutWrapper" ng-init="guestReturnAddressController.init()">
    <form id="returnAddressForm" name="returnAddressForm" class="labeled-form" novalidate method="POST">
        <ul ng-if="returnMethod == 'HOMERETURN'">
        <!-- BEGIN SPOT=BK3_ESpot_guestHomeReturnForm -->

<!-- END SPOT=BK3_ESpot_guestHomeReturnForm -->
        <account-address 
			address="guestReturnAddressController.address" 
			show-billing-data="false"
			show-address-name="false"
			hide-button="true">
		</account-address>
	        <li >
	        	<ddd ng-if="guestReturnAddressController.isDRD == true" for="guestReturnAddressController.address" dates="guestReturnAddressController.ddd_ShippingDateOptions.shippingDates" times="guestReturnAddressController.ddd_ShippingRangeOptions.shippingRanges"></ddd>
	        </li>
	        
        </ul>
        <ul>
<!-- BEGIN SPOT=BK3_ESpot_guestDropoffReturnForm -->

<!-- END SPOT=BK3_ESpot_guestDropoffReturnForm -->
            <li class="formControl">
                <label for="retPckNum">Number of packages</label>
                <div class="form-control-container returns" ng-class="{'ng-invalid':!returnAddressForm.retPckNum.$valid && returnAddressForm.retPckNum.$touched}">
                    <ul class="return-packages">
                        <li class="return-packages-select">
                            <select name="retPckNum" ng-options="i for i in guestReturnAddressController.numItems track by i" ng-model="guestReturnAddressController.address.boxNumber" required>
                                <option style="display:none" value=""></option>
                            </select>
                        </li>
                        <li class="return-packages-text">
                            <span>How many packages will you be retourning?</span>
                        </li>
                    </ul>
                </div>
                <form-error-messages for="retPckNum"></form-error-messages>
            </li>
        </ul>
    </form>
</div>	</script>
	<script type="text/ng-template" id="tplGuestReturnConfirmation">
<div class="checkoutWrapper guestReturnConfirmationData" ng-init="guestReturnConfirmationController.init()">
    <h3>We will now show you your return details; please make sure that all the information is correct</h3>
<!-- BEGIN SPOT=BK3_ESpot_guestReturnConfirmation -->

<!-- END SPOT=BK3_ESpot_guestReturnConfirmation -->
    
    <div class="double-address">
      <div>
        <h4>Order information</h4>
        <p><span>Order date:</span> {{guestReturnConfirmationController.getOrderDate()}}</p>
        <p><span>Order number:</span> {{guestReturnConfirmationController.getOrderId()}}</p>
      </div>
      <div ng-if="guestReturnConfirmationController.isHomeReturn()">
        <h4>Pick-up address</h4>

        <p>{{guestReturnConfirmationController.getAddressName()}}</p>
        <p>{{guestReturnConfirmationController.getFirstAddressLine()}}</p>
        <p>{{guestReturnConfirmationController.getSecondAddressLine()}}</p>
        <p>{{guestReturnConfirmationController.getPhoneNumber()}}</p>
      </div>
        <div ng-if="guestReturnConfirmationController.isRussianPostRefundSelected()">
            <h4>Contact information for refund</h4>

            <p>{{guestReturnConfirmationController.getRefundName()}}</p>
            <p>{{guestReturnConfirmationController.getRefundAddress()}}</p>
            <p><span>Telephone Number:</span> {{guestReturnConfirmationController.getRefundPhoneNumber()}}</p>
            <p><span>Order number:</span> {{guestReturnConfirmationController.getOrderId()}}</p>
        </div>
        <div ng-if="guestReturnConfirmationController.isBankTransferRefundSelected()">
            <h4>Information for bank refund</h4>

            <p ng-show="!guestReturnConfirmationController.isSFI()">{{guestReturnConfirmationController.getRefundName()}}</p>
            <!-- <p ng-show="guestReturnConfirmationController.isSFI()"><span>Name of bank:</span> {{guestReturnConfirmationController.getRefundBankName()}}</p>  -->
            <p ng-show="guestReturnConfirmationController.isSFI()"><span>Name of bank:</span> {{guestReturnConfirmationController.getRefundBankName()}}</p>
            <p><span>Account number:</span> {{guestReturnConfirmationController.getRefundBankAccount()}}</p>
            <p ng-hide="core.iStoreJSON != 'JP'"><span>Branch code:</span> {{guestReturnConfirmationController.getRefundBranchCode()}}</p>
            <p ng-hide="core.iStoreJSON != 'JP'"><span>Branch name:</span> {{guestReturnConfirmationController.getRefundBranchName()}}</p>
            <p ng-hide="core.iStoreJSON != 'RU'"><span>INNï¿½:</span> {{guestReturnConfirmationController.getRefundBankInn()}}</p>
            <p ng-hide="core.iStoreJSON != 'RU'"><span>BIC:</span> {{guestReturnConfirmationController.getRefundBankBic()}}</p>
            <p ng-hide="!guestReturnConfirmationController.isSFI()"><span>BIC:</span> {{guestReturnConfirmationController.getRefundBankBic()}}</p>
            <!--<p><span>Telephone Number:</span> {{guestReturnConfirmationController.getRefundPhoneNumber()}}</p>-->
            <p><span>Order number:</span> {{guestReturnConfirmationController.getOrderId()}}</p>
        </div>
    </div>

    <h3>Items to return</h3>       
    
    <div id="selectedItems" class="shopCart-items">
    
        <div class="table">
            <div class="row-header">
                <div class="cell" style="text-align: left;">Description</div>
                <div class="cell">Size</div>
                <div class="cell">units</div>
                <div class="cell">Amount</div>
            </div>
            <div class="row" ng-repeat= "item in guestReturnConfirmationController.selectedItems" class="shopCart-item">
                <div class="cell">
                    <div class="image">
                        <img ng-src="{{guestReturnConfirmationController.getProductImageUrls(item)}}" class="img-responsive">
                    </div>
                    <span class="cell-image-text">
                        <span class="header-mobile">Description:</span>
                        <span data-ng-bind="item.name"></span>
                    </span>
                </div>
                <div class="cell">
                    <span class="header-mobile">Size:</span>
                    <span ng-if="item.productType != 'Virtual Card' && item.productType != 'Physical Card'" ng-bind="item.size"></span>
                </div>
                <div class="cell">
                    <span class="quantity strong">
                        <span class="header-mobile">units:</span>
                        <span class="number" ng-bind="item.quantity"></span>
                    </span>
                </div>
                <div class="cell">
                    <span class="header-mobile">Amount:</span>
                    <span class="prices" ng-bind-html="guestReturnConfirmationController.getItemCartPrice(item) | to_trusted"></span>
                </div>
            </div>
        </div>
    </div>
</div>	</script>
	<script type="text/ng-template" id="tplGuestReturnRequest">
<div class="checkoutWrapper guestReturnRequest">
    <aside ng-if="!guestReturnRequestController.isCurrentStepFinalStep()">
        <h1>Return an item</h1>
        <ul>
          <li ng-repeat="status in guestReturnRequestController.getPrintableSteps()"
                ng-class="{'highlight':guestReturnRequestController.isCurrentStep(status)}">{{guestReturnRequestController.getStatusHeaderTextByStatusIndex(status)}}</li>
        </ul>

    </aside>
    <h2 ng-if="!guestReturnRequestController.isCurrentStepFinalStep()">
        {{guestReturnRequestController.getCurrentStatusHeader()}}
    </h2>
    <div class="checkout-inner" ng-if="guestReturnRequestController.isCurrentStepStartStep()">
        <ul class="shippingMethodSelection item-2">
            <li ng-if="core.iStoreJSON.details.hasPhisicalStores">
                <div class="methodName strong" ng-click="guestReturnRequestController.selectStoreReturnMode()">
                    I want to return an item at a store
                    <span class="ico40 ico40-in-store"></span>
                </div>
            </li>
            <li ng-if="hasHomeReturn">
                <div class="methodName" ng-click="guestReturnRequestController.selectHomeReturnMode()">
                    I want the item to be picked up
                    <span class="ico40 ico40-in-store ico40-standard"></span>
                </div>
            </li>
            <li ng-if="hasDropoffReturn">
                <div class="methodName" ng-click="guestReturnRequestController.selectDropoffReturnMode()">
                    Drop off returns
                    <span class="ico40 ico40-in-store ico40-standard"></span>
                </div>
            </li>
        </ul>
<!-- BEGIN SPOT=BK3_ESpot_OrderGuestReturnStoreMessage -->

<!-- END SPOT=BK3_ESpot_OrderGuestReturnStoreMessage -->
    </div>
    <div class="checkout-inner dashed" ng-if="guestReturnRequestController.isStoreReturnSelected() && !guestReturnRequestController.isSpecialCOD() && !guestReturnRequestController.isSFI()">
        <h2>How do I return an item at a store?</h2>
        <p ng-show="!inditex.iStoreJSON.details.isPaperLessEnabled">The easiest way to make you return is to visit one of our Bershka stores.<br></p>
        <p ng-show="inditex.iStoreJSON.details.isPaperLessEnabled">To return or exchange an item, all you have to do is visit any Bershka store and show your electronic receipt, on paper or on your mobile, at the till.</p>
        <button class="openStoreLocatorButton" ng-click="guestReturnRequestController.openStoreLocatorPage()">Search for stores</button>
    </div>
    <div class="checkout-inner" ng-if="guestReturnRequestController.isHomeReturnSelected() || guestReturnRequestController.isDropoffReturnSelected() || ( guestReturnRequestController.isStoreReturnSelected() && guestReturnRequestController.isSpecialCOD()) || guestReturnRequestController.isSFI()">
            <order-item-selection  ng-if="guestReturnRequestController.isCurrentStepProductStep()"></order-item-selection>
            <guest-return-address ng-if="guestReturnRequestController.isCurrentStepReturnAddressStep()"></guest-return-address>
            <cod-refund-selection ng-if="guestReturnRequestController.isCurrentStepChooseRefundStep()"></cod-refund-selection>
            <guest-return-confirmation ng-if="guestReturnRequestController.isCurrentStepConfirmationStep()"></guest-return-confirmation>
            <return-success ng-if="guestReturnRequestController.isCurrentStepFinalStep()"></return-success>
    </div>        
    <ul ng-if="guestReturnRequestController.areNavegationButtonsVisible()">
        <li class="formControl midspace">
            <div class="table-wrapper dashed">
                <ul class="table fixed-layout">
                    <li class="table-cell">
                        <button ng-click="guestReturnRequestController.prevStep()">
                            Previous
                        </button>
                    </li>
                    <li class="table-cell">
                        <button ng-click="guestReturnRequestController.nextStep()" ng-class="{'btn-cta1':guestReturnRequestController.isCurrentStepConfirmationStep(),'btn-cta1 disabled':!guestReturnRequestController.isNextButtonEnabled()}">
                            Next
                        </button>
                    </li>
                </ul>
            </div>
        </li>
    </ul>
</div>
	</script>
	<script type="text/ng-template" id="tplOrderItemSelection">
<div class="shopCart-items return-order-summary" ng-init="guestOrderProductSelectionController.init()">
      <h3>Select the articles you want to return. You can only request a return for items you haven’t already requested it for.</h3>
<!-- BEGIN SPOT=BK3_ESpot_guestReturnOrderSelection -->

<!-- END SPOT=BK3_ESpot_guestReturnOrderSelection -->
      <p ng-show="returnMethod=='DROPOFFRETURN' && dropPageUrl" class="dropoff-return-locator-url">You can find the available drop off locations here <a href="javascript:;" ng-click="guestOrderProductSelectionController.goToDropPage()">{{dropPageUrl}}</a></p>
	  <form method="POST">
		<div class="table">
			<div class="row-header">
				<div class="cell"></div>
				<div class="cell" style="text-align: left;">Description</div>
				<div class="cell">Size</div>	
				<div class="cell">units</div>
				<div class="cell">Amount</div>
			</div>
			
			<div class="row" 
				 ng-class="{selected: guestOrderProductSelectionController.isSelected(item.id), noReturn: !item.isReturnable}" 
				 ng-if="guestOrderProductSelectionController.productList" 
				 ng-repeat-start="item in guestOrderProductSelectionController.productList">
				 
				<div class="cell">
	               <ul ng-if="item.isReturnable">
	                  <li ng-if="guestOrderProductSelectionController.isSelected(item.id)" 
	                  	  class="check" 
	                  	  ng-click="guestOrderProductSelectionController.removeFromReturnList(item.id)">
	                    <input id="checkedGuest" 
	                    	   type="radio" 
	                    	   name="checkedGuest" 
	                    	   value="checkedGuest" 
	                    	   class="hidden radio" 
	                    	   checked="checked" 
	                    	   custom-radiobutton>
	                  </li>
	                  <li ng-if="!guestOrderProductSelectionController.isSelected(item.id)" 
	                  	  class="check" 
	                  	  ng-click="guestOrderProductSelectionController.addToReturnList(item.id)">
	                  	<input id="checkedGuest02" type="radio" name="checkedGuest02" value="checkedGuest02" class="hidden radio" custom-radiobutton>
	                  </li>
	               </ul>		
				</div>
				
				<div class="cell">
	               <div class="image">
	                  <img ng-src="{{guestOrderProductSelectionController.getProductImageUrls(item)}}" class="img-responsive">
	               </div>
				   <span class="cell-image-text">
	               	  <span class="header-mobile">Description:</span>
	               	  <span data-ng-bind="item.name"></span>
				   </span>
				</div>
				
				<div class="cell">
					<span class="header-mobile">Size:</span>
					<span ng-if="item.productType != 'Virtual Card' && item.productType != 'Physical Card'" ng-bind="item.size"></span>
				</div>
				
				<div class="cell">
					<span class="quantity">
						<span class="header-mobile">units:</span>
						<span class="ico ico-minus" 
							  ng-style="{'display': item.quantity > 1 ? 'inline-block':'none'}" 
							  ng-if="item.productType != 'Virtual Card' && item.productType != 'Physical Card'" 
							  ng-click="guestOrderProductSelectionController.removeItemQuantity(item)">
						</span>
						
						<span class="number">{{item.quantity}}</span>
						<span class="ico ico-plus" 
							  ng-style="{'display': !guestOrderProductSelectionController.isMaxiumQuantity(item.id) ? 'inline-block':'none'}" 
							  ng-if="item.productType != 'Virtual Card' && item.productType != 'Physical Card'" 
							  ng-click="guestOrderProductSelectionController.addItemQuantity(item)">
						</span>
	               	</span>
				</div>
				
				<div class="cell">
					<span class="header-mobile">Amount:</span>
					<span class="prices" ng-bind-html="guestOrderProductSelectionController.getItemCartPrice(item) | to_trusted"></span>	
				</div>
			</div>
			
			<div class="reason-content hide return-reasons" ng-repeat-end>
				<div class="reason-dropdown">
					<ul>
						<li class="formControl nospace return-reason unlabeled" ng-class="{valid: item.returnReason, novalid: !item.returnReason}" id="custom-select-guest-order">
							<label for="itemReason" class="sr-only">Select a reason</label>
							<select name="itemReason" ng-class="{ignore: !item.selected}" ng-options="reason.description for reason in guestOrderProductSelectionController.returnReasons track by reason.id" ng-model="item.returnReason">
								<option style="display:none" value="">Select a reason</option>
							</select>
						</li>
					</ul>
				</div>
			</div>	
		</div>
				
	  </form>
   </div>
	</script>
	<script type="text/ng-template" id="tplcodRefundSelection">
<div id="tplcodRefundSelectionWrapper" class="checkoutWrapper" ng-init="codRefundSelectionController.init()">
    <div class="checkout-inner">
        <ul class="shippingMethodSelection item-2">
            <li ng-repeat="refundType in codRefundSelectionController.availableRefundOptions" ng-class="{'selected':codRefundSelectionController.isSelected($index)}">
                <div class="methodName strong" ng-click="codRefundSelectionController.select($index)">
                    {{codRefundSelectionController.getRefundTitle($index)}}
                </div>
            </li>
        </ul>
    </div>
    <bank-transfer-form ng-if="codRefundSelectionController.isBankTransferSelected()"></bank-transfer-form>
    <russian-post-form ng-if="codRefundSelectionController.isRussianPostSelected()"></russian-post-form>
</div>	</script>

	<script type="text/ng-template" id="tplContact">
<div class="contact-container">
	<div ng-if="::$ctrl.showTitle" ng-switch="$ctrl.chatHelper.page" ng-cloak class="contact-title">
		<h3 ng-switch-when="ItxProductPage">Questions about this product?</h3>
		<!-- <h3 ng-switch-when="ItxCategoryPage">???checkout.headerNeedHelp.ItxCategoryPage???</h3>
		<h3 ng-switch-when="ItxHomePage">???checkout.headerNeedHelp.ItxHomePage???</h3> -->
		<h3 ng-switch-when="ItxCheckoutPage.payment">Do you have a question about the payment method?</h3>
		<h3 ng-switch-when="ItxCheckoutPage.shipping">Questions about delivery?</h3>
		<h3 ng-switch-default>Need Help?</h3>
	</div>
	<div class="chat-contact-action" ng-if="$ctrl.showChatAction && $ctrl.chatHelper.enabled">
		<a class="button strong" ng-click="$ctrl.chatHelper.show(); $ctrl.chatHelper.track.open();">Start chat</a>
	</div>
	<div class="phone-contact-action" ng-if="$ctrl.isOpenForSale && $ctrl.showPhoneAction && $ctrl.deviceService.isMobileScreen() && (!$ctrl.showChatAction || !$ctrl.chatHelper.enabled)">
		<a class="button strong" ng-href="tel:{{::$ctrl.contactPhone}}" ng-click="$ctrl.trackEvent('llamar-tlf')">Call us</a>
	</div>
	<div class="contact-info">
		<div class="strong phone-contact-info" ng-if="$ctrl.isOpenForSale && $ctrl.showPhoneInfo && $ctrl.showPhoneAction && !$ctrl.deviceService.isMobileScreen() && (!$ctrl.showChatAction || !$ctrl.chatHelper.enabled)">
			Call us on&nbsp;{{::$ctrl.contactPhone}}
		</div>
		<div ng-if="$ctrl.showChatAction && $ctrl.chatHelper.enabled && $ctrl.showPhoneInfo && $ctrl.isOpenForSale" class="strong phone-contact-info">
			<span ng-if="!$ctrl.showSimplePhone" ng-bind-html="$ctrl.contactPhoneText | to_trusted"></span>
			<span ng-if="$ctrl.showSimplePhone">{{ $ctrl.contactPhone}}</span>
		</div>

		<div class="hours-contact-info" ng-if="::$ctrl.showHoursInfo">
			Monday to Friday from 08:00 to 17:00 <br> Saturday from 09:00 to 15:00
		</div>
		<div class="email-contact-info strong" ng-if="!$ctrl.chatHelper.enabled">
			<a href="javascript:;" ng-click="$ctrl.openContactModal()">or <a href="javascript:;" ng-click="$ctrl.openContactModal()">write to us</a> whenever you like.</a>
		</div>
		<!-- 
		<div class="email-contact-container" ng-if="::$ctrl.showEmail">
			<div ng-click="$ctrl.trackEvent('contacto-online')" class="contact-element contact-element-individual" ng-if="::$ctrl.isOpenForSale">
				<a href="javascript:;" ng-click="$ctrl.openContactModal('particular')">Contact (Online Store)</a>
			</div>
			<div ng-click="$ctrl.trackEvent('contacto-tienda')" class="contact-element contact-element-company">
				<a href="javascript:;" ng-click="$ctrl.openContactModal('company')">Contact (Store and company)</a>
			</div>
		</div>
		-->
	</div>
</div>	</script>

	<script type="text/ng-template" id="tplTeenPayWelcome">
<div id="teen-pay-welcome" class="teen-pay-component checkoutWrapper">
  <div class="intro-block">
    <p class="teen-pay-title">Invitation to YouPay</p>
  </div>
  <div class="teen-info-block no-mobile">
    <div class="teen-image">
<!-- BEGIN SPOT=BK3_ESpot_YouPay_welcome_image -->
<bsk-video video-urls="['https://player.vimeo.com/external/290667368.sd.mp4?s=a8bd5f66cd6a4c86af90497a756474a30bed5dfc&profile_id=164']" muted autoplay loop inline width="100%"></bsk-video>
<!-- END SPOT=BK3_ESpot_YouPay_welcome_image -->
    </div>
  </div>
  <div class="teen-actions-block">
    <p class="teen-pay-explanation">It's a new service in which you invite a family member or friend to pay for your orders on your behalf. Alternatively, you can pay for your friends' and family's orders. You choose between two profiles: IPay and IShop.</p>
    <div class="teen-block welcome-block">
      <p class="teen-pay-title">Do you want someone to pay for your orders for you?</p>
      <button class="block btn-cta1" ng-click="$ctrl.addSponsor()">
        Invite them to create an IPay profile 
      </button>
    </div>
    <div class="welcome-block">
      <p class="teen-pay-title">Do you want to pay for someone else's orders?</p>
      <button class="block btn-cta1" ng-click="$ctrl.addTeen()">
        Invite them to create an IShop profile
      </button>
    </div>
  </div>
</div>	</script>
	<script type="text/ng-template" id="tplTeenPayAddTeen">
<div class="get-back-block">
  <a ng-click="$ctrl.goBackToList()">
    <span class="ico ico-arrow-return product-back-ico"></span>
    <span class="product-back-text">Back</span>
  </a>
</div>
<div id="teen-pay-add-teen" class="teen-pay-component checkoutWrapper">
  <div class="intro-block">
    <p class="teen-pay-title">IPay profile details:</p>
    <p class="teen-pay-explanation"></p>
  </div>
  <div class="block-form">
    <ng-form id="addTeenForm" name="$ctrl.addTeen" class="labeled-form" novalidate>
      <ul class="delivery-form-list">
        <li class="formControl">
          <label class="formLabel" for="name" bsk-required>Name:</label>
          <div class="form-control-container" ng-class="{'ng-valid':$ctrl.addTeen.name.$valid, 'ng-invalid':!$ctrl.addTeen.name.$valid && $ctrl.addTeen.name.$touched}">
            <input ng-model="$ctrl.addTeenData.firstName" type="text" name="name" maxlength="120" required></input>
          </div>
          <form-error-messages for="name"></form-error-messages>
        </li>
        <li class="formControl">
          <label class="formLabel" for="surname" bsk-required>Surnames:</label>
          <div class="form-control-container" ng-class="{'ng-valid':$ctrl.addTeen.surname.$valid, 'ng-invalid':!$ctrl.addTeen.surname.$valid && $ctrl.addTeen.surname.$touched}">
            <input ng-model="$ctrl.addTeenData.lastName" type="text" name="surname" maxlength="120" required></input>
          </div>
          <form-error-messages for="surname"></form-error-messages>
        </li>
        <li class="formControl">
          <label class="formLabel" for="email" bsk-required>Email:</label>
          <div class="form-control-container" ng-class="{'ng-valid':$ctrl.addTeen.email.$valid, 'ng-invalid':!$ctrl.addTeen.email.$valid && $ctrl.addTeen.email.$touched}">
            <input ng-model="$ctrl.addTeenData.email" type="text" name="email" maxlength="120" required full-email></input>
          </div>
          <form-error-messages for="email"></form-error-messages>
        </li>
        <li class="formControl">
          <label class="formLabel" for="phone" bsk-required>Phone numer:</label>
          <div ng-class="{'ng-valid':$ctrl.addTeen.phone.$valid, 'ng-invalid':!$ctrl.addTeen.phone.$valid && $ctrl.addTeen.phone.$touched}">
            <phone-field phone="$ctrl.addTeenData.phone"></phone-field>
          </div>
          <form-error-messages for="phone"></form-error-messages>
        </li>
        <li>
          <span class="formLabel">How would you like us to communicate with you?</span>
          <input type="hidden" name="notifications" ng-model="$ctrl.addTeenData.notifications" required></input>
        </li>
        <li class="formControl check checkout-wallet-check">
          <label for="notificationemail" class="noLabel">
            <input name="notificationemail" type="checkbox" ng-model="$ctrl.addTeenHelperData.email" custom-checkbox class="checkbox" ng-click="$ctrl.parseNotifications()">
            <span class="checkboxText" ng-click="$ctrl.addTeenHelperData.email = !$ctrl.addTeenHelperData.email; $ctrl.parseNotifications()">By email</span>
          </label>
        </li>
        <li class="formControl check checkout-wallet-check">
          <label for="notificationsms" class="noLabel">
            <input name="notificationsms" type="checkbox" ng-model="$ctrl.addTeenHelperData.sms" custom-checkbox class="checkbox" ng-click="$ctrl.parseNotifications()">
            <span class="checkboxText" ng-click="$ctrl.addTeenHelperData.sms = !$ctrl.addTeenHelperData.sms; $ctrl.parseNotifications()">By text message</span>
          </label>
        </li>
        <li class="formControl" ng-if="$ctrl.addTeenHelperData.sms && !$ctrl.alreadyHasPhoneNumber">
          <label class="formLabel" for="sponsorphone" bsk-required>Phone numer:</label>
          <div ng-class="{'ng-valid':$ctrl.addTeen.sponsorphone.$valid, 'ng-invalid':!$ctrl.addTeen.sponsorphone.$valid && $ctrl.addTeen.sponsorphone.$touched}">
            <phone-field phone="$ctrl.addTeenHelperData.sponsorphone"></phone-field>
          </div>
          <form-error-messages for="sponsorphone"></form-error-messages>
          <div ng-hide="!$ctrl.addTeen.sponsorphone.$valid && $ctrl.addTeen.sponsorphone.$touched" class="field-explanation">Add your phone number here.</div>
        </li>
        <li class="formControl" ng-if="$ctrl.addTeen.notifications.$invalid && $ctrl.addTeenHelperData.touched">
          <div class="field-error-message">
            <span>You must select at least one option.</span>
          </div>
        </li>
        <li class="formControl">
          <button class="block btn-cta1" ng-click="$ctrl.doSubmit()" ng-disabled="$ctrl.addTeen.$invalid">SEND REQUEST</button>
        </li>
      </ul>
    </ng-form>
  </div>
</div>	</script>
	<script type="text/ng-template" id="tplTeenPayAddSponsor">
<div class="get-back-block">
  <a ng-click="$ctrl.goBackToList()">
    <span class="ico ico-arrow-return product-back-ico"></span>
    <span class="product-back-text">Back</span>
  </a>
</div>
<div id="teen-pay-add-sponsor" class="teen-pay-component checkoutWrapper">
  <div class="intro-block">
    <p class="teen-pay-title">IPay profile details:</p>
    <p class="teen-pay-explanation">Fill in the details of the person that you want to invite to YouPay. They'll receive an email or a text message asking them to accept your invitation. Once they do that, you can start using this service. </p>
  </div>
  <div class="block-form">
    <ng-form id="addSponsorForm" name="$ctrl.addSponsor" class="labeled-form" novalidate>
      <ul class="delivery-form-list">
        <li class="formControl">
          <label class="formLabel" for="name" bsk-required>Name:</label>
          <div class="form-control-container" ng-class="{'ng-valid':$ctrl.addSponsor.name.$valid, 'ng-invalid':!$ctrl.addSponsor.name.$valid && $ctrl.addSponsor.name.$touched}">
            <input ng-model="$ctrl.addSponsorData.firstName" type="text" name="name" maxlength="120" required></input>
          </div>
          <form-error-messages for="name"></form-error-messages>
        </li>
        <li class="formControl">
          <label class="formLabel" for="surname" bsk-required>Surnames:</label>
          <div class="form-control-container" ng-class="{'ng-valid':$ctrl.addSponsor.surname.$valid, 'ng-invalid':!$ctrl.addSponsor.surname.$valid && $ctrl.addSponsor.surname.$touched}">
            <input ng-model="$ctrl.addSponsorData.lastName" type="text" name="surname" maxlength="120" required></input>
          </div>
          <form-error-messages for="surname"></form-error-messages>
        </li>
        <li class="formControl">
          <label class="formLabel" for="email" bsk-required>Email:</label>
          <div class="form-control-container" ng-class="{'ng-valid':$ctrl.addSponsor.email.$valid, 'ng-invalid':!$ctrl.addSponsor.email.$valid && $ctrl.addSponsor.email.$touched}">
            <input ng-model="$ctrl.addSponsorData.email" type="text" name="email" maxlength="120" required full-email></input>
          </div>
          <form-error-messages for="email"></form-error-messages>
        </li>
        <li class="formControl">
          <label class="formLabel" for="phone" bsk-required>Phone numer:</label>
          <div class="form-control-container" ng-class="{'ng-valid':$ctrl.addSponsor.phone.$valid, 'ng-invalid':!$ctrl.addSponsor.phone.$valid && $ctrl.addSponsor.phone.$touched}">
            <phone-field phone="$ctrl.addSponsorData.phone"></phone-field>
          </div>
          <form-error-messages for="phone"></form-error-messages>
        </li>
        <li class="formControl">
          <button class="block btn-cta1" ng-click="$ctrl.doSubmit()" ng-disabled="$ctrl.addSponsor.$invalid">SEND REQUEST</button>
        </li>
      </ul>
    </ng-form>
  </div>
</div>	</script>
	<script type="text/ng-template" id="tplTeenPayTeenList">
<div id="teen-pay-teen-list" class="teen-pay-component checkoutWrapper">
  <div class="intro-block">
    <p class="teen-pay-title">What is YouPay?</p>
    <p class="teen-pay-explanation">It's a new service in which you invite a family member or friend to pay for your orders on your behalf. Alternatively, you can pay for your friends' and family's orders. You choose between two profiles: IPay and IShop.</p>
  </div>
  <div class="table-block">
    <table>
      <thead>
        <tr>
          <th><span class="no-mobile">Profile</span></th>
          <th>Name</th>
          <th>State</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="teen in $ctrl.teenList track by $index" ng-click="$ctrl.teenDetail($index)">
          <td><span class="ico ico-teen"></span></td>
          <td>
            <span class="teen-name">{{ teen.firstName }} {{ teen.lastName }}</span><br/>
            <span class="teen-email no-mobile">{{ teen.email }}</span>
          </td>
          <td>{{ $ctrl.getStatusString(teen.status) }}</td>
          <td><a ng-if="teen.status === 1"><span class="no-mobile">Edit</span> <span class="ico ico-edit"></span></a></td>
        </tr>
      </tbody>
    </table>
    <button class="block btn-cta1" ng-click="$ctrl.addTeen()" ng-disabled="$ctrl.isMaxTeens">
      ADD ISHOP PROFILE
    </button>
  </div>
</div>	</script>
	<script type="text/ng-template" id="tplTeenPayTeenDetail">
<div class="get-back-block">
  <a ng-click="$ctrl.goBackToList()">
    <span class="ico ico-arrow-return product-back-ico"></span>
    <span class="product-back-text">Back</span>
  </a>
</div>
<div id="teen-pay-teen-detail" class="teen-pay-component checkoutWrapper">
  <div class="intro-block">
    <p class="teen-pay-title">What is YouPay?</p>
    <p class="teen-pay-explanation">It's a new service in which you invite a family member or friend to pay for your orders on your behalf. Alternatively, you can pay for your friends' and family's orders. You choose between two profiles: IPay and IShop.</p>
  </div>
  <div class="teen-data">
    <p class="teen-pay-title">Personal details</p>
    <p class="bold">{{ $ctrl.currentTeen.firstName }} {{ $ctrl.currentTeen.lastName }}</p>
    <p>{{ $ctrl.currentTeen.email }}</p>
    <p ng-if="$ctrl.currentTeen.phone.subscriberNumber && $ctrl.currentTeen.phone.subscriberNumber !== '-'">{{ $ctrl.currentTeen.phone.countryCode }} {{ $ctrl.currentTeen.phone.subscriberNumber }}</p>
  </div>
  <div class="notifications-block" ng-if="$ctrl.currentTeen.status == $ctrl.teenPayConstants.teen.status.ACCEPTED">
    <p class="teen-pay-title">How would you like us to communicate with you?</p>
    <ng-form id="teenDetailForm" name="$ctrl.teenDetail" class="labeled-form" novalidate>
      <input type="hidden" name="notifications" ng-model="$ctrl.teenDetailData.notifications" required></input>
      <ul>
        <li class="formControl check checkout-wallet-check">
          <label for="notificationemail" class="noLabel">
            <input name="notificationemail" type="checkbox" ng-model="$ctrl.teenDetailHelperData.email" custom-checkbox class="checkbox" ng-click="$ctrl.parseNotifications()">
            <span class="checkboxText" ng-click="$ctrl.teenDetailHelperData.email = !$ctrl.teenDetailHelperData.email; $ctrl.parseNotifications()">By email</span>
          </label>
        </li>
        <li class="formControl check checkout-wallet-check">
          <label for="notificationsms" class="noLabel">
            <input name="notificationsms" type="checkbox" ng-model="$ctrl.teenDetailHelperData.sms" custom-checkbox class="checkbox" ng-click="$ctrl.parseNotifications()">
            <span class="checkboxText"ng-click="$ctrl.teenDetailHelperData.sms = !$ctrl.teenDetailHelperData.sms; $ctrl.parseNotifications()">By text message</span>
          </label>
        </li>
        <li class="formControl" ng-if="$ctrl.teenDetailHelperData.sms && !$ctrl.alreadyHasPhoneNumber">
          <label class="formLabel" for="sponsorphone" bsk-required>Phone numer:</label>
          <div ng-class="{'ng-valid':$ctrl.teenDetail.sponsorphone.$valid, 'ng-invalid':!$ctrl.teenDetail.sponsorphone.$valid && $ctrl.teenDetail.sponsorphone.$touched}">
            <phone-field phone="$ctrl.teenDetailHelperData.sponsorphone"></phone-field>
          </div>
          <form-error-messages for="sponsorphone"></form-error-messages>
          <div ng-hide="!$ctrl.teenDetail.sponsorphone.$valid && $ctrl.teenDetail.sponsorphone.$touched" class="field-explanation">Add your phone number here.</div>
        </li>
        <li class="formControl" ng-if="$ctrl.teenDetail.notifications.$invalid && $ctrl.teenDetailHelperData.touched">
          <div class="field-error-message">
            <span>You must select at least one option.</span>
          </div>
        </li>
      </ul>
      <button class="inverse two-cols first-col" ng-click="$ctrl.doSubmit()" ng-disabled="$ctrl.teenDetail.$invalid || !$ctrl.teenDetailHelperData.touched"></button>
      <button class="inverse two-cols last-col" ng-click="$ctrl.unlinkTeen()">DEACTIVATE PROFILE</button>
    </ng-form>
  </div>
  <!-- div class="" ng-if="$ctrl.currentTeen.status == $ctrl.teenPayConstants.teen.status.REQUESTED">
    <button class="block inverse" ng-click="$ctrl.unlinkTeen()">???youPay.teenDetail.deleteTeen???</button>
  </div -->
  <div class="orders-block">
    <p class="teen-pay-title" ng-if="$ctrl.currentOrders.length > 0">YouPay orders</p>
    <ul>
      <li ng-repeat="order in $ctrl.currentOrders track by $index">
        <a ng-click="$ctrl.viewMiniOrder(order.id, order.status)">
          <div class="mini-order">
            <div class="mini-order-top">
              <span class="mini-order-date" ng-bind-html="$ctrl.formatDate(order.date)"></span>
              <span class="bold">{{ order.id }}</span><br/>
            </div>
            <div class="mini-order-bottom">
              <span class="mini-order-email">{{ $ctrl.currentTeen.email }}</span>
              <span class="" ng-bind-html="$ctrl.formatPrice(order.totalOrder)"></span><br/>
              <span class="">{{ $ctrl.getOrderStatus(order.status) }}</span>
            </div>
          </div>
        </a>
      </li>
    </ul>
  </div>
</div>	</script>
	<script type="text/ng-template" id="tplTeenPaySponsorList">
<div id="teen-pay-sponsor-list" class="teen-pay-component checkoutWrapper">
  <div class="intro-block">
    <p class="teen-pay-title">What is YouPay?</p>
    <p class="teen-pay-explanation">It's a new service in which you invite a family member or friend to pay for your orders on your behalf. Alternatively, you can pay for your friends' and family's orders. You choose between two profiles: IPay and IShop.</p>
  </div>
  <div class="table-block">
    <table>
      <thead>
        <tr>
          <th>Profile</th>
          <th>Name</th>
          <th>State</th>
          <th>&nbsp;</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="sponsor in $ctrl.sponsorList track by $index" ng-click="$ctrl.sponsorDetail($index)">
          <td><span class="ico ico-sponsor"></span></td>
          <td>
            <span class="sponsor-name">{{ sponsor.firstName }} {{ sponsor.lastName }}</span><br/>
            <span class="sponsor-email">{{ sponsor.email }}</span>
          </td>
          <td>{{ $ctrl.getStatusString(sponsor.status) }}</td>
          <td><a ng-if="sponsor.status === 1">Edit <span class="ico ico-edit"></span></a></td>
        </tr>
      </tbody>
    </table>
    <button class="block btn-cta1" ng-click="$ctrl.addSponsor()" ng-disabled="$ctrl.isMaxSponsors">
      ADD IPAY PROFILE
    </button>
  </div>
</div>	</script>
	<script type="text/ng-template" id="tplTeenPaySponsorDetail">
<div class="get-back-block">
  <a ng-click="$ctrl.goBackToList()">
    <span class="ico ico-arrow-return product-back-ico"></span>
    <span class="product-back-text">Back</span>
  </a>
</div>
<div id="teen-pay-sponsor-detail" class="teen-pay-component checkoutWrapper">
  <div class="intro-block">
    <p class="teen-pay-title">What is YouPay?</p>
    <p class="teen-pay-explanation">It's a new service in which you invite a family member or friend to pay for your orders on your behalf. Alternatively, you can pay for your friends' and family's orders. You choose between two profiles: IPay and IShop.</p>
  </div>
  <div class="sponsor-data">
    <p class="teen-pay-title">PERSONAL DETAILS</p>
    <p class="bold">{{ $ctrl.currentSponsor.firstName }} {{ $ctrl.currentSponsor.lastName }}</p>
    <p>{{ $ctrl.currentSponsor.email }}</p>
    <p ng-if="$ctrl.currentSponsor.phone.subscriberNumber">{{ $ctrl.currentSponsor.phone.countryCode }} {{ $ctrl.currentSponsor.phone.subscriberNumber }}</p>
  </div>
  <div class="" ng-if="$ctrl.currentSponsor.status == $ctrl.teenPayConstants.sponsor.status.ACCEPTED">
    <button class="block inverse" ng-click="$ctrl.unlinkSponsor()">DEACTIVATE PROFILE</button>
  </div>
  <div class="orders-block" ng-if="$ctrl.currentSponsor.status == $ctrl.teenPayConstants.sponsor.status.ACCEPTED">
    <p class="teen-pay-title" ng-if="$ctrl.currentOrders.length >= 1">Your orders</p>
    <ul>
      <li ng-repeat="order in $ctrl.currentOrders track by $index">
        <a ng-click="$ctrl.viewMiniOrder(order.id, order.status)">
          <div class="mini-order">
            <div class="mini-order-top">
              <span class="mini-order-date" ng-bind-html="$ctrl.formatDate(order.date)"></span>
              <span class="bold">{{ order.id }}</span><br/>
            </div>
            <div class="mini-order-bottom">
              <span class="mini-order-email">{{ $ctrl.currentSponsor.email }}</span>
              <span class="" ng-bind-html="$ctrl.formatPrice(order.totalOrder)"></span><br/>
              <span class="">{{ $ctrl.getOrderStatus(order.status) }}</span>
            </div>
          </div>
        </a>
      </li>
    </ul>
  </div>
</div>	</script>
	<script type="text/ng-template" id="tplTeenPayTeenAccept">
<div class="get-back-block">
  <a ng-click="$ctrl.goBackToList()">
    <span class="ico ico-arrow-return product-back-ico"></span>
    <span class="product-back-text">Back</span>
  </a>
</div>
<div id="teen-pay-teen-accept" class="teen-pay-component checkoutWrapper">
  <div class="intro-block">
    <p class="teen-pay-title">Invitation to YouPay</p>
    <p class="teen-pay-explanation">{{ $ctrl.currentSponsor.firstName }} {{ $ctrl.currentSponsor.lastName }} ({{ $ctrl.currentSponsor.email }}) has invited you to YouPay.</p>
  </div>
  <div class="block-small">
    <div class="block-default">
      <p class="teen-pay-title">???youPay.teenAccept.pendingRequest???</p>
      <p class="bold">{{ $ctrl.currentSponsor.firstName }} {{ $ctrl.currentSponsor.lastName }}</p>
      <p>{{ $ctrl.currentSponsor.email }}</p>
    </div>
    <div class="block-buttons">
      <div><button class="block inverse" ng-click="$ctrl.doSponsorRequest(true)">ACCEPT REQUEST</button></div>
      <div><button class="block" ng-click="$ctrl.doSponsorRequest(false)">CANCEL REQUEST</button></div>
    </div>
  </div>
</div>	</script>
	<script type="text/ng-template" id="tplTeenPaySponsorAccept">
<div class="get-back-block">
  <a ng-click="$ctrl.goBackToList()">
    <span class="ico ico-arrow-return product-back-ico"></span>
    <span class="product-back-text">Back</span>
  </a>
</div>
<div id="teen-pay-sponsor-accept" class="teen-pay-component checkoutWrapper">
  <div class="intro-block">
    <p class="teen-pay-title">Invitation to YouPay</p>
    <p class="teen-pay-explanation">{{ $ctrl.currentTeen.firstName }} {{ $ctrl.currentTeen.lastName }} ({{ $ctrl.currentTeen.email }}) has invited you to YouPay.</p>
  </div>
  <div class="block-small">
    <div class="block-default">
      <p class="bold">{{ $ctrl.currentTeen.firstName }} {{ $ctrl.currentTeen.lastName }}</p>
      <p>{{ $ctrl.currentTeen.email }}</p>
    </div>
    <div class="block-form">
      <ng-form id="addTeenForm" name="$ctrl.addTeen" class="labeled-form" novalidate>
        <ul>
          <li>
            <span class="formLabel">How would you like us to communicate with you?</span>
            <input type="hidden" name="notifications" ng-model="$ctrl.addTeenData.notifications" required></input>
          </li>
          <li class="formControl check checkout-wallet-check">
            <label for="notificationemail" class="noLabel">
              <input name="notificationemail" type="checkbox" ng-model="$ctrl.addTeenHelperData.email" custom-checkbox class="checkbox" ng-click="$ctrl.parseNotifications()">
              <span class="checkboxText" ng-click="$ctrl.addTeenHelperData.email = !$ctrl.addTeenHelperData.email; $ctrl.parseNotifications()">By email</span>
            </label>
          </li>
          <li class="formControl check checkout-wallet-check">
            <label for="notificationsms" class="noLabel">
              <input name="notificationsms" type="checkbox" ng-model="$ctrl.addTeenHelperData.sms" custom-checkbox class="checkbox" ng-click="$ctrl.parseNotifications()">
              <span class="checkboxText" ng-click="$ctrl.addTeenHelperData.sms = !$ctrl.addTeenHelperData.sms; $ctrl.parseNotifications()">By text message</span>
            </label>
          </li>
          <li class="formControl" ng-if="$ctrl.addTeenHelperData.sms && !$ctrl.alreadyHasPhoneNumber">
            <label class="formLabel" for="sponsorphone" bsk-required>???youPay.addTeen.form.sponsorphone???</label>
            <div ng-class="{'ng-valid':$ctrl.addTeen.sponsorphone.$valid, 'ng-invalid':!$ctrl.addTeen.sponsorphone.$valid && $ctrl.addTeen.sponsorphone.$touched}">
              <phone-field phone="$ctrl.addTeenHelperData.sponsorphone"></phone-field>
            </div>
            <form-error-messages for="sponsorphone"></form-error-messages>
          </li>
          <li class="formControl" ng-if="$ctrl.addTeen.notifications.$invalid && $ctrl.addTeenHelperData.touched">
            <div class="field-error-message">
              <span>You must select at least one option.</span>
            </div>
          </li>
        </ul>
      </ng-form>
    </div>
    <div class="block-buttons">
      <div><button class="block inverse" ng-click="$ctrl.doTeenRequest(true)"  ng-disabled="$ctrl.addTeen.$invalid">ACCEPT REQUEST</button></div>
      <div><button class="block" ng-click="$ctrl.doTeenRequest(false)">CANCEL REQUEST</button></div>
    </div>
  </div>
</div>	</script>
	<script type="text/ng-template" id="tplTeenOrderRequested">
<div class="teen-order-requested">
	<div class="messages center" ng-if="!$ctrl.isSponsorUser">
		<!-- Pago solicitado -->
		<div ng-if="$ctrl.orderStatus =='requested'">
			<span class="bold title">REQUEST SENT</span>
			<span ng-bind-html="::($ctrl.infoText | to_trusted)"></span>
		</div>
		<!-- Pedido cancelado -->
		<div ng-if="$ctrl.orderStatus =='cancelled'">
			<span class="bold title">The order has been canceled.</span>
		</div>
		<!-- Pedido aceptado -->
		<div ng-if="$ctrl.orderStatus =='accepted'">
			<span class="bold title">Your IPay has accepted your order</span>
		</div>
	</div>
	<div class="messages center" ng-if="$ctrl.isSponsorUser">
		<!-- Pedido cancelado -->
		<div ng-if="$ctrl.orderStatus =='cancelled'">
			<span class="bold title">The order has been canceled.</span>
		</div>
		<!-- Pedido aceptado -->
		<div ng-if="$ctrl.orderStatus =='accepted'">
			<span class="bold title">You have accepted your IShop's order</span>
		</div>
	</div>

<div class="cart-product-header cart-product-item-table hide-full-mobile font-bold table">
	<div class="cart-product-item-container table-row">
		<span class="cart-product-item-element table-cell cart-product-image">Item</span>
		<span class="cart-product-item-element table-cell cart-product-description"></span>
		<span class="cart-product-item-element table-cell cart-product-size">Size</span>
		<span class="cart-product-item-element table-cell cart-product-color">Colour</span>
		<span class="cart-product-item-element table-cell cart-product-quantity">Units</span>
		<span class="cart-product-item-element table-cell cart-product-price">Price</span>
	</div>
</div>
	<div>
		<shop-cart-item ng-repeat="item in $ctrl.items track by item.sku" product="item"></shop-cart-item>
	</div>

	<div class="info center" ng-if="$ctrl.orderStatus == 'requested'">
		<hr class="dashed">
		<!--<span class="info-message-1 title">Reminder:</span>-->
		<span class="info-message-2" ng-bind-html="::$ctrl.infoTime"></span>
		<hr class="dashed">
	</div>

<!-- BEGIN SPOT=BK3_ESpot_TEEN_ORDER_REQUESTED -->

<!-- END SPOT=BK3_ESpot_TEEN_ORDER_REQUESTED -->

	

	<div class="info-buttons center">
		<button ng-if="$ctrl.isCancelable" class="cancel-action hide-full-mobile" ng-click="$ctrl.rejectOrder()">
			<span class="ellipsis">Cancel order</span>
		</button>
		<button class="inverse" ng-click="$ctrl.goToUserOrders()">
			<span class="ellipsis">My Orders</span>
		</button>
		<button ng-if="$ctrl.isCancelable" class="cancel-action is-full-mobile"  ng-click="$ctrl.rejectOrder()">
			<span class="ellipsis">Cancel order</span>
		</button>
	</div>
</div>	</script>

	<script type="text/ng-template" id="tplInvoiceTicketInfo">
<ng-form id="invoiceTicketInfoForm" name="invoiceTicketInfoForm"> 
	<p class="t2f_ticketInfo_subdesc">Enter the receipt information</p>
	<ul>
		<li class="formControl">
			<label class="formLabel" for="ticketNumber" bsk-required>RECEIPT NUMBER</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceTicketInfoForm.ticketNumber.$valid, 'ng-invalid':!invoiceTicketInfoForm.ticketNumber.$valid && invoiceTicketInfoForm.ticketNumber.$touched}">
				<input trigger-root="focus,blur" ng-model="$ctrl.ticketInfo.ticketNumber" type="number" name="ticketNumber" maxlength="120" required ticket-popup mspot="t2f_ticketNumber"/>
			</div>
		</li>
		<li class="formControl">
   			<label class="formLabel" bsk-required>RECEIPT DATE</label>
   			<bsk-date ng-model="$ctrl.ticketInfo.date" numeric="true" format="yyyy-mm-dd" viewformat="dd-mm-yyyy" range="0,0" required></bsk-date>
   			<form-error-messages for="ticketNumber"></form-error-messages>
   		</li>
   		<li class="formControl">
			<label class="formLabel" for="shopId" bsk-required>STORE ID</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceTicketInfoForm.shopId.$valid, 'ng-invalid':!invoiceTicketInfoForm.shopId.$valid && invoiceTicketInfoForm.shopId.$touched}">
				<input trigger-root="focus,blur" ng-model="$ctrl.ticketInfo.shopId" type="number" name="shopId"  maxlength="120" required ticket-popup mspot="t2f_shopId"/>
			</div>
			<form-error-messages for="shopId"></form-error-messages>
		</li>
		<li class="formControl">
			<label class="formLabel" for="amount" bsk-required>TOTAL AMOUNT</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceTicketInfoForm.amount.$valid, 'ng-invalid':!invoiceTicketInfoForm.amount.$valid && invoiceTicketInfoForm.amount.$touched}">
				<input trigger-root="focus,blur" ng-model="$ctrl.ticketInfo.amount" type="text" ng-pattern="/^\d+(?:[\.,]{1}\d+)?$/" name="amount" maxlength="120" required ticket-popup mspot="t2f_amount"/>
			</div>
			<form-error-messages for="amount"></form-error-messages>
		</li>

		<li class="formControl" ng-if="$ctrl.ticketInfo.isEcommerceOrder">
			<label class="formLabel" for="orderId" bsk-required>ORDER NUMBER</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceTicketInfoForm.orderId.$valid, 'ng-invalid':!invoiceTicketInfoForm.orderId.$valid && invoiceTicketInfoForm.orderId.$touched}">
				<input trigger-root="focus,blur" ng-model="$ctrl.ticketInfo.orderId" type="number" name="orderId" maxlength="120" required ticket-popup mspot="t2f_orderId"/>
			</div>
			<form-error-messages for="orderId"></form-error-messages>
		</li>

		<li class="formControl" ng-if="!$ctrl.ticketInfo.isEcommerceOrder">
			<label class="formLabel" for="orderId" bsk-required>???requestInvoice.transaction???</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceTicketInfoForm.orderId.$valid, 'ng-invalid':!invoiceTicketInfoForm.orderId.$valid && invoiceTicketInfoForm.orderId.$touched}">
				<input trigger-root="focus,blur" ng-model="$ctrl.ticketInfo.orderId" type="number" name="orderId" maxlength="120" required ticket-popup mspot="t2f_transId"/>
			</div>
			<form-error-messages for="orderId"></form-error-messages>
		</li>

		<li class="formControl" ng-if="!$ctrl.ticketInfo.isEcommerceOrder">
			<label class="formLabel" for="workStation" bsk-required>WORKSTATION ID</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceTicketInfoForm.workStation.$valid, 'ng-invalid':!invoiceTicketInfoForm.workStation.$valid && invoiceTicketInfoForm.workStation.$touched}">
				<input trigger-root="focus,blur" ng-model="$ctrl.ticketInfo.workStation" type="number" name="workStation" maxlength="120" required ticket-popup mspot="t2f_workStation"/>
			</div>
			<form-error-messages for="workStation"></form-error-messages>
		</li>
		<li>
			<bsk-captcha t2f="true" ng-model="$ctrl.ticketInfo.captcha" reload></bsk-captcha>
		</li>
	</ul>
</ng-form>	</script>
	<script type="text/ng-template" id="tplInvoiceBillingInfo">
<ng-form name="invoiceBillingInfoForm" id="invoiceBillingInfoForm">
	<h3>REQUEST INVOICE</h3>
	<p class="font-bold">Enter your tax details</p>
	<ul>
		<li class="formControl">
			<label class="formLabel" for="firstName" bsk-required ng-if="!$ctrl.billingInfo.isCompany">Name</label>
			<label class="formLabel" for="firstName"  ng-if="$ctrl.billingInfo.isCompany">Name</label>		
			<div class="form-control-container" ng-class="{'ng-valid':invoiceBillingInfoForm.firstName.$valid && invoiceBillingInfoForm.firstName.$viewValue.length, 'ng-invalid':!invoiceBillingInfoForm.firstName.$valid && invoiceBillingInfoForm.firstName.$touched}">
				<input trigger-root="focus,blur" ng-required="!$ctrl.billingInfo.isCompany" ng-model="$ctrl.billingInfo.firstName" type="text" name="firstName" maxlength="120" required>
			</div>
			<form-error-messages for="firstName"></form-error-messages>
		</li>
		<li class="formControl">
			<label class="formLabel" for="surname1" ng-if="!$ctrl.billingInfo.isCompany" bsk-required>SURNAME</label>
			<label class="formLabel" for="surname1" ng-if="$ctrl.billingInfo.isCompany"  >SURNAME</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceBillingInfoForm.surname1.$valid && invoiceBillingInfoForm.surname1.$viewValue.length, 'ng-invalid':!invoiceBillingInfoForm.surname1.$valid && invoiceBillingInfoForm.surname1.$touched}">
				<input trigger-root="focus,blur"  ng-required="!$ctrl.billingInfo.isCompany"  ng-model="$ctrl.billingInfo.surname1" type="text" name="surname1" maxlength="120" required>
			</div>
			<form-error-messages for="surname1"></form-error-messages>
		</li>
		<li class="formControl">
			<label class="formLabel" for="surname2" >SURNAME</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceBillingInfoForm.surname2.$valid && invoiceBillingInfoForm.surname2.$viewValue.length, 'ng-invalid':!invoiceBillingInfoForm.surname2.$valid && invoiceBillingInfoForm.surname2.$touched}">
				<input trigger-root="focus,blur" ng-model="$ctrl.billingInfo.surname2" type="text" name="surname2" maxlength="120"></input>
			</div>
			<form-error-messages for="surname2"></form-error-messages>
		</li>
		<li class="switch-tabs">
			<div class="selector-container">
				<div class="switch-tab" ng-class="{ 'active': !$ctrl.billingInfo.isCompany }" ng-click="$ctrl.changeIsCompany(false)">
					<input trigger-persist type="radio" name="typeCompanyButton" ng-model="$ctrl.billingInfo.isCompany" ng-value="false">
					<label for="privateButton" class="font-bold">Individual</label>
				</div>
				<div class="switch-tab" ng-class="{ 'active': $ctrl.billingInfo.isCompany }" ng-click="$ctrl.changeIsCompany(true)">
					<input trigger-persist type="radio" name="typeCompanyButton" ng-model="$ctrl.billingInfo.isCompany" ng-value="true">
					<label for="companyButton" class="font-bold">Company</label>
				</div>
			</div>
		</li>
		<li class="formControl" ng-if="$ctrl.billingInfo.isCompany">
			<label class="formLabel" for="companyName" bsk-required>Company name</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceBillingInfoForm.companyName.$valid, 'ng-invalid':!invoiceBillingInfoForm.companyName.$valid && invoiceBillingInfoForm.companyName.$touched}">
				<input trigger-root="focus,blur" ng-model="$ctrl.billingInfo.companyName" type="text" name="companyName" maxlength="120" required>
			</div>
			<form-error-messages for="companyName"></form-error-messages>
		</li>
		<li class="formControl" ng-if="$ctrl.billingInfo.isCompany">
			<label class="formLabel" bsk-required>???requestInvoice.CIF???</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceBillingInfoForm.nif.$valid, 'ng-invalid':!invoiceBillingInfoForm.nif.$valid && invoiceBillingInfoForm.nif.$touched}">
				<input trigger-root="focus,blur" class="company-field" ng-model="$ctrl.billingInfo.vatin" id-number-cif type="text" name="nif" required>
			</div>
			<form-error-messages for="nif"></form-error-messages>
		</li>
		<li class="formControl" ng-if="!$ctrl.billingInfo.isCompany">
			<label class="formLabel" bsk-required>???requestInvoice.NIF???</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceBillingInfoForm.nif.$valid, 'ng-invalid':!invoiceBillingInfoForm.nif.$valid && invoiceBillingInfoForm.nif.$touched}">
				<input trigger-root="focus,blur" class="company-field" ng-model="$ctrl.billingInfo.vatin" id-number-nif type="text" name="nif" required>
			</div>
			<form-error-messages for="nif"></form-error-messages>
		</li>
		<li class="formControl">
			<label class="formLabel" for="email" bsk-required>Email</label>
			<div class="form-control-container" ng-class="{'ng-valid':invoiceBillingInfoForm.email.$valid, 'ng-invalid':!invoiceBillingInfoForm.email.$valid && invoiceBillingInfoForm.email.$touched}">
				<input trigger-root="focus,blur" ng-model="$ctrl.billingInfo.email" type="email" name="email" required full-email>
			</div>
			<form-error-messages for="email"></form-error-messages>
		</li>
		<li class="formControl">
			<label for="foreigner" class="noLabel">
				<div class="custom-checkbox-container">
					<input name="savecard" type="checkbox" class="checkbox" ng-model="$ctrl.billingInfo.foreigner" custom-checkbox ng-change="!$ctrl.billingInfo.foreigner">
				</div>
				<span>Nationality other than the country from which the request was made</span>
			</label>
		</li>
		<li ng-if="$ctrl.billingInfo.foreigner">
			<label class="formLabel" for="email" bsk-required>SELECT COUNTRY</label>
			<country-field dest="$ctrl.billingInfo.country" is-selectable></country-field>
		</li>
		<li class="next-step-button">
			<button class="btn-cta1 wider" ng-disabled="invoiceBillingInfoForm.$invalid" ng-click="$ctrl.nextStep()">Continue</button>
		</li>
	</ul>
</ng-form>	</script>
	<script type="text/ng-template" id="tplInvoiceTicketType">
<ng-form name="invoiceTicketTypeForm" id="invoiceTicketTypeForm">
	<p class="t2f_subdesc">Indicate if you'd like to convert a store receipt or online receipt into an invoice</p> 
	<ul>
		<li>
			<div class="switch-types">
				<div class="selector-container">
					<div class="switch-type"  ng-class="{ 'active': $ctrl.ticketType.isEcommerceOrder }" ng-click="$ctrl.ticketType.isEcommerceOrder=true">
						<!--<input  type="radio" name="typeTicketButton" ng-model="$ctrl.ticketType.isEcommerceOrder" ng-value="true">-->
						<span class="ico" ng-class="{'ico-bag2-active': $ctrl.ticketType.isEcommerceOrder, 'ico-bag2': !$ctrl.ticketType.isEcommerceOrder}"></span>
						<label for="privateButton" class="font-bold">Online</label>
					</div>
					<div class="switch-type" ng-class="{ 'active': !$ctrl.ticketType.isEcommerceOrder }" ng-click="$ctrl.ticketType.isEcommerceOrder=false">
						<!--<input  type="radio" name="typeTicketButton" ng-model="$ctrl.ticketType.isEcommerceOrder" ng-value="false">-->
						<span class="ico" ng-class="{'ico-pickup2-active': !$ctrl.ticketType.isEcommerceOrder, 'ico-pickup2': $ctrl.ticketType.isEcommerceOrder}"></span>
						<label for="ticketButton" class="font-bold">Store</label>
					</div>
				</div>
			</div>
		</li>
		<li>
			<button class="btn-cta1 wider" ng-disabled="invoiceTicketTypeForm.$invalid" ng-click="$ctrl.nextStep()">Continue</button>
		</li>
	</ul>
</ng-form>	</script>
	<script type="text/ng-template" id="tplInvoiceSelectMethod">
<div class="t2f-select-method">
	<div class="t2f-select-method-title">
		<span class="ico ico-ticket2"></span>
		<h4>REQUEST INVOICE</h4>
	</div>
	<ul class="t2f-select-method-options">
		<li>
			
			<p>If you placed the order online as a registered user, go to the My Orders section</p>
			<button class="btn-cta1" ng-click="$ctrl.goToUserOrders()">GO TO MY ORDERS</button>
		</li>
		<li>
			<p>If you placed your order as a guest or in a physical store, you can request your invoice here:</p>
			<button class="btn-cta1" ng-click="$ctrl.nextStep()">REQUEST</button>
		</li>
	</ul>
</div>
	</script>

	<script type="text/ng-template" id="tplCreditCardCvv2">
<ng-form name="$ctrl.creditCardCvv2Form">
	<label class="formLabel" for="cvv2" bsk-required>CVV2 security code</label>
	<div class="formWrap">
		<div class="form-control-container cvv" ng-class="{'ng-valid':$ctrl.creditCardCvv2Form.cvv2.$valid, 'ng-invalid':!$ctrl.creditCardCvv2Form.cvv2.$valid && $ctrl.creditCardCvv2Form.cvv2.$touched}">
			<input trigger-root="focus,blur" valtype="default" type="tel" name="cvv2" ng-model="$ctrl.cvv2" required ui-mask="{{$ctrl.mask || $ctrl.paymentMethods.selected.app.cvv2Mask}}">
		</div>
		<span class="cvv-info-texts" ng-click="$ctrl.openCVV2Info()">
			<span>What is the CVV2 ?</span><span class="checkout_dropPoint ico ico-info-checkout ico-centered ng-scope"></span>
		</span>
	</div>
	<form-error-messages for="cvv2"></form-error-messages>
</ng-form>
	</script>

	<script type="text/ng-template" id="tplBskVueMainNav">
<ul id="vue-main-nav">
	<li> 
		<a ng-href="{{::$ctrl.getVueUrl('home')}}" ng-click="$ctrl.goTo('home', $event)"> 
			<i class="ico ico-vue-home"></i> 
		</a>
	</li>
	<li> 
		<a ng-href="{{::$ctrl.getVueUrl('menu')}}" ng-click="$ctrl.goTo('menu', $event)"> 
			<i class="ico ico-vue-products"></i> 
		</a>
	</li>
	<li> 
		<a ng-href="{{::$ctrl.getUrl('ItxShopCartPage')}}" ng-click="$ctrl.goTo('ItxShopCartPage', $event)"> 
			<span class="items-number" ng-if="$ctrl.shopCartService.getNumberOfItems()">{{$ctrl.shopCartService.getNumberOfItems()}}</span>
			<i class="ico ico-vue-cart"></i> 
		</a>
	</li>
	<li> 
		<a ng-href="{{::$ctrl.getUrl('ItxWishListPage')}}" ng-click="$ctrl.goTo('ItxWishListPage', $event)"> 
			<!--<span class="items-number" ng-if="$ctrl.getWishListItems()">{{$ctrl.getWishListItems()}}</span>-->
			<i class="ico ico-vue-wish" ng-class="{'active': $ctrl.isPage('ItxWishListPage')}"></i> 
		</a>
	</li>
	<li> 
		<a ng-href="{{::$ctrl.getVueUrl('more')}}" ng-click="$ctrl.goTo('more', $event)"> 
			<i class="ico ico-vue-account" ng-class="{'active': $ctrl.isPage('ItxMyAccountPage')}" ></i> 
		</a>
	</li>
</ul>	</script>
	<script type="text/ng-template" id="tplBskVueTopBar">
<div ng-if="$ctrl.bskVueService.isVueVersion() && !$ctrl.isConfirmationPage()" class="vue-top-bar">
	<span class="ico ico-go-back" ng-click="$ctrl.onCancel()"></span>
	<p ng-if="$ctrl.step == 'shipping'">Delivery</p>
	<p ng-if="$ctrl.step == 'payment'">Payment</p>
</div>	</script>

	<script type="text/ng-template" id="tplBskDesktopMenu">
<div class="main-desktop-menu">
	<nav class="second-level main-menu-container main-menu-container-second-level hide-mobile">
		<ul class="hList">
			<li ng-repeat="category in $ctrl.menuHelpers.getGenderCategory()._children track by category.id"
				ng-attr-id="link-{{::category.id}}" ng-cloak ng-class="{active: $ctrl.isCurrentSecondLevel(category)}"
				ng-if="::category._config.showDesktop" class="second-level-option">
				<a ng-href="{{::category._config.linkCategoryUrl}}" ng-click="$ctrl.selectDefaultCategory($event,category)"
					ng-class="::category._config.clazz" ng-style="::category._config.style" target="{{::(category._config.isNewWindow?'_blank':'_self')}}"
					category-label="{{::category._config.label}}" category-key="{{::category.key}}" category-id="{{::category._config.id}}"
					bsk-mouseenter="$ctrl.openMenu(category)" bsk-mouseleave="$ctrl.closeMenu()" ng-bind-html="::category._config.name | to_trusted"
					class="second-level-option"
				></a>
			</li>
		</ul>
	</nav>
	<div class="subMenu discard-height hidden category-submenu" id="link-{{::category.id}}-columns"
	 	ng-repeat="category in $ctrl.menuHelpers.getGenderCategory()._children track by category.id"
		ng-if="::(category._children.length && category._config.showDesktop)"
		bsk-mouseleave='$ctrl.closeMenu()' bsk-mouseenter='$ctrl.openMenu(category)'>
		<div class="category-tree-subcolumn-container category-tree-blocks clearfix" ng-if="category.type == 'blocks'">
			<div ng-repeat="config in ::$ctrl.constants.menu.types.blocks" class="category-tree-subcolumn" ng-class="'category-tree-subcolumn-{{::config.id}}'" ng-if="::category._children[$index].length">
				<span ng-bind-html="config.label | to_trusted" class="block-title" ng-class="'{{::config.id}}-block-title'"></span>
				<ul ng-repeat="column in ::category._children[$index]" class="category-tree-subcolumn-fourthlevel block-content" ng-class="'{{::config.id}}-block-content'">
					<li ng-repeat="category in column"
						ng-attr-id="link-{{::category._config.id}}"
						class="category-tree-element category-tree-element-{{::category._config.id}}"
						ng-if="::category._config.showDesktop">
						<bsk-menu-line category="category"
							show-image="config.image"
							show-text="config.text"
							image-type="config.imageType"></bsk-menu-line>
					</li>
				</ul>
			</div>
			<div class="category-tree-subcolumn" ng-class="'menu-block-slides-'+$ctrl.config.getSlides(category._config.id).length">
				<div class="menu-block-slide" ng-if="::$ctrl.config.getSlides(category._config.id).length">
					<bsk-menu-block block="slide" ng-repeat="slide in $ctrl.config.getSlides(category._config.id) | limitTo:$ctrl.constants.slides.max"></bsk-menu-block> 
				</div>
				<div class="menu-block-links">
					<a href="https://www.bershka.com/gb/gift-card.html" ng-if="::$ctrl.menuHelpers.giftCard">
						<img class="ico-centered image-gift-card" src="/static/itxwebstandard/images/gift-card.png?t=2019042416012446db2121485607"
							srcset="/static/itxwebstandard/images/gift-card.png?t=2019042416012446db2121485607 1x, /static/itxwebstandard/images/gift-card@2x.png?t=2019042416012446db2121485607 2x, /static/itxwebstandard/images/gift-card@3x.png?t=2019042416012446db2121485607 3x">
						<span class="menu-block-link-text ico-centered">Gift Card</span>
					</a>
				</div>
			</div>
		</div>
		<div class="category-tree-subcolumn-container category-tree-images clearfix" ng-if="category.type == 'images' || category.type == 'link'"
			ng-class="'category-tree-columns-{{::category._children.length}}'">
			<ul class="category-tree-images-container" ng-repeat="categoryColumn in ::category._children"
				ng-if="::category._children.length"
				ng-class="::(categoryColumn.length==1?'category-tree-images-full':'category-tree-images-semi')">
				<li ng-attr-id="link-{{::category._config.id}}"
					ng-repeat="category in ::categoryColumn"
					class="category-tree-element" ng-class="'category-tree-element-{{::category._config.id}}'"
					ng-if="::category._config.showDesktop">
					<bsk-menu-line category="category"
						show-image="$ctrl.constants.menu.types.images.image"
						show-text="$ctrl.constants.menu.types.images.text"
						image-type="$ctrl.constants.menu.types.images.imageType"></bsk-menu-line>
				</li>
			</ul>
		</div>
	</div>

</div>	</script>
	<script type="text/ng-template" id="tplBskMobileMenu">
<ul class="vList sidebar-submenu sidebar-submenu-secondlevel sidebar-submenu-categories">
	<li ng-repeat="secondLevel in $ctrl.menuHelpers.getGenderCategory()._childrenList" ng-if="::secondLevel._config.showMobile" id="link-mobile-{{::secondLevel.id}}">
		<a ng-class="::secondLevel._config.clazz" ng-style="::secondLevel._config.style"
			category-label="{{::secondLevel._config.label}}" category-key="{{::secondLevel.key}}" category-id="{{::secondLevel._config.id}}"
			ng-href="{{secondLevel._config.linkCategoryUrl}}" ng-click="(secondLevel._children.length > 0) ? $ctrl.toggleCategories($event, secondLevel) : false">
			<span class="category-name" ng-bind-html="::secondLevel._config.name | to_trusted"></span>
				<span class="ico-sidebar-close" ng-if="::(secondLevel._children.length !== 0)">&nbsp;</span>
				<span class="exclusive exclusive-secondlevel push-right" ng-if="secondLevel._config.isPrivateSale && !secondLevel._parent._config.isPrivateSale">
				<span class="exclusive-text">Exclusive access</span>
			</span>
		</a>
		<ul class="subList sidebar-submenu sidebar-submenu-thirdlevel" ng-if="::(secondLevel._children.length && secondLevel._config.showMobile)">
			<li ng-repeat="thirdLevel in secondLevel._childrenList" id="link-mobile-{{::thirdLevel.id}}"
				ng-class="::(!secondLevel._config.isMultiColumn?'forced':'closed sidebar-submenu-thirdlevel-multicolumn')"
				ng-if="::thirdLevel._config.showMobile">
				<a ng-class="::thirdLevel._config.clazz" ng-style="::thirdLevel._config.style"
					category-label="{{::thirdLevel._config.label}}" category-key="{{::thirdLevel.key}}" category-id="{{::thirdLevel._config.id}}"
					ng-href="{{::thirdLevel._config.linkCategoryUrl}}"
					ng-click="$ctrl.toggleCategories($event, thirdLevel)"
					ng-if="::thirdLevel._config.isMultiColumn">
					<span class="category-name" ng-bind-html="::thirdLevel._config.name | to_trusted"></span>
						<span class="ico-sidebar-close">&nbsp;</span>
						<span class="exclusive exclusive-thirdlevel push-right" ng-if="thirdLevel._config.isPrivateSale && !thirdLevel._parent._config.isPrivateSale">
						<span class="exclusive-text">Exclusive access</span>
					</span>
				</a>
				<bsk-menu-line category="thirdLevel" show-text="true" show-image="false" ng-if="::!thirdLevel._config.isMultiColumn"></bsk-menu-line>
				<ul class="subList sidebar-submenu sidebar-submenu-fourthlevel" ng-if="::(thirdLevel._config.isMultiColumn && thirdLevel._childrenList.length)">
					<li ng-repeat="fourthLevel in thirdLevel._childrenList" id="link-mobile-{{::fourthLevel.id}}"
						ng-class="{selected: fourthLevel.id==inditex.iCategoryId}"
						class="closed"
						ng-if="::fourthLevel._config.showMobile">
						<bsk-menu-line category="fourthLevel" show-text="true" show-image="false"></bsk-menu-line>
					</li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
	</script>
	<script type="text/ng-template" id="tplBskMenuLine">
<div class="menu-line-container" ng-click="$ctrl.select($event)" ng-class="::{'bad-categorization': $ctrl.category._config.badCategorization}">
	<div class="menu-line-image-container menu-line-element-container" ng-if="::$ctrl.image">
		<img ng-src="{{::($ctrl.category.images[$ctrl.type] || 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=')}}" class="menu-line-image">
		<img ng-src="{{::($ctrl.category.images[$ctrl.type] || 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=')}}" class="menu-line-image menu-line-image-over">
	</div>
	<div class="menu-line-text-container menu-line-element-container" ng-if="$ctrl.text">
		<a ng-href="{{::$ctrl.category._config.url}}"
 			ng-if="::$ctrl.category._config.isNavigable"
 			target="{{::($ctrl.category._config.isNewWindow?'_blank':'_self')}}"
			ng-bind-html="::$ctrl.category._config.name | to_trusted"
			class="category-tree-element-link category-tree-element-link-{{::$ctrl.category._config.id}}"
			category-key="{{::$ctrl.category.key}}" category-id="{{::$ctrl.category.id}}"
			ng-class="::$ctrl.category._config.clazz" ng-style="::$ctrl.category._config.style"
			category-label="{{::$ctrl.category._config.label}}" category-key="{{::$ctrl.category.key}}" category-id="{{::$ctrl.category._config.id}}"
		></a> 
		<span ng-class="::$ctrl.category._config.clazz" ng-style="::$ctrl.category._config.style"
			class="category-tree-element-spacer category-tree-element-spacer-{{::$ctrl.category._config.id}}"
			ng-if="::!$ctrl.category._config.isNavigable" ng-bind-html="::$ctrl.category._config.name | to_trusted"
			></span>
		<span class="exclusive exclusive-fourthlevel push-right is-mobile" ng-if="$ctrl.category._config.isPrivateSale && !$ctrl.category._parent._config.isPrivateSale">
			<span class="exclusive-text">Exclusive access</span>
		</span>
	</div>
</div>	</script>
	<script type="text/ng-template" id="tplBskMenuBlock">
<div class="menu-block-container" ng-click="$ctrl.select($event)" ng-class="::{'bad-categorization': $ctrl.block.badCategorization}">
	<a ng-href="{{::$ctrl.block.link.url}}"
		ng-if="::$ctrl.block.link.url"
		target="{{::($ctrl.ctrl.block.newWindow?'_blank':'_self')}}"
		class="category-block-element-link">
		<div class="menu-block-element-image menu-block-element-container">
			<img ng-src="{{$ctrl.block.image[$ctrl.deviceService.getActualState()]}}" class="menu-block-image">
		</div> 
		<span class="menu-block-element-text menu-block-element-container" ng-if="$ctrl.block.label" ng-bind-html="::$ctrl.block.label | to_trusted"></span>
	</a>
	<div class="category-block-element-link" ng-if="::(!$ctrl.block.link.url)">
		<div class="menu-block-element-image menu-block-element-container">
			<img class="menu-block-element-image menu-block-element-container" ng-src="{{$ctrl.block.image[$ctrl.deviceService.getActualState()]}}" class="menu-block-image">
		</div> 
		<span class="menu-block-element-text menu-block-element-container" ng-if="$ctrl.block.label" ng-bind-html="::$ctrl.block.label | to_trusted"></span>
	</div>
</div>	</script>

	<script type="text/ng-template" id="tplIndomError">
<div class="indom-error-message" ng-class="'indom-error-message-'+$ctrl.getIndomError()" ng-if="$ctrl.hasIndomError()">
	<img ng-src="{{$ctrl.getErrorIcon()}}" class="indom-error-message-item indom-error-message-icon"></span>
	<span class="indom-error-message-item indom-error-message-text" ng-bind-html="$ctrl.getErrorDescription() | to_trusted"></span>
</div>
	</script>
<div class="inline-search-container" ng-cloak ng-if="$root.searchVisible" ng-controller="ItxSearchPageCtrl" bsk-hide-scrolls bsk-fixed-with-menu>
	<div class="overlay-loader ng-hide" ng-show="searchService.isLoading && searchService.skip==0">
		<div>
			<span></span><span></span><span></span><span></span><span></span>
		</div>
	</div>
	<div class="inline-search-bar">
		<i class="ico ico-close-thick close-search" ng-click="closeSearch()"></i>
		<search-bar></search-bar>
		<bsk-grid-size size="6" storage-key="SEARCH_GRID_COLUMNS" change="updateGridColumns(columns)" ng-show="$root.device!='mobile' && searchService.currentSearch.docs.length" class="grid-product-header-element view"></bsk-grid-size>
		<search-facets class="mobile-facets-container" ng-if="$root.device=='mobile'"></search-facets>
	</div>
	<div id="searchResults" class="searchResults clearfix grid-cols-{{gridCols}}" ng-class="{ 'has-facets': searchService.currentSearch.facets.length }">
  		<search-results container="#searchResults" ng-if="searchService.currentSearch.docs.length"></search-results>
        <search-suggestions ng-if="!searchService.currentSearch.docs.length && searchService.currentSearch.suggestions.length"></search-suggestions>
		<search-empty ng-cloak ng-if="!searchService.currentSearch.docs.length && !searchService.currentSearch.suggestions.length && searchService.currentSearch && searchService.query"></search-empty>
		<search-facets ng-if="$root.device!='mobile'"></search-facets>
	</div>
</div>
<!-- Search popup -->
<div class="header-container menu-filler" ng-controller="ItxCommonHeadFillerCtrl">
	<div ng-if="!isVueVersion() || mustShowInVueVersion()"> 
<!-- BEGIN SPOT=BK3_ESpot_Banner -->

<!-- END SPOT=BK3_ESpot_Banner -->
	</div>
<!-- BEGIN SPOT=BK3_ESpot_Header -->

<!-- END SPOT=BK3_ESpot_Header -->
	
	<div class="header">
		<div class="noPadding">
			<div class="mainMenu clearfix">
				<div class="main-menu-container main-menu-container-first-level">
					<nav class="first-level">
						<ul class="hList">
							<li class="main-menu-element"><a href="#">&nbsp;</a></li>
						</ul>
					</nav>
				</div>
	           <div class="main-menu-container main-menu-container-second-level hide-mobile ng-hide" ng-show="selectedGenderHasChildren()">
					<nav class="second-level">
						<ul class="hList">
							<li><a href="#">&nbsp;</a></li>
						</ul>
					</nav>
				</div>
			</div>
		</div>
	</div>		
</div>

<div class="subMenu-overlay hide-mobile"></div>

<div data-ng-controller="ItxCommonHeadCtrl" class="header-container">
    <header id="header" class="commonHead page-header">
<!-- BEGIN SPOT=BK3_ESpot_Banner -->

<!-- END SPOT=BK3_ESpot_Banner -->
<!-- BEGIN SPOT=BK3_ESpot_Header -->

<!-- END SPOT=BK3_ESpot_Header -->

        <div id="mainMenu" class="noPadding">
            <div class="mainMenu clearfix">
                <div class="main-menu-container main-menu-container-first-level {{::getFirstLevelMenuClasses()}}">
                	<div class="header-logo">
                		<div class="header-left-container">
                			<div class="header-hamburger header-left-element" ng-click="openMenu()">
								<img src="/static/itxwebstandard/images/hamburger.png?t=2019042416012446db2121485607" class="is-mobile">
                			</div>
							
							<a class="header-brand header-left-element" ng-href="{{::core.encodeStoreUrl(core.iStoreJSON, core.iLangId)}}" ng-click="goToHome($event)">
								<img src="/static/itxwebstandard/images/crespon_vertical.png?t=2019042416012446db2121485607" ng-cloak ng-if="showMourning()" class="header-brand-mourning">
								<img src="/static/itxwebstandard/images/logo.svg?t=2019042416012446db2121485607" alt="Bershka" class="header-brand-logo">
							</a>
                		</div>
                	</div>

	                <nav class="first-level hide-mobile header-gender" ng-if="core.xDesktopMobileScreenModule.isDesktopScreen()">
	                    <ul class="hList">
<!-- BEGIN SPOT=BK3_ESpot_Menu_First -->

<!-- END SPOT=BK3_ESpot_Menu_First -->
	                        <li ng-repeat="category in categoryFactory.oCategoryTree track by category._config.id"
	                        	id="link-{{::category._config.id}}" ng-cloak
	                            ng-class="{active: categoryFactory.oGenderCategory.id==category.id}"
	                            class="main-menu-element"
	                            ng-click="selectGender($event, category)"
	                            ng-if="::category._config.showDesktop">
	                            <a ng-href="{{::category._config.url}}" target="{{::(category._config.isNewWindow?'_blank':'_self')}}" ng-bind-html="::category._config.name | to_trusted"
									ng-class="::category._config.clazz" ng-style="::category._config.style"
									category-label="{{::category._config.label}}" category-key="{{::category.key}}" category-id="{{::category._config.id}}"
	                            ></a>
	                        </li>
<!-- BEGIN SPOT=BK3_ESpot_Menu_Last -->

<!-- END SPOT=BK3_ESpot_Menu_Last -->
						</ul>
	                </nav>
<div class="header-menu"> 
	<div id="menuContainer" class="menu-container">
		<!-- HEADER_MENU_START -->
		<!-- BEGIN SPOT=BK3_ESpot_Header_MenuBegin -->

<!-- END SPOT=BK3_ESpot_Header_MenuBegin -->
		<!-- SEARCH -->
		<div class="header__searchMobile mobile menu-item" ng-click="openSearch()" ng-if="!isSearchPage() && !$root.searchVisible">
			<i class="ico ico-search ico-centered"></i>
			<span class="menu-icon-side-text menu-icon-side-search ellipsis hide-mobile">Search</span>
		</div>
        <!-- WISH LIST -->
		<div id="wishListItem" class="menu-item" ng-cloak ng-if="::core.isOpenForSale()" ng-click="goToWishListPage()">
     		<span id="wishlistIcon" class="ico ico-centered" ng-class="core.xReturnTotalItems(iWishList.items)>0?'ico-wish-min-selected':'ico-wish-min'">
     			<span class="menu-count-items" ng-if="iWishList.items.length > 0">{{core.xReturnTotalItems(iWishList.items)}}</span>	
    		</span>
     		<!-- <span class="menu-icon-text hide-mobile">Wishlist</span> -->
     		<div id="wishListAlertSucces" class="alert-success strong">
	            <div class="alert-success-arrow"></div>
	            <div class="yellow2Bg">
	                <span class="ico ico-check"></span>
	                <span>The product has been added to your Wishlist</span>
	            </div>
       		</div>
		</div>
		<!-- LOGIN -->
		<div id="userIconLink" class="menu-item" ng-cloak ng-show="::core.isOpenForSale()" ng-click="userMenuClick($event)" bsk-mouseenter="openUserMenu()" bsk-mouseleave="closeUserMenu()">
     		<span id="myAccountIco" class="ico ico-centered" ng-class="core.iUserJSON.userType === 'R' ? 'ico-user-solid' : 'ico-user-outline'">
     			<div id="usermenu-overlay" class="hide" ng-click="stopPropagation($event); hideUserMenuInMobile()"></div>		     		
     		</span>
     		<div id="userIconMenu" class="header-item-user-menu" ng-click="stopPropagation($event)">
     			<div class="mc-close-header is-mobile">
     				<span class="ico ico-close-big" ng-click="hideUserMenuInMobile($event)"></span>
     			</div>
     			<div id="um-login" ng-if="core.iUserJSON.userType == 'G'">
     				<button class="inverse" ng-click="goToLogonPage(true,false)">Log in</button>
     				<p>You don’t have an account? <a href="javascript:;" ng-click="openRegisterModal($event)">Sign up now</a></p>
     			</div>
     			<ul id="um-options">
     				<li>
     					<span class="ico ico-user-solid is-mobile"></span>
     					<a href="javascript:;" id="userIconMenuMyAccount" ng-click="userMenuAction('myaccount', $event)">My Account</a>
    				</li>
						<li ng-if="isTeenPay()">
     					<span class="ico ico-youpay is-mobile"></span>
     					<a href="javascript:;" ng-click="userMenuAction('youPay', $event)">YouPay</a>
    				</li>
     				<li>
     					<span class="ico ico-pack3 is-mobile"></span>
     					<a href="javascript:;" ng-click="userMenuAction('myorders', $event)">My Orders</a>
     				</li>
     				<li>
     					<span class="ico ico-cloth-return is-mobile"></span>
     					<a href="javascript:;" ng-click="userMenuAction('returns', $event)">Returns</a>
     				</li>
     				<li ng-show="iUserType === 'W' || iUserType === 'WS'">
     					<span class="ico ico-wallet is-mobile"></span>
     					<a href="javascript:;" ng-click="userMenuAction('oneclick', $event)">My Cards</a>
     				</li>	     				
     			</ul>
     			<div id="um-user-info" ng-show="core.iUserJSON.userType != 'G'">
     				<h4>You’re logged in as <span ng-bind="core.iUserJSON.firstName != '-' ? core.iUserJSON.firstName : core.iUserJSON.email"></span></h4>
     			</div>
     			<div class="logout">
     				<a href="javascript:;" ng-click="logout()" ng-show="core.iUserJSON.userType != 'G'">Disconnect</a>
     			</div>
     		</div>
		</div>
		<!-- CESTA -->
		<div id="cartIconLink" class="menu-item header-item-cart-icon" ng-cloak ng-show="core.isOpenForSale()" ng-click="goToShopCartPage()" ng-mouseenter="openMiniCart()" ng-mouseleave="closeMiniCart()">
	   		<span id="cartIcon" class="ico ico-centered" ng-class="shopCartService.getTotalNumberOfItems()>0?'ico-bag-solid':'ico-bag-outline'">
	   			<div class="menu-count-items" ng-show="shopCartService.getTotalNumberOfItems() > 0" ng-bind="shopCartService.getTotalNumberOfItems()"></div>
	   			<div id="minicart-overlay" class="hide" ng-click="stopPropagation($event); hideMiniCart()"></div>
	  		</span>
	  		<!-- <span class="menu-icon-text hide-mobile">Basket</span> -->
     		<div id="shopCartAlertSuccess" class="alert-success strong">
	            <div class="alert-success-arrow"></div>
	            <div class="green2Bg">
	                <span class="ico ico-check-white"></span>
	                <span>This item has been added to your cart</span>
	            </div>
       		</div>
	  		<div id="minicart" class="minicart invisible" ng-click="stopPropagation($event)">
     			<div id="mc-close">
     				<span class="ico ico-close-big" bsk-click="hideMiniCart()"></span>
     			</div>
     			<div id="mc-notice">
     				<span class="ico ico-check-white"></span>
     				<div class="text">This item has been added to your cart</div>
     			</div>
     			<div id="mc-gift" ng-if="hasGift()">
     				<div class="text">You’ve got a gift</div>
     			</div>
     			<minicart-items animated="1"></minicart-items>
     			<bsk-promotions location="minishopcart"></bsk-promotions>
     			<div id="mc-totals">
					<span class="mc-total-text">Total</span>
     				<localized-price price="{{shopCartService.getTotalProductsPrice()}}" class="mc-total-price"></localized-price>
                    <bsk-tax></bsk-tax>
     			</div>
     			<div id="mc-ctas">
     				<button class="btn-cta1" ng-click="goToCheckoutPage()" ng-disabled="!shopCartService.canGoToCheckout()">Process your order now<span class="ico ico ico-arrow-right-white"></span></button>
     				<button ng-click="buttonTeen()" ng-if="isTeenPay() && isTeenUser() && hasSponsor()" ng-disabled="!shopCartService.canGoToCheckout()">
						<span class="cta-checkout-text">REQUEST PAYMENT VIA YOUPAY</span>
					</button>
     				<br>
     				<button class="btn" ng-click="goToShopCartPage()">See shopping cart</button>
     			</div>
     			<div id="mc-positive" ng-show="core.iStoreJSON.details.hasPhisicalStores">
         				Free delivery to the store | Free returns	          				
         			</div>
           	</div>
		</div>
<!-- BEGIN SPOT=BK3_ESpot_Header_MenuEnd -->

<!-- END SPOT=BK3_ESpot_Header_MenuEnd -->
	</div>
</div>	            </div>
                <bsk-desktop-menu ng-if="selectedGenderHasChildren() && core.xDesktopMobileScreenModule.isDesktopScreen()"></bsk-desktop-menu>
            </div>
        </div>
         
    </header>
    <div class="is-mobile overlay" ng-click="closeMenu()">&nbsp;</div>
    <!-- @Paradigma -->
    <!-- INICIO DE SIDEBAR PARA DISPOSITIVOS -->
    <div id="sideBar" class="sideBarDevices is-mobile" ng-cloak ng-if="!core.xDesktopMobileScreenModule.isDesktopScreen()" ng-class="{full: chatHelper.maximized}">
		<div class="h1 logo">
			<a href="javascript:;" ng-click="goToHome()">
	               <div class="logo-png"><img src="/static/itxwebstandard/images/logo.png?t=2019042416012446db2121485607" alt="Bershka"></div>
	               <div class="logo-svg"><img src="/static/itxwebstandard/images/logo.svg?t=2019042416012446db2121485607" alt="Bershka"></div>
	         </a>
		</div>
        <span class="sideBar-close" ng-click="closeMenu()">
        	<span class="sideBar-close-text">CLOSE</span>
			<img class="sideBar-close-ico" src="/static/itxwebstandard/images/ico-sidebar-header-close.png?t=2019042416012446db2121485607" alt="CLOSE"></span>

		<div class="main-menu-container main-menu-container-first-level sidebar-main-menu-container {{::getFirstLevelMenuClasses()}}">
	        <ul class="first-level sidebar-first-level">
	            <li ng-cloak
					ng-repeat="category in categoryFactory.oCategoryTree" id="link-mobile-{{::category._config.id}}"
					ng-class="{active: categoryFactory.oGenderCategory.id==category.id}"
                    ng-click="selectGender($event, category)"
                    ng-if="::category._config.showMobile">
	                <a ng-href="{{::category._config.url}}"
						ng-class="::category._config.clazz" ng-style="::category._config.style"
						category-label="{{::category._config.label}}" category-key="{{::category.key}}" category-id="{{::category._config.id}}"
	                >
	                   <span class="category-name ellipsis" ng-bind-html="::category._config.name | to_trusted"></span>
	                </a>
				</li>
			</ul>
		</div>

		<bsk-mobile-menu ng-if="selectedGenderHasChildren()"></bsk-mobile-menu>

<!-- BEGIN SPOT=BK3_ESpot_Menu_Last -->

<!-- END SPOT=BK3_ESpot_Menu_Last -->
        <!-- Footer options -->

        <div class="sideBarFooter sidebar-submenu">
        	<ul class="vList sidebar-submenu sidebar-submenu-secondlevel">
	            <li class="sidebar-footer-element inverse">
<!-- BEGIN SPOT=BK3_ESpot_Footer_Contact_Begin -->

<!-- END SPOT=BK3_ESpot_Footer_Contact_Begin -->
	            	<div class="table full-width sidebar-contact-info">
	                	<span class="title-text table-cell">Need Help?</span>
						<contact class="table-cell" show-title="0" show-email-info="0" show-phone-info="0" show-hours-info="0"></contact>
					</div>
<!-- BEGIN SPOT=BK3_ESpot_Footer_Contact_End -->

<!-- END SPOT=BK3_ESpot_Footer_Contact_End -->
	            </li>
	        	<li class="sidebar-footer-element title"
					ng-if="::(core.iStoreJSON.details.isPhysicalGiftCardEnable=='1'|| core.iStoreJSON.details.isVirtualGiftCardEnable == '1')">
					<a href="javascript:;" ng-click="core.goToGiftCardPage()">
	        			<span class="category-name">Gift Card</span>
	        		</a>
	        	</li>
	        	<li class="sidebar-footer-element title">
	        		<a href="javascript:;" ng-click="openCountriesModal()">
	        			<span class="category-name">{{::selectedCountry}}</span>
	        		</a>
	        	</li>
	            <li class="sidebar-footer-element">
	            	<a ng-click="toggleCategories($event)">
		        		<span class="title-text">{{::language.name}}</span>
	                   <span class="ico-sidebar-close">&nbsp;</span>
					</a>
		            <ul class="subList sidebar-submenu sidebar-submenu-thirdlevel">
		                <li data-ng-repeat="lang in ::languages">
		                	<a href="javascript:;" ng-click="goToHome($event, lang)">{{::lang.name}}</a>
		                </li>
		            </ul>
		        </li>
	            <li class="sidebar-footer-element" ng-if="::core.iStoreJSON.details.hasPhisicalStores">
	            	<a href="javascript:;" ng-click="goToStore()">
		            	<span class="title-text">Stores</span>
					</a>
				</li>
	            <li class="sidebar-footer-element" ng-if="core.isOpenForSale()">
	            	<a ng-click="toggleCategories($event)">
		             	<span class="title-text">Shopguide</span>
	                   <span class="ico-sidebar-close">&nbsp;</span>
					</a>
<!-- BEGIN SPOT=BK3_ESpot_Footer_Shopguide_Begin -->

<!-- END SPOT=BK3_ESpot_Footer_Shopguide_Begin -->
		            <ul class="subList sidebar-submenu sidebar-submenu-thirdlevel">
						<li><a ng-href="{{::getShoppingGuideSectionUrl('general-info')}}">Information</a></li>
		                <li><a ng-href="{{::getShoppingGuideSectionUrl('payment')}}">Payment</a></li>
		                <li><a ng-href="{{::getShoppingGuideSectionUrl('shipping')}}">Delivery</a></li>
		                <li><a ng-href="{{::getShoppingGuideSectionUrl('orders-returns')}}">Returns</a></li>
		                <li ng-if="::(core.iStoreJSON.details.isPhysicalGiftCardEnable=='1'|| core.iStoreJSON.details.isVirtualGiftCardEnable == '1')">
		                    <a ng-href="{{::getShoppingGuideSectionUrl('gift-card')}}">Gift Card</a>
		                </li>
		                <li ng-if="::(core.iStoreJSON.details.isGiftTicketEnable=='1')">
		                    <a ng-href="{{::getShoppingGuideSectionUrl('gift-ticket')}}">Gift Ticket</a>
		                </li>
		                <li>
		                	<a ng-href="{{::getShoppingGuideSectionUrl('shop-guest')}}">Guest purchase</a>
		                </li>
		            </ul>            
<!-- BEGIN SPOT=BK3_ESpot_Footer_Shopguide_End -->
<!--<ul class="subList sidebar-submenu sidebar-submenu-thirdlevel">
	<li class="shopguide-last">
	    <a href="https://static.bershka.net/4/static/formularios_desistimiento/formularios_desistimiento_uk.pdf?20190517033500" target="_blank">
		Online Order Cancellation Form
          </a>
	</li>
</ul>-->
<!-- END SPOT=BK3_ESpot_Footer_Shopguide_End -->
		        </li>

				<li class="sidebar-footer-element">
	            	<a ng-click="toggleCategories($event)">
		             	<span class="title-text">About Bershka</span>
	                   <span class="ico-sidebar-close">&nbsp;</span>
					</a>
<!-- BEGIN SPOT=BK3_ESpot_Footer_About_Begin -->

<!-- END SPOT=BK3_ESpot_Footer_About_Begin -->
		            <ul class="subList sidebar-submenu sidebar-submenu-thirdlevel">
		                <li><a ng-href="{{::getCompanySectionUrl('aboutUs')}}">About us</a></li>
		                <li><a ng-href="{{::getCompanySectionUrl('offices')}}">Offices</a></li>
		                <li><a ng-href="{{::getCompanySectionUrl('workWithUs')}}">Work with us</a></li>
		                <li><a ng-href="{{::getCompanySectionUrl('policy')}}">Our policies</a></li>
		                <li class="external-link" ng-if="::affinityHelpers.available"><a href="javascript:;" ng-click="affinityHelpers.openPage()">Affinity card</a><span class="ico ico-centered ico-external-link"></span></li>
		                <li class="external-link"><a href="http://press.bershka.com/" target="_blank">Press</a><span class="ico ico-centered ico-external-link"></span></li>
		            </ul>
<!-- BEGIN SPOT=BK3_ESpot_Footer_About_End -->

<!-- END SPOT=BK3_ESpot_Footer_About_End -->
				</li>
        	</ul>
        </div>
        <!-- End footer options -->
    </div>
</div>
<div data-ng-controller="ItxCommonHeadVueCtrl" >
	<bsk-vue-main-nav ng-if="isVueVersion() && mustShowInVueVersion()"></bsk-vue-main-nav>
</div>

<!-- FIN DE SIDEBAR PARA DISPOSITIVOS -->			<div id="skrollr-body">
				<div id="iPageContent" class="clearfix">
<!-- BEGIN SPOT=BK3_ESpot_Home -->
  <script>

// POLLYFILL para IE8 y falta de lastIndexOf
  if (!Array.prototype.lastIndexOf) {
    Array.prototype.lastIndexOf = function(searchElement, fromIndex) {
      "use strict";

      if (this == null)
        throw new TypeError();

      var t = Object(this);
      var len = t.length >>> 0;
      if (len === 0)
        return -1;

      var n = len;
      if (arguments.length > 1) {
        n = Number(arguments[1]);
        if (n != n)
          n = 0;
        else if (n != 0 && n != (1 / 0) && n != -(1 / 0))
          n = (n > 0 || -1) * Math.floor(Math.abs(n));
      }

      var k = n >= 0 ?
        Math.min(n, len - 1) :
        len - Math.abs(n);

      for (; k >= 0; k--) {
        if (k in t && t[k] === searchElement)
          return k;
      }
      return -1;
    };
  }
  // FIN DE POLLYFILL

  $(function() {
	var images=$("#iPageContent img");
	var remover=inditex.xDesktopMobileScreenModule.addObserverChange(function(oldState, newState) {
		for(var i=0, len=images.length; i<len; i++) {
			var image=images.eq(i);
			var alt=image.attr("alt-src");
			if(image.hasClass("state-"+newState) && alt) {
					image.attr("src",alt).removeAttr("alt-src")
			}
		}
	},true);
}); 

$( document ).ready(function() {
    var idPais = inditex.iCountryCode;

// Funcion muestra servicio de ticket electronico,PL, GB, NL 
var serviciosFooter = 
'<div class="container mrg-bottom-3 mrg-top-4 hideme" id="bskservices-container">'+
  '<div class="row">'+
    '<div class="col-xs-12 col-lg-6 bskservices-content" data-labelgtm="module-tarjeta-regalo" data-translations="giftbsk-module">'+
      '<a href="/gb/-1/gift-card.html" data-actiongtm="module">'+
        '<div class="table-display bskcod-module">'+
          '<i class="ico no-desktop ico-arrow"></i>'+
                '<div class="text-center bskcod-text table-display table-center">'+
                  '<i class="ico tarjeta-regalo table-display-middle"></i><span class="table-display-middle pdg-left-2 txtgiftbsk"></span>'+
                '</div>'+
        '</div>'+
      '</a>'+
    '</div>'+
    '<div class="col-xs-12 col-lg-6 bskservices-content" data-labelgtm="module-paperLess" data-translations="paperLess">'+
      '<a href="/gb/-1/landing.html?landing=ticket_electronico" data-actiongtm="module">'+
        '<div class="table-display bskcod-module">'+
          '<i class="ico no-desktop ico-arrow"></i>'+
                '<div class="text-center bskcod-text table-display table-center">'+
                  '<i class="ico wallet table-display-middle"></i><span class="table-display-middle pdg-left-2 txtPaperLess"></span>'+
                '</div>'+
        '</div>'+
      '</a>'+
    '</div>'+
  '</div>'+
'</div>';


// Funcion muestra servicio de ticket electronico,PL, GB, NL, PT 
/*if(inditex.iCountryCode=="PL" || inditex.iCountryCode=="GB" || inditex.iCountryCode=="NL" || inditex.iCountryCode=="PT") {
        $("#servicios-footer").append(serviciosFooter);
}*/


// funcion que muestra solamente en NL el banner de TALENT STATION
var beautyWebModule = '<div class="container hideme">'+
  '<h3 class="text-center" style="margin: 0 0 15px; padding: 0; font-size: 30px; font-weight: bold;letter-spacing: 3px;">bershka beauty</h3>'+
'</div>'+
'<div class="container categories-container mrg-bottom-3 txtBeautyModule hideme" data-translations="home_march_lookbook" ng-controller="ItxHomeTrackingController">'+
    '<div class="row">'+
        '<div class="col-xs-12 col-lg-12">'+
            '<a ng-click="trackHomeBanner(1010221507,image,20170531,WOMAN_BEAUTY_BEAUTY_FESTIVAL,image,module_4_1)">'+
                '<img class="img-responsive no-mobile" src="https://static.bershka.net/4/static/itxwebstandard/images/home/2017/0526/bershkabauty_festivals_D.jpg?20190517033500">'+
                '<img class="img-responsive no-desktop" src="https://static.bershka.net/4/static/itxwebstandard/images/home/2017/0526/bershkabeauty_festivals_M.jpg?20190517033500">'+
                '<div class="absolute center-x text-center no-mobile" style="bottom: 110px;">'+
                    '<a class="bsk-Verveine_Rg" data-actiongtm="title">#SHINEFEST</a>'+
                    '<a><p style="background: #fff; margin: 50px 0 40px 0;" class="txthitsbeauty"></p></a>'+
                  '<div class="mrg-top-2">'+
                    '<a ng-click="trackHomeBanner(1010221507,button,20170531,WOMAN_BEAUTY_BEAUTY_FESTIVAL,button,module_4_1)" class="bsk-button-container">'+
                        '<span class="bsk-button txtBuy"></span>'+
                    '</a>'+
                  '</div>'+
                '</div>'+
                '<div class="absolute center-x text-center no-desktop bottom-2 pdg-bottom-2 col-xs-12">'+
                    '<a class="bsk-Verveine_Rg" data-actiongtm="title">#SHINEFEST</a>'+
                    '<div>'+
                        '<a><p class="txthitsbeauty"></p></a>'+
                    '</div>'+
                    '<div class="mrg-top-3">'+
                      '<a ng-click="trackHomeBanner(1010221507,button,20170531,WOMAN_BEAUTY_BEAUTY_FESTIVAL,button,module_4_1)" class="bsk-button-container">'+
                        '<span class="bsk-button txtBuy"></span>'+
                      '</a>'+
                    '</div>'+
                '</div>'+
            '</a>'+
        '</div>'+
    '</div>'+
'</div>';

if(inditex.iCountryCode=="ES" || inditex.iCountryCode=="IC" || inditex.iCountryCode=="FR" || inditex.iCountryCode=="NL" || inditex.iCountryCode=="IT" || inditex.iCountryCode=="GR" || inditex.iCountryCode=="PT" || inditex.iCountryCode=="BE" || inditex.iCountryCode=="CH" || inditex.iCountryCode=="RO" || inditex.iCountryCode=="BG" || inditex.iCountryCode=="LU" || inditex.iCountryCode=="MT" || inditex.iCountryCode=="IE" || inditex.iCountryCode=="GB" || inditex.iCountryCode=="DE" || inditex.iCountryCode=="PL" || inditex.iCountryCode=="AT" || inditex.iCountryCode=="HR" || inditex.iCountryCode=="CZ" || inditex.iCountryCode=="DK" || inditex.iCountryCode=="EE" || inditex.iCountryCode=="FI" || inditex.iCountryCode=="HU" || inditex.iCountryCode=="LV" || inditex.iCountryCode=="LT" || inditex.iCountryCode=="SK" || inditex.iCountryCode=="SI" || inditex.iCountryCode=="SE") {
        $("#beauty-webmodule").html(beautyWebModule);
}

/* Se añade promoción Adhock a IE GB del 40% */

var promoIeGB = '<div class="promo-gbie-banner">'+
                '<a ng-href="{{core.getCategoryUrl(1010233003)}}">'+
                '<p><span>up to</span><span class="banner-big"> 40% off </span><span>on selected items</span></p>'+
                '</a>'+
                '</div>';
var promoIeGBman = '<div class="promo-gbie-banner">'+
                '<a ng-href="{{core.getCategoryUrl(1010233004)}}">'+
                '<p><span>up to</span><span class="banner-big"> 40% off </span><span>on selected items</span></p>'+
                '</a>'+
                '</div>';
if(inditex.iCountryCode=="GB" || inditex.iCountryCode=="IE") {
    
    $(".promo-gbie-banner-container").html(promoIeGB);
    $(".promo-gbie-banner-container-man").html(promoIeGBman);
}

/* Se añade promoción Adhock a IE GB del 40% */

var promoBE = '<div class="promo-be-banner" data-translations="home_march_lookbook">'+
                '<a ng-href="{{core.getCategoryUrl(1010233152)}}">'+
                '<p><span class="txtpromobe30begin"></span><span class="txtpromobe30"></span><span class="txtpromobe30end"></span></p>'+
                '</a>'+
                '<p class="promo-be-legal"><span style="cursor:pointer" onclick="inditex.xOpenNewsletterLegal();">+ info</span></p>'+
                '</div>';
var promoBEman = '<div class="promo-be-banner" data-translations="home_march_lookbook">'+
                '<a ng-href="{{core.getCategoryUrl(1010233154)}}">'+
                '<p><span class="txtpromobe30begin"></span><span class="txtpromobe30"></span><span class="txtpromobe30end"></span></p>'+
                '</a>'+
                '<p class="promo-be-legal"><span style="cursor:pointer" onclick="inditex.xOpenNewsletterLegal();">+ info</span></p>'+
                '</div>';
if(inditex.iCountryCode=="BE") {
    
    $(".promo-be-banner-container").html(promoBE);
    $(".promo-be-banner-container-man").html(promoBEman);
}



/*Promo MSS RU LT EE LV
var promoMss = '<div class="promoMss" data-translations="home_march_lookbook">'+
                '<a class="lnkMss">'+
                '<p><span class="txtpromoMss promoMssTitle"></span></p>'+
                '<p><span class="promoLegalMss txtpromoMssLegal"></span></p>'+
                '</a>'+
                '</div>'; 
if(inditex.iCountryCode=="EE" || inditex.iCountryCode=="LV" || inditex.iCountryCode=="LT") {
    $(".promo-mss").append(promoMss);
}*/


/*Promo giftCard IE  */
/*var promoGiftCard = '<div class="giftCard" data-translations="home_march_lookbook">'+
                    '<a href="https://www.bershka.com/gb/gift-card.html">'+
                    '<div class="col-lg-4 col-xs-3"no-mobile"><p class="new">NEW!</p></div>'+
                    '<div class="col-lg-4 col-xs-6"><p class="giftCardPromo">give Bershka with our <span>new e-gift card</span></p></div>'+
                    '<div class="col-lg-4 col-xs-3"><p class="info" style="text-decoration:underline;">+ info</p></div>'+
                    '</a>'+
                    '</div>'; 
if(inditex.iCountryCode=="GB" || inditex.iCountryCode=="IE") {
//if(inditex.iCountryCode=="IE") {
    $(".promo-giftcard").html(promoGiftCard);
}*/

/*Promo express delivery PL  */
/*var promoExpressDeliveryPL = '<div class="top-banner" data-translations="home_march_lookbook">'+
                    '<a onclick="inditex.xOpenExpressPopupPL();">'+
                    '<div class="col-lg-4 col-xs-3 first pod no-mobile"></div>'+
                    '<div class="col-lg-4 col-xs-6 second-pod"><p class="expressDelivery"></div>'+
                    '<div class="col-lg-4 col-xs-3 third-pod"><p class="info" style="text-decoration:underline;">+ info</p></div>'+
                    '</a>'+
                    '</div>'; 
if(inditex.iCountryCode=="PL") {
    $(".express-delivery").html(promoExpressDeliveryPL);
}*/

/*Promo express delivery DE  */
/*var promoExpressDeliveryDE = '<div class="top-banner" data-translations="home_march_lookbook">'+
                    '<a onclick="inditex.xOpenExpressPopupDE();">'+
                    '<div class="col-lg-4 col-xs-3 first pod no-mobile"></div>'+
                    '<div class="col-lg-4 col-xs-6 second-pod"><p class="expressDelivery"></div>'+
                    '<div class="col-lg-4 col-xs-3 third-pod"><p class="info" style="text-decoration:underline;">+ info</p></div>'+
                    '</a>'+
                    '</div>'; 
if(inditex.iCountryCode=="DE") {
    $(".express-delivery").append(promoExpressDeliveryDE);
}*/


/*Promo glamour day DE  */
var promoExpressDeliveryDE = '<div class="top-banner" data-translations="home_march_lookbook">'+
                    '<a ng-href="{{core.getCategoryUrl(1010240163)}}">'+
                    '<div class="col-lg-12 text-center col-xs-12">'+
                    '<p class="txtGlamour"></p>'+
                    '<p class="txtGlamour2"></p>'+
                    '</div>'+
                    '</a>'+
                    '</div>'; 
if(inditex.iCountryCode=="DE" && inditex.xGetGenderCategoryId()==1010193132) {
    $(".glamour-day").html(promoExpressDeliveryDE);
}


/*Promo giftCard Eid Mubarak  */
var promoEidMubarak = '<div class="eidMubarak" data-translations="home_march_lookbook">'+
                    '<a ng-href="{{core.getCategoryUrl(1010242589)}}">'+
                    '<div class="col-lg-12"><p class="giftCardPromo">Eid Mubarak! <span>Adha Collection</span></p></div>'+
                    '</a>'+
                    '</div>'; 
if(inditex.iCountryCode=="SA" || inditex.iCountryCode=="AE" || inditex.iCountryCode=="EG" || inditex.iCountryCode=="LB" || inditex.iCountryCode=="JO" || inditex.iCountryCode=="KW" || inditex.iCountryCode=="BH" || inditex.iCountryCode=="QA" || inditex.iCountryCode=="OM" || inditex.iCountryCode=="MA" || inditex.iCountryCode=="DZ" || inditex.iCountryCode=="TN") {
    $(".promo-eid-mubarak").html(promoEidMubarak);
}


/*Promo giftCard FS TR  */
var promoFsTrWoman = '<div class="freeshippingtr" data-translations="home_march_lookbook">'+
                    '<a href="" class="no-mobile lnkSlidenovedadesMujer" style="float:left;position:relative;width:80%;">'+
                    '<div class="col-lg-2 no-mobile"><p class="info txttodaytr" style="float:left;"></p></div>'+
                    '<div class="col-lg-8 col-xs-9" style="width:85%;"><p class="giftCardPromo"><span class="txtfreetr"></span><span class="no-mobile">&nbsp</span><span class="txtfree02tr regularfont"></span></p></div>'+
                    '</a>'+
                    '<a href="" class="no-desktop lnkSlidenovedadesMujer">'+
                    '<div class="col-lg-8 col-xs-9"><p class="giftCardPromo"><span class="txttodaytr"></span><span>&nbsp</span><span class="txtfreetr"></span><span>&nbsp</span><span class="regularfont txtfree02tr"></span></p></div>'+
                    '</a>'+
                    '<a onclick="inditex.xOpenNewsletterLegal();" href="">'+
                    '<div class="col-lg-2 col-xs-3"><p class="info" style="text-decoration:underline;">+ info</p></div>'+
                    '</a>'+
                    '</div>'; 

var promoFsTrMan = '<div class="freeshippingtr" data-translations="home_march_lookbook">'+
                    '<a href="" class="no-mobile lnkSlidenovedadesHombre" style="float:left;position:relative;width:80%;">'+
                    '<div class="col-lg-2 no-mobile"><p class="info txttodaytr" style="float:left;"></p></div>'+
                    '<div class="col-lg-8 col-xs-9" style="width:85%;"><p class="giftCardPromo"><span class="txtfreetr"></span></span><span class="no-mobile">&nbsp</span><span class="txtfree02tr regularfont"></span></p></div>'+
                    '</a>'+
                    '<a href="" class="no-desktop lnkSlidenovedadesHombre">'+
                    '<div class="col-lg-8 col-xs-9"><p class="giftCardPromo"><span class="txttodaytr"></span><span>&nbsp</span><span class="txtfreetr"></span><span>&nbsp</span><span class="regularfont txtfree02tr"></span></p></div>'+
                    '</a>'+
                    '<a onclick="inditex.xOpenNewsletterLegal();" href="">'+
                    '<div class="col-lg-2 col-xs-3"><p class="info" style="text-decoration:underline;">+ info</p></div>'+
                    '</a>'+
                    '</div>'; 

if(inditex.iCountryCode=="TR") {
    $(".promo-freeshippingtrWoman").html(promoFsTrWoman);
    $(".promo-freeshippingtrMan").html(promoFsTrMan);
}

/*Promo giftCard Weekly planner de regalo  */
var promoWeekplan = '<div class="weeklyplan" data-translations="home_march_lookbook">'+
                    '<a class="weeklyplana" onclick="inditex.xOpenNewsletterWeekly();">'+
                    '<div class="col-lg-12"><p class="giftCardPromo">'+
                    '<span class="txtweekly01 medium"></span><span>&nbsp</span>'+
                    '<span class="txtweekly02"></span><span>&nbsp</span>'+
                    '</p></div>'+
                    '</a>'+
                    '</div>'; 
/*
if(inditex.iCountryCode=="MX" || inditex.iCountryCode=="RU" || inditex.iCountryCode=="TR" || inditex.iCountryCode=="GB" || inditex.iCountryCode=="IE" || inditex.iCountryCode=="US" || inditex.iCountryCode=="FR" || inditex.iCountryCode=="BE" || inditex.iCountryCode=="NL" || inditex.iCountryCode=="IT" || inditex.iCountryCode=="GR" || inditex.iCountryCode=="PT" || inditex.iCountryCode=="ES" || inditex.iCountryCode=="IC" || inditex.iCountryCode=="RO" || inditex.iCountryCode=="DE" || inditex.iCountryCode=="SE" || inditex.iCountryCode=="AT" || inditex.iCountryCode=="PL" || inditex.iCountryCode=="HU" || inditex.iCountryCode=="HR") {
    $(".promo-week").append(promoWeekplan);
}*/


/*Promo Japan 10  */
var promo10jpen = '<div class="ten-japan" data-translations="home_march_lookbook">'+
                    '<a class="ten-japan" onclick="inditex.xOpenJapanPromoPage();">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span class="medium">BershkaのNewsLetter: Get 10% off</span><span>&nbsp</span>'+
                    '<span >by subscribing to our newsletter. This is available from 15th on our Online Shop.</span><span>&nbsp</span>'+
                    '</p></div>'+
                    '<span class="masinfo">+ info</span>'+
                    '</a>'+
                    '</div>'; 

if(inditex.iCountryCode=="JP" || inditex.iCountryCode=="JI") {
    $(".promo-10-jpen").html(promo10jpen);
}

/*Promo Japan 10  */
var promo10jp = '<div class="ten-japan" data-translations="home_march_lookbook">'+
                    '<a class="ten-japan" onclick="inditex.xOpenJapanPromoPage();">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span >BershkaのNewsLetter: に登録いただくと、15日開設オンラインショップにて</span><span>&nbsp</span>'+
                    '<span class="medium">10%OFF</span><span>&nbsp</span>'+
                    '</p></div>'+
                    '<span class="masinfo">+ info</span>'+
                    '</a>'+
                    '</div>'; 

if(inditex.iCountryCode=="JP" || inditex.iCountryCode=="JI") {
    $(".promo-10-jp").html(promo10jp);
}



/*Promo Korea 10  */
var promo10kren2 = '<div class="newsletter-discount" data-translations="home_march_lookbook">'+
                    '<a class="newsletter-discount" ng-href="{{core.getCategoryUrl(1010250006)}}">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span class="medium" style="font-size:18px">20% off the entire collection and free shipping.</span><br><span style="font-size:10px;font-family:bentonsansregular, Roboto, sans-serif;" class="medium">Promotion valid from 17/10/2017 (00.00h) until 19/10/2017 (23.59h). Online only.</span>'+
                    '</p></div>'+
                    '</a>'+
                    '</div>';

                    /*Promo Korea 10  */
var promo10kren2W = '<div class="newsletter-discount" data-translations="home_march_lookbook">'+
                    '<a class="newsletter-discount" ng-href="{{core.getCategoryUrl(1010250004)}}">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span class="medium" style="font-size:18px">20% off the entire collection and free shipping.</span><br><span style="font-size:10px;font-family:bentonsansregular, Roboto, sans-serif;" class="medium">Promotion valid from 17/10/2017 (00.00h) until 19/10/2017 (23.59h). Online only.</span>'+
                    '</p></div>'+
                    '</a>'+
                    '</div>';  

/*Promo Korea 10  */
var promo10kr2 = '<div class="newsletter-discount" data-translations="home_march_lookbook">'+
                    '<a class="newsletter-discount" ng-href="{{core.getCategoryUrl(1010250006)}}">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span style="font-weight:bold;font-size:18px;">전 품목 20% 할인 & 무료 배송</span><br><span style="font-size:10px;font-family:bentonsansregular, Roboto, sans-serif;">프로모션은 2017년 10월 17일부터 19일까지 3일간 온라인 구매에 한해 적용됩니다.</span>'+
                    '</p></div>'+
                    '</a>'+
                    '</div>';

/*Promo Korea 10  */
var promo10kr2W = '<div class="newsletter-discount" data-translations="home_march_lookbook">'+
                    '<a class="newsletter-discount" ng-href="{{core.getCategoryUrl(1010250004)}}">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span style="font-weight:bold;font-size:18px;">전 품목 20% 할인 & 무료 배송</span><br><span style="font-size:10px;font-family:bentonsansregular, Roboto, sans-serif;">프로모션은 2017년 10월 17일부터 19일까지 3일간 온라인 구매에 한해 적용됩니다.</span>'+
                    '</p></div>'+
                    '</a>'+
                    '</div>';

/*Promo Korea 10  */
var promo10kren = '<div class="newsletter-discount" data-translations="home_march_lookbook">'+
                    '<a class="newsletter-discount" onclick="inditex.xOpenKrPromoPage();">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span class="medium">Bershka NewsLetter: Get 10% off</span><span>&nbsp</span>'+
                    '<span >by subscribing to our newsletter.</span><span>&nbsp</span>'+
                    '</p></div>'+
                    '</a>'+
                    '</div>'; 

/*Promo Korea 10  */
var promo10kr = '<div class="newsletter-discount" data-translations="home_march_lookbook">'+
                    '<a class="newsletter-discount" onclick="inditex.xOpenKrPromoPage();">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span >Bershka NewsLetter: 뉴스레터를 구독하시고 10% 할인 혜택을 받으세요.</span><span>&nbsp</span>'+
                    '</p></div>'+
                    '</a>'+
                    '</div>'; 

if(inditex.iStoreId==45009566 && inditex.iLangId==-1) {
    $(".promo-10-kr").html(promo10kren);
}

if(inditex.iStoreId==45009566 && (inditex.iLangId==-9)) {
    $(".promo-10-kr").html(promo10kr);
}

if(inditex.iStoreId==45109566 && inditex.iLangId==-1 && inditex.xGetGenderCategory()=="BERSHKA_WOMAN" ) {
    $(".promo-10-kr").html(promo10kren2W);
}

if(inditex.iStoreId==45109566 && inditex.iLangId==-1 && inditex.xGetGenderCategory()=="BERSHKA_MAN" ) {
    $(".promo-10-kr").html(promo10kren2);
}

if(inditex.iStoreId==45109566 && inditex.iLangId==-9 && inditex.xGetGenderCategory()=="BERSHKA_WOMAN" ) {
    $(".promo-10-kr").html(promo10kr2W);
}

if(inditex.iStoreId==45109566 && inditex.iLangId==-9 && inditex.xGetGenderCategory()=="BERSHKA_MAN" ) {
    $(".promo-10-kr").html(promo10kr2);
}



/*Delete the above*/
/*Promo Korea 10 Definitivo  */
var promo10krenD = '<div class="newsletter-discount" data-translations="home_march_lookbook">'+
                    '<a class="newsletter-discount" onclick="inditex.xOpenKrPromoPage();">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span class="medium">Bershka NewsLetter: Get 10% off</span><span>&nbsp</span>'+
                    '<span >by subscribing to our newsletter.</span><span>&nbsp</span>'+
                    '</p></div>'+
                    '</a>'+
                    '</div>'; 

/*Promo Korea 10  */
var promo10krD = '<div class="newsletter-discount" data-translations="home_march_lookbook">'+
                    '<a class="newsletter-discount" onclick="inditex.xOpenKrPromoPage();">'+
                    '<div class="col-lg-12"><p class="getten">'+
                    '<span >Bershka NewsLetter: 뉴스레터를 구독하시고 10% 할인 혜택을 받으세요.</span><span>&nbsp</span>'+
                    '</p></div>'+
                    '</a>'+
                    '</div>'; 


/*if(inditex.iCountryCode=="KR" && inditex.iLangId==-9) {
    $(".promo-10-krD").html(promo10krD);
}

if(inditex.iCountryCode=="KR" && inditex.iLangId==-1) {
    $(".promo-10-krD").html(promo10krenD);
}*/

});


 // Para asegurar que se aplica la maquetacion - conexiones lentas
  $(window).on('load', function() {
    $(window).trigger('resize');
  });

  var idPais = inditex.iCountryCode;
  var idIdioma = inditex.iLangId;
  /* Cojemos las variables para la creacion */

  var urlJson = 'https://static.bershka.net/4/static/itxwebstandard/home/json/data_home_master.json?t=201905170335002121485607';

  // var urlJson = inditex.getStaticResourceUrl("/home/json/data_home.json");

  var promiseJSON = $.ajax({
    url: urlJson,
    dataType: 'JSON'
  });
  
  /* Cargamos el contenidos */
  inditex.xGetDataHomeJSON=function() {
    return null;
  }
  $.when(promiseJSON, $.ready).done(function(result) {
    //Recorremos cada  modulo de la home
    var data=result[0];
    inditex.xGetDataHomeJSON=function() {
			return data;
		}
		
    $.each(data, function(i, item) {

      var nameHomeModule = item.nameHomeModule;
      var elementoHomeModule;

      //Recorremos cada elemento del modulo de la home
      $.each(item.contenido, function(k, moduleHomeItem) {
        elementoHomeModule = moduleHomeItem.referencia;

        //Sacamos los textos;
        if (moduleHomeItem.texto) {
          var textoElementoHomeModule;

          if (typeof textoElementoHomeModule == 'undefined') {

            var idiomaEspecifico = idIdioma + idPais;
            $.each(moduleHomeItem.texto, function(j, textoElemento) {
              if (textoElemento.lang == idiomaEspecifico) {
                textoElementoHomeModule = textoElemento.descripcion;
              }
            });
          }

          if (typeof textoElementoHomeModule == 'undefined') {

            $.each(moduleHomeItem.texto, function(j, textoElemento) {
              if (textoElemento.lang == idIdioma) {
                textoElementoHomeModule = textoElemento.descripcion;
              }
            });
          }

          //Espahol por defecto
          if (typeof textoElementoHomeModule == 'undefined') {
            if (idIdioma == "-13" || idIdioma == "-11" || idIdioma == "-12") {
              $.each(moduleHomeItem.texto, function(j, textoElemento) {
                if (textoElemento.lang == "-5") {
                  textoElementoHomeModule = textoElemento.descripcion;
                }
              });
            }
          }

          // Si no hay traduccion cogemos el ingles por defecto
          if (typeof textoElementoHomeModule == 'undefined') {
            var inglesDefecto = "-1";
            $.each(moduleHomeItem.texto, function(j, textoElemento) {
              if (textoElemento.lang == inglesDefecto) {

                textoElementoHomeModule = textoElemento.descripcion;
              }
            });
          }
          //console.log(textoElementoHomeModule);
          // Cogemos el texto en ingles para el GTM
          var textoGTM;
          $.each(moduleHomeItem.texto, function(j, textoElemento) {
            if (textoElemento.lang == "-1") {
              textoGTM = textoElemento.descripcion;
              textoGTM = textoGTM.trim();
              textoGTM = textoGTM.split(' ').join('');
              textoGTM = textoGTM.split(',').join('');
              textoGTM = textoGTM.split('-').join('');
              textoGTM = textoGTM.toLowerCase();
            }
          });
        }

        //Sacamos las url
        if (moduleHomeItem.idCategory) {
          var urlElementoHomeModule;
          var codeUrl = '';
          $.each(moduleHomeItem.idCategory, function(j, codigoUrl) {
            if (codigoUrl.codePais == idPais) {
              codeUrl = codigoUrl.codigo;
            }
          });
          // Si no hay codigo cogemos el generico EU
          if (codeUrl == '') {
            var paisDefecto = "EU";
            $.each(moduleHomeItem.idCategory, function(j, codigoUrl) {
              if (codigoUrl.codePais == paisDefecto) {
                codeUrl = codigoUrl.codigo;
              }
            });
          }
          if (moduleHomeItem.type == "category") {
            var dataIDCategory = codeUrl.toUpperCase().split('C');
            urlElementoHomeModule = inditex.getCategoryUrl(dataIDCategory[1])
          } else if (moduleHomeItem.type == "product") {
            var dataIDCategory = codeUrl.toUpperCase().split('C');
            var dataIDProduct = dataIDCategory[1].split('P');
            urlElementoHomeModule = inditex.getProductUrl(dataIDProduct[1], null, null, dataIDProduct[0]);
          } else {
            var paisIdioma = idIdioma + idPais;
            $.each(moduleHomeItem.idCategory, function(j, codigoUrl) {
              if (codigoUrl.codePais == paisIdioma) {
                urlElementoHomeModule = codigoUrl.codigo;
                codeUrl = urlElementoHomeModule
              }
            });
          }
        }

        /* Funciones especificas de un modulo*/

        //ponemos el contenido del json
        if (textoElementoHomeModule) {

          $("[data-translations=" + nameHomeModule + "] ." + elementoHomeModule).html(textoElementoHomeModule);
          /*
          textoGTM = nameHomeModule + "_" + textoGTM;*/
/*
          $("[data-translations=" + nameHomeModule + "] ." + elementoHomeModule + "").attr("data-actiongtm", textoGTM);
*//*
        } else {
          var textoGTM = nameHomeModule + "_img";
          $("[data-translations=" + nameHomeModule + "] ." + elementoHomeModule + "").attr("data-actiongtm", textoGTM);
        */}

        if (urlElementoHomeModule) {
          $("[data-translations=" + nameHomeModule + "] ." + elementoHomeModule + "").attr("href", urlElementoHomeModule);
        }

      });
    });
  }).fail(function() {
    // console.log(arguments);
  });


inditex.onReady(function() {

var categoryGTM="home";
  if (inditex.iCategoryId==1010193132){
    categoryGTM="home_woman";
  } else if (inditex.iCategoryId==1010193133){
    categoryGTM="home_man";
  }


// Lectura DATA-LNKGTM para Analítica
    $('div[class^="container"]').on('click', 'a', function(e) {
     

      //Sacamos las variables del GTM y de URL
      var linkUrl = $(this).attr('href');
			if(linkUrl=="#") {
				return;
			}

      var actionGTM = $(this).attr("data-actiongtm");
      var labelIdGTM = $(this).closest("div[data-labelgtm]").attr("data-labelgtm");
			
      var target = $(this).attr("target");
      var preventDefault = (target != "_blank");
      if (preventDefault) {
        e.preventDefault();
      }

      //Enviamos los datos al GTM

      

      if (actionGTM){

        /*if (inditex.iPage=="XXX"){
            $(document).triggerHandler(bershka.events.trackEvent,{
              name:'analytics-event',
              data:{
              'cf':'navegacion',
              'category':categoryGTM,
              'action': 'ir_a_'+labelIdGTM,
              'label': actionGTM
              }
            });
          }else{*/
            $(document).trigger('GTM-push-direct', {
              'eventData': {
                'cf': 'navegacion',
                'category': categoryGTM,
                'action': 'click_'+actionGTM,
                'label': labelIdGTM
              },
              'event': 'analyticsEvent'
            });
          //}
      }      

      //Cambiamos la pagina a donde corresponde el enlace
			if(preventDefault) {
				window.open(linkUrl, target ? target : "_self");
			}

});

    $(window).on("scroll", function() {
      var scrollHeight = $(document).height();
      var scrollPosition = $(window).height() + $(window).scrollTop();
      if ((scrollHeight - scrollPosition) / scrollHeight === 0) {
          $(document).trigger('GTM-push-direct', {
                  'eventData': {
                    'cf': 'navegacion',
                    'category': categoryGTM,
                    'action': 'final_pagina',
                    'label': undefined
                  },
                  'event': 'analyticsEvent'
                });
        }

    });


    //Situar promos versión mobile antes de footer
    enquire.register("screen and (max-width:800px)", {
      match: function() {
        if ($('.dvPromos').length) {
          $('.dvPromos').insertBefore('footer');
        }
      }
    });

    // Promociones Superiores
    $('.homeModule.dvPromos a').not('.lnkPromo00').click(function(e) {

      e.preventDefault();

      //Sacamos las variables del GTM y de URL
      var linkUrl = $(this).attr('href');
      var idGTM = (typeof $(this).attr("data-lnkGTM") == typeof undefined) ? '' : $(this).attr("data-lnkGTM");

      //idGTM especificos para la home 02/02
      switch ($(this).attr('class')) {

        case 'gtmPromoNewsletter':
          idGTM = 'promo_newsletter';
          break;
        case 'gtmPromoNewsletterNew':
          idGTM = 'promo_newsletter';
          break;
        case 'gtmPromoSpecialPrices':
          idGTM = 'promo_specialPrices';
          break;
        case 'gtmPromoDctoWomen':
          idGTM = 'promo_PromoDctoWomen';
          break;
        case 'gtmPromoDctoMen':
          idGTM = 'promo_PromoDctoMen';
          break;
        case 'gtmPromoAccessories':
          idGTM = 'promo_PromoAccessories_Dresses';
          break;
        case 'gtmPromoDctoWomen titletooltip':
          idGTM = 'promo_PromoDctoWomen';
          break;
        case 'gtmPromoDctoMen titletooltip':
          idGTM = 'promo_PromoDctoMen';
          break;
        case 'gtmPromoAccessories titletooltip':
          idGTM = 'promo_PromoAccessories_Dresses';
          break;
        case 'gtmPromoDctoWomen30':
          idGTM = 'promo_PromoDctoWomen30';
          break;
        case 'gtmPromoDctoHombre30':
          idGTM = 'promo_PromoDctoMen30';
          break;
      }

      idGTM = idGTM.toLowerCase();

      //console.log('idGTM: ' + idGTM);

      //Enviamos los datos al GTM
      $(document).trigger('GTM-push-direct', {
        'promoId': idGTM,
        'event': 'clickPromo'
      });

      //Cambiamos la pagina a donde corresponde el enlace
      window.location.href = linkUrl;

    });

// GTM - Home --------------------------------------------------------------
  // Eventos de scroll Importante
  $(function() {
    var $win = $(window);
    var $doc = $(document);
    var _lastScrollTop;
    var _lastScrollSector = -1; //0-25% --> sector 0, 25%-50% --> 1, 50%-75% --> 2, 75%-100% --> 3
    var _scrollEvents = ['scroll25', 'scroll25', 'scroll50', 'scroll75', 'scroll75'];

    if (typeof window.dataLayer !== 'undefined') {
      $win.scroll(_.throttle(function() {
        var msg, currSector, currScrolltop = $win.scrollTop();
        if (currScrolltop !== _lastScrollTop) {

          //Calculamos el sector actual dependiendo de si hacemos scroll hacia arriba o abajo
          if (currScrolltop < _lastScrollTop) {
            currSector = Math.ceil($win.scrollTop() / $doc.height() * 4);
          } else {
            currSector = Math.floor(($win.scrollTop() + $win.height()) / $doc.height() * 4);
          }

          //Enviamos el msg adecuado si cambiamos de sector
          if (_scrollEvents[currSector] !== _scrollEvents[_lastScrollSector]) {
            msg = _scrollEvents[currSector];
            if (msg) {
              //console.log('currSector:', currSector, "msg:", msg);
              //Send msg to GTM
              window.dataLayer.push({
                'event': 'scrollPage',
                'scrollLevel': msg
              });
            }
            _lastScrollSector = currSector;
          }
          _lastScrollTop = currScrolltop;
        }
      }, 250, false));
    }
  });

    // Especificaciones de Promos por paises

    if ($(".homeModule.dvPromos").length) {

      //Se oculta todo el bloque de promos para los siguientes paises que no son:
      /*if ($.inArray(idPais, ['GB', 'MX', 'AT', 'BG', 'HR', 'CZ', 'HU', 'IE', 'RO', 'SK', 'CH', 'BE', 'TR', 'DE', 'FR', 'NL', 'IT', 'PL', 'PT', 'RU', 'ES', 'IC', 'CN', 'GR']) < 0) {
          $('.homeModule.dvPromos').remove();
      }*/
      /*
      if ($.inArray(idPais, ['MX', 'DE', 'PL', 'RU', 'FR']) < 0) {
        $('.homeModule.dvPromos').remove();
      }
      */
      $('.homeModule.dvPromos').remove();

      // despliego con jquery el modulo de promociones superiores,
      $(".homeModule.dvPromos").css({
       'display' : '-webkit-flex',
       'display' : '-ms-flexbox',
       'display' : 'flex',
       'overflow' : 'hidden',
       'margin-top' : '8px',
       'margin-bottom' : '10px'
    });
      
      /*
      if ($('.gtmPromoExpress').length) {
        if (idPais != "PL") {
          $('.gtmPromoExpress').remove();
        }
      }*/
      $('.gtmPromoExpress').remove();

      // Promo de Newsletter Solo en Turkia (venta y no venta)  
      $('.gtmPromoNewsletter').remove();

      //Se oculta Newsletter New PROMO en todos los paises
      $('.gtmPromoNewsletterNew').remove();

      //Se oculta módulo de promos accesorios y mensaje de promos
      $('.gtmPromoAccessories').remove();
      $('.promo-legal').remove();

      //Se oculta promoHello y mensaje de promos
      $('.promoHello').remove();

      //Se oculta special prices de mujer y hombre
      $('.gtmPromoSpecialPrices').remove();
      $('.gtmPromoSpecialPricesMan').remove();

      // Se muestra solo freeshipping en MX, DE, GB
  
      if (idPais !== "GB" && idPais !== "RU" && idPais !== "DE" && idPais !== "MX") {
        $('.promoFreeShipping').remove();
      }
   

      $('.gtmPromoDctoMen').remove();
      $('.gtmPromoDctoWomen').remove();
      $('.gtmPromoDctoHombre30').remove();
      $('.gtmPromoDctoWomen30').remove();

    }

     // Eliminar datatool-tip botoneria superior
    $("a.gtmPromoDctoWomen30").removeAttr("data-tooltip");
    $("a.gtmPromoDctoHombre30").removeAttr("data-tooltip");

    // se oculta en IC servicios module contiene COD wallet... de ES
    if ($.inArray(idPais, ['ES' , 'IC', 'PL', 'GB', 'NL', 'PT']) < 0) {
      $('#bskservices-container').remove();
      $('.footer.mrg-top-3').remove();
    }

  }); 

$('#sales-banner-module').hide();

// PROMO Free Shipping de Enero, despliega con Array Paises

$(".bannerfs-container-home").remove();


// se quita bershkatrend en chica RU

if (inditex.iCountryCode == 'RU')  {
    $('.bershkatrend-notru').remove();
}



//Olapic
if(!window.olapicScriptAdded) {
	window.olapicScriptAdded=true;
  $(function() {
    var scriptGen=null;
    switch (inditex.iCountryCode) {
      case 'ES':
        if (inditex.iLangId==-13 || inditex.iLangId==-11 || inditex.iLangId==-12 ){
          scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="dde9530ef4896cbe994a7c63da421d8f" data-apikey="71f25b1cb06c8b421b12510727dde3ebb9880cfce88459c8f6fb05a64905c3df" data-lang="es_ES"  async="async"><\/olapic-home>';

        }else{
          scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="dde9530ef4896cbe994a7c63da421d8f" data-apikey="71f25b1cb06c8b421b12510727dde3ebb9880cfce88459c8f6fb05a64905c3df" data-lang="en_GB"  async="async"><\/olapic-home>';
        }
        break;
      case 'IC':
        //scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="1a577f358981eeb9154668a3bd03f81d" data-apikey="f61b722006eb69e5c64d46475af448480720f0ec4491c31a09fc42383a795ac9" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'GB':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="4c59d8f380c897e3b7339e52ad7c51be" data-apikey="928181be7c2243eb2e037cdf9cdfb4fb00afa130e294634cad867ec295ff7d16" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'FR':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="39261e15f56392369d14e65425479672" data-apikey="829c35cd85d5ec76ffa1b8c4b1314db51edc780d90b1051fada0b981f724d5ca" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'DE':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="95d706c68e02a082643a8a98b1049997" data-apikey="ced6e67315da7be048e8e2a0c6d65103e6aea8e4a0f83dc8ace4189717f4402a" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'NL':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="26aa745782e275c04c59a88d96a74693" data-apikey="12cd43dba859b0da8a3e349dcebe80cd4e90d5ed03297a5e6b6cb5048bd4ba13" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'PL':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="b147253e020b8c936352e6178006f3b8" data-apikey="a9a2b948c2511deba0d7ea0804364f591c0dac041f8d56fbd0bc01f30f6b32e9" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'PT':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="fda16b3db71b3b6a23227a4f05abe118" data-apikey="a5068fac7e5d8755683693cf8a1222dd6a888a8c000c554cd7e08b9824898043" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'IE':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="6f3b96b707a2ae20503e5ab0da3cfa2c" data-apikey="b63f48b5cbdb8a8a8e8a54654413a392d0d680a22b08fc571fad8a045d006ee0" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'GR':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="1148cd1cc715090d508caafba9b5af6a" data-apikey="e695583b5df2ea436be964e4f0fe1b6f6c13c7be8960aa0c036663734aa87da1" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'RU':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="290c23cbb9af5f7053785c5e4d89c46d" data-apikey="3b302f48080922919375396d60ac86cc9c9906a100a894425b28cb60931e3fe7" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'IT':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="8cd0a7d7eb69eced1af083cb25ad8a8f" data-apikey="a1bf4932497eea64893c333b80869d7059bdcd8c556f48cbe34a9ae5b7bd8b87" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'US':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="5ac876b802b7c8889ea6209363b840ae" data-apikey="d6902bd3551c76a56d6fdff036e25dee381f38233e3b04dfe375b57834724363" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'MX':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="ebb998303b8de96a90f17a8c81dcf34e" data-apikey="b3089f149c43809d46c1815e21e3584b8d2f13225ab94dcdc606fb6cedef9e4c" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'TR':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="c3c4cf0c1edd831f86fc56ed8f0b72a6" data-apikey="0797ed4a6145827ddea5a3cd980f8a6d0d191134122924489412046101ea630e" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'KR':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="3780d16ed8d4b6738afab567e5233e8b" data-apikey="e6586de07b80b34dff39cbfddb0a1c212f3675b0e60f9c6e88f76b6fba084461" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
      case 'JP':
        scriptGen = '<olapic-home src="https://photorankstatics-a.akamaihd.net/81b03e40475846d5883661ff57b34ece/static/frontend/latest/build.min.js"  data-olapic="olapic_specific_widget" data-instance="09fdd979108716e0aa638ca0d313959a" data-apikey="c7282a17c18ffcf9eee2a3089fd654a387a67185f22514759bba8aa6fb8ed2a5" data-lang="en_GB"  async="async"><\/olapic-home>';
        break;
    }

    if(scriptGen) {
      $("#olapic_specific_widget").append(scriptGen);
    } else {
      $('#olapic_specific_widget').addClass("hide");
    }
  });
}

//Tooltip position
  var tooltipSpan = document.getElementById('tooltiptext-sales');

if (tooltipSpan){
  window.onmousemove = function (e) {
      var x = e.clientX,
          y = e.clientY;
      tooltipSpan.style.top = (y + 20) + 'px';
      tooltipSpan.style.left = (x + 20) + 'px';
  };
}

    // Traducciones y links de category mujer //
    var categoriesConf = {
        "1010193169": "txtaccesoriosm"
    };

    for (prop in categoriesConf) {
      var idCategory = parseInt(prop);
      var categories = inditex.xFindCategory(idCategory);
      i = 0;
      if (categories && categories.length > 0) {
        var category = categories[categories.length - 1];

        if (category) {
          var categoryName = category.name;
          var lnkClass = categoriesConf[prop];
          var url = inditex.getCategoryUrl(idCategory);
          $("." + lnkClass + " .bsk-text").text(categoryName);
        }
      }
    }

        var categoriesConf = {
        "1010193135":"txtaccesoriosm"
    };

    for (prop in categoriesConf) {
      var idCategory = parseInt(prop);
      var categories = inditex.xFindCategory(idCategory);
      i = 0;
      if (categories && categories.length > 0) {
        var category = categories[categories.length - 1];

        if (category) {
          var categoryName = category.name;
          var lnkClass = categoriesConf[prop];
          var url = inditex.getCategoryUrl(idCategory);
          $("." + lnkClass + " a").attr('href', url);
        }
      }
    }
    
    var categoriesConf = {
        "1010221507":"txtBeautyModule"
    };

    for (prop in categoriesConf) {
      var idCategory = parseInt(prop);
      var categories = inditex.xFindCategory(idCategory);
      i = 0;
      if (categories && categories.length > 0) {
        var category = categories[categories.length - 1];

        if (category) {
          var categoryName = category.name;
          var lnkClass = categoriesConf[prop];
          var url = inditex.getCategoryUrl(idCategory);
          $("." + lnkClass + " a").attr('href', url);
        }
      }
    }

    var categoriesConf = {
        "1010193169":"txtaccsesorioshombre"
    };

    for (prop in categoriesConf) {
      var idCategory = parseInt(prop);
      var categories = inditex.xFindCategory(idCategory);
      i = 0;
      if (categories && categories.length > 0) {
        var category = categories[categories.length - 1];

        if (category) {
          var categoryName = category.name;
          var lnkClass = categoriesConf[prop];
          var url = inditex.getCategoryUrl(idCategory);
          $("." + lnkClass + " .bsk-text").text(categoryName);
        }
      }
    }

    var categoriesConf = {
        "1010193219":"txtbodies",
        "1010196005":"txtbralettes"
    };

    for (prop in categoriesConf) {
      var idCategory = parseInt(prop);
      var categories = inditex.xFindCategory(idCategory);
      i = 0;
      if (categories && categories.length > 0) {
        var category = categories[categories.length - 1];

        if (category) {
          var categoryName = category.name;
          var lnkClass = categoriesConf[prop];
          var url = inditex.getCategoryUrl(idCategory);
           $("." + lnkClass + ".bsk-button").text(categoryName);
        }
      }
    }


    var categoriesConf = {
        "1010193172":"txtaccsesorioshombre"
    };

    for (prop in categoriesConf) {
      var idCategory = parseInt(prop);
      var categories = inditex.xFindCategory(idCategory);
      i = 0;
      if (categories && categories.length > 0) {
        var category = categories[categories.length - 1];

        if (category) {
          var categoryName = category.name;
          var lnkClass = categoriesConf[prop];
          var url = inditex.getCategoryUrl(idCategory);
          $("." + lnkClass + " a").attr('href', url);
        }
      }
    }

   var categoriesConf = {
"1010193250":"txtdenimhombre"
      };
      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $("." + lnkClass + " .bsk-text").text("denim");
            $("." + lnkClass + " a").attr('href', url);
          }
        }
      }


      // Traducciones y links de category NATURALS HOMBRE //
      var categoriesConf = {
        "1010193217": "txtpuntomujer",
        "1010193217":"txtcamisetasmujer",
        

        "1010193215": "txtjeansmujer",
        "1010193220": "txttopsmujer",
        "1010193213": "txtvestidosmujer",
        "1010194517": "txtshortsmujer",
        "1010193138": "txtbolsosmujer",
        "1010193221": "txtcamisasmujer",
        "1010193263": "txtkimonosmujer",
        "1010193216": "txtpantalonesmujer",
        "1010193212": "txtabrigosmujer",

        "1010204513": "txtojos",
        "1010204512": "txtlabios",
        "1010204510": "txtrostro",


        "1010193239": "txtcamisetashombre",
        "1010193244": "txtsudaderashombre",
        "1010193240": "txtcamisashombre",
        "1010193243": "txtpuntohombre",
        "1010193236": "txtcazadorashombre",
        "1010193242": "txtbermudashombre",
    
        


        "1010193238": "txtjeanshombre"


      };

      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $("." + lnkClass + " .bsk-text").text(categoryName);
            $("." + lnkClass + " a").attr('href', url);
          }
        }
      }

/* Start Sales ids */

      var categoriesConf = {
        "1010224002": "txtsalesaccesorios",
        "1010224033": "txtsaleszapatos",
        "1010229595": "txtsalesaccesorioshombre",
        "1010229601": "txtsaleszapatoshombre"
      };

      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $( "a" + "." + lnkClass ).attr('href', url);
          }
        }
      }

      var categoriesConf = {
        "1010224057": "txtsalesshorts",

        "1010224054": "txtsalescamisas",
        "1010224042": "txtsalescazadorasyabrigos",

        "1010229564": "txtsalescazadorashombre",
        "1010229571": "txtsalessudaderashombre"
      };

      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $( "a" + "." + lnkClass ).attr('href', url);
            $( "." + lnkClass +"text" ).text(categoryName);
          }
        }
      }
      
      var categoriesConf = {
        "1010222009": "txtsalesaccesorios",
        "1010229539": "txtsalesaccesorioshombre"
      };

      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $( "." + lnkClass +"text" ).text(categoryName).css("text-transform","lowercase");
          }
        }
      }

      var categoriesConf = {
        "1010224051": "txtsalescamisetasmujer",
        "1010224053": "txtsalestopsmujer",
        "1010224050": "txtsalespantalonesmujer",
        "1010224047": "txtsalesvestidosmujer",
        "1010224049": "txtsalesjeansmujer",
        
        "1010229566": "txtsalescamisetashombre",
        "1010229570": "txtsalespuntohombre",
        "1010229564": "txtsalesbombershombre",
        "1010229569": "txtsalesbermudashombre",
        "1010229565": "txtsalesjeanshombre"
      };

      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $( "." + lnkClass + " a" ).attr('href', url);
            $( "." + lnkClass +"text" ).text(categoryName);
          }
        }
      }

/*End Sales ids */

      var categoriesConf = {

        "1010204509": "txtcoleccion"

      };

      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $("." + lnkClass + " a").attr('href', url);
          }
        }
      }
    
      var categoriesConf = {

        "1010193202": "txtzapatos",
        "1010193234": "txtbanomujer"

      };

      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $("." + lnkClass + " a").attr('href', url);
          }
        }
      }
    
      var categoriesConf = {

        "1010204547": "txtMonoColor",
        "1010194003": "txtbershkatrendman_tailor",
        "1010223503": "txtBershkatrendMan",
        "1010223512": "txtBershkatrendWomanCN"

      };

      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $("." + lnkClass + " .bsk-text").text(categoryName);
            $("." + lnkClass + " a").attr('href', url);
          }
        }
      }

    var categoriesConf = {
        "1010193220": "txtBershkatrendWoman",
      };

      for (prop in categoriesConf) {
        var idCategory = parseInt(prop);
        var categories = inditex.xFindCategory(idCategory);
        i = 0;
        if (categories && categories.length > 0) {
          var category = categories[categories.length - 1];

          if (category) {
            var categoryName = category.name;
            var lnkClass = categoriesConf[prop];
            var url = inditex.getCategoryUrl(idCategory);
            $("." + lnkClass + " a").attr('href', url);
          }
        }
      }


    //condición que pone enlaces en CHINA para evitar tener contenido específico.
    /*if (idPais=="CN"){

      if (inditex.iCategoryId==1010193133){

        $( "#carousel a" ).removeClass( "lnkSlidenovedadesHombre" );
        $( "#carousel2 a" ).removeClass( "lnkSlidenovedadesHombre" );

        $("#carousel a").attr("href", "https://bershka.tmall.com/category-1165666485-609705893.htm?spm=a1z10.5-b-s.w5003-15672056979.1.CwLcUi&search=y&parentCatId=1165666484&parentCatName=%A1%BE2017%B4%BA%CF%C4%A1%BF%C3%BF%D6%DC%C9%CF%D0%C2&parentCatPageId=609705893&catName=MAN+%C4%D0%D7%B0&scene=taobao_shop#bd");

        $("#carousel2 a").attr("href", "https://bershka.tmall.com/category-1165666485-609705893.htm?spm=a1z10.5-b-s.w5003-15672056979.1.CwLcUi&search=y&parentCatId=1165666484&parentCatName=%A1%BE2017%B4%BA%CF%C4%A1%BF%C3%BF%D6%DC%C9%CF%D0%C2&parentCatPageId=609705893&catName=MAN+%C4%D0%D7%B0&scene=taobao_shop#bd");

      }
      
      if (inditex.iCategoryId==1010193132){
          
        $( "#carousel a" ).removeClass( "lnkSlidenovedadesMujer" );
        $( "#carousel2 a" ).removeClass( "lnkSlidenovedadesMujer" );

        $("#carousel a").attr("href", "https://bershka.tmall.com/category-1184086104-609705893.htm?spm=a1z10.5-b-s.w5003-15672056979.2.CwLcUi&search=y&parentCatId=1165666484&parentCatName=%A1%BE2017%B4%BA%CF%C4%A1%BF%C3%BF%D6%DC%C9%CF%D0%C2&parentCatPageId=609705893&catName=WOMAN+%C5%AE%D7%B0&scene=taobao_shop#bd");

        $("#carousel2 a").attr("href", "https://bershka.tmall.com/category-1184086104-609705893.htm?spm=a1z10.5-b-s.w5003-15672056979.2.CwLcUi&search=y&parentCatId=1165666484&parentCatName=%A1%BE2017%B4%BA%CF%C4%A1%BF%C3%BF%D6%DC%C9%CF%D0%C2&parentCatPageId=609705893&catName=WOMAN+%C5%AE%D7%B0&scene=taobao_shop#bd");

      }
      
    }*/
    
    /* Controlador sonido video */
    /*var volume = 100;  
    var $mutebtn2 = $("#mutebtn2");
    $mutebtn2.on("click",function(){
        if(volume==0){
            volume=100;
            $mutebtn2.html('<img class="NoMobile" alt="" src="https://static.bershka.net/4/static/itxwebstandard/images/home/30_08_home/altavoz.png?20190517033500">');
        }else{
            volume=0;
            $mutebtn2.html('<img class="NoMobile" alt="" src="https://static.bershka.net/4/static/itxwebstandard/images/home/30_08_home/altavoz_mute.png?20190517033500">');
        }
        player.setVolume(volume);
    });

    var isMobiles = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ? true : false;
    if (isMobiles){
      $('.container.video').remove();
    }*/

    var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ? true : false;
    if (isMobile){
      $(window).on("scroll", _.debounce(function() {
      var $parallax=$("#parallax");
        if($parallax.length) {
          if($(".promofortymobile").offset().top > ($("footer").offset().top)) {
                $(".promofortymobile").css("visibility","hidden");
            } else {
                $(".promofortymobile").css("visibility","visible");
            }
        }
    },6));
  }

    $( document ).ready(function() {
        $('.hideme').each( function(i){
        var objectPosition = $(this).offset().top;
        var scrollPosition = $(document).scrollTop()+$(window).height();
        if( objectPosition < scrollPosition ){
            $(this).css({'transform':'translateY(0)'});
        }
    });

    $( document ).ready(function() {
      if ($(".txtcoleccion .absolute").length>0){
          $(".txtcoleccion .absolute").removeClass("center-xy");
          $(".txtcoleccion .absolute").addClass("center-x");
          $(".txtcoleccion .absolute").css("bottom","50px");
        }
    });


  });

  $(document).scroll(function() {
    $('.hideme').each( function(i){
        var objectPosition = $(this).offset().top;
        var scrollPosition = $(document).scrollTop()+$(window).height();
        if( objectPosition < scrollPosition ){
            $(this).css({'transform':'translateY(0)'});
        }
    });
});

$( document ).ready(function() {
    $( "#closebuttonbanner" ).click(function() {
    $( ".banner-fs" ).remove();
    });
});

    $(window).load(function() { //start after HTML, images have loaded
        var InfiniteRotator =
        {
            init: function()
            {
                //initial fade-in time (in milliseconds)
                var initialFadeIn = 20;
                //interval between items (in milliseconds)
                var itemInterval = 2000;
                //cross-fade time (in milliseconds)
                var fadeTime = 5;
                //count number of items
                var numberOfItems = $('.rotating-item').length;
                //set current item
                var currentItem = 0;
                //show first item
                $('.rotating-item').eq(currentItem).fadeIn(initialFadeIn);
                //loop through the items
                var infiniteLoop = setInterval(function(){
                    $('.rotating-item').eq(currentItem).fadeOut(fadeTime);
                    if(currentItem == numberOfItems -1){
                        currentItem = 0;
                    }else{
                        currentItem++;
                    }
                    $('.rotating-item').eq(currentItem).fadeIn(fadeTime);
                }, itemInterval);
            }
        };
        InfiniteRotator.init();
    
    });


    //typewriter effect

// set up text to print, each item in array is new line
var aText = new Array(
"#fedezforbershka", 
"coming soon",
"#fedezforbershka"
);
var iSpeed = 100; // time delay of print out
var iIndex = 0; // start printing array at this posision
var iArrLength = aText[0].length; // the length of the text array
var iScrollAt = 20; // start scrolling up at this many lines
 
var iTextPos = 0; // initialise text position
var sContents = ''; // initialise contents variable
var iRow; // initialise current row
 
function typewriter()
{
 sContents =  ' ';
 iRow = Math.max(0, iIndex-iScrollAt);
 var destination = document.getElementById("typedtext");

 if (destination){
        while ( iRow < iIndex ) {
            sContents = aText[iRow++] + '';
        }
        destination.innerHTML = sContents + aText[iIndex].substring(0, iTextPos) + "";
        if ( iTextPos++ == iArrLength ) {
        iTextPos = 0;
        iIndex++;
        aText[0]="";
        if (iIndex==2)
        {
            aText[1]="";
        }
        if ( iIndex != aText.length ) {
        iArrLength = aText[iIndex].length;
        setTimeout("typewriter()", 500);
        }
        } else {
        setTimeout("typewriter()", iSpeed);
        }
    }
}

$(document).ready(function() {
    setTimeout(function(){typewriter()}, 1000); 
});

function typewriterReload(){
    aText = new Array(
    "#fedezforbershka", 
    "coming soon",
    "#fedezforbershka"
    );
    iSpeed = 100; // time delay of print out
    iIndex = 0; // start printing array at this posision
    iArrLength = aText[0].length; // the length of the text array
    iScrollAt = 20; // start scrolling up at this many lines
    
    iTextPos = 0; // initialise text position
    sContents = ''; // initialise contents variable
    iRow; // initialise current row
    typewriter();
}


// set up text to print, each item in array is new line
var aText2 = new Array(
"#fedezforbershka"
);
var iSpeed2 = 100; // time delay of print out
var iIndex2 = 0; // start printing array at this posision
var iArrLength2 = aText2[0].length; // the length of the text array
var iScrollAt2 = 20; // start scrolling up at this many lines
 
var iTextPos2 = 0; // initialise text position
var sContents2 = ''; // initialise contents variable
var iRow2; // initialise current row

function typewriter2()
{
 sContents2 =  ' ';
 iRow2 = Math.max(0, iIndex2-iScrollAt2);
 var destination2 = document.getElementById("typedtext2");

    if (destination2){

        while ( iRow2 < iIndex2 ) {
            sContents2 = aText2[iRow2++] + '';
        }
        destination2.innerHTML = sContents2 + aText2[iIndex2].substring(0, iTextPos2) + "";
        if ( iTextPos2++ == iArrLength2 ) {
        iTextPos2 = 0;
        iIndex2++;
        //aText2[0]="";
        if (iIndex2==2){
            aText2[1]="";
        }
        if ( iIndex2 != aText2.length ) {
            iArrLength2 = aText2[iIndex2].length;
        setTimeout("typewriter2()", 500);
        }
        } else {
        setTimeout("typewriter2()", iSpeed2);
        }
    }

}

$(document).ready(function() {
    setTimeout(function(){typewriter2()}, 1000); 
});



$(document).ready(function() {
    function analyticsNow(){
        var dateAnalytics = new Date();
        dateAnalytics=(dateAnalytics.getDate() + 1) + '/' + dateAnalytics.getMonth() + '/' +  dateAnalytics.getFullYear();
        return dateAnalytics;
    }
});

/*REFRESH 1107*/

var TxtType = function(el, toRotate, period) {
        this.toRotate = toRotate;
        this.el = el;
        this.loopNum = 0;
        this.period = parseInt(period, 10) || 2000;
        this.txt = '';
        this.tick();
        this.isDeleting = false;
    };

    TxtType.prototype.tick = function() {
        var i = this.loopNum % this.toRotate.length;
        var fullTxt = this.toRotate[i];

        if (this.isDeleting) {
            return;
        } else {
        this.txt = fullTxt.substring(0, this.txt.length + 1);
        }

        this.el.innerHTML = '<span class="wrap">'+this.txt+'</span>';

        var that = this;
        var delta = 200 - Math.random() * 100;

        if (this.isDeleting) { delta /= 2; }

        if (!this.isDeleting && this.txt === fullTxt) {
        delta = this.period;
        this.isDeleting = true;
        } else if (this.isDeleting && this.txt === '') {
        this.isDeleting = false;
        this.loopNum++;
        delta = 500;
        }

        setTimeout(function() {
        that.tick();
        }, delta);
    };

    function typeWriter1107() {
        var elements = document.getElementsByClassName('txtTypeWriter');
        for (var i=0; i<elements.length; i++) {
            var toRotate = elements[i].getAttribute('data-type');
            var period = elements[i].getAttribute('data-period');
            if (toRotate) {
              new TxtType(elements[i], JSON.parse(toRotate), period);
            }
        }
    };

ItxHomeTrackingController.prototype._bindings.bindText=function() {
    setTimeout(function() {
        typeWriter1107();
        }, 3000);
};


/* 
 * throwable
 * JQuery plugin 
 */
 
 /**------------------------------------**/
//              CREDITS
/**------------------------------------**/
/*
 - Mr. Doobs :: http://mrdoob.com/92/Google_Gravity
 - Alex Arnell's inheritance.js :: http://code.google.com/p/inheritance/
 - Box2Djs :: http://box2d-js.sourceforge.net/
*/

/**
 * JQuery throwable plugin
 * @param {type} $
 * @param {type} window
 * @param {type} document
 * @param {type} undefined
 * @returns {undefined}
 */
(function($, window, document, undefined) {
    
/********* libraries *********/
    
/* Based on Alex Arnell's inheritance implementation. */
    
function $A(e){if(!e)return[];if(e.toArray)return e.toArray();var t=e.length||0,n=new Array(t);while(t--)n[t]=e[t];return n}var Class={create:function(){function n(){this.initialize.apply(this,arguments)}var e=null,t=$A(arguments);if($.isFunction(t[0]))e=t.shift();Object.extend(n,Class.Methods);n.superclass=e;n.subclasses=[];if(e){var r=function(){};r.prototype=e.prototype;n.prototype=new r;e.subclasses.push(n)}for(var i=0;i<t.length;i++)n.addMethods(t[i]);if(!n.prototype.initialize)n.prototype.initialize=this.emptyFunction;n.prototype.constructor=n;return n},emptyFunction:function(){}};Class.Methods={addMethods:function(e){var t=this.superclass&&this.superclass.prototype;var n=Object.keys(e);if(!Object.keys({toString:true}).length)n.push("toString","valueOf");for(var r=0,i=n.length;r<i;r++){var s=n[r],o=e[s];if(t&&$.isFunction(o)&&o.argumentNames().first()=="$super"){var u=o,o=Object.extend(function(e){return function(){return t[e].apply(this,arguments)}}(s).wrap(u),{valueOf:function(){return u},toString:function(){return u.toString()}})}this.prototype[s]=o}return this}};Object.extend=function(e,t){for(var n in t)e[n]=t[n];return e};Object.extend(Object,{inspect:function(e){try{if(Object.isUndefined(e))return"undefined";if(e===null)return"null";return e.inspect?e.inspect():String(e)}catch(t){if(t instanceof RangeError)return"...";throw t}},toJSON:function(e){var t=typeof e;switch(t){case"undefined":case"function":case"unknown":return;case"boolean":return e.toString()}if(e===null)return"null";if(e.toJSON)return e.toJSON();if(Object.isElement(e))return;var n=[];for(var r in e){var i=Object.toJSON(e[r]);if(!Object.isUndefined(i))n.push(r.toJSON()+": "+i)}return"{"+n.join(", ")+"}"},toQueryString:function(e){return $H(e).toQueryString()},toHTML:function(e){return e&&e.toHTML?e.toHTML():String.interpret(e)},keys:function(e){var t=[];for(var n in e)t.push(n);return t},values:function(e){var t=[];for(var n in e)t.push(e[n]);return t},clone:function(e){return Object.extend({},e)},isElement:function(e){return e&&e.nodeType==1},isHash:function(e){return e instanceof Hash},isString:function(e){return typeof e=="string"},isUndefined:function(e){return typeof e=="undefined"}})

            if (WebKit = navigator.userAgent.indexOf('AppleWebKit/index.html') > -1) {
              $A = function(iterable) {
                if (!iterable) return [];
                if (!($.isFunction(iterable) && iterable == '[object NodeList]') &&
                iterable.toArray) return iterable.toArray();
                var length = iterable.length || 0, results = new Array(length);
                while (length--) results[length] = iterable[length];
                return results;
              };
            }

///==============================================================================================
    /* 
    * Box2Djs 
    * Minified version
    */
    var b2Settings=Class.create();b2Settings.prototype={initialize:function(){}};b2Settings.USHRT_MAX=65535;b2Settings.b2_pi=Math.PI;b2Settings.b2_massUnitsPerKilogram=1;b2Settings.b2_timeUnitsPerSecond=1;b2Settings.b2_lengthUnitsPerMeter=30;b2Settings.b2_maxManifoldPoints=2;b2Settings.b2_maxShapesPerBody=64;b2Settings.b2_maxPolyVertices=8;b2Settings.b2_maxProxies=1024;b2Settings.b2_maxPairs=8*b2Settings.b2_maxProxies;b2Settings.b2_linearSlop=.005*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_angularSlop=2/180*b2Settings.b2_pi;b2Settings.b2_velocityThreshold=1*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_maxLinearCorrection=.2*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_maxAngularCorrection=8/180*b2Settings.b2_pi;b2Settings.b2_contactBaumgarte=.2;b2Settings.b2_timeToSleep=.5*b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_linearSleepTolerance=.01*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_angularSleepTolerance=2/180/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2Assert=function(e){if(!e){var t;t.x++}};var b2Vec2=Class.create();b2Vec2.prototype={initialize:function(e,t){this.x=e;this.y=t},SetZero:function(){this.x=0;this.y=0},Set:function(e,t){this.x=e;this.y=t},SetV:function(e){this.x=e.x;this.y=e.y},Negative:function(){return new b2Vec2(-this.x,-this.y)},Copy:function(){return new b2Vec2(this.x,this.y)},Add:function(e){this.x+=e.x;this.y+=e.y},Subtract:function(e){this.x-=e.x;this.y-=e.y},Multiply:function(e){this.x*=e;this.y*=e},MulM:function(e){var t=this.x;this.x=e.col1.x*t+e.col2.x*this.y;this.y=e.col1.y*t+e.col2.y*this.y},MulTM:function(e){var t=b2Math.b2Dot(this,e.col1);this.y=b2Math.b2Dot(this,e.col2);this.x=t},CrossVF:function(e){var t=this.x;this.x=e*this.y;this.y=-e*t},CrossFV:function(e){var t=this.x;this.x=-e*this.y;this.y=e*t},MinV:function(e){this.x=this.x<e.x?this.x:e.x;this.y=this.y<e.y?this.y:e.y},MaxV:function(e){this.x=this.x>e.x?this.x:e.x;this.y=this.y>e.y?this.y:e.y},Abs:function(){this.x=Math.abs(this.x);this.y=Math.abs(this.y)},Length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Normalize:function(){var e=this.Length();if(e<Number.MIN_VALUE){return 0}var t=1/e;this.x*=t;this.y*=t;return e},IsValid:function(){return b2Math.b2IsValid(this.x)&&b2Math.b2IsValid(this.y)},x:null,y:null};b2Vec2.Make=function(e,t){return new b2Vec2(e,t)};var b2Mat22=Class.create();b2Mat22.prototype={initialize:function(e,t,n){if(e==null)e=0;this.col1=new b2Vec2;this.col2=new b2Vec2;if(t!=null&&n!=null){this.col1.SetV(t);this.col2.SetV(n)}else{var r=Math.cos(e);var i=Math.sin(e);this.col1.x=r;this.col2.x=-i;this.col1.y=i;this.col2.y=r}},Set:function(e){var t=Math.cos(e);var n=Math.sin(e);this.col1.x=t;this.col2.x=-n;this.col1.y=n;this.col2.y=t},SetVV:function(e,t){this.col1.SetV(e);this.col2.SetV(t)},Copy:function(){return new b2Mat22(0,this.col1,this.col2)},SetM:function(e){this.col1.SetV(e.col1);this.col2.SetV(e.col2)},AddM:function(e){this.col1.x+=e.col1.x;this.col1.y+=e.col1.y;this.col2.x+=e.col2.x;this.col2.y+=e.col2.y},SetIdentity:function(){this.col1.x=1;this.col2.x=0;this.col1.y=0;this.col2.y=1},SetZero:function(){this.col1.x=0;this.col2.x=0;this.col1.y=0;this.col2.y=0},Invert:function(e){var t=this.col1.x;var n=this.col2.x;var r=this.col1.y;var i=this.col2.y;var s=t*i-n*r;s=1/s;e.col1.x=s*i;e.col2.x=-s*n;e.col1.y=-s*r;e.col2.y=s*t;return e},Solve:function(e,t,n){var r=this.col1.x;var i=this.col2.x;var s=this.col1.y;var o=this.col2.y;var u=r*o-i*s;u=1/u;e.x=u*(o*t-i*n);e.y=u*(r*n-s*t);return e},Abs:function(){this.col1.Abs();this.col2.Abs()},col1:new b2Vec2,col2:new b2Vec2};var b2Math=Class.create();b2Math.prototype={initialize:function(){}};b2Math.b2IsValid=function(e){return isFinite(e)};b2Math.b2Dot=function(e,t){return e.x*t.x+e.y*t.y};b2Math.b2CrossVV=function(e,t){return e.x*t.y-e.y*t.x};b2Math.b2CrossVF=function(e,t){var n=new b2Vec2(t*e.y,-t*e.x);return n};b2Math.b2CrossFV=function(e,t){var n=new b2Vec2(-e*t.y,e*t.x);return n};b2Math.b2MulMV=function(e,t){var n=new b2Vec2(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return n};b2Math.b2MulTMV=function(e,t){var n=new b2Vec2(b2Math.b2Dot(t,e.col1),b2Math.b2Dot(t,e.col2));return n};b2Math.AddVV=function(e,t){var n=new b2Vec2(e.x+t.x,e.y+t.y);return n};b2Math.SubtractVV=function(e,t){var n=new b2Vec2(e.x-t.x,e.y-t.y);return n};b2Math.MulFV=function(e,t){var n=new b2Vec2(e*t.x,e*t.y);return n};b2Math.AddMM=function(e,t){var n=new b2Mat22(0,b2Math.AddVV(e.col1,t.col1),b2Math.AddVV(e.col2,t.col2));return n};b2Math.b2MulMM=function(e,t){var n=new b2Mat22(0,b2Math.b2MulMV(e,t.col1),b2Math.b2MulMV(e,t.col2));return n};b2Math.b2MulTMM=function(e,t){var n=new b2Vec2(b2Math.b2Dot(e.col1,t.col1),b2Math.b2Dot(e.col2,t.col1));var r=new b2Vec2(b2Math.b2Dot(e.col1,t.col2),b2Math.b2Dot(e.col2,t.col2));var i=new b2Mat22(0,n,r);return i};b2Math.b2Abs=function(e){return e>0?e:-e};b2Math.b2AbsV=function(e){var t=new b2Vec2(b2Math.b2Abs(e.x),b2Math.b2Abs(e.y));return t};b2Math.b2AbsM=function(e){var t=new b2Mat22(0,b2Math.b2AbsV(e.col1),b2Math.b2AbsV(e.col2));return t};b2Math.b2Min=function(e,t){return e<t?e:t};b2Math.b2MinV=function(e,t){var n=new b2Vec2(b2Math.b2Min(e.x,t.x),b2Math.b2Min(e.y,t.y));return n};b2Math.b2Max=function(e,t){return e>t?e:t};b2Math.b2MaxV=function(e,t){var n=new b2Vec2(b2Math.b2Max(e.x,t.x),b2Math.b2Max(e.y,t.y));return n};b2Math.b2Clamp=function(e,t,n){return b2Math.b2Max(t,b2Math.b2Min(e,n))};b2Math.b2ClampV=function(e,t,n){return b2Math.b2MaxV(t,b2Math.b2MinV(e,n))};b2Math.b2Swap=function(e,t){var n=e[0];e[0]=t[0];t[0]=n};b2Math.b2Random=function(){return Math.random()*2-1};b2Math.b2NextPowerOfTwo=function(e){e|=e>>1&2147483647;e|=e>>2&1073741823;e|=e>>4&268435455;e|=e>>8&16777215;e|=e>>16&65535;return e+1};b2Math.b2IsPowerOfTwo=function(e){var t=e>0&&(e&e-1)==0;return t};b2Math.tempVec2=new b2Vec2;b2Math.tempVec3=new b2Vec2;b2Math.tempVec4=new b2Vec2;b2Math.tempVec5=new b2Vec2;b2Math.tempMat=new b2Mat22;var b2AABB=Class.create();b2AABB.prototype={IsValid:function(){var e=this.maxVertex.x;var t=this.maxVertex.y;e=this.maxVertex.x;t=this.maxVertex.y;e-=this.minVertex.x;t-=this.minVertex.y;var n=e>=0&&t>=0;n=n&&this.minVertex.IsValid()&&this.maxVertex.IsValid();return n},minVertex:new b2Vec2,maxVertex:new b2Vec2,initialize:function(){this.minVertex=new b2Vec2;this.maxVertex=new b2Vec2}};var b2Bound=Class.create();b2Bound.prototype={IsLower:function(){return(this.value&1)==0},IsUpper:function(){return(this.value&1)==1},Swap:function(e){var t=this.value;var n=this.proxyId;var r=this.stabbingCount;this.value=e.value;this.proxyId=e.proxyId;this.stabbingCount=e.stabbingCount;e.value=t;e.proxyId=n;e.stabbingCount=r},value:0,proxyId:0,stabbingCount:0,initialize:function(){}};var b2BoundValues=Class.create();b2BoundValues.prototype={lowerValues:[0,0],upperValues:[0,0],initialize:function(){this.lowerValues=[0,0];this.upperValues=[0,0]}};var b2Pair=Class.create();b2Pair.prototype={SetBuffered:function(){this.status|=b2Pair.e_pairBuffered},ClearBuffered:function(){this.status&=~b2Pair.e_pairBuffered},IsBuffered:function(){return(this.status&b2Pair.e_pairBuffered)==b2Pair.e_pairBuffered},SetRemoved:function(){this.status|=b2Pair.e_pairRemoved},ClearRemoved:function(){this.status&=~b2Pair.e_pairRemoved},IsRemoved:function(){return(this.status&b2Pair.e_pairRemoved)==b2Pair.e_pairRemoved},SetFinal:function(){this.status|=b2Pair.e_pairFinal},IsFinal:function(){return(this.status&b2Pair.e_pairFinal)==b2Pair.e_pairFinal},userData:null,proxyId1:0,proxyId2:0,next:0,status:0,initialize:function(){}};b2Pair.b2_nullPair=b2Settings.USHRT_MAX;b2Pair.b2_nullProxy=b2Settings.USHRT_MAX;b2Pair.b2_tableCapacity=b2Settings.b2_maxPairs;b2Pair.b2_tableMask=b2Pair.b2_tableCapacity-1;b2Pair.e_pairBuffered=1;b2Pair.e_pairRemoved=2;b2Pair.e_pairFinal=4;var b2PairCallback=Class.create();b2PairCallback.prototype={PairAdded:function(e,t){return null},PairRemoved:function(e,t,n){},initialize:function(){}};var b2BufferedPair=Class.create();b2BufferedPair.prototype={proxyId1:0,proxyId2:0,initialize:function(){}};var b2PairManager=Class.create();b2PairManager.prototype={initialize:function(){var e=0;this.m_hashTable=new Array(b2Pair.b2_tableCapacity);for(e=0;e<b2Pair.b2_tableCapacity;++e){this.m_hashTable[e]=b2Pair.b2_nullPair}this.m_pairs=new Array(b2Settings.b2_maxPairs);for(e=0;e<b2Settings.b2_maxPairs;++e){this.m_pairs[e]=new b2Pair}this.m_pairBuffer=new Array(b2Settings.b2_maxPairs);for(e=0;e<b2Settings.b2_maxPairs;++e){this.m_pairBuffer[e]=new b2BufferedPair}for(e=0;e<b2Settings.b2_maxPairs;++e){this.m_pairs[e].proxyId1=b2Pair.b2_nullProxy;this.m_pairs[e].proxyId2=b2Pair.b2_nullProxy;this.m_pairs[e].userData=null;this.m_pairs[e].status=0;this.m_pairs[e].next=e+1}this.m_pairs[b2Settings.b2_maxPairs-1].next=b2Pair.b2_nullPair;this.m_pairCount=0},Initialize:function(e,t){this.m_broadPhase=e;this.m_callback=t},AddBufferedPair:function(e,t){var n=this.AddPair(e,t);if(n.IsBuffered()==false){n.SetBuffered();this.m_pairBuffer[this.m_pairBufferCount].proxyId1=n.proxyId1;this.m_pairBuffer[this.m_pairBufferCount].proxyId2=n.proxyId2;++this.m_pairBufferCount}n.ClearRemoved();if(b2BroadPhase.s_validate){this.ValidateBuffer()}},RemoveBufferedPair:function(e,t){var n=this.Find(e,t);if(n==null){return}if(n.IsBuffered()==false){n.SetBuffered();this.m_pairBuffer[this.m_pairBufferCount].proxyId1=n.proxyId1;this.m_pairBuffer[this.m_pairBufferCount].proxyId2=n.proxyId2;++this.m_pairBufferCount}n.SetRemoved();if(b2BroadPhase.s_validate){this.ValidateBuffer()}},Commit:function(){var e=0;var t=0;var n=this.m_broadPhase.m_proxyPool;for(e=0;e<this.m_pairBufferCount;++e){var r=this.Find(this.m_pairBuffer[e].proxyId1,this.m_pairBuffer[e].proxyId2);r.ClearBuffered();var i=n[r.proxyId1];var s=n[r.proxyId2];if(r.IsRemoved()){if(r.IsFinal()==true){this.m_callback.PairRemoved(i.userData,s.userData,r.userData)}this.m_pairBuffer[t].proxyId1=r.proxyId1;this.m_pairBuffer[t].proxyId2=r.proxyId2;++t}else{if(r.IsFinal()==false){r.userData=this.m_callback.PairAdded(i.userData,s.userData);r.SetFinal()}}}for(e=0;e<t;++e){this.RemovePair(this.m_pairBuffer[e].proxyId1,this.m_pairBuffer[e].proxyId2)}this.m_pairBufferCount=0;if(b2BroadPhase.s_validate){this.ValidateTable()}},AddPair:function(e,t){if(e>t){var n=e;e=t;t=n}var r=b2PairManager.Hash(e,t)&b2Pair.b2_tableMask;var i=i=this.FindHash(e,t,r);if(i!=null){return i}var s=this.m_freePair;i=this.m_pairs[s];this.m_freePair=i.next;i.proxyId1=e;i.proxyId2=t;i.status=0;i.userData=null;i.next=this.m_hashTable[r];this.m_hashTable[r]=s;++this.m_pairCount;return i},RemovePair:function(e,t){if(e>t){var n=e;e=t;t=n}var r=b2PairManager.Hash(e,t)&b2Pair.b2_tableMask;var i=this.m_hashTable[r];var s=null;while(i!=b2Pair.b2_nullPair){if(b2PairManager.Equals(this.m_pairs[i],e,t)){var o=i;if(s){s.next=this.m_pairs[i].next}else{this.m_hashTable[r]=this.m_pairs[i].next}var u=this.m_pairs[o];var a=u.userData;u.next=this.m_freePair;u.proxyId1=b2Pair.b2_nullProxy;u.proxyId2=b2Pair.b2_nullProxy;u.userData=null;u.status=0;this.m_freePair=o;--this.m_pairCount;return a}else{s=this.m_pairs[i];i=s.next}}return null},Find:function(e,t){if(e>t){var n=e;e=t;t=n}var r=b2PairManager.Hash(e,t)&b2Pair.b2_tableMask;return this.FindHash(e,t,r)},FindHash:function(e,t,n){var r=this.m_hashTable[n];while(r!=b2Pair.b2_nullPair&&b2PairManager.Equals(this.m_pairs[r],e,t)==false){r=this.m_pairs[r].next}if(r==b2Pair.b2_nullPair){return null}return this.m_pairs[r]},ValidateBuffer:function(){},ValidateTable:function(){},m_broadPhase:null,m_callback:null,m_pairs:null,m_freePair:0,m_pairCount:0,m_pairBuffer:null,m_pairBufferCount:0,m_hashTable:null};b2PairManager.Hash=function(e,t){var n=t<<16&4294901760|e;n=~n+(n<<15&4294934528);n=n^n>>12&1048575;n=n+(n<<2&4294967292);n=n^n>>4&268435455;n=n*2057;n=n^n>>16&65535;return n};b2PairManager.Equals=function(e,t,n){return e.proxyId1==t&&e.proxyId2==n};b2PairManager.EqualsPair=function(e,t){return e.proxyId1==t.proxyId1&&e.proxyId2==t.proxyId2};var b2BroadPhase=Class.create();b2BroadPhase.prototype={initialize:function(e,t){this.m_pairManager=new b2PairManager;this.m_proxyPool=new Array(b2Settings.b2_maxPairs);this.m_bounds=new Array(2*b2Settings.b2_maxProxies);this.m_queryResults=new Array(b2Settings.b2_maxProxies);this.m_quantizationFactor=new b2Vec2;var n=0;this.m_pairManager.Initialize(this,t);this.m_worldAABB=e;this.m_proxyCount=0;for(n=0;n<b2Settings.b2_maxProxies;n++){this.m_queryResults[n]=0}this.m_bounds=new Array(2);for(n=0;n<2;n++){this.m_bounds[n]=new Array(2*b2Settings.b2_maxProxies);for(var r=0;r<2*b2Settings.b2_maxProxies;r++){this.m_bounds[n][r]=new b2Bound}}var i=e.maxVertex.x;var s=e.maxVertex.y;i-=e.minVertex.x;s-=e.minVertex.y;this.m_quantizationFactor.x=b2Settings.USHRT_MAX/i;this.m_quantizationFactor.y=b2Settings.USHRT_MAX/s;var o;for(n=0;n<b2Settings.b2_maxProxies-1;++n){o=new b2Proxy;this.m_proxyPool[n]=o;o.SetNext(n+1);o.timeStamp=0;o.overlapCount=b2BroadPhase.b2_invalid;o.userData=null}o=new b2Proxy;this.m_proxyPool[b2Settings.b2_maxProxies-1]=o;o.SetNext(b2Pair.b2_nullProxy);o.timeStamp=0;o.overlapCount=b2BroadPhase.b2_invalid;o.userData=null;this.m_freeProxy=0;this.m_timeStamp=1;this.m_queryResultCount=0},InRange:function(e){var t;var n;var r;var i;t=e.minVertex.x;n=e.minVertex.y;t-=this.m_worldAABB.maxVertex.x;n-=this.m_worldAABB.maxVertex.y;r=this.m_worldAABB.minVertex.x;i=this.m_worldAABB.minVertex.y;r-=e.maxVertex.x;i-=e.maxVertex.y;t=b2Math.b2Max(t,r);n=b2Math.b2Max(n,i);return b2Math.b2Max(t,n)<0},GetProxy:function(e){if(e==b2Pair.b2_nullProxy||this.m_proxyPool[e].IsValid()==false){return null}return this.m_proxyPool[e]},CreateProxy:function(e,t){var n=0;var r;var i=this.m_freeProxy;r=this.m_proxyPool[i];this.m_freeProxy=r.GetNext();r.overlapCount=0;r.userData=t;var s=2*this.m_proxyCount;var o=new Array;var u=new Array;this.ComputeBounds(o,u,e);for(var a=0;a<2;++a){var f=this.m_bounds[a];var l=0;var c=0;var h=[l];var p=[c];this.Query(h,p,o[a],u[a],f,s,a);l=h[0];c=p[0];var d=new Array;var v=0;var m=s-c;var g;var y;for(v=0;v<m;v++){d[v]=new b2Bound;g=d[v];y=f[c+v];g.value=y.value;g.proxyId=y.proxyId;g.stabbingCount=y.stabbingCount}m=d.length;var b=c+2;for(v=0;v<m;v++){y=d[v];g=f[b+v];g.value=y.value;g.proxyId=y.proxyId;g.stabbingCount=y.stabbingCount}d=new Array;m=c-l;for(v=0;v<m;v++){d[v]=new b2Bound;g=d[v];y=f[l+v];g.value=y.value;g.proxyId=y.proxyId;g.stabbingCount=y.stabbingCount}m=d.length;b=l+1;for(v=0;v<m;v++){y=d[v];g=f[b+v];g.value=y.value;g.proxyId=y.proxyId;g.stabbingCount=y.stabbingCount}++c;f[l].value=o[a];f[l].proxyId=i;f[c].value=u[a];f[c].proxyId=i;f[l].stabbingCount=l==0?0:f[l-1].stabbingCount;f[c].stabbingCount=f[c-1].stabbingCount;for(n=l;n<c;++n){f[n].stabbingCount++}for(n=l;n<s+2;++n){var w=this.m_proxyPool[f[n].proxyId];if(f[n].IsLower()){w.lowerBounds[a]=n}else{w.upperBounds[a]=n}}}++this.m_proxyCount;for(var E=0;E<this.m_queryResultCount;++E){this.m_pairManager.AddBufferedPair(i,this.m_queryResults[E])}this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();return i},DestroyProxy:function(e){var t=this.m_proxyPool[e];var n=2*this.m_proxyCount;for(var r=0;r<2;++r){var i=this.m_bounds[r];var s=t.lowerBounds[r];var o=t.upperBounds[r];var u=i[s].value;var a=i[o].value;var f=new Array;var l=0;var c=o-s-1;var h;var p;for(l=0;l<c;l++){f[l]=new b2Bound;h=f[l];p=i[s+1+l];h.value=p.value;h.proxyId=p.proxyId;h.stabbingCount=p.stabbingCount}c=f.length;var d=s;for(l=0;l<c;l++){p=f[l];h=i[d+l];h.value=p.value;h.proxyId=p.proxyId;h.stabbingCount=p.stabbingCount}f=new Array;c=n-o-1;for(l=0;l<c;l++){f[l]=new b2Bound;h=f[l];p=i[o+1+l];h.value=p.value;h.proxyId=p.proxyId;h.stabbingCount=p.stabbingCount}c=f.length;d=o-1;for(l=0;l<c;l++){p=f[l];h=i[d+l];h.value=p.value;h.proxyId=p.proxyId;h.stabbingCount=p.stabbingCount}c=n-2;for(var v=s;v<c;++v){var m=this.m_proxyPool[i[v].proxyId];if(i[v].IsLower()){m.lowerBounds[r]=v}else{m.upperBounds[r]=v}}c=o-1;for(var g=s;g<c;++g){i[g].stabbingCount--}this.Query([0],[0],u,a,i,n-2,r)}for(var y=0;y<this.m_queryResultCount;++y){this.m_pairManager.RemoveBufferedPair(e,this.m_queryResults[y])}this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();t.userData=null;t.overlapCount=b2BroadPhase.b2_invalid;t.lowerBounds[0]=b2BroadPhase.b2_invalid;t.lowerBounds[1]=b2BroadPhase.b2_invalid;t.upperBounds[0]=b2BroadPhase.b2_invalid;t.upperBounds[1]=b2BroadPhase.b2_invalid;t.SetNext(this.m_freeProxy);this.m_freeProxy=e;--this.m_proxyCount},MoveProxy:function(e,t){var n=0;var r=0;var i;var s;var o;var u=0;var a;if(e==b2Pair.b2_nullProxy||b2Settings.b2_maxProxies<=e){return}if(t.IsValid()==false){return}var f=2*this.m_proxyCount;var l=this.m_proxyPool[e];var c=new b2BoundValues;this.ComputeBounds(c.lowerValues,c.upperValues,t);var h=new b2BoundValues;for(n=0;n<2;++n){h.lowerValues[n]=this.m_bounds[n][l.lowerBounds[n]].value;h.upperValues[n]=this.m_bounds[n][l.upperBounds[n]].value}for(n=0;n<2;++n){var p=this.m_bounds[n];var d=l.lowerBounds[n];var v=l.upperBounds[n];var m=c.lowerValues[n];var g=c.upperValues[n];var y=m-p[d].value;var b=g-p[v].value;p[d].value=m;p[v].value=g;if(y<0){r=d;while(r>0&&m<p[r-1].value){i=p[r];s=p[r-1];var w=s.proxyId;var E=this.m_proxyPool[s.proxyId];s.stabbingCount++;if(s.IsUpper()==true){if(this.TestOverlap(c,E)){this.m_pairManager.AddBufferedPair(e,w)}E.upperBounds[n]++;i.stabbingCount++}else{E.lowerBounds[n]++;i.stabbingCount--}l.lowerBounds[n]--;i.Swap(s);--r}}if(b>0){r=v;while(r<f-1&&p[r+1].value<=g){i=p[r];o=p[r+1];u=o.proxyId;a=this.m_proxyPool[u];o.stabbingCount++;if(o.IsLower()==true){if(this.TestOverlap(c,a)){this.m_pairManager.AddBufferedPair(e,u)}a.lowerBounds[n]--;i.stabbingCount++}else{a.upperBounds[n]--;i.stabbingCount--}l.upperBounds[n]++;i.Swap(o);r++}}if(y>0){r=d;while(r<f-1&&p[r+1].value<=m){i=p[r];o=p[r+1];u=o.proxyId;a=this.m_proxyPool[u];o.stabbingCount--;if(o.IsUpper()){if(this.TestOverlap(h,a)){this.m_pairManager.RemoveBufferedPair(e,u)}a.upperBounds[n]--;i.stabbingCount--}else{a.lowerBounds[n]--;i.stabbingCount++}l.lowerBounds[n]++;i.Swap(o);r++}}if(b<0){r=v;while(r>0&&g<p[r-1].value){i=p[r];s=p[r-1];w=s.proxyId;E=this.m_proxyPool[w];s.stabbingCount--;if(s.IsLower()==true){if(this.TestOverlap(h,E)){this.m_pairManager.RemoveBufferedPair(e,w)}E.lowerBounds[n]++;i.stabbingCount--}else{E.upperBounds[n]++;i.stabbingCount++}l.upperBounds[n]--;i.Swap(s);r--}}}},Commit:function(){this.m_pairManager.Commit()},QueryAABB:function(e,t,n){var r=new Array;var i=new Array;this.ComputeBounds(r,i,e);var s=0;var o=0;var u=[s];var a=[o];this.Query(u,a,r[0],i[0],this.m_bounds[0],2*this.m_proxyCount,0);this.Query(u,a,r[1],i[1],this.m_bounds[1],2*this.m_proxyCount,1);var f=0;for(var l=0;l<this.m_queryResultCount&&f<n;++l,++f){var c=this.m_proxyPool[this.m_queryResults[l]];t[l]=c.userData}this.m_queryResultCount=0;this.IncrementTimeStamp();return f},Validate:function(){var e;var t;var n;var r;for(var i=0;i<2;++i){var s=this.m_bounds[i];var o=2*this.m_proxyCount;var u=0;for(var a=0;a<o;++a){var f=s[a];if(f.IsLower()==true){u++}else{u--}}}},ComputeBounds:function(e,t,n){var r=n.minVertex.x;var i=n.minVertex.y;r=b2Math.b2Min(r,this.m_worldAABB.maxVertex.x);i=b2Math.b2Min(i,this.m_worldAABB.maxVertex.y);r=b2Math.b2Max(r,this.m_worldAABB.minVertex.x);i=b2Math.b2Max(i,this.m_worldAABB.minVertex.y);var s=n.maxVertex.x;var o=n.maxVertex.y;s=b2Math.b2Min(s,this.m_worldAABB.maxVertex.x);o=b2Math.b2Min(o,this.m_worldAABB.maxVertex.y);s=b2Math.b2Max(s,this.m_worldAABB.minVertex.x);o=b2Math.b2Max(o,this.m_worldAABB.minVertex.y);e[0]=this.m_quantizationFactor.x*(r-this.m_worldAABB.minVertex.x)&b2Settings.USHRT_MAX-1;t[0]=this.m_quantizationFactor.x*(s-this.m_worldAABB.minVertex.x)&65535|1;e[1]=this.m_quantizationFactor.y*(i-this.m_worldAABB.minVertex.y)&b2Settings.USHRT_MAX-1;t[1]=this.m_quantizationFactor.y*(o-this.m_worldAABB.minVertex.y)&65535|1},TestOverlapValidate:function(e,t){for(var n=0;n<2;++n){var r=this.m_bounds[n];if(r[e.lowerBounds[n]].value>r[t.upperBounds[n]].value)return false;if(r[e.upperBounds[n]].value<r[t.lowerBounds[n]].value)return false}return true},TestOverlap:function(e,t){for(var n=0;n<2;++n){var r=this.m_bounds[n];if(e.lowerValues[n]>r[t.upperBounds[n]].value)return false;if(e.upperValues[n]<r[t.lowerBounds[n]].value)return false}return true},Query:function(e,t,n,r,i,s,o){var u=b2BroadPhase.BinarySearch(i,s,n);var a=b2BroadPhase.BinarySearch(i,s,r);for(var f=u;f<a;++f){if(i[f].IsLower()){this.IncrementOverlapCount(i[f].proxyId)}}if(u>0){var l=u-1;var c=i[l].stabbingCount;while(c){if(i[l].IsLower()){var h=this.m_proxyPool[i[l].proxyId];if(u<=h.upperBounds[o]){this.IncrementOverlapCount(i[l].proxyId);--c}}--l}}e[0]=u;t[0]=a},IncrementOverlapCount:function(e){var t=this.m_proxyPool[e];if(t.timeStamp<this.m_timeStamp){t.timeStamp=this.m_timeStamp;t.overlapCount=1}else{t.overlapCount=2;this.m_queryResults[this.m_queryResultCount]=e;++this.m_queryResultCount}},IncrementTimeStamp:function(){if(this.m_timeStamp==b2Settings.USHRT_MAX){for(var e=0;e<b2Settings.b2_maxProxies;++e){this.m_proxyPool[e].timeStamp=0}this.m_timeStamp=1}else{++this.m_timeStamp}},m_pairManager:new b2PairManager,m_proxyPool:new Array(b2Settings.b2_maxPairs),m_freeProxy:0,m_bounds:new Array(2*b2Settings.b2_maxProxies),m_queryResults:new Array(b2Settings.b2_maxProxies),m_queryResultCount:0,m_worldAABB:null,m_quantizationFactor:new b2Vec2,m_proxyCount:0,m_timeStamp:0};b2BroadPhase.s_validate=false;b2BroadPhase.b2_invalid=b2Settings.USHRT_MAX;b2BroadPhase.b2_nullEdge=b2Settings.USHRT_MAX;b2BroadPhase.BinarySearch=function(e,t,n){var r=0;var i=t-1;while(r<=i){var s=Math.floor((r+i)/2);if(e[s].value>n){i=s-1}else if(e[s].value<n){r=s+1}else{return s}}return r};var b2Collision=Class.create();b2Collision.prototype={initialize:function(){}};b2Collision.b2_nullFeature=255;b2Collision.ClipSegmentToLine=function(e,t,n,r){var i=0;var s=t[0].v;var o=t[1].v;var u=b2Math.b2Dot(n,t[0].v)-r;var a=b2Math.b2Dot(n,t[1].v)-r;if(u<=0)e[i++]=t[0];if(a<=0)e[i++]=t[1];if(u*a<0){var f=u/(u-a);var l=e[i].v;l.x=s.x+f*(o.x-s.x);l.y=s.y+f*(o.y-s.y);if(u>0){e[i].id=t[0].id}else{e[i].id=t[1].id}++i}return i};b2Collision.EdgeSeparation=function(e,t,n){var r=e.m_vertices;var i=n.m_vertexCount;var s=n.m_vertices;var o=e.m_normals[t].x;var u=e.m_normals[t].y;var a=o;var f=e.m_R;o=f.col1.x*a+f.col2.x*u;u=f.col1.y*a+f.col2.y*u;var l=o;var c=u;f=n.m_R;a=l*f.col1.x+c*f.col1.y;c=l*f.col2.x+c*f.col2.y;l=a;var h=0;var p=Number.MAX_VALUE;for(var d=0;d<i;++d){var v=s[d];var m=v.x*l+v.y*c;if(m<p){p=m;h=d}}f=e.m_R;var g=e.m_position.x+(f.col1.x*r[t].x+f.col2.x*r[t].y);var y=e.m_position.y+(f.col1.y*r[t].x+f.col2.y*r[t].y);f=n.m_R;var b=n.m_position.x+(f.col1.x*s[h].x+f.col2.x*s[h].y);var w=n.m_position.y+(f.col1.y*s[h].x+f.col2.y*s[h].y);b-=g;w-=y;var E=b*o+w*u;return E};b2Collision.FindMaxSeparation=function(e,t,n,r){var i=t.m_vertexCount;var s=n.m_position.x-t.m_position.x;var o=n.m_position.y-t.m_position.y;var u=s*t.m_R.col1.x+o*t.m_R.col1.y;var a=s*t.m_R.col2.x+o*t.m_R.col2.y;var f=0;var l=-Number.MAX_VALUE;for(var c=0;c<i;++c){var h=t.m_normals[c].x*u+t.m_normals[c].y*a;if(h>l){l=h;f=c}}var p=b2Collision.EdgeSeparation(t,f,n);if(p>0&&r==false){return p}var d=f-1>=0?f-1:i-1;var v=b2Collision.EdgeSeparation(t,d,n);if(v>0&&r==false){return v}var m=f+1<i?f+1:0;var g=b2Collision.EdgeSeparation(t,m,n);if(g>0&&r==false){return g}var y=0;var b;var w=0;if(v>p&&v>g){w=-1;y=d;b=v}else if(g>p){w=1;y=m;b=g}else{e[0]=f;return p}while(true){if(w==-1)f=y-1>=0?y-1:i-1;else f=y+1<i?y+1:0;p=b2Collision.EdgeSeparation(t,f,n);if(p>0&&r==false){return p}if(p>b){y=f;b=p}else{break}}e[0]=y;return b};b2Collision.FindIncidentEdge=function(e,t,n,r){var i=t.m_vertexCount;var s=t.m_vertices;var o=r.m_vertexCount;var u=r.m_vertices;var a=n;var f=n+1==i?0:n+1;var l=s[f];var c=l.x;var h=l.y;l=s[a];c-=l.x;h-=l.y;var p=c;c=h;h=-p;var d=1/Math.sqrt(c*c+h*h);c*=d;h*=d;var v=c;var m=h;p=v;var g=t.m_R;v=g.col1.x*p+g.col2.x*m;m=g.col1.y*p+g.col2.y*m;var y=v;var b=m;g=r.m_R;p=y*g.col1.x+b*g.col1.y;b=y*g.col2.x+b*g.col2.y;y=p;var w=0;var E=0;var S=Number.MAX_VALUE;for(var x=0;x<o;++x){var T=x;var N=x+1<o?x+1:0;l=u[N];var C=l.x;var k=l.y;l=u[T];C-=l.x;k-=l.y;p=C;C=k;k=-p;d=1/Math.sqrt(C*C+k*k);C*=d;k*=d;var L=C*y+k*b;if(L<S){S=L;w=T;E=N}}var A;A=e[0];l=A.v;l.SetV(u[w]);l.MulM(r.m_R);l.Add(r.m_position);A.id.features.referenceFace=n;A.id.features.incidentEdge=w;A.id.features.incidentVertex=w;A=e[1];l=A.v;l.SetV(u[E]);l.MulM(r.m_R);l.Add(r.m_position);A.id.features.referenceFace=n;A.id.features.incidentEdge=w;A.id.features.incidentVertex=E};b2Collision.b2CollidePolyTempVec=new b2Vec2;b2Collision.b2CollidePoly=function(e,t,n,r){e.pointCount=0;var i=0;var s=[i];var o=b2Collision.FindMaxSeparation(s,t,n,r);i=s[0];if(o>0&&r==false)return;var u=0;var a=[u];var f=b2Collision.FindMaxSeparation(a,n,t,r);u=a[0];if(f>0&&r==false)return;var l;var c;var h=0;var p=0;var d=.98;var v=.001;if(f>d*o+v){l=n;c=t;h=u;p=1}else{l=t;c=n;h=i;p=0}var m=[new ClipVertex,new ClipVertex];b2Collision.FindIncidentEdge(m,l,h,c);var g=l.m_vertexCount;var y=l.m_vertices;var b=y[h];var w=h+1<g?y[h+1]:y[0];var E=w.x-b.x;var S=w.y-b.y;var x=w.x-b.x;var T=w.y-b.y;var N=x;var C=l.m_R;x=C.col1.x*N+C.col2.x*T;T=C.col1.y*N+C.col2.y*T;var k=1/Math.sqrt(x*x+T*T);x*=k;T*=k;var L=x;var A=T;N=L;L=A;A=-N;var O=b.x;var M=b.y;N=O;C=l.m_R;O=C.col1.x*N+C.col2.x*M;M=C.col1.y*N+C.col2.y*M;O+=l.m_position.x;M+=l.m_position.y;var _=w.x;var D=w.y;N=_;C=l.m_R;_=C.col1.x*N+C.col2.x*D;D=C.col1.y*N+C.col2.y*D;_+=l.m_position.x;D+=l.m_position.y;var P=L*O+A*M;var H=-(x*O+T*M);var B=x*_+T*D;var j=[new ClipVertex,new ClipVertex];var F=[new ClipVertex,new ClipVertex];var I=0;b2Collision.b2CollidePolyTempVec.Set(-x,-T);I=b2Collision.ClipSegmentToLine(j,m,b2Collision.b2CollidePolyTempVec,H);if(I<2)return;b2Collision.b2CollidePolyTempVec.Set(x,T);I=b2Collision.ClipSegmentToLine(F,j,b2Collision.b2CollidePolyTempVec,B);if(I<2)return;if(p){e.normal.Set(-L,-A)}else{e.normal.Set(L,A)}var q=0;for(var R=0;R<b2Settings.b2_maxManifoldPoints;++R){var U=F[R].v;var z=L*U.x+A*U.y-P;if(z<=0||r==true){var W=e.points[q];W.separation=z;W.position.SetV(F[R].v);W.id.Set(F[R].id);W.id.features.flip=p;++q}}e.pointCount=q};b2Collision.b2CollideCircle=function(e,t,n,r){e.pointCount=0;var i=n.m_position.x-t.m_position.x;var s=n.m_position.y-t.m_position.y;var o=i*i+s*s;var u=t.m_radius+n.m_radius;if(o>u*u&&r==false){return}var a;if(o<Number.MIN_VALUE){a=-u;e.normal.Set(0,1)}else{var f=Math.sqrt(o);a=f-u;var l=1/f;e.normal.x=l*i;e.normal.y=l*s}e.pointCount=1;var c=e.points[0];c.id.set_key(0);c.separation=a;c.position.x=n.m_position.x-n.m_radius*e.normal.x;c.position.y=n.m_position.y-n.m_radius*e.normal.y};b2Collision.b2CollidePolyAndCircle=function(e,t,n,r){e.pointCount=0;var i;var s;var o;var u=n.m_position.x-t.m_position.x;var a=n.m_position.y-t.m_position.y;var f=t.m_R;var l=u*f.col1.x+a*f.col1.y;a=u*f.col2.x+a*f.col2.y;u=l;var c;var h=0;var p=-Number.MAX_VALUE;var d=n.m_radius;for(var v=0;v<t.m_vertexCount;++v){var m=t.m_normals[v].x*(u-t.m_vertices[v].x)+t.m_normals[v].y*(a-t.m_vertices[v].y);if(m>d){return}if(m>p){p=m;h=v}}if(p<Number.MIN_VALUE){e.pointCount=1;var g=t.m_normals[h];e.normal.x=f.col1.x*g.x+f.col2.x*g.y;e.normal.y=f.col1.y*g.x+f.col2.y*g.y;i=e.points[0];i.id.features.incidentEdge=h;i.id.features.incidentVertex=b2Collision.b2_nullFeature;i.id.features.referenceFace=b2Collision.b2_nullFeature;i.id.features.flip=0;i.position.x=n.m_position.x-d*e.normal.x;i.position.y=n.m_position.y-d*e.normal.y;i.separation=p-d;return}var y=h;var b=y+1<t.m_vertexCount?y+1:0;var w=t.m_vertices[b].x-t.m_vertices[y].x;var E=t.m_vertices[b].y-t.m_vertices[y].y;var S=Math.sqrt(w*w+E*E);w/=S;E/=S;if(S<Number.MIN_VALUE){s=u-t.m_vertices[y].x;o=a-t.m_vertices[y].y;c=Math.sqrt(s*s+o*o);s/=c;o/=c;if(c>d){return}e.pointCount=1;e.normal.Set(f.col1.x*s+f.col2.x*o,f.col1.y*s+f.col2.y*o);i=e.points[0];i.id.features.incidentEdge=b2Collision.b2_nullFeature;i.id.features.incidentVertex=y;i.id.features.referenceFace=b2Collision.b2_nullFeature;i.id.features.flip=0;i.position.x=n.m_position.x-d*e.normal.x;i.position.y=n.m_position.y-d*e.normal.y;i.separation=c-d;return}var x=(u-t.m_vertices[y].x)*w+(a-t.m_vertices[y].y)*E;i=e.points[0];i.id.features.incidentEdge=b2Collision.b2_nullFeature;i.id.features.incidentVertex=b2Collision.b2_nullFeature;i.id.features.referenceFace=b2Collision.b2_nullFeature;i.id.features.flip=0;var T,N;if(x<=0){T=t.m_vertices[y].x;N=t.m_vertices[y].y;i.id.features.incidentVertex=y}else if(x>=S){T=t.m_vertices[b].x;N=t.m_vertices[b].y;i.id.features.incidentVertex=b}else{T=w*x+t.m_vertices[y].x;N=E*x+t.m_vertices[y].y;i.id.features.incidentEdge=y}s=u-T;o=a-N;c=Math.sqrt(s*s+o*o);s/=c;o/=c;if(c>d){return}e.pointCount=1;e.normal.Set(f.col1.x*s+f.col2.x*o,f.col1.y*s+f.col2.y*o);i.position.x=n.m_position.x-d*e.normal.x;i.position.y=n.m_position.y-d*e.normal.y;i.separation=c-d};b2Collision.b2TestOverlap=function(e,t){var n=t.minVertex;var r=e.maxVertex;var i=n.x-r.x;var s=n.y-r.y;n=e.minVertex;r=t.maxVertex;var o=n.x-r.x;var u=n.y-r.y;if(i>0||s>0)return false;if(o>0||u>0)return false;return true};var Features=Class.create();Features.prototype={set_referenceFace:function(e){this._referenceFace=e;this._m_id._key=this._m_id._key&4294967040|this._referenceFace&255},get_referenceFace:function(){return this._referenceFace},_referenceFace:0,set_incidentEdge:function(e){this._incidentEdge=e;this._m_id._key=this._m_id._key&4294902015|this._incidentEdge<<8&65280},get_incidentEdge:function(){return this._incidentEdge},_incidentEdge:0,set_incidentVertex:function(e){this._incidentVertex=e;this._m_id._key=this._m_id._key&4278255615|this._incidentVertex<<16&16711680},get_incidentVertex:function(){return this._incidentVertex},_incidentVertex:0,set_flip:function(e){this._flip=e;this._m_id._key=this._m_id._key&16777215|this._flip<<24&4278190080},get_flip:function(){return this._flip},_flip:0,_m_id:null,initialize:function(){}};var b2ContactID=Class.create();b2ContactID.prototype={initialize:function(){this.features=new Features;this.features._m_id=this},Set:function(e){this.set_key(e._key)},Copy:function(){var e=new b2ContactID;e.set_key(this._key);return e},get_key:function(){return this._key},set_key:function(e){this._key=e;this.features._referenceFace=this._key&255;this.features._incidentEdge=(this._key&65280)>>8&255;this.features._incidentVertex=(this._key&16711680)>>16&255;this.features._flip=(this._key&4278190080)>>24&255},features:new Features,_key:0};var b2ContactPoint=Class.create();b2ContactPoint.prototype={position:new b2Vec2,separation:null,normalImpulse:null,tangentImpulse:null,id:new b2ContactID,initialize:function(){this.position=new b2Vec2;this.id=new b2ContactID}};var b2Distance=Class.create();b2Distance.prototype={initialize:function(){}};b2Distance.ProcessTwo=function(e,t,n,r,i){var s=-i[1].x;var o=-i[1].y;var u=i[0].x-i[1].x;var a=i[0].y-i[1].y;var f=Math.sqrt(u*u+a*a);u/=f;a/=f;var l=s*u+o*a;if(l<=0||f<Number.MIN_VALUE){e.SetV(n[1]);t.SetV(r[1]);n[0].SetV(n[1]);r[0].SetV(r[1]);i[0].SetV(i[1]);return 1}l/=f;e.x=n[1].x+l*(n[0].x-n[1].x);e.y=n[1].y+l*(n[0].y-n[1].y);t.x=r[1].x+l*(r[0].x-r[1].x);t.y=r[1].y+l*(r[0].y-r[1].y);return 2};b2Distance.ProcessThree=function(e,t,n,r,i){var s=i[0].x;var o=i[0].y;var u=i[1].x;var a=i[1].y;var f=i[2].x;var l=i[2].y;var c=u-s;var h=a-o;var p=f-s;var d=l-o;var v=f-u;var m=l-a;var g=-(s*c+o*h);var y=u*c+a*h;var b=-(s*p+o*d);var w=f*p+l*d;var E=-(u*v+a*m);var S=f*v+l*m;if(w<=0&&S<=0){e.SetV(n[2]);t.SetV(r[2]);n[0].SetV(n[2]);r[0].SetV(r[2]);i[0].SetV(i[2]);return 1}var x=c*d-h*p;var T=x*(s*a-o*u);var N=x*(u*l-a*f);if(N<=0&&E>=0&&S>=0){var C=E/(E+S);e.x=n[1].x+C*(n[2].x-n[1].x);e.y=n[1].y+C*(n[2].y-n[1].y);t.x=r[1].x+C*(r[2].x-r[1].x);t.y=r[1].y+C*(r[2].y-r[1].y);n[0].SetV(n[2]);r[0].SetV(r[2]);i[0].SetV(i[2]);return 2}var k=x*(f*o-l*s);if(k<=0&&b>=0&&w>=0){var C=b/(b+w);e.x=n[0].x+C*(n[2].x-n[0].x);e.y=n[0].y+C*(n[2].y-n[0].y);t.x=r[0].x+C*(r[2].x-r[0].x);t.y=r[0].y+C*(r[2].y-r[0].y);n[1].SetV(n[2]);r[1].SetV(r[2]);i[1].SetV(i[2]);return 2}var L=N+k+T;L=1/L;var A=N*L;var O=k*L;var M=1-A-O;e.x=A*n[0].x+O*n[1].x+M*n[2].x;e.y=A*n[0].y+O*n[1].y+M*n[2].y;t.x=A*r[0].x+O*r[1].x+M*r[2].x;t.y=A*r[0].y+O*r[1].y+M*r[2].y;return 3};b2Distance.InPoinsts=function(e,t,n){for(var r=0;r<n;++r){if(e.x==t[r].x&&e.y==t[r].y){return true}}return false};b2Distance.Distance=function(e,t,n,r){var i=new Array(3);var s=new Array(3);var o=new Array(3);var u=0;e.SetV(n.m_position);t.SetV(r.m_position);var a=0;var f=20;for(var l=0;l<f;++l){var c=t.x-e.x;var h=t.y-e.y;var p=n.Support(c,h);var d=r.Support(-c,-h);a=c*c+h*h;var v=d.x-p.x;var m=d.y-p.y;var g=c*v+h*m;if(a-b2Dot(c*v+h*m)<=.01*a){if(u==0){e.SetV(p);t.SetV(d)}b2Distance.g_GJK_Iterations=l;return Math.sqrt(a)}switch(u){case 0:i[0].SetV(p);s[0].SetV(d);o[0]=w;e.SetV(i[0]);t.SetV(s[0]);++u;break;case 1:i[1].SetV(p);s[1].SetV(d);o[1].x=v;o[1].y=m;u=b2Distance.ProcessTwo(e,t,i,s,o);break;case 2:i[2].SetV(p);s[2].SetV(d);o[2].x=v;o[2].y=m;u=b2Distance.ProcessThree(e,t,i,s,o);break}if(u==3){b2Distance.g_GJK_Iterations=l;return 0}var y=-Number.MAX_VALUE;for(var b=0;b<u;++b){y=b2Math.b2Max(y,o[b].x*o[b].x+o[b].y*o[b].y)}if(u==3||a<=100*Number.MIN_VALUE*y){b2Distance.g_GJK_Iterations=l;return Math.sqrt(a)}}b2Distance.g_GJK_Iterations=f;return Math.sqrt(a)};b2Distance.g_GJK_Iterations=0;var b2Manifold=Class.create();b2Manifold.prototype={initialize:function(){this.points=new Array(b2Settings.b2_maxManifoldPoints);for(var e=0;e<b2Settings.b2_maxManifoldPoints;e++){this.points[e]=new b2ContactPoint}this.normal=new b2Vec2},points:null,normal:null,pointCount:0};var b2OBB=Class.create();b2OBB.prototype={R:new b2Mat22,center:new b2Vec2,extents:new b2Vec2,initialize:function(){this.R=new b2Mat22;this.center=new b2Vec2;this.extents=new b2Vec2}};var b2Proxy=Class.create();b2Proxy.prototype={GetNext:function(){return this.lowerBounds[0]},SetNext:function(e){this.lowerBounds[0]=e},IsValid:function(){return this.overlapCount!=b2BroadPhase.b2_invalid},lowerBounds:[0,0],upperBounds:[0,0],overlapCount:0,timeStamp:0,userData:null,initialize:function(){this.lowerBounds=[0,0];this.upperBounds=[0,0]}};var ClipVertex=Class.create();ClipVertex.prototype={v:new b2Vec2,id:new b2ContactID,initialize:function(){this.v=new b2Vec2;this.id=new b2ContactID}};var b2Shape=Class.create();b2Shape.prototype={TestPoint:function(e){return false},GetUserData:function(){return this.m_userData},GetType:function(){return this.m_type},GetBody:function(){return this.m_body},GetPosition:function(){return this.m_position},GetRotationMatrix:function(){return this.m_R},ResetProxy:function(e){},GetNext:function(){return this.m_next},initialize:function(e,t){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=e.userData;this.m_friction=e.friction;this.m_restitution=e.restitution;this.m_body=t;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=e.categoryBits;this.m_maskBits=e.maskBits;this.m_groupIndex=e.groupIndex},DestroyProxy:function(){if(this.m_proxyId!=b2Pair.b2_nullProxy){this.m_body.m_world.m_broadPhase.DestroyProxy(this.m_proxyId);this.m_proxyId=b2Pair.b2_nullProxy}},Synchronize:function(e,t,n,r){},QuickSync:function(e,t){},Support:function(e,t,n){},GetMaxRadius:function(){return this.m_maxRadius},m_next:null,m_R:new b2Mat22,m_position:new b2Vec2,m_type:0,m_userData:null,m_body:null,m_friction:null,m_restitution:null,m_maxRadius:null,m_proxyId:0,m_categoryBits:0,m_maskBits:0,m_groupIndex:0};b2Shape.Create=function(e,t,n){switch(e.type){case b2Shape.e_circleShape:{return new b2CircleShape(e,t,n)};case b2Shape.e_boxShape:case b2Shape.e_polyShape:{return new b2PolyShape(e,t,n)}}return null};b2Shape.Destroy=function(e){if(e.m_proxyId!=b2Pair.b2_nullProxy)e.m_body.m_world.m_broadPhase.DestroyProxy(e.m_proxyId)};b2Shape.e_unknownShape=-1;b2Shape.e_circleShape=0;b2Shape.e_boxShape=1;b2Shape.e_polyShape=2;b2Shape.e_meshShape=3;b2Shape.e_shapeTypeCount=4;b2Shape.PolyMass=function(e,t,n,r){var i=new b2Vec2;i.SetZero();var s=0;var o=0;var u=new b2Vec2(0,0);var a=1/3;for(var f=0;f<n;++f){var l=u;var c=t[f];var h=f+1<n?t[f+1]:t[0];var p=b2Math.SubtractVV(c,l);var d=b2Math.SubtractVV(h,l);var v=b2Math.b2CrossVV(p,d);var m=.5*v;s+=m;var g=new b2Vec2;g.SetV(l);g.Add(c);g.Add(h);g.Multiply(a*m);i.Add(g);var y=l.x;var b=l.y;var w=p.x;var E=p.y;var S=d.x;var x=d.y;var T=a*(.25*(w*w+S*w+S*S)+(y*w+y*S))+.5*y*y;var N=a*(.25*(E*E+x*E+x*x)+(b*E+b*x))+.5*b*b;o+=v*(T+N)}e.mass=r*s;i.Multiply(1/s);e.center=i;o=r*(o-s*b2Math.b2Dot(i,i));e.I=o};b2Shape.PolyCentroid=function(e,t,n){var r=0;var i=0;var s=0;var o=0;var u=0;var a=1/3;for(var f=0;f<t;++f){var l=o;var c=u;var h=e[f].x;var p=e[f].y;var d=f+1<t?e[f+1].x:e[0].x;var v=f+1<t?e[f+1].y:e[0].y;var m=h-l;var g=p-c;var y=d-l;var b=v-c;var w=m*b-g*y;var E=.5*w;s+=E;r+=E*a*(l+h+d);i+=E*a*(c+p+v)}r*=1/s;i*=1/s;n.Set(r,i)};var b2ShapeDef=Class.create();b2ShapeDef.prototype={initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=.2;this.restitution=0;this.density=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0},ComputeMass:function(e){e.center=new b2Vec2(0,0);if(this.density==0){e.mass=0;e.center.Set(0,0);e.I=0}switch(this.type){case b2Shape.e_circleShape:{var t=this;e.mass=this.density*b2Settings.b2_pi*t.radius*t.radius;e.center.Set(0,0);e.I=.5*e.mass*t.radius*t.radius}break;case b2Shape.e_boxShape:{var n=this;e.mass=4*this.density*n.extents.x*n.extents.y;e.center.Set(0,0);e.I=e.mass/3*b2Math.b2Dot(n.extents,n.extents)}break;case b2Shape.e_polyShape:{var r=this;b2Shape.PolyMass(e,r.vertices,r.vertexCount,this.density)}break;default:e.mass=0;e.center.Set(0,0);e.I=0;break}},type:0,userData:null,localPosition:null,localRotation:null,friction:null,restitution:null,density:null,categoryBits:0,maskBits:0,groupIndex:0};var b2BoxDef=Class.create();Object.extend(b2BoxDef.prototype,b2ShapeDef.prototype);Object.extend(b2BoxDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=.2;this.restitution=0;this.density=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_boxShape;this.extents=new b2Vec2(1,1)},extents:null});var b2CircleDef=Class.create();Object.extend(b2CircleDef.prototype,b2ShapeDef.prototype);Object.extend(b2CircleDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=.2;this.restitution=0;this.density=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_circleShape;this.radius=1},radius:null});var b2CircleShape=Class.create();Object.extend(b2CircleShape.prototype,b2Shape.prototype);Object.extend(b2CircleShape.prototype,{TestPoint:function(e){var t=new b2Vec2;t.SetV(e);t.Subtract(this.m_position);return b2Math.b2Dot(t,t)<=this.m_radius*this.m_radius},initialize:function(e,t,n){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=e.userData;this.m_friction=e.friction;this.m_restitution=e.restitution;this.m_body=t;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=e.categoryBits;this.m_maskBits=e.maskBits;this.m_groupIndex=e.groupIndex;this.m_localPosition=new b2Vec2;var r=e;this.m_localPosition.Set(e.localPosition.x-n.x,e.localPosition.y-n.y);this.m_type=b2Shape.e_circleShape;this.m_radius=r.radius;this.m_R.SetM(this.m_body.m_R);var i=this.m_R.col1.x*this.m_localPosition.x+this.m_R.col2.x*this.m_localPosition.y;var s=this.m_R.col1.y*this.m_localPosition.x+this.m_R.col2.y*this.m_localPosition.y;this.m_position.x=this.m_body.m_position.x+i;this.m_position.y=this.m_body.m_position.y+s;this.m_maxRadius=Math.sqrt(i*i+s*s)+this.m_radius;var o=new b2AABB;o.minVertex.Set(this.m_position.x-this.m_radius,this.m_position.y-this.m_radius);o.maxVertex.Set(this.m_position.x+this.m_radius,this.m_position.y+this.m_radius);var u=this.m_body.m_world.m_broadPhase;if(u.InRange(o)){this.m_proxyId=u.CreateProxy(o,this)}else{this.m_proxyId=b2Pair.b2_nullProxy}if(this.m_proxyId==b2Pair.b2_nullProxy){this.m_body.Freeze()}},Synchronize:function(e,t,n,r){this.m_R.SetM(r);this.m_position.x=r.col1.x*this.m_localPosition.x+r.col2.x*this.m_localPosition.y+n.x;this.m_position.y=r.col1.y*this.m_localPosition.x+r.col2.y*this.m_localPosition.y+n.y;if(this.m_proxyId==b2Pair.b2_nullProxy){return}var i=e.x+(t.col1.x*this.m_localPosition.x+t.col2.x*this.m_localPosition.y);var s=e.y+(t.col1.y*this.m_localPosition.x+t.col2.y*this.m_localPosition.y);var o=Math.min(i,this.m_position.x);var u=Math.min(s,this.m_position.y);var a=Math.max(i,this.m_position.x);var f=Math.max(s,this.m_position.y);var l=new b2AABB;l.minVertex.Set(o-this.m_radius,u-this.m_radius);l.maxVertex.Set(a+this.m_radius,f+this.m_radius);var c=this.m_body.m_world.m_broadPhase;if(c.InRange(l)){c.MoveProxy(this.m_proxyId,l)}else{this.m_body.Freeze()}},QuickSync:function(e,t){this.m_R.SetM(t);this.m_position.x=t.col1.x*this.m_localPosition.x+t.col2.x*this.m_localPosition.y+e.x;this.m_position.y=t.col1.y*this.m_localPosition.x+t.col2.y*this.m_localPosition.y+e.y},ResetProxy:function(e){if(this.m_proxyId==b2Pair.b2_nullProxy){return}var t=e.GetProxy(this.m_proxyId);e.DestroyProxy(this.m_proxyId);t=null;var n=new b2AABB;n.minVertex.Set(this.m_position.x-this.m_radius,this.m_position.y-this.m_radius);n.maxVertex.Set(this.m_position.x+this.m_radius,this.m_position.y+this.m_radius);if(e.InRange(n)){this.m_proxyId=e.CreateProxy(n,this)}else{this.m_proxyId=b2Pair.b2_nullProxy}if(this.m_proxyId==b2Pair.b2_nullProxy){this.m_body.Freeze()}},Support:function(e,t,n){var r=Math.sqrt(e*e+t*t);e/=r;t/=r;n.Set(this.m_position.x+this.m_radius*e,this.m_position.y+this.m_radius*t)},m_localPosition:new b2Vec2,m_radius:null});var b2MassData=Class.create();b2MassData.prototype={mass:0,center:new b2Vec2(0,0),I:0,initialize:function(){this.center=new b2Vec2(0,0)}};var b2PolyDef=Class.create();Object.extend(b2PolyDef.prototype,b2ShapeDef.prototype);Object.extend(b2PolyDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=.2;this.restitution=0;this.density=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.vertices=new Array(b2Settings.b2_maxPolyVertices);this.type=b2Shape.e_polyShape;this.vertexCount=0;for(var e=0;e<b2Settings.b2_maxPolyVertices;e++){this.vertices[e]=new b2Vec2}},vertices:new Array(b2Settings.b2_maxPolyVertices),vertexCount:0});var b2PolyShape=Class.create();Object.extend(b2PolyShape.prototype,b2Shape.prototype);Object.extend(b2PolyShape.prototype,{TestPoint:function(e){var t=new b2Vec2;t.SetV(e);t.Subtract(this.m_position);t.MulTM(this.m_R);for(var n=0;n<this.m_vertexCount;++n){var r=new b2Vec2;r.SetV(t);r.Subtract(this.m_vertices[n]);var i=b2Math.b2Dot(this.m_normals[n],r);if(i>0){return false}}return true},initialize:function(e,t,n){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=e.userData;this.m_friction=e.friction;this.m_restitution=e.restitution;this.m_body=t;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=e.categoryBits;this.m_maskBits=e.maskBits;this.m_groupIndex=e.groupIndex;this.syncAABB=new b2AABB;this.syncMat=new b2Mat22;this.m_localCentroid=new b2Vec2;this.m_localOBB=new b2OBB;var r=0;var i;var s;var o;var u=new b2AABB;this.m_vertices=new Array(b2Settings.b2_maxPolyVertices);this.m_coreVertices=new Array(b2Settings.b2_maxPolyVertices);this.m_normals=new Array(b2Settings.b2_maxPolyVertices);this.m_type=b2Shape.e_polyShape;var a=new b2Mat22(e.localRotation);if(e.type==b2Shape.e_boxShape){this.m_localCentroid.x=e.localPosition.x-n.x;this.m_localCentroid.y=e.localPosition.y-n.y;var f=e;this.m_vertexCount=4;i=f.extents.x;s=f.extents.y;var l=Math.max(0,i-2*b2Settings.b2_linearSlop);var c=Math.max(0,s-2*b2Settings.b2_linearSlop);o=this.m_vertices[0]=new b2Vec2;o.x=a.col1.x*i+a.col2.x*s;o.y=a.col1.y*i+a.col2.y*s;o=this.m_vertices[1]=new b2Vec2;o.x=a.col1.x*-i+a.col2.x*s;o.y=a.col1.y*-i+a.col2.y*s;o=this.m_vertices[2]=new b2Vec2;o.x=a.col1.x*-i+a.col2.x*-s;o.y=a.col1.y*-i+a.col2.y*-s;o=this.m_vertices[3]=new b2Vec2;o.x=a.col1.x*i+a.col2.x*-s;o.y=a.col1.y*i+a.col2.y*-s;o=this.m_coreVertices[0]=new b2Vec2;o.x=a.col1.x*l+a.col2.x*c;o.y=a.col1.y*l+a.col2.y*c;o=this.m_coreVertices[1]=new b2Vec2;o.x=a.col1.x*-l+a.col2.x*c;o.y=a.col1.y*-l+a.col2.y*c;o=this.m_coreVertices[2]=new b2Vec2;o.x=a.col1.x*-l+a.col2.x*-c;o.y=a.col1.y*-l+a.col2.y*-c;o=this.m_coreVertices[3]=new b2Vec2;o.x=a.col1.x*l+a.col2.x*-c;o.y=a.col1.y*l+a.col2.y*-c}else{var h=e;this.m_vertexCount=h.vertexCount;b2Shape.PolyCentroid(h.vertices,h.vertexCount,b2PolyShape.tempVec);var p=b2PolyShape.tempVec.x;var d=b2PolyShape.tempVec.y;this.m_localCentroid.x=e.localPosition.x+(a.col1.x*p+a.col2.x*d)-n.x;this.m_localCentroid.y=e.localPosition.y+(a.col1.y*p+a.col2.y*d)-n.y;for(r=0;r<this.m_vertexCount;++r){this.m_vertices[r]=new b2Vec2;this.m_coreVertices[r]=new b2Vec2;i=h.vertices[r].x-p;s=h.vertices[r].y-d;this.m_vertices[r].x=a.col1.x*i+a.col2.x*s;this.m_vertices[r].y=a.col1.y*i+a.col2.y*s;var v=this.m_vertices[r].x;var m=this.m_vertices[r].y;var g=Math.sqrt(v*v+m*m);if(g>Number.MIN_VALUE){v*=1/g;m*=1/g}this.m_coreVertices[r].x=this.m_vertices[r].x-2*b2Settings.b2_linearSlop*v;this.m_coreVertices[r].y=this.m_vertices[r].y-2*b2Settings.b2_linearSlop*m}}var y=Number.MAX_VALUE;var b=Number.MAX_VALUE;var w=-Number.MAX_VALUE;var E=-Number.MAX_VALUE;this.m_maxRadius=0;for(r=0;r<this.m_vertexCount;++r){var S=this.m_vertices[r];y=Math.min(y,S.x);b=Math.min(b,S.y);w=Math.max(w,S.x);E=Math.max(E,S.y);this.m_maxRadius=Math.max(this.m_maxRadius,S.Length())}this.m_localOBB.R.SetIdentity();this.m_localOBB.center.Set((y+w)*.5,(b+E)*.5);this.m_localOBB.extents.Set((w-y)*.5,(E-b)*.5);var x=0;var T=0;for(r=0;r<this.m_vertexCount;++r){this.m_normals[r]=new b2Vec2;x=r;T=r+1<this.m_vertexCount?r+1:0;this.m_normals[r].x=this.m_vertices[T].y-this.m_vertices[x].y;this.m_normals[r].y=-(this.m_vertices[T].x-this.m_vertices[x].x);this.m_normals[r].Normalize()}for(r=0;r<this.m_vertexCount;++r){x=r;T=r+1<this.m_vertexCount?r+1:0}this.m_R.SetM(this.m_body.m_R);this.m_position.x=this.m_body.m_position.x+(this.m_R.col1.x*this.m_localCentroid.x+this.m_R.col2.x*this.m_localCentroid.y);this.m_position.y=this.m_body.m_position.y+(this.m_R.col1.y*this.m_localCentroid.x+this.m_R.col2.y*this.m_localCentroid.y);b2PolyShape.tAbsR.col1.x=this.m_R.col1.x*this.m_localOBB.R.col1.x+this.m_R.col2.x*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col1.y=this.m_R.col1.y*this.m_localOBB.R.col1.x+this.m_R.col2.y*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col2.x=this.m_R.col1.x*this.m_localOBB.R.col2.x+this.m_R.col2.x*this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.col2.y=this.m_R.col1.y*this.m_localOBB.R.col2.x+this.m_R.col2.y*this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.Abs();i=b2PolyShape.tAbsR.col1.x*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.x*this.m_localOBB.extents.y;s=b2PolyShape.tAbsR.col1.y*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.y*this.m_localOBB.extents.y;var N=this.m_position.x+(this.m_R.col1.x*this.m_localOBB.center.x+this.m_R.col2.x*this.m_localOBB.center.y);var C=this.m_position.y+(this.m_R.col1.y*this.m_localOBB.center.x+this.m_R.col2.y*this.m_localOBB.center.y);u.minVertex.x=N-i;u.minVertex.y=C-s;u.maxVertex.x=N+i;u.maxVertex.y=C+s;var k=this.m_body.m_world.m_broadPhase;if(k.InRange(u)){this.m_proxyId=k.CreateProxy(u,this)}else{this.m_proxyId=b2Pair.b2_nullProxy}if(this.m_proxyId==b2Pair.b2_nullProxy){this.m_body.Freeze()}},syncAABB:new b2AABB,syncMat:new b2Mat22,Synchronize:function(e,t,n,r){this.m_R.SetM(r);this.m_position.x=this.m_body.m_position.x+(r.col1.x*this.m_localCentroid.x+r.col2.x*this.m_localCentroid.y);this.m_position.y=this.m_body.m_position.y+(r.col1.y*this.m_localCentroid.x+r.col2.y*this.m_localCentroid.y);if(this.m_proxyId==b2Pair.b2_nullProxy){return}var i;var s;var o=t.col1;var u=t.col2;var a=this.m_localOBB.R.col1;var f=this.m_localOBB.R.col2;this.syncMat.col1.x=o.x*a.x+u.x*a.y;this.syncMat.col1.y=o.y*a.x+u.y*a.y;this.syncMat.col2.x=o.x*f.x+u.x*f.y;this.syncMat.col2.y=o.y*f.x+u.y*f.y;this.syncMat.Abs();i=this.m_localCentroid.x+this.m_localOBB.center.x;s=this.m_localCentroid.y+this.m_localOBB.center.y;var l=e.x+(t.col1.x*i+t.col2.x*s);var c=e.y+(t.col1.y*i+t.col2.y*s);i=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*this.m_localOBB.extents.y;s=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=l-i;this.syncAABB.minVertex.y=c-s;this.syncAABB.maxVertex.x=l+i;this.syncAABB.maxVertex.y=c+s;o=r.col1;u=r.col2;a=this.m_localOBB.R.col1;f=this.m_localOBB.R.col2;this.syncMat.col1.x=o.x*a.x+u.x*a.y;this.syncMat.col1.y=o.y*a.x+u.y*a.y;this.syncMat.col2.x=o.x*f.x+u.x*f.y;this.syncMat.col2.y=o.y*f.x+u.y*f.y;this.syncMat.Abs();i=this.m_localCentroid.x+this.m_localOBB.center.x;s=this.m_localCentroid.y+this.m_localOBB.center.y;l=n.x+(r.col1.x*i+r.col2.x*s);c=n.y+(r.col1.y*i+r.col2.y*s);i=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*this.m_localOBB.extents.y;s=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=Math.min(this.syncAABB.minVertex.x,l-i);this.syncAABB.minVertex.y=Math.min(this.syncAABB.minVertex.y,c-s);this.syncAABB.maxVertex.x=Math.max(this.syncAABB.maxVertex.x,l+i);this.syncAABB.maxVertex.y=Math.max(this.syncAABB.maxVertex.y,c+s);var h=this.m_body.m_world.m_broadPhase;if(h.InRange(this.syncAABB)){h.MoveProxy(this.m_proxyId,this.syncAABB)}else{this.m_body.Freeze()}},QuickSync:function(e,t){this.m_R.SetM(t);this.m_position.x=e.x+(t.col1.x*this.m_localCentroid.x+t.col2.x*this.m_localCentroid.y);this.m_position.y=e.y+(t.col1.y*this.m_localCentroid.x+t.col2.y*this.m_localCentroid.y)},ResetProxy:function(e){if(this.m_proxyId==b2Pair.b2_nullProxy){return}var t=e.GetProxy(this.m_proxyId);e.DestroyProxy(this.m_proxyId);t=null;var n=b2Math.b2MulMM(this.m_R,this.m_localOBB.R);var r=b2Math.b2AbsM(n);var i=b2Math.b2MulMV(r,this.m_localOBB.extents);var s=b2Math.b2MulMV(this.m_R,this.m_localOBB.center);s.Add(this.m_position);var o=new b2AABB;o.minVertex.SetV(s);o.minVertex.Subtract(i);o.maxVertex.SetV(s);o.maxVertex.Add(i);if(e.InRange(o)){this.m_proxyId=e.CreateProxy(o,this)}else{this.m_proxyId=b2Pair.b2_nullProxy}if(this.m_proxyId==b2Pair.b2_nullProxy){this.m_body.Freeze()}},Support:function(e,t,n){var r=e*this.m_R.col1.x+t*this.m_R.col1.y;var i=e*this.m_R.col2.x+t*this.m_R.col2.y;var s=0;var o=this.m_coreVertices[0].x*r+this.m_coreVertices[0].y*i;for(var u=1;u<this.m_vertexCount;++u){var a=this.m_coreVertices[u].x*r+this.m_coreVertices[u].y*i;if(a>o){s=u;o=a}}n.Set(this.m_position.x+(this.m_R.col1.x*this.m_coreVertices[s].x+this.m_R.col2.x*this.m_coreVertices[s].y),this.m_position.y+(this.m_R.col1.y*this.m_coreVertices[s].x+this.m_R.col2.y*this.m_coreVertices[s].y))},m_localCentroid:new b2Vec2,m_localOBB:new b2OBB,m_vertices:null,m_coreVertices:null,m_vertexCount:0,m_normals:null});b2PolyShape.tempVec=new b2Vec2;b2PolyShape.tAbsR=new b2Mat22;var b2Body=Class.create();b2Body.prototype={SetOriginPosition:function(e,t){if(this.IsFrozen()){return}this.m_rotation=t;this.m_R.Set(this.m_rotation);this.m_position=b2Math.AddVV(e,b2Math.b2MulMV(this.m_R,this.m_center));this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var n=this.m_shapeList;n!=null;n=n.m_next){n.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R)}this.m_world.m_broadPhase.Commit()},GetOriginPosition:function(){return b2Math.SubtractVV(this.m_position,b2Math.b2MulMV(this.m_R,this.m_center))},SetCenterPosition:function(e,t){if(this.IsFrozen()){return}this.m_rotation=t;this.m_R.Set(this.m_rotation);this.m_position.SetV(e);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var n=this.m_shapeList;n!=null;n=n.m_next){n.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R)}this.m_world.m_broadPhase.Commit()},GetCenterPosition:function(){return this.m_position},GetRotation:function(){return this.m_rotation},GetRotationMatrix:function(){return this.m_R},SetLinearVelocity:function(e){this.m_linearVelocity.SetV(e)},GetLinearVelocity:function(){return this.m_linearVelocity},SetAngularVelocity:function(e){this.m_angularVelocity=e},GetAngularVelocity:function(){return this.m_angularVelocity},ApplyForce:function(e,t){if(this.IsSleeping()==false){this.m_force.Add(e);this.m_torque+=b2Math.b2CrossVV(b2Math.SubtractVV(t,this.m_position),e)}},ApplyTorque:function(e){if(this.IsSleeping()==false){this.m_torque+=e}},ApplyImpulse:function(e,t){if(this.IsSleeping()==false){this.m_linearVelocity.Add(b2Math.MulFV(this.m_invMass,e));this.m_angularVelocity+=this.m_invI*b2Math.b2CrossVV(b2Math.SubtractVV(t,this.m_position),e)}},GetMass:function(){return this.m_mass},GetInertia:function(){return this.m_I},GetWorldPoint:function(e){return b2Math.AddVV(this.m_position,b2Math.b2MulMV(this.m_R,e))},GetWorldVector:function(e){return b2Math.b2MulMV(this.m_R,e)},GetLocalPoint:function(e){return b2Math.b2MulTMV(this.m_R,b2Math.SubtractVV(e,this.m_position))},GetLocalVector:function(e){return b2Math.b2MulTMV(this.m_R,e)},IsStatic:function(){return(this.m_flags&b2Body.e_staticFlag)==b2Body.e_staticFlag},IsFrozen:function(){return(this.m_flags&b2Body.e_frozenFlag)==b2Body.e_frozenFlag},IsSleeping:function(){return(this.m_flags&b2Body.e_sleepFlag)==b2Body.e_sleepFlag},AllowSleeping:function(e){if(e){this.m_flags|=b2Body.e_allowSleepFlag}else{this.m_flags&=~b2Body.e_allowSleepFlag;this.WakeUp()}},WakeUp:function(){this.m_flags&=~b2Body.e_sleepFlag;this.m_sleepTime=0},GetShapeList:function(){return this.m_shapeList},GetContactList:function(){return this.m_contactList},GetJointList:function(){return this.m_jointList},GetNext:function(){return this.m_next},GetUserData:function(){return this.m_userData},initialize:function(e,t){this.sMat0=new b2Mat22;this.m_position=new b2Vec2;this.m_R=new b2Mat22(0);this.m_position0=new b2Vec2;var n=0;var r;var i;this.m_flags=0;this.m_position.SetV(e.position);this.m_rotation=e.rotation;this.m_R.Set(this.m_rotation);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;this.m_world=t;this.m_linearDamping=b2Math.b2Clamp(1-e.linearDamping,0,1);this.m_angularDamping=b2Math.b2Clamp(1-e.angularDamping,0,1);this.m_force=new b2Vec2(0,0);this.m_torque=0;this.m_mass=0;var s=new Array(b2Settings.b2_maxShapesPerBody);for(n=0;n<b2Settings.b2_maxShapesPerBody;n++){s[n]=new b2MassData}this.m_shapeCount=0;this.m_center=new b2Vec2(0,0);for(n=0;n<b2Settings.b2_maxShapesPerBody;++n){r=e.shapes[n];if(r==null)break;i=s[n];r.ComputeMass(i);this.m_mass+=i.mass;this.m_center.x+=i.mass*(r.localPosition.x+i.center.x);this.m_center.y+=i.mass*(r.localPosition.y+i.center.y);++this.m_shapeCount}if(this.m_mass>0){this.m_center.Multiply(1/this.m_mass);this.m_position.Add(b2Math.b2MulMV(this.m_R,this.m_center))}else{this.m_flags|=b2Body.e_staticFlag}this.m_I=0;for(n=0;n<this.m_shapeCount;++n){r=e.shapes[n];i=s[n];this.m_I+=i.I;var o=b2Math.SubtractVV(b2Math.AddVV(r.localPosition,i.center),this.m_center);this.m_I+=i.mass*b2Math.b2Dot(o,o)}if(this.m_mass>0){this.m_invMass=1/this.m_mass}else{this.m_invMass=0}if(this.m_I>0&&e.preventRotation==false){this.m_invI=1/this.m_I}else{this.m_I=0;this.m_invI=0}this.m_linearVelocity=b2Math.AddVV(e.linearVelocity,b2Math.b2CrossFV(e.angularVelocity,this.m_center));this.m_angularVelocity=e.angularVelocity;this.m_jointList=null;this.m_contactList=null;this.m_prev=null;this.m_next=null;this.m_shapeList=null;for(n=0;n<this.m_shapeCount;++n){r=e.shapes[n];var u=b2Shape.Create(r,this,this.m_center);u.m_next=this.m_shapeList;this.m_shapeList=u}this.m_sleepTime=0;if(e.allowSleep){this.m_flags|=b2Body.e_allowSleepFlag}if(e.isSleeping){this.m_flags|=b2Body.e_sleepFlag}if(this.m_flags&b2Body.e_sleepFlag||this.m_invMass==0){this.m_linearVelocity.Set(0,0);this.m_angularVelocity=0}this.m_userData=e.userData},Destroy:function(){var e=this.m_shapeList;while(e){var t=e;e=e.m_next;b2Shape.Destroy(t)}},sMat0:new b2Mat22,SynchronizeShapes:function(){this.sMat0.Set(this.m_rotation0);for(var e=this.m_shapeList;e!=null;e=e.m_next){e.Synchronize(this.m_position0,this.sMat0,this.m_position,this.m_R)}},QuickSyncShapes:function(){for(var e=this.m_shapeList;e!=null;e=e.m_next){e.QuickSync(this.m_position,this.m_R)}},IsConnected:function(e){for(var t=this.m_jointList;t!=null;t=t.next){if(t.other==e)return t.joint.m_collideConnected==false}return false},Freeze:function(){this.m_flags|=b2Body.e_frozenFlag;this.m_linearVelocity.SetZero();this.m_angularVelocity=0;for(var e=this.m_shapeList;e!=null;e=e.m_next){e.DestroyProxy()}},m_flags:0,m_position:new b2Vec2,m_rotation:null,m_R:new b2Mat22(0),m_position0:new b2Vec2,m_rotation0:null,m_linearVelocity:null,m_angularVelocity:null,m_force:null,m_torque:null,m_center:null,m_world:null,m_prev:null,m_next:null,m_shapeList:null,m_shapeCount:0,m_jointList:null,m_contactList:null,m_mass:null,m_invMass:null,m_I:null,m_invI:null,m_linearDamping:null,m_angularDamping:null,m_sleepTime:null,m_userData:null};b2Body.e_staticFlag=1;b2Body.e_frozenFlag=2;b2Body.e_islandFlag=4;b2Body.e_sleepFlag=8;b2Body.e_allowSleepFlag=16;b2Body.e_destroyFlag=32;var b2BodyDef=Class.create();b2BodyDef.prototype={initialize:function(){this.shapes=new Array;this.userData=null;for(var e=0;e<b2Settings.b2_maxShapesPerBody;e++){this.shapes[e]=null}this.position=new b2Vec2(0,0);this.rotation=0;this.linearVelocity=new b2Vec2(0,0);this.angularVelocity=0;this.linearDamping=0;this.angularDamping=0;this.allowSleep=true;this.isSleeping=false;this.preventRotation=false},userData:null,shapes:new Array,position:null,rotation:null,linearVelocity:null,angularVelocity:null,linearDamping:null,angularDamping:null,allowSleep:null,isSleeping:null,preventRotation:null,AddShape:function(e){for(var t=0;t<b2Settings.b2_maxShapesPerBody;++t){if(this.shapes[t]==null){this.shapes[t]=e;break}}}};var b2CollisionFilter=Class.create();b2CollisionFilter.prototype={ShouldCollide:function(e,t){if(e.m_groupIndex==t.m_groupIndex&&e.m_groupIndex!=0){return e.m_groupIndex>0}var n=(e.m_maskBits&t.m_categoryBits)!=0&&(e.m_categoryBits&t.m_maskBits)!=0;return n},initialize:function(){}};b2CollisionFilter.b2_defaultFilter=new b2CollisionFilter;var b2Island=Class.create();b2Island.prototype={initialize:function(e,t,n,r){var i=0;this.m_bodyCapacity=e;this.m_contactCapacity=t;this.m_jointCapacity=n;this.m_bodyCount=0;this.m_contactCount=0;this.m_jointCount=0;this.m_bodies=new Array(e);for(i=0;i<e;i++)this.m_bodies[i]=null;this.m_contacts=new Array(t);for(i=0;i<t;i++)this.m_contacts[i]=null;this.m_joints=new Array(n);for(i=0;i<n;i++)this.m_joints[i]=null;this.m_allocator=r},Clear:function(){this.m_bodyCount=0;this.m_contactCount=0;this.m_jointCount=0},Solve:function(e,t){var n=0;var r;for(n=0;n<this.m_bodyCount;++n){r=this.m_bodies[n];if(r.m_invMass==0)continue;r.m_linearVelocity.Add(b2Math.MulFV(e.dt,b2Math.AddVV(t,b2Math.MulFV(r.m_invMass,r.m_force))));r.m_angularVelocity+=e.dt*r.m_invI*r.m_torque;r.m_linearVelocity.Multiply(r.m_linearDamping);r.m_angularVelocity*=r.m_angularDamping;r.m_position0.SetV(r.m_position);r.m_rotation0=r.m_rotation}var i=new b2ContactSolver(this.m_contacts,this.m_contactCount,this.m_allocator);i.PreSolve();for(n=0;n<this.m_jointCount;++n){this.m_joints[n].PrepareVelocitySolver()}for(n=0;n<e.iterations;++n){i.SolveVelocityConstraints();for(var s=0;s<this.m_jointCount;++s){this.m_joints[s].SolveVelocityConstraints(e)}}for(n=0;n<this.m_bodyCount;++n){r=this.m_bodies[n];if(r.m_invMass==0)continue;r.m_position.x+=e.dt*r.m_linearVelocity.x;r.m_position.y+=e.dt*r.m_linearVelocity.y;r.m_rotation+=e.dt*r.m_angularVelocity;r.m_R.Set(r.m_rotation)}for(n=0;n<this.m_jointCount;++n){this.m_joints[n].PreparePositionSolver()}if(b2World.s_enablePositionCorrection){for(b2Island.m_positionIterationCount=0;b2Island.m_positionIterationCount<e.iterations;++b2Island.m_positionIterationCount){var o=i.SolvePositionConstraints(b2Settings.b2_contactBaumgarte);var u=true;for(n=0;n<this.m_jointCount;++n){var a=this.m_joints[n].SolvePositionConstraints();u=u&&a}if(o&&u){break}}}i.PostSolve();for(n=0;n<this.m_bodyCount;++n){r=this.m_bodies[n];if(r.m_invMass==0)continue;r.m_R.Set(r.m_rotation);r.SynchronizeShapes();r.m_force.Set(0,0);r.m_torque=0}},UpdateSleep:function(e){var t=0;var n;var r=Number.MAX_VALUE;var i=b2Settings.b2_linearSleepTolerance*b2Settings.b2_linearSleepTolerance;var s=b2Settings.b2_angularSleepTolerance*b2Settings.b2_angularSleepTolerance;for(t=0;t<this.m_bodyCount;++t){n=this.m_bodies[t];if(n.m_invMass==0){continue}if((n.m_flags&b2Body.e_allowSleepFlag)==0){n.m_sleepTime=0;r=0}if((n.m_flags&b2Body.e_allowSleepFlag)==0||n.m_angularVelocity*n.m_angularVelocity>s||b2Math.b2Dot(n.m_linearVelocity,n.m_linearVelocity)>i){n.m_sleepTime=0;r=0}else{n.m_sleepTime+=e;r=b2Math.b2Min(r,n.m_sleepTime)}}if(r>=b2Settings.b2_timeToSleep){for(t=0;t<this.m_bodyCount;++t){n=this.m_bodies[t];n.m_flags|=b2Body.e_sleepFlag}}},AddBody:function(e){this.m_bodies[this.m_bodyCount++]=e},AddContact:function(e){this.m_contacts[this.m_contactCount++]=e},AddJoint:function(e){this.m_joints[this.m_jointCount++]=e},m_allocator:null,m_bodies:null,m_contacts:null,m_joints:null,m_bodyCount:0,m_jointCount:0,m_contactCount:0,m_bodyCapacity:0,m_contactCapacity:0,m_jointCapacity:0,m_positionError:null};b2Island.m_positionIterationCount=0;var b2TimeStep=Class.create();b2TimeStep.prototype={dt:null,inv_dt:null,iterations:0,initialize:function(){}};var b2ContactNode=Class.create();b2ContactNode.prototype={other:null,contact:null,prev:null,next:null,initialize:function(){}};var b2Contact=Class.create();b2Contact.prototype={GetManifolds:function(){return null},GetManifoldCount:function(){return this.m_manifoldCount},GetNext:function(){return this.m_next},GetShape1:function(){return this.m_shape1},GetShape2:function(){return this.m_shape2},initialize:function(e,t){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!e||!t){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=e;this.m_shape2=t;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null},Evaluate:function(){},m_flags:0,m_prev:null,m_next:null,m_node1:new b2ContactNode,m_node2:new b2ContactNode,m_shape1:null,m_shape2:null,m_manifoldCount:0,m_friction:null,m_restitution:null};b2Contact.e_islandFlag=1;b2Contact.e_destroyFlag=2;b2Contact.AddType=function(e,t,n,r){b2Contact.s_registers[n][r].createFcn=e;b2Contact.s_registers[n][r].destroyFcn=t;b2Contact.s_registers[n][r].primary=true;if(n!=r){b2Contact.s_registers[r][n].createFcn=e;b2Contact.s_registers[r][n].destroyFcn=t;b2Contact.s_registers[r][n].primary=false}};b2Contact.InitializeRegisters=function(){b2Contact.s_registers=new Array(b2Shape.e_shapeTypeCount);for(var e=0;e<b2Shape.e_shapeTypeCount;e++){b2Contact.s_registers[e]=new Array(b2Shape.e_shapeTypeCount);for(var t=0;t<b2Shape.e_shapeTypeCount;t++){b2Contact.s_registers[e][t]=new b2ContactRegister}}b2Contact.AddType(b2CircleContact.Create,b2CircleContact.Destroy,b2Shape.e_circleShape,b2Shape.e_circleShape);b2Contact.AddType(b2PolyAndCircleContact.Create,b2PolyAndCircleContact.Destroy,b2Shape.e_polyShape,b2Shape.e_circleShape);b2Contact.AddType(b2PolyContact.Create,b2PolyContact.Destroy,b2Shape.e_polyShape,b2Shape.e_polyShape)};b2Contact.Create=function(e,t,n){if(b2Contact.s_initialized==false){b2Contact.InitializeRegisters();b2Contact.s_initialized=true}var r=e.m_type;var i=t.m_type;var s=b2Contact.s_registers[r][i].createFcn;if(s){if(b2Contact.s_registers[r][i].primary){return s(e,t,n)}else{var o=s(t,e,n);for(var u=0;u<o.GetManifoldCount();++u){var a=o.GetManifolds()[u];a.normal=a.normal.Negative()}return o}}else{return null}};b2Contact.Destroy=function(e,t){if(e.GetManifoldCount()>0){e.m_shape1.m_body.WakeUp();e.m_shape2.m_body.WakeUp()}var n=e.m_shape1.m_type;var r=e.m_shape2.m_type;var i=b2Contact.s_registers[n][r].destroyFcn;i(e,t)};b2Contact.s_registers=null;b2Contact.s_initialized=false;var b2ContactConstraint=Class.create();b2ContactConstraint.prototype={initialize:function(){this.normal=new b2Vec2;this.points=new Array(b2Settings.b2_maxManifoldPoints);for(var e=0;e<b2Settings.b2_maxManifoldPoints;e++){this.points[e]=new b2ContactConstraintPoint}},points:null,normal:new b2Vec2,manifold:null,body1:null,body2:null,friction:null,restitution:null,pointCount:0};var b2ContactConstraintPoint=Class.create();b2ContactConstraintPoint.prototype={localAnchor1:new b2Vec2,localAnchor2:new b2Vec2,normalImpulse:null,tangentImpulse:null,positionImpulse:null,normalMass:null,tangentMass:null,separation:null,velocityBias:null,initialize:function(){this.localAnchor1=new b2Vec2;this.localAnchor2=new b2Vec2}};var b2ContactRegister=Class.create();b2ContactRegister.prototype={createFcn:null,destroyFcn:null,primary:null,initialize:function(){}};var b2ContactSolver=Class.create();b2ContactSolver.prototype={initialize:function(e,t,n){this.m_constraints=new Array;this.m_allocator=n;var r=0;var i;var s;this.m_constraintCount=0;for(r=0;r<t;++r){this.m_constraintCount+=e[r].GetManifoldCount()}for(r=0;r<this.m_constraintCount;r++){this.m_constraints[r]=new b2ContactConstraint}var o=0;for(r=0;r<t;++r){var u=e[r];var a=u.m_shape1.m_body;var f=u.m_shape2.m_body;var l=u.GetManifoldCount();var c=u.GetManifolds();var h=u.m_friction;var p=u.m_restitution;var d=a.m_linearVelocity.x;var v=a.m_linearVelocity.y;var m=f.m_linearVelocity.x;var g=f.m_linearVelocity.y;var y=a.m_angularVelocity;var b=f.m_angularVelocity;for(var w=0;w<l;++w){var E=c[w];var S=E.normal.x;var x=E.normal.y;var T=this.m_constraints[o];T.body1=a;T.body2=f;T.manifold=E;T.normal.x=S;T.normal.y=x;T.pointCount=E.pointCount;T.friction=h;T.restitution=p;for(var N=0;N<T.pointCount;++N){var C=E.points[N];var k=T.points[N];k.normalImpulse=C.normalImpulse;k.tangentImpulse=C.tangentImpulse;k.separation=C.separation;var L=C.position.x-a.m_position.x;var A=C.position.y-a.m_position.y;var O=C.position.x-f.m_position.x;var M=C.position.y-f.m_position.y;i=k.localAnchor1;s=a.m_R;i.x=L*s.col1.x+A*s.col1.y;i.y=L*s.col2.x+A*s.col2.y;i=k.localAnchor2;s=f.m_R;i.x=O*s.col1.x+M*s.col1.y;i.y=O*s.col2.x+M*s.col2.y;var _=L*L+A*A;var D=O*O+M*M;var P=L*S+A*x;var H=O*S+M*x;var B=a.m_invMass+f.m_invMass;B+=a.m_invI*(_-P*P)+f.m_invI*(D-H*H);k.normalMass=1/B;var j=x;var F=-S;var I=L*j+A*F;var q=O*j+M*F;var R=a.m_invMass+f.m_invMass;R+=a.m_invI*(_-I*I)+f.m_invI*(D-q*q);k.tangentMass=1/R;k.velocityBias=0;if(k.separation>0){k.velocityBias=-60*k.separation}var U=m+ -b*M-d- -y*A;var z=g+b*O-v-y*L;var W=T.normal.x*U+T.normal.y*z;if(W<-b2Settings.b2_velocityThreshold){k.velocityBias+=-T.restitution*W}}++o}}},PreSolve:function(){var e;var t;var n;for(var r=0;r<this.m_constraintCount;++r){var i=this.m_constraints[r];var s=i.body1;var o=i.body2;var u=s.m_invMass;var a=s.m_invI;var f=o.m_invMass;var l=o.m_invI;var c=i.normal.x;var h=i.normal.y;var p=h;var d=-c;var v=0;var m=0;if(b2World.s_enableWarmStarting){m=i.pointCount;for(v=0;v<m;++v){var g=i.points[v];var y=g.normalImpulse*c+g.tangentImpulse*p;var b=g.normalImpulse*h+g.tangentImpulse*d;n=s.m_R;e=g.localAnchor1;var w=n.col1.x*e.x+n.col2.x*e.y;var E=n.col1.y*e.x+n.col2.y*e.y;n=o.m_R;e=g.localAnchor2;var S=n.col1.x*e.x+n.col2.x*e.y;var x=n.col1.y*e.x+n.col2.y*e.y;s.m_angularVelocity-=a*(w*b-E*y);s.m_linearVelocity.x-=u*y;s.m_linearVelocity.y-=u*b;o.m_angularVelocity+=l*(S*b-x*y);o.m_linearVelocity.x+=f*y;o.m_linearVelocity.y+=f*b;g.positionImpulse=0}}else{m=i.pointCount;for(v=0;v<m;++v){var T=i.points[v];T.normalImpulse=0;T.tangentImpulse=0;T.positionImpulse=0}}}},SolveVelocityConstraints:function(){var e=0;var t;var n;var r;var i;var s;var o;var u;var a;var f;var l;var c;var h;var p;for(var d=0;d<this.m_constraintCount;++d){var v=this.m_constraints[d];var m=v.body1;var g=v.body2;var y=m.m_angularVelocity;var b=m.m_linearVelocity;var w=g.m_angularVelocity;var E=g.m_linearVelocity;var S=m.m_invMass;var x=m.m_invI;var T=g.m_invMass;var N=g.m_invI;var C=v.normal.x;var k=v.normal.y;var L=k;var A=-C;var O=v.pointCount;for(e=0;e<O;++e){t=v.points[e];h=m.m_R;p=t.localAnchor1;n=h.col1.x*p.x+h.col2.x*p.y;r=h.col1.y*p.x+h.col2.y*p.y;h=g.m_R;p=t.localAnchor2;i=h.col1.x*p.x+h.col2.x*p.y;s=h.col1.y*p.x+h.col2.y*p.y;o=E.x+ -w*s-b.x- -y*r;u=E.y+w*i-b.y-y*n;var M=o*C+u*k;a=-t.normalMass*(M-t.velocityBias);f=b2Math.b2Max(t.normalImpulse+a,0);a=f-t.normalImpulse;l=a*C;c=a*k;b.x-=S*l;b.y-=S*c;y-=x*(n*c-r*l);E.x+=T*l;E.y+=T*c;w+=N*(i*c-s*l);t.normalImpulse=f;o=E.x+ -w*s-b.x- -y*r;u=E.y+w*i-b.y-y*n;var _=o*L+u*A;a=t.tangentMass*-_;var D=v.friction*t.normalImpulse;f=b2Math.b2Clamp(t.tangentImpulse+a,-D,D);a=f-t.tangentImpulse;l=a*L;c=a*A;b.x-=S*l;b.y-=S*c;y-=x*(n*c-r*l);E.x+=T*l;E.y+=T*c;w+=N*(i*c-s*l);t.tangentImpulse=f}m.m_angularVelocity=y;g.m_angularVelocity=w}},SolvePositionConstraints:function(e){var t=0;var n;var r;for(var i=0;i<this.m_constraintCount;++i){var s=this.m_constraints[i];var o=s.body1;var u=s.body2;var a=o.m_position;var f=o.m_rotation;var l=u.m_position;var c=u.m_rotation;var h=o.m_invMass;var p=o.m_invI;var d=u.m_invMass;var v=u.m_invI;var m=s.normal.x;var g=s.normal.y;var y=g;var b=-m;var w=s.pointCount;for(var E=0;E<w;++E){var S=s.points[E];n=o.m_R;r=S.localAnchor1;var x=n.col1.x*r.x+n.col2.x*r.y;var T=n.col1.y*r.x+n.col2.y*r.y;n=u.m_R;r=S.localAnchor2;var N=n.col1.x*r.x+n.col2.x*r.y;var C=n.col1.y*r.x+n.col2.y*r.y;var k=a.x+x;var L=a.y+T;var A=l.x+N;var O=l.y+C;var M=A-k;var _=O-L;var D=M*m+_*g+S.separation;t=b2Math.b2Min(t,D);var P=e*b2Math.b2Clamp(D+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);var H=-S.normalMass*P;var B=S.positionImpulse;S.positionImpulse=b2Math.b2Max(B+H,0);H=S.positionImpulse-B;var j=H*m;var F=H*g;a.x-=h*j;a.y-=h*F;f-=p*(x*F-T*j);o.m_R.Set(f);l.x+=d*j;l.y+=d*F;c+=v*(N*F-C*j);u.m_R.Set(c)}o.m_rotation=f;u.m_rotation=c}return t>=-b2Settings.b2_linearSlop},PostSolve:function(){for(var e=0;e<this.m_constraintCount;++e){var t=this.m_constraints[e];var n=t.manifold;for(var r=0;r<t.pointCount;++r){var i=n.points[r];var s=t.points[r];i.normalImpulse=s.normalImpulse;i.tangentImpulse=s.tangentImpulse}}},m_allocator:null,m_constraints:new Array,m_constraintCount:0};var b2CircleContact=Class.create();Object.extend(b2CircleContact.prototype,b2Contact.prototype);Object.extend(b2CircleContact.prototype,{initialize:function(e,t){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!e||!t){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=e;this.m_shape2=t;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m_manifold=[new b2Manifold];this.m_manifold[0].pointCount=0;this.m_manifold[0].points[0].normalImpulse=0;this.m_manifold[0].points[0].tangentImpulse=0},Evaluate:function(){b2Collision.b2CollideCircle(this.m_manifold[0],this.m_shape1,this.m_shape2,false);if(this.m_manifold[0].pointCount>0){this.m_manifoldCount=1}else{this.m_manifoldCount=0}},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2CircleContact.Create=function(e,t,n){return new b2CircleContact(e,t)};b2CircleContact.Destroy=function(e,t){};var b2Conservative=Class.create();b2Conservative.prototype={initialize:function(){}};b2Conservative.R1=new b2Mat22;b2Conservative.R2=new b2Mat22;b2Conservative.x1=new b2Vec2;b2Conservative.x2=new b2Vec2;b2Conservative.Conservative=function(e,t){var n=e.GetBody();var r=t.GetBody();var i=n.m_position.x-n.m_position0.x;var s=n.m_position.y-n.m_position0.y;var o=n.m_rotation-n.m_rotation0;var u=r.m_position.x-r.m_position0.x;var a=r.m_position.y-r.m_position0.y;var f=r.m_rotation-r.m_rotation0;var l=e.GetMaxRadius();var c=t.GetMaxRadius();var h=n.m_position0.x;var p=n.m_position0.y;var v=n.m_rotation0;var m=r.m_position0.x;var g=r.m_position0.y;var y=r.m_rotation0;var b=h;var w=p;var E=v;var S=m;var x=g;var T=y;b2Conservative.R1.Set(E);b2Conservative.R2.Set(T);e.QuickSync(p1,b2Conservative.R1);t.QuickSync(p2,b2Conservative.R2);var N=0;var C=10;var k;var L;var A=0;var O=true;for(var M=0;M<C;++M){var _=b2Distance.Distance(b2Conservative.x1,b2Conservative.x2,e,t);if(_<b2Settings.b2_linearSlop){if(M==0){O=false}else{O=true}break}if(M==0){k=b2Conservative.x2.x-b2Conservative.x1.x;L=b2Conservative.x2.y-b2Conservative.x1.y;var D=Math.sqrt(k*k+L*L);var P=k*(i-u)+L*(s-a)+Math.abs(o)*l+Math.abs(f)*c;if(Math.abs(P)<Number.MIN_VALUE){O=false;break}A=1/P}var H=_*A;var B=N+H;if(B<0||1<B){O=false;break}if(B<(1+100*Number.MIN_VALUE)*N){O=true;break}N=B;b=h+N*v1.x;w=p+N*v1.y;E=v+N*o;S=m+N*v2.x;x=g+N*v2.y;T=y+N*f;b2Conservative.R1.Set(E);b2Conservative.R2.Set(T);e.QuickSync(p1,b2Conservative.R1);t.QuickSync(p2,b2Conservative.R2)}if(O){k=b2Conservative.x2.x-b2Conservative.x1.x;L=b2Conservative.x2.y-b2Conservative.x1.y;var j=Math.sqrt(k*k+L*L);if(j>FLT_EPSILON){d*=b2_linearSlop/j}if(n.IsStatic()){n.m_position.x=b;n.m_position.y=w}else{n.m_position.x=b-k;n.m_position.y=w-L}n.m_rotation=E;n.m_R.Set(E);n.QuickSyncShapes();if(r.IsStatic()){r.m_position.x=S;r.m_position.y=x}else{r.m_position.x=S+k;r.m_position.y=x+L}r.m_position.x=S+k;r.m_position.y=x+L;r.m_rotation=T;r.m_R.Set(T);r.QuickSyncShapes();return true}e.QuickSync(n.m_position,n.m_R);t.QuickSync(r.m_position,r.m_R);return false};var b2NullContact=Class.create();Object.extend(b2NullContact.prototype,b2Contact.prototype);Object.extend(b2NullContact.prototype,{initialize:function(e,t){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!e||!t){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=e;this.m_shape2=t;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null},Evaluate:function(){},GetManifolds:function(){return null}});var b2PolyAndCircleContact=Class.create();Object.extend(b2PolyAndCircleContact.prototype,b2Contact.prototype);Object.extend(b2PolyAndCircleContact.prototype,{initialize:function(e,t){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!e||!t){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=e;this.m_shape2=t;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m_manifold=[new b2Manifold];b2Settings.b2Assert(this.m_shape1.m_type==b2Shape.e_polyShape);b2Settings.b2Assert(this.m_shape2.m_type==b2Shape.e_circleShape);this.m_manifold[0].pointCount=0;this.m_manifold[0].points[0].normalImpulse=0;this.m_manifold[0].points[0].tangentImpulse=0},Evaluate:function(){b2Collision.b2CollidePolyAndCircle(this.m_manifold[0],this.m_shape1,this.m_shape2,false);if(this.m_manifold[0].pointCount>0){this.m_manifoldCount=1}else{this.m_manifoldCount=0}},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2PolyAndCircleContact.Create=function(e,t,n){return new b2PolyAndCircleContact(e,t)};b2PolyAndCircleContact.Destroy=function(e,t){};var b2PolyContact=Class.create();Object.extend(b2PolyContact.prototype,b2Contact.prototype);Object.extend(b2PolyContact.prototype,{initialize:function(e,t){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!e||!t){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=e;this.m_shape2=t;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m0=new b2Manifold;this.m_manifold=[new b2Manifold];this.m_manifold[0].pointCount=0},m0:new b2Manifold,Evaluate:function(){var e=this.m_manifold[0];var t=this.m0.points;for(var n=0;n<e.pointCount;n++){var r=t[n];var i=e.points[n];r.normalImpulse=i.normalImpulse;r.tangentImpulse=i.tangentImpulse;r.id=i.id.Copy()}this.m0.pointCount=e.pointCount;b2Collision.b2CollidePoly(e,this.m_shape1,this.m_shape2,false);if(e.pointCount>0){var s=[false,false];for(var o=0;o<e.pointCount;++o){var u=e.points[o];u.normalImpulse=0;u.tangentImpulse=0;var a=u.id.key;for(var f=0;f<this.m0.pointCount;++f){if(s[f]==true)continue;var l=this.m0.points[f];var c=l.id;if(c.key==a){s[f]=true;u.normalImpulse=l.normalImpulse;u.tangentImpulse=l.tangentImpulse;break}}}this.m_manifoldCount=1}else{this.m_manifoldCount=0}},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2PolyContact.Create=function(e,t,n){return new b2PolyContact(e,t)};b2PolyContact.Destroy=function(e,t){};var b2ContactManager=Class.create();Object.extend(b2ContactManager.prototype,b2PairCallback.prototype);Object.extend(b2ContactManager.prototype,{initialize:function(){this.m_nullContact=new b2NullContact;this.m_world=null;this.m_destroyImmediate=false},PairAdded:function(e,t){var n=e;var r=t;var i=n.m_body;var s=r.m_body;if(i.IsStatic()&&s.IsStatic()){return this.m_nullContact}if(n.m_body==r.m_body){return this.m_nullContact}if(s.IsConnected(i)){return this.m_nullContact}if(this.m_world.m_filter!=null&&this.m_world.m_filter.ShouldCollide(n,r)==false){return this.m_nullContact}if(s.m_invMass==0){var o=n;n=r;r=o;var u=i;i=s;s=u}var a=b2Contact.Create(n,r,this.m_world.m_blockAllocator);if(a==null){return this.m_nullContact}else{a.m_prev=null;a.m_next=this.m_world.m_contactList;if(this.m_world.m_contactList!=null){this.m_world.m_contactList.m_prev=a}this.m_world.m_contactList=a;this.m_world.m_contactCount++}return a},PairRemoved:function(e,t,n){if(n==null){return}var r=n;if(r!=this.m_nullContact){if(this.m_destroyImmediate==true){this.DestroyContact(r);r=null}else{r.m_flags|=b2Contact.e_destroyFlag}}},DestroyContact:function(e){if(e.m_prev){e.m_prev.m_next=e.m_next}if(e.m_next){e.m_next.m_prev=e.m_prev}if(e==this.m_world.m_contactList){this.m_world.m_contactList=e.m_next}if(e.GetManifoldCount()>0){var t=e.m_shape1.m_body;var n=e.m_shape2.m_body;var r=e.m_node1;var i=e.m_node2;t.WakeUp();n.WakeUp();if(r.prev){r.prev.next=r.next}if(r.next){r.next.prev=r.prev}if(r==t.m_contactList){t.m_contactList=r.next}r.prev=null;r.next=null;if(i.prev){i.prev.next=i.next}if(i.next){i.next.prev=i.prev}if(i==n.m_contactList){n.m_contactList=i.next}i.prev=null;i.next=null}b2Contact.Destroy(e,this.m_world.m_blockAllocator);--this.m_world.m_contactCount},CleanContactList:function(){var e=this.m_world.m_contactList;while(e!=null){var t=e;e=e.m_next;if(t.m_flags&b2Contact.e_destroyFlag){this.DestroyContact(t);t=null}}},Collide:function(){var e;var t;var n;var r;for(var i=this.m_world.m_contactList;i!=null;i=i.m_next){if(i.m_shape1.m_body.IsSleeping()&&i.m_shape2.m_body.IsSleeping()){continue}var s=i.GetManifoldCount();i.Evaluate();var o=i.GetManifoldCount();if(s==0&&o>0){e=i.m_shape1.m_body;t=i.m_shape2.m_body;n=i.m_node1;r=i.m_node2;n.contact=i;n.other=t;n.prev=null;n.next=e.m_contactList;if(n.next!=null){n.next.prev=i.m_node1}e.m_contactList=i.m_node1;r.contact=i;r.other=e;r.prev=null;r.next=t.m_contactList;if(r.next!=null){r.next.prev=r}t.m_contactList=r}else if(s>0&&o==0){e=i.m_shape1.m_body;t=i.m_shape2.m_body;n=i.m_node1;r=i.m_node2;if(n.prev){n.prev.next=n.next}if(n.next){n.next.prev=n.prev}if(n==e.m_contactList){e.m_contactList=n.next}n.prev=null;n.next=null;if(r.prev){r.prev.next=r.next}if(r.next){r.next.prev=r.prev}if(r==t.m_contactList){t.m_contactList=r.next}r.prev=null;r.next=null}}},m_world:null,m_nullContact:new b2NullContact,m_destroyImmediate:null});var b2World=Class.create();b2World.prototype={initialize:function(e,t,n){this.step=new b2TimeStep;this.m_contactManager=new b2ContactManager;this.m_listener=null;this.m_filter=b2CollisionFilter.b2_defaultFilter;this.m_bodyList=null;this.m_contactList=null;this.m_jointList=null;this.m_bodyCount=0;this.m_contactCount=0;this.m_jointCount=0;this.m_bodyDestroyList=null;this.m_allowSleep=n;this.m_gravity=t;this.m_contactManager.m_world=this;this.m_broadPhase=new b2BroadPhase(e,this.m_contactManager);var r=new b2BodyDef;this.m_groundBody=this.CreateBody(r)},SetListener:function(e){this.m_listener=e},SetFilter:function(e){this.m_filter=e},CreateBody:function(e){var t=new b2Body(e,this);t.m_prev=null;t.m_next=this.m_bodyList;if(this.m_bodyList){this.m_bodyList.m_prev=t}this.m_bodyList=t;++this.m_bodyCount;return t},DestroyBody:function(e){if(e.m_flags&b2Body.e_destroyFlag){return}if(e.m_prev){e.m_prev.m_next=e.m_next}if(e.m_next){e.m_next.m_prev=e.m_prev}if(e==this.m_bodyList){this.m_bodyList=e.m_next}e.m_flags|=b2Body.e_destroyFlag;--this.m_bodyCount;e.m_prev=null;e.m_next=this.m_bodyDestroyList;this.m_bodyDestroyList=e},CleanBodyList:function(){this.m_contactManager.m_destroyImmediate=true;var e=this.m_bodyDestroyList;while(e){var t=e;e=e.m_next;var n=t.m_jointList;while(n){var r=n;n=n.next;if(this.m_listener){this.m_listener.NotifyJointDestroyed(r.joint)}this.DestroyJoint(r.joint)}t.Destroy()}this.m_bodyDestroyList=null;this.m_contactManager.m_destroyImmediate=false},CreateJoint:function(e){var t=b2Joint.Create(e,this.m_blockAllocator);t.m_prev=null;t.m_next=this.m_jointList;if(this.m_jointList){this.m_jointList.m_prev=t}this.m_jointList=t;++this.m_jointCount;t.m_node1.joint=t;t.m_node1.other=t.m_body2;t.m_node1.prev=null;t.m_node1.next=t.m_body1.m_jointList;if(t.m_body1.m_jointList)t.m_body1.m_jointList.prev=t.m_node1;t.m_body1.m_jointList=t.m_node1;t.m_node2.joint=t;t.m_node2.other=t.m_body1;t.m_node2.prev=null;t.m_node2.next=t.m_body2.m_jointList;if(t.m_body2.m_jointList)t.m_body2.m_jointList.prev=t.m_node2;t.m_body2.m_jointList=t.m_node2;if(e.collideConnected==false){var n=e.body1.m_shapeCount<e.body2.m_shapeCount?e.body1:e.body2;for(var r=n.m_shapeList;r;r=r.m_next){r.ResetProxy(this.m_broadPhase)}}return t},DestroyJoint:function(e){var t=e.m_collideConnected;if(e.m_prev){e.m_prev.m_next=e.m_next}if(e.m_next){e.m_next.m_prev=e.m_prev}if(e==this.m_jointList){this.m_jointList=e.m_next}var n=e.m_body1;var r=e.m_body2;n.WakeUp();r.WakeUp();if(e.m_node1.prev){e.m_node1.prev.next=e.m_node1.next}if(e.m_node1.next){e.m_node1.next.prev=e.m_node1.prev}if(e.m_node1==n.m_jointList){n.m_jointList=e.m_node1.next}e.m_node1.prev=null;e.m_node1.next=null;if(e.m_node2.prev){e.m_node2.prev.next=e.m_node2.next}if(e.m_node2.next){e.m_node2.next.prev=e.m_node2.prev}if(e.m_node2==r.m_jointList){r.m_jointList=e.m_node2.next}e.m_node2.prev=null;e.m_node2.next=null;b2Joint.Destroy(e,this.m_blockAllocator);--this.m_jointCount;if(t==false){var i=n.m_shapeCount<r.m_shapeCount?n:r;for(var s=i.m_shapeList;s;s=s.m_next){s.ResetProxy(this.m_broadPhase)}}},GetGroundBody:function(){return this.m_groundBody},step:new b2TimeStep,Step:function(e,t){var n;var r;this.step.dt=e;this.step.iterations=t;if(e>0){this.step.inv_dt=1/e}else{this.step.inv_dt=0}this.m_positionIterationCount=0;this.m_contactManager.CleanContactList();this.CleanBodyList();this.m_contactManager.Collide();var i=new b2Island(this.m_bodyCount,this.m_contactCount,this.m_jointCount,this.m_stackAllocator);for(n=this.m_bodyList;n!=null;n=n.m_next){n.m_flags&=~b2Body.e_islandFlag}for(var s=this.m_contactList;s!=null;s=s.m_next){s.m_flags&=~b2Contact.e_islandFlag}for(var o=this.m_jointList;o!=null;o=o.m_next){o.m_islandFlag=false}var u=this.m_bodyCount;var a=new Array(this.m_bodyCount);for(var f=0;f<this.m_bodyCount;f++)a[f]=null;for(var l=this.m_bodyList;l!=null;l=l.m_next){if(l.m_flags&(b2Body.e_staticFlag|b2Body.e_islandFlag|b2Body.e_sleepFlag|b2Body.e_frozenFlag)){continue}i.Clear();var c=0;a[c++]=l;l.m_flags|=b2Body.e_islandFlag;while(c>0){n=a[--c];i.AddBody(n);n.m_flags&=~b2Body.e_sleepFlag;if(n.m_flags&b2Body.e_staticFlag){continue}for(var h=n.m_contactList;h!=null;h=h.next){if(h.contact.m_flags&b2Contact.e_islandFlag){continue}i.AddContact(h.contact);h.contact.m_flags|=b2Contact.e_islandFlag;r=h.other;if(r.m_flags&b2Body.e_islandFlag){continue}a[c++]=r;r.m_flags|=b2Body.e_islandFlag}for(var p=n.m_jointList;p!=null;p=p.next){if(p.joint.m_islandFlag==true){continue}i.AddJoint(p.joint);p.joint.m_islandFlag=true;r=p.other;if(r.m_flags&b2Body.e_islandFlag){continue}a[c++]=r;r.m_flags|=b2Body.e_islandFlag}}i.Solve(this.step,this.m_gravity);this.m_positionIterationCount=b2Math.b2Max(this.m_positionIterationCount,b2Island.m_positionIterationCount);if(this.m_allowSleep){i.UpdateSleep(e)}for(var d=0;d<i.m_bodyCount;++d){n=i.m_bodies[d];if(n.m_flags&b2Body.e_staticFlag){n.m_flags&=~b2Body.e_islandFlag}if(n.IsFrozen()&&this.m_listener){var v=this.m_listener.NotifyBoundaryViolated(n);if(v==b2WorldListener.b2_destroyBody){this.DestroyBody(n);n=null;i.m_bodies[d]=null}}}}this.m_broadPhase.Commit()},Query:function(e,t,n){var r=new Array;var i=this.m_broadPhase.QueryAABB(e,r,n);for(var s=0;s<i;++s){t[s]=r[s]}return i},GetBodyList:function(){return this.m_bodyList},GetJointList:function(){return this.m_jointList},GetContactList:function(){return this.m_contactList},m_blockAllocator:null,m_stackAllocator:null,m_broadPhase:null,m_contactManager:new b2ContactManager,m_bodyList:null,m_contactList:null,m_jointList:null,m_bodyCount:0,m_contactCount:0,m_jointCount:0,m_bodyDestroyList:null,m_gravity:null,m_allowSleep:null,m_groundBody:null,m_listener:null,m_filter:null,m_positionIterationCount:0};b2World.s_enablePositionCorrection=1;b2World.s_enableWarmStarting=1;var b2WorldListener=Class.create();b2WorldListener.prototype={NotifyJointDestroyed:function(e){},NotifyBoundaryViolated:function(e){return b2WorldListener.b2_freezeBody},initialize:function(){}};b2WorldListener.b2_freezeBody=0;b2WorldListener.b2_destroyBody=1;var b2JointNode=Class.create();b2JointNode.prototype={other:null,joint:null,prev:null,next:null,initialize:function(){}};var b2Joint=Class.create();b2Joint.prototype={GetType:function(){return this.m_type},GetAnchor1:function(){return null},GetAnchor2:function(){return null},GetReactionForce:function(e){return null},GetReactionTorque:function(e){return 0},GetBody1:function(){return this.m_body1},GetBody2:function(){return this.m_body2},GetNext:function(){return this.m_next},GetUserData:function(){return this.m_userData},initialize:function(e){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=e.type;this.m_prev=null;this.m_next=null;this.m_body1=e.body1;this.m_body2=e.body2;this.m_collideConnected=e.collideConnected;this.m_islandFlag=false;this.m_userData=e.userData},PrepareVelocitySolver:function(){},SolveVelocityConstraints:function(e){},PreparePositionSolver:function(){},SolvePositionConstraints:function(){return false},m_type:0,m_prev:null,m_next:null,m_node1:new b2JointNode,m_node2:new b2JointNode,m_body1:null,m_body2:null,m_islandFlag:null,m_collideConnected:null,m_userData:null};b2Joint.Create=function(e,t){var n=null;switch(e.type){case b2Joint.e_distanceJoint:{n=new b2DistanceJoint(e)}break;case b2Joint.e_mouseJoint:{n=new b2MouseJoint(e)}break;case b2Joint.e_prismaticJoint:{n=new b2PrismaticJoint(e)}break;case b2Joint.e_revoluteJoint:{n=new b2RevoluteJoint(e)}break;case b2Joint.e_pulleyJoint:{n=new b2PulleyJoint(e)}break;case b2Joint.e_gearJoint:{n=new b2GearJoint(e)}break;default:break}return n};b2Joint.Destroy=function(e,t){};b2Joint.e_unknownJoint=0;b2Joint.e_revoluteJoint=1;b2Joint.e_prismaticJoint=2;b2Joint.e_distanceJoint=3;b2Joint.e_pulleyJoint=4;b2Joint.e_mouseJoint=5;b2Joint.e_gearJoint=6;b2Joint.e_inactiveLimit=0;b2Joint.e_atLowerLimit=1;b2Joint.e_atUpperLimit=2;b2Joint.e_equalLimits=3;var b2JointDef=Class.create();b2JointDef.prototype={initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false},type:0,userData:null,body1:null,body2:null,collideConnected:null};var b2DistanceJoint=Class.create();Object.extend(b2DistanceJoint.prototype,b2Joint.prototype);Object.extend(b2DistanceJoint.prototype,{initialize:function(e){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=e.type;this.m_prev=null;this.m_next=null;this.m_body1=e.body1;this.m_body2=e.body2;this.m_collideConnected=e.collideConnected;this.m_islandFlag=false;this.m_userData=e.userData;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_u=new b2Vec2;var t;var n;var r;t=this.m_body1.m_R;n=e.anchorPoint1.x-this.m_body1.m_position.x;r=e.anchorPoint1.y-this.m_body1.m_position.y;this.m_localAnchor1.x=n*t.col1.x+r*t.col1.y;this.m_localAnchor1.y=n*t.col2.x+r*t.col2.y;t=this.m_body2.m_R;n=e.anchorPoint2.x-this.m_body2.m_position.x;r=e.anchorPoint2.y-this.m_body2.m_position.y;this.m_localAnchor2.x=n*t.col1.x+r*t.col1.y;this.m_localAnchor2.y=n*t.col2.x+r*t.col2.y;n=e.anchorPoint2.x-e.anchorPoint1.x;r=e.anchorPoint2.y-e.anchorPoint1.y;this.m_length=Math.sqrt(n*n+r*r);this.m_impulse=0},PrepareVelocitySolver:function(){var e;e=this.m_body1.m_R;var t=e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y;var n=e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y;e=this.m_body2.m_R;var r=e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y;var i=e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y;this.m_u.x=this.m_body2.m_position.x+r-this.m_body1.m_position.x-t;this.m_u.y=this.m_body2.m_position.y+i-this.m_body1.m_position.y-n;var s=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);if(s>b2Settings.b2_linearSlop){this.m_u.Multiply(1/s)}else{this.m_u.SetZero()}var o=t*this.m_u.y-n*this.m_u.x;var u=r*this.m_u.y-i*this.m_u.x;this.m_mass=this.m_body1.m_invMass+this.m_body1.m_invI*o*o+this.m_body2.m_invMass+this.m_body2.m_invI*u*u;this.m_mass=1/this.m_mass;if(b2World.s_enableWarmStarting){var a=this.m_impulse*this.m_u.x;var f=this.m_impulse*this.m_u.y;this.m_body1.m_linearVelocity.x-=this.m_body1.m_invMass*a;this.m_body1.m_linearVelocity.y-=this.m_body1.m_invMass*f;this.m_body1.m_angularVelocity-=this.m_body1.m_invI*(t*f-n*a);this.m_body2.m_linearVelocity.x+=this.m_body2.m_invMass*a;this.m_body2.m_linearVelocity.y+=this.m_body2.m_invMass*f;this.m_body2.m_angularVelocity+=this.m_body2.m_invI*(r*f-i*a)}else{this.m_impulse=0}},SolveVelocityConstraints:function(e){var t;t=this.m_body1.m_R;var n=t.col1.x*this.m_localAnchor1.x+t.col2.x*this.m_localAnchor1.y;var r=t.col1.y*this.m_localAnchor1.x+t.col2.y*this.m_localAnchor1.y;t=this.m_body2.m_R;var i=t.col1.x*this.m_localAnchor2.x+t.col2.x*this.m_localAnchor2.y;var s=t.col1.y*this.m_localAnchor2.x+t.col2.y*this.m_localAnchor2.y;var o=this.m_body1.m_linearVelocity.x+ -this.m_body1.m_angularVelocity*r;var u=this.m_body1.m_linearVelocity.y+this.m_body1.m_angularVelocity*n;var a=this.m_body2.m_linearVelocity.x+ -this.m_body2.m_angularVelocity*s;var f=this.m_body2.m_linearVelocity.y+this.m_body2.m_angularVelocity*i;var l=this.m_u.x*(a-o)+this.m_u.y*(f-u);var c=-this.m_mass*l;this.m_impulse+=c;var h=c*this.m_u.x;var p=c*this.m_u.y;this.m_body1.m_linearVelocity.x-=this.m_body1.m_invMass*h;this.m_body1.m_linearVelocity.y-=this.m_body1.m_invMass*p;this.m_body1.m_angularVelocity-=this.m_body1.m_invI*(n*p-r*h);this.m_body2.m_linearVelocity.x+=this.m_body2.m_invMass*h;this.m_body2.m_linearVelocity.y+=this.m_body2.m_invMass*p;this.m_body2.m_angularVelocity+=this.m_body2.m_invI*(i*p-s*h)},SolvePositionConstraints:function(){var e;e=this.m_body1.m_R;var t=e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y;var n=e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y;e=this.m_body2.m_R;var r=e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y;var i=e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y;var s=this.m_body2.m_position.x+r-this.m_body1.m_position.x-t;var o=this.m_body2.m_position.y+i-this.m_body1.m_position.y-n;var u=Math.sqrt(s*s+o*o);s/=u;o/=u;var a=u-this.m_length;a=b2Math.b2Clamp(a,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);var f=-this.m_mass*a;this.m_u.Set(s,o);var l=f*this.m_u.x;var c=f*this.m_u.y;this.m_body1.m_position.x-=this.m_body1.m_invMass*l;this.m_body1.m_position.y-=this.m_body1.m_invMass*c;this.m_body1.m_rotation-=this.m_body1.m_invI*(t*c-n*l);this.m_body2.m_position.x+=this.m_body2.m_invMass*l;this.m_body2.m_position.y+=this.m_body2.m_invMass*c;this.m_body2.m_rotation+=this.m_body2.m_invI*(r*c-i*l);this.m_body1.m_R.Set(this.m_body1.m_rotation);this.m_body2.m_R.Set(this.m_body2.m_rotation);return b2Math.b2Abs(a)<b2Settings.b2_linearSlop},GetAnchor1:function(){return b2Math.AddVV(this.m_body1.m_position,b2Math.b2MulMV(this.m_body1.m_R,this.m_localAnchor1))},GetAnchor2:function(){return b2Math.AddVV(this.m_body2.m_position,b2Math.b2MulMV(this.m_body2.m_R,this.m_localAnchor2))},GetReactionForce:function(e){var t=new b2Vec2;t.SetV(this.m_u);t.Multiply(this.m_impulse*e);return t},GetReactionTorque:function(e){return 0},m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_u:new b2Vec2,m_impulse:null,m_mass:null,m_length:null});var b2DistanceJointDef=Class.create();Object.extend(b2DistanceJointDef.prototype,b2JointDef.prototype);Object.extend(b2DistanceJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.anchorPoint1=new b2Vec2;this.anchorPoint2=new b2Vec2;this.type=b2Joint.e_distanceJoint},anchorPoint1:new b2Vec2,anchorPoint2:new b2Vec2});var b2Jacobian=Class.create();b2Jacobian.prototype={linear1:new b2Vec2,angular1:null,linear2:new b2Vec2,angular2:null,SetZero:function(){this.linear1.SetZero();this.angular1=0;this.linear2.SetZero();this.angular2=0},Set:function(e,t,n,r){this.linear1.SetV(e);this.angular1=t;this.linear2.SetV(n);this.angular2=r},Compute:function(e,t,n,r){return this.linear1.x*e.x+this.linear1.y*e.y+this.angular1*t+(this.linear2.x*n.x+this.linear2.y*n.y)+this.angular2*r},initialize:function(){this.linear1=new b2Vec2;this.linear2=new b2Vec2}};var b2GearJoint=Class.create();Object.extend(b2GearJoint.prototype,b2Joint.prototype);Object.extend(b2GearJoint.prototype,{GetAnchor1:function(){var e=this.m_body1.m_R;return new b2Vec2(this.m_body1.m_position.x+(e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y),this.m_body1.m_position.y+(e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y))},GetAnchor2:function(){var e=this.m_body2.m_R;return new b2Vec2(this.m_body2.m_position.x+(e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y),this.m_body2.m_position.y+(e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y))},GetReactionForce:function(e){return new b2Vec2},GetReactionTorque:function(e){return 0},GetRatio:function(){return this.m_ratio},initialize:function(e){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=e.type;this.m_prev=null;this.m_next=null;this.m_body1=e.body1;this.m_body2=e.body2;this.m_collideConnected=e.collideConnected;this.m_islandFlag=false;this.m_userData=e.userData;this.m_groundAnchor1=new b2Vec2;this.m_groundAnchor2=new b2Vec2;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_J=new b2Jacobian;this.m_revolute1=null;this.m_prismatic1=null;this.m_revolute2=null;this.m_prismatic2=null;var t;var n;this.m_ground1=e.joint1.m_body1;this.m_body1=e.joint1.m_body2;if(e.joint1.m_type==b2Joint.e_revoluteJoint){this.m_revolute1=e.joint1;this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1);this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2);t=this.m_revolute1.GetJointAngle()}else{this.m_prismatic1=e.joint1;this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1);this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2);t=this.m_prismatic1.GetJointTranslation()}this.m_ground2=e.joint2.m_body1;this.m_body2=e.joint2.m_body2;if(e.joint2.m_type==b2Joint.e_revoluteJoint){this.m_revolute2=e.joint2;this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1);this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2);n=this.m_revolute2.GetJointAngle()}else{this.m_prismatic2=e.joint2;this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1);this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2);n=this.m_prismatic2.GetJointTranslation()}this.m_ratio=e.ratio;this.m_constant=t+this.m_ratio*n;this.m_impulse=0},PrepareVelocitySolver:function(){var e=this.m_ground1;var t=this.m_ground2;var n=this.m_body1;var r=this.m_body2;var i;var s;var o;var u;var a;var f;var l;var c=0;this.m_J.SetZero();if(this.m_revolute1){this.m_J.angular1=-1;c+=n.m_invI}else{a=e.m_R;f=this.m_prismatic1.m_localXAxis1;i=a.col1.x*f.x+a.col2.x*f.y;s=a.col1.y*f.x+a.col2.y*f.y;a=n.m_R;o=a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y;u=a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y;l=o*s-u*i;this.m_J.linear1.Set(-i,-s);this.m_J.angular1=-l;c+=n.m_invMass+n.m_invI*l*l}if(this.m_revolute2){this.m_J.angular2=-this.m_ratio;c+=this.m_ratio*this.m_ratio*r.m_invI}else{a=t.m_R;f=this.m_prismatic2.m_localXAxis1;i=a.col1.x*f.x+a.col2.x*f.y;s=a.col1.y*f.x+a.col2.y*f.y;a=r.m_R;o=a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y;u=a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y;l=o*s-u*i;this.m_J.linear2.Set(-this.m_ratio*i,-this.m_ratio*s);this.m_J.angular2=-this.m_ratio*l;c+=this.m_ratio*this.m_ratio*(r.m_invMass+r.m_invI*l*l)}this.m_mass=1/c;n.m_linearVelocity.x+=n.m_invMass*this.m_impulse*this.m_J.linear1.x;n.m_linearVelocity.y+=n.m_invMass*this.m_impulse*this.m_J.linear1.y;n.m_angularVelocity+=n.m_invI*this.m_impulse*this.m_J.angular1;r.m_linearVelocity.x+=r.m_invMass*this.m_impulse*this.m_J.linear2.x;r.m_linearVelocity.y+=r.m_invMass*this.m_impulse*this.m_J.linear2.y;r.m_angularVelocity+=r.m_invI*this.m_impulse*this.m_J.angular2},SolveVelocityConstraints:function(e){var t=this.m_body1;var n=this.m_body2;var r=this.m_J.Compute(t.m_linearVelocity,t.m_angularVelocity,n.m_linearVelocity,n.m_angularVelocity);var i=-this.m_mass*r;this.m_impulse+=i;t.m_linearVelocity.x+=t.m_invMass*i*this.m_J.linear1.x;t.m_linearVelocity.y+=t.m_invMass*i*this.m_J.linear1.y;t.m_angularVelocity+=t.m_invI*i*this.m_J.angular1;n.m_linearVelocity.x+=n.m_invMass*i*this.m_J.linear2.x;n.m_linearVelocity.y+=n.m_invMass*i*this.m_J.linear2.y;n.m_angularVelocity+=n.m_invI*i*this.m_J.angular2},SolvePositionConstraints:function(){var e=0;var t=this.m_body1;var n=this.m_body2;var r;var i;if(this.m_revolute1){r=this.m_revolute1.GetJointAngle()}else{r=this.m_prismatic1.GetJointTranslation()}if(this.m_revolute2){i=this.m_revolute2.GetJointAngle()}else{i=this.m_prismatic2.GetJointTranslation()}var s=this.m_constant-(r+this.m_ratio*i);var o=-this.m_mass*s;t.m_position.x+=t.m_invMass*o*this.m_J.linear1.x;t.m_position.y+=t.m_invMass*o*this.m_J.linear1.y;t.m_rotation+=t.m_invI*o*this.m_J.angular1;n.m_position.x+=n.m_invMass*o*this.m_J.linear2.x;n.m_position.y+=n.m_invMass*o*this.m_J.linear2.y;n.m_rotation+=n.m_invI*o*this.m_J.angular2;t.m_R.Set(t.m_rotation);n.m_R.Set(n.m_rotation);return e<b2Settings.b2_linearSlop},m_ground1:null,m_ground2:null,m_revolute1:null,m_prismatic1:null,m_revolute2:null,m_prismatic2:null,m_groundAnchor1:new b2Vec2,m_groundAnchor2:new b2Vec2,m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_J:new b2Jacobian,m_constant:null,m_ratio:null,m_mass:null,m_impulse:null});var b2GearJointDef=Class.create();Object.extend(b2GearJointDef.prototype,b2JointDef.prototype);Object.extend(b2GearJointDef.prototype,{initialize:function(){this.type=b2Joint.e_gearJoint;this.joint1=null;this.joint2=null;this.ratio=1},joint1:null,joint2:null,ratio:null});var b2MouseJoint=Class.create();Object.extend(b2MouseJoint.prototype,b2Joint.prototype);Object.extend(b2MouseJoint.prototype,{GetAnchor1:function(){return this.m_target},GetAnchor2:function(){var e=b2Math.b2MulMV(this.m_body2.m_R,this.m_localAnchor);e.Add(this.m_body2.m_position);return e},GetReactionForce:function(e){var t=new b2Vec2;t.SetV(this.m_impulse);t.Multiply(e);return t},GetReactionTorque:function(e){return 0},SetTarget:function(e){this.m_body2.WakeUp();this.m_target=e},initialize:function(e){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=e.type;this.m_prev=null;this.m_next=null;this.m_body1=e.body1;this.m_body2=e.body2;this.m_collideConnected=e.collideConnected;this.m_islandFlag=false;this.m_userData=e.userData;this.K=new b2Mat22;this.K1=new b2Mat22;this.K2=new b2Mat22;this.m_localAnchor=new b2Vec2;this.m_target=new b2Vec2;this.m_impulse=new b2Vec2;this.m_ptpMass=new b2Mat22;this.m_C=new b2Vec2;this.m_target.SetV(e.target);var t=this.m_target.x-this.m_body2.m_position.x;var n=this.m_target.y-this.m_body2.m_position.y;this.m_localAnchor.x=t*this.m_body2.m_R.col1.x+n*this.m_body2.m_R.col1.y;this.m_localAnchor.y=t*this.m_body2.m_R.col2.x+n*this.m_body2.m_R.col2.y;this.m_maxForce=e.maxForce;this.m_impulse.SetZero();var r=this.m_body2.m_mass;var i=2*b2Settings.b2_pi*e.frequencyHz;var s=2*r*e.dampingRatio*i;var o=r*i*i;this.m_gamma=1/(s+e.timeStep*o);this.m_beta=e.timeStep*o/(s+e.timeStep*o)},K:new b2Mat22,K1:new b2Mat22,K2:new b2Mat22,PrepareVelocitySolver:function(){var e=this.m_body2;var t;t=e.m_R;var n=t.col1.x*this.m_localAnchor.x+t.col2.x*this.m_localAnchor.y;var r=t.col1.y*this.m_localAnchor.x+t.col2.y*this.m_localAnchor.y;var i=e.m_invMass;var s=e.m_invI;this.K1.col1.x=i;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=i;this.K2.col1.x=s*r*r;this.K2.col2.x=-s*n*r;this.K2.col1.y=-s*n*r;this.K2.col2.y=s*n*n;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.col1.x+=this.m_gamma;this.K.col2.y+=this.m_gamma;this.K.Invert(this.m_ptpMass);this.m_C.x=e.m_position.x+n-this.m_target.x;this.m_C.y=e.m_position.y+r-this.m_target.y;e.m_angularVelocity*=.98;var o=this.m_impulse.x;var u=this.m_impulse.y;e.m_linearVelocity.x+=i*o;e.m_linearVelocity.y+=i*u;e.m_angularVelocity+=s*(n*u-r*o)},SolveVelocityConstraints:function(e){var t=this.m_body2;var n;n=t.m_R;var r=n.col1.x*this.m_localAnchor.x+n.col2.x*this.m_localAnchor.y;var i=n.col1.y*this.m_localAnchor.x+n.col2.y*this.m_localAnchor.y;var s=t.m_linearVelocity.x+ -t.m_angularVelocity*i;var o=t.m_linearVelocity.y+t.m_angularVelocity*r;n=this.m_ptpMass;var u=s+this.m_beta*e.inv_dt*this.m_C.x+this.m_gamma*this.m_impulse.x;var a=o+this.m_beta*e.inv_dt*this.m_C.y+this.m_gamma*this.m_impulse.y;var f=-(n.col1.x*u+n.col2.x*a);var l=-(n.col1.y*u+n.col2.y*a);var c=this.m_impulse.x;var h=this.m_impulse.y;this.m_impulse.x+=f;this.m_impulse.y+=l;var p=this.m_impulse.Length();if(p>e.dt*this.m_maxForce){this.m_impulse.Multiply(e.dt*this.m_maxForce/p)}f=this.m_impulse.x-c;l=this.m_impulse.y-h;t.m_linearVelocity.x+=t.m_invMass*f;t.m_linearVelocity.y+=t.m_invMass*l;t.m_angularVelocity+=t.m_invI*(r*l-i*f)},SolvePositionConstraints:function(){return true},m_localAnchor:new b2Vec2,m_target:new b2Vec2,m_impulse:new b2Vec2,m_ptpMass:new b2Mat22,m_C:new b2Vec2,m_maxForce:null,m_beta:null,m_gamma:null});var b2MouseJointDef=Class.create();Object.extend(b2MouseJointDef.prototype,b2JointDef.prototype);Object.extend(b2MouseJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.target=new b2Vec2;this.type=b2Joint.e_mouseJoint;this.maxForce=0;this.frequencyHz=5;this.dampingRatio=.7;this.timeStep=1/60},target:new b2Vec2,maxForce:null,frequencyHz:null,dampingRatio:null,timeStep:null});var b2PrismaticJoint=Class.create();Object.extend(b2PrismaticJoint.prototype,b2Joint.prototype);Object.extend(b2PrismaticJoint.prototype,{GetAnchor1:function(){var e=this.m_body1;var t=new b2Vec2;t.SetV(this.m_localAnchor1);t.MulM(e.m_R);t.Add(e.m_position);return t},GetAnchor2:function(){var e=this.m_body2;var t=new b2Vec2;t.SetV(this.m_localAnchor2);t.MulM(e.m_R);t.Add(e.m_position);return t},GetJointTranslation:function(){var e=this.m_body1;var t=this.m_body2;var n;n=e.m_R;var r=n.col1.x*this.m_localAnchor1.x+n.col2.x*this.m_localAnchor1.y;var i=n.col1.y*this.m_localAnchor1.x+n.col2.y*this.m_localAnchor1.y;n=t.m_R;var s=n.col1.x*this.m_localAnchor2.x+n.col2.x*this.m_localAnchor2.y;var o=n.col1.y*this.m_localAnchor2.x+n.col2.y*this.m_localAnchor2.y;var u=e.m_position.x+r;var a=e.m_position.y+i;var f=t.m_position.x+s;var l=t.m_position.y+o;var c=f-u;var h=l-a;n=e.m_R;var p=n.col1.x*this.m_localXAxis1.x+n.col2.x*this.m_localXAxis1.y;var d=n.col1.y*this.m_localXAxis1.x+n.col2.y*this.m_localXAxis1.y;var v=p*c+d*h;return v},GetJointSpeed:function(){var e=this.m_body1;var t=this.m_body2;var n;n=e.m_R;var r=n.col1.x*this.m_localAnchor1.x+n.col2.x*this.m_localAnchor1.y;var i=n.col1.y*this.m_localAnchor1.x+n.col2.y*this.m_localAnchor1.y;n=t.m_R;var s=n.col1.x*this.m_localAnchor2.x+n.col2.x*this.m_localAnchor2.y;var o=n.col1.y*this.m_localAnchor2.x+n.col2.y*this.m_localAnchor2.y;var u=e.m_position.x+r;var a=e.m_position.y+i;var f=t.m_position.x+s;var l=t.m_position.y+o;var c=f-u;var h=l-a;n=e.m_R;var p=n.col1.x*this.m_localXAxis1.x+n.col2.x*this.m_localXAxis1.y;var d=n.col1.y*this.m_localXAxis1.x+n.col2.y*this.m_localXAxis1.y;var v=e.m_linearVelocity;var m=t.m_linearVelocity;var g=e.m_angularVelocity;var y=t.m_angularVelocity;var b=c*-g*d+h*g*p+(p*(m.x+ -y*o-v.x- -g*i)+d*(m.y+y*s-v.y-g*r));return b},GetMotorForce:function(e){return e*this.m_motorImpulse},SetMotorSpeed:function(e){this.m_motorSpeed=e},SetMotorForce:function(e){this.m_maxMotorForce=e},GetReactionForce:function(e){var t=e*this.m_limitImpulse;var n;n=this.m_body1.m_R;var r=t*(n.col1.x*this.m_localXAxis1.x+n.col2.x*this.m_localXAxis1.y);var i=t*(n.col1.y*this.m_localXAxis1.x+n.col2.y*this.m_localXAxis1.y);var s=t*(n.col1.x*this.m_localYAxis1.x+n.col2.x*this.m_localYAxis1.y);var o=t*(n.col1.y*this.m_localYAxis1.x+n.col2.y*this.m_localYAxis1.y);return new b2Vec2(r+s,i+o)},GetReactionTorque:function(e){return e*this.m_angularImpulse},initialize:function(e){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=e.type;this.m_prev=null;this.m_next=null;this.m_body1=e.body1;this.m_body2=e.body2;this.m_collideConnected=e.collideConnected;this.m_islandFlag=false;this.m_userData=e.userData;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_localXAxis1=new b2Vec2;this.m_localYAxis1=new b2Vec2;this.m_linearJacobian=new b2Jacobian;this.m_motorJacobian=new b2Jacobian;var t;var n;var r;t=this.m_body1.m_R;n=e.anchorPoint.x-this.m_body1.m_position.x;r=e.anchorPoint.y-this.m_body1.m_position.y;this.m_localAnchor1.Set(n*t.col1.x+r*t.col1.y,n*t.col2.x+r*t.col2.y);t=this.m_body2.m_R;n=e.anchorPoint.x-this.m_body2.m_position.x;r=e.anchorPoint.y-this.m_body2.m_position.y;this.m_localAnchor2.Set(n*t.col1.x+r*t.col1.y,n*t.col2.x+r*t.col2.y);t=this.m_body1.m_R;n=e.axis.x;r=e.axis.y;this.m_localXAxis1.Set(n*t.col1.x+r*t.col1.y,n*t.col2.x+r*t.col2.y);this.m_localYAxis1.x=-this.m_localXAxis1.y;this.m_localYAxis1.y=this.m_localXAxis1.x;this.m_initialAngle=this.m_body2.m_rotation-this.m_body1.m_rotation;this.m_linearJacobian.SetZero();this.m_linearMass=0;this.m_linearImpulse=0;this.m_angularMass=0;this.m_angularImpulse=0;this.m_motorJacobian.SetZero();this.m_motorMass=0;this.m_motorImpulse=0;this.m_limitImpulse=0;this.m_limitPositionImpulse=0;this.m_lowerTranslation=e.lowerTranslation;this.m_upperTranslation=e.upperTranslation;this.m_maxMotorForce=e.motorForce;this.m_motorSpeed=e.motorSpeed;this.m_enableLimit=e.enableLimit;this.m_enableMotor=e.enableMotor},PrepareVelocitySolver:function(){var e=this.m_body1;var t=this.m_body2;var n;n=e.m_R;var r=n.col1.x*this.m_localAnchor1.x+n.col2.x*this.m_localAnchor1.y;var i=n.col1.y*this.m_localAnchor1.x+n.col2.y*this.m_localAnchor1.y;n=t.m_R;var s=n.col1.x*this.m_localAnchor2.x+n.col2.x*this.m_localAnchor2.y;var o=n.col1.y*this.m_localAnchor2.x+n.col2.y*this.m_localAnchor2.y;var u=e.m_invMass;var a=t.m_invMass;var f=e.m_invI;var l=t.m_invI;n=e.m_R;var c=n.col1.x*this.m_localYAxis1.x+n.col2.x*this.m_localYAxis1.y;var h=n.col1.y*this.m_localYAxis1.x+n.col2.y*this.m_localYAxis1.y;var p=t.m_position.x+s-e.m_position.x;var d=t.m_position.y+o-e.m_position.y;this.m_linearJacobian.linear1.x=-c;this.m_linearJacobian.linear1.y=-h;this.m_linearJacobian.linear2.x=c;this.m_linearJacobian.linear2.y=h;this.m_linearJacobian.angular1=-(p*h-d*c);this.m_linearJacobian.angular2=s*h-o*c;this.m_linearMass=u+f*this.m_linearJacobian.angular1*this.m_linearJacobian.angular1+a+l*this.m_linearJacobian.angular2*this.m_linearJacobian.angular2;this.m_linearMass=1/this.m_linearMass;this.m_angularMass=1/(f+l);if(this.m_enableLimit||this.m_enableMotor){n=e.m_R;var v=n.col1.x*this.m_localXAxis1.x+n.col2.x*this.m_localXAxis1.y;var m=n.col1.y*this.m_localXAxis1.x+n.col2.y*this.m_localXAxis1.y;this.m_motorJacobian.linear1.x=-v;this.m_motorJacobian.linear1.y=-m;this.m_motorJacobian.linear2.x=v;this.m_motorJacobian.linear2.y=m;this.m_motorJacobian.angular1=-(p*m-d*v);this.m_motorJacobian.angular2=s*m-o*v;this.m_motorMass=u+f*this.m_motorJacobian.angular1*this.m_motorJacobian.angular1+a+l*this.m_motorJacobian.angular2*this.m_motorJacobian.angular2;this.m_motorMass=1/this.m_motorMass;if(this.m_enableLimit){var g=p-r;var y=d-i;var b=v*g+m*y;if(b2Math.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b2Settings.b2_linearSlop){this.m_limitState=b2Joint.e_equalLimits}else if(b<=this.m_lowerTranslation){if(this.m_limitState!=b2Joint.e_atLowerLimit){this.m_limitImpulse=0}this.m_limitState=b2Joint.e_atLowerLimit}else if(b>=this.m_upperTranslation){if(this.m_limitState!=b2Joint.e_atUpperLimit){this.m_limitImpulse=0}this.m_limitState=b2Joint.e_atUpperLimit}else{this.m_limitState=b2Joint.e_inactiveLimit;this.m_limitImpulse=0}}}if(this.m_enableMotor==false){this.m_motorImpulse=0}if(this.m_enableLimit==false){this.m_limitImpulse=0}if(b2World.s_enableWarmStarting){var w=this.m_linearImpulse*this.m_linearJacobian.linear1.x+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear1.x;var E=this.m_linearImpulse*this.m_linearJacobian.linear1.y+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear1.y;var S=this.m_linearImpulse*this.m_linearJacobian.linear2.x+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear2.x;var x=this.m_linearImpulse*this.m_linearJacobian.linear2.y+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear2.y;var T=this.m_linearImpulse*this.m_linearJacobian.angular1-this.m_angularImpulse+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.angular1;var N=this.m_linearImpulse*this.m_linearJacobian.angular2+this.m_angularImpulse+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.angular2;e.m_linearVelocity.x+=u*w;e.m_linearVelocity.y+=u*E;e.m_angularVelocity+=f*T;t.m_linearVelocity.x+=a*S;t.m_linearVelocity.y+=a*x;t.m_angularVelocity+=l*N}else{this.m_linearImpulse=0;this.m_angularImpulse=0;this.m_limitImpulse=0;this.m_motorImpulse=0}this.m_limitPositionImpulse=0},SolveVelocityConstraints:function(e){var t=this.m_body1;var n=this.m_body2;var r=t.m_invMass;var i=n.m_invMass;var s=t.m_invI;var o=n.m_invI;var u;var a=this.m_linearJacobian.Compute(t.m_linearVelocity,t.m_angularVelocity,n.m_linearVelocity,n.m_angularVelocity);var f=-this.m_linearMass*a;this.m_linearImpulse+=f;t.m_linearVelocity.x+=r*f*this.m_linearJacobian.linear1.x;t.m_linearVelocity.y+=r*f*this.m_linearJacobian.linear1.y;t.m_angularVelocity+=s*f*this.m_linearJacobian.angular1;n.m_linearVelocity.x+=i*f*this.m_linearJacobian.linear2.x;n.m_linearVelocity.y+=i*f*this.m_linearJacobian.linear2.y;n.m_angularVelocity+=o*f*this.m_linearJacobian.angular2;var l=n.m_angularVelocity-t.m_angularVelocity;var c=-this.m_angularMass*l;this.m_angularImpulse+=c;t.m_angularVelocity-=s*c;n.m_angularVelocity+=o*c;if(this.m_enableMotor&&this.m_limitState!=b2Joint.e_equalLimits){var h=this.m_motorJacobian.Compute(t.m_linearVelocity,t.m_angularVelocity,n.m_linearVelocity,n.m_angularVelocity)-this.m_motorSpeed;var p=-this.m_motorMass*h;var d=this.m_motorImpulse;this.m_motorImpulse=b2Math.b2Clamp(this.m_motorImpulse+p,-e.dt*this.m_maxMotorForce,e.dt*this.m_maxMotorForce);p=this.m_motorImpulse-d;t.m_linearVelocity.x+=r*p*this.m_motorJacobian.linear1.x;t.m_linearVelocity.y+=r*p*this.m_motorJacobian.linear1.y;t.m_angularVelocity+=s*p*this.m_motorJacobian.angular1;n.m_linearVelocity.x+=i*p*this.m_motorJacobian.linear2.x;n.m_linearVelocity.y+=i*p*this.m_motorJacobian.linear2.y;n.m_angularVelocity+=o*p*this.m_motorJacobian.angular2}if(this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit){var v=this.m_motorJacobian.Compute(t.m_linearVelocity,t.m_angularVelocity,n.m_linearVelocity,n.m_angularVelocity);var m=-this.m_motorMass*v;if(this.m_limitState==b2Joint.e_equalLimits){this.m_limitImpulse+=m}else if(this.m_limitState==b2Joint.e_atLowerLimit){u=this.m_limitImpulse;this.m_limitImpulse=b2Math.b2Max(this.m_limitImpulse+m,0);m=this.m_limitImpulse-u}else if(this.m_limitState==b2Joint.e_atUpperLimit){u=this.m_limitImpulse;this.m_limitImpulse=b2Math.b2Min(this.m_limitImpulse+m,0);m=this.m_limitImpulse-u}t.m_linearVelocity.x+=r*m*this.m_motorJacobian.linear1.x;t.m_linearVelocity.y+=r*m*this.m_motorJacobian.linear1.y;t.m_angularVelocity+=s*m*this.m_motorJacobian.angular1;n.m_linearVelocity.x+=i*m*this.m_motorJacobian.linear2.x;n.m_linearVelocity.y+=i*m*this.m_motorJacobian.linear2.y;n.m_angularVelocity+=o*m*this.m_motorJacobian.angular2}},SolvePositionConstraints:function(){var e;var t;var n=this.m_body1;var r=this.m_body2;var i=n.m_invMass;var s=r.m_invMass;var o=n.m_invI;var u=r.m_invI;var a;a=n.m_R;var f=a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y;var l=a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y;a=r.m_R;var c=a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y;var h=a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y;var p=n.m_position.x+f;var d=n.m_position.y+l;var v=r.m_position.x+c;var m=r.m_position.y+h;var g=v-p;var y=m-d;a=n.m_R;var b=a.col1.x*this.m_localYAxis1.x+a.col2.x*this.m_localYAxis1.y;var w=a.col1.y*this.m_localYAxis1.x+a.col2.y*this.m_localYAxis1.y;var E=b*g+w*y;E=b2Math.b2Clamp(E,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);var S=-this.m_linearMass*E;n.m_position.x+=i*S*this.m_linearJacobian.linear1.x;n.m_position.y+=i*S*this.m_linearJacobian.linear1.y;n.m_rotation+=o*S*this.m_linearJacobian.angular1;r.m_position.x+=s*S*this.m_linearJacobian.linear2.x;r.m_position.y+=s*S*this.m_linearJacobian.linear2.y;r.m_rotation+=u*S*this.m_linearJacobian.angular2;var x=b2Math.b2Abs(E);var T=r.m_rotation-n.m_rotation-this.m_initialAngle;T=b2Math.b2Clamp(T,-b2Settings.b2_maxAngularCorrection,b2Settings.b2_maxAngularCorrection);var N=-this.m_angularMass*T;n.m_rotation-=n.m_invI*N;n.m_R.Set(n.m_rotation);r.m_rotation+=r.m_invI*N;r.m_R.Set(r.m_rotation);var C=b2Math.b2Abs(T);if(this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit){a=n.m_R;f=a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y;l=a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y;a=r.m_R;c=a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y;h=a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y;p=n.m_position.x+f;d=n.m_position.y+l;v=r.m_position.x+c;m=r.m_position.y+h;g=v-p;y=m-d;a=n.m_R;var k=a.col1.x*this.m_localXAxis1.x+a.col2.x*this.m_localXAxis1.y;var L=a.col1.y*this.m_localXAxis1.x+a.col2.y*this.m_localXAxis1.y;var A=k*g+L*y;var O=0;if(this.m_limitState==b2Joint.e_equalLimits){e=b2Math.b2Clamp(A,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);O=-this.m_motorMass*e;x=b2Math.b2Max(x,b2Math.b2Abs(T))}else if(this.m_limitState==b2Joint.e_atLowerLimit){e=A-this.m_lowerTranslation;x=b2Math.b2Max(x,-e);e=b2Math.b2Clamp(e+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);O=-this.m_motorMass*e;t=this.m_limitPositionImpulse;this.m_limitPositionImpulse=b2Math.b2Max(this.m_limitPositionImpulse+O,0);O=this.m_limitPositionImpulse-t}else if(this.m_limitState==b2Joint.e_atUpperLimit){e=A-this.m_upperTranslation;x=b2Math.b2Max(x,e);e=b2Math.b2Clamp(e-b2Settings.b2_linearSlop,0,b2Settings.b2_maxLinearCorrection);O=-this.m_motorMass*e;t=this.m_limitPositionImpulse;this.m_limitPositionImpulse=b2Math.b2Min(this.m_limitPositionImpulse+O,0);O=this.m_limitPositionImpulse-t}n.m_position.x+=i*O*this.m_motorJacobian.linear1.x;n.m_position.y+=i*O*this.m_motorJacobian.linear1.y;n.m_rotation+=o*O*this.m_motorJacobian.angular1;n.m_R.Set(n.m_rotation);r.m_position.x+=s*O*this.m_motorJacobian.linear2.x;r.m_position.y+=s*O*this.m_motorJacobian.linear2.y;r.m_rotation+=u*O*this.m_motorJacobian.angular2;r.m_R.Set(r.m_rotation)}return x<=b2Settings.b2_linearSlop&&C<=b2Settings.b2_angularSlop},m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_localXAxis1:new b2Vec2,m_localYAxis1:new b2Vec2,m_initialAngle:null,m_linearJacobian:new b2Jacobian,m_linearMass:null,m_linearImpulse:null,m_angularMass:null,m_angularImpulse:null,m_motorJacobian:new b2Jacobian,m_motorMass:null,m_motorImpulse:null,m_limitImpulse:null,m_limitPositionImpulse:null,m_lowerTranslation:null,m_upperTranslation:null,m_maxMotorForce:null,m_motorSpeed:null,m_enableLimit:null,m_enableMotor:null,m_limitState:0});var b2PrismaticJointDef=Class.create();Object.extend(b2PrismaticJointDef.prototype,b2JointDef.prototype);Object.extend(b2PrismaticJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.type=b2Joint.e_prismaticJoint;this.anchorPoint=new b2Vec2(0,0);this.axis=new b2Vec2(0,0);this.lowerTranslation=0;this.upperTranslation=0;this.motorForce=0;this.motorSpeed=0;this.enableLimit=false;this.enableMotor=false},anchorPoint:null,axis:null,lowerTranslation:null,upperTranslation:null,motorForce:null,motorSpeed:null,enableLimit:null,enableMotor:null});var b2PulleyJoint=Class.create();Object.extend(b2PulleyJoint.prototype,b2Joint.prototype);Object.extend(b2PulleyJoint.prototype,{GetAnchor1:function(){var e=this.m_body1.m_R;return new b2Vec2(this.m_body1.m_position.x+(e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y),this.m_body1.m_position.y+(e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y))},GetAnchor2:function(){var e=this.m_body2.m_R;return new b2Vec2(this.m_body2.m_position.x+(e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y),this.m_body2.m_position.y+(e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y))},GetGroundPoint1:function(){return new b2Vec2(this.m_ground.m_position.x+this.m_groundAnchor1.x,this.m_ground.m_position.y+this.m_groundAnchor1.y)},GetGroundPoint2:function(){return new b2Vec2(this.m_ground.m_position.x+this.m_groundAnchor2.x,this.m_ground.m_position.y+this.m_groundAnchor2.y)},GetReactionForce:function(e){return new b2Vec2},GetReactionTorque:function(e){return 0},GetLength1:function(){var e;e=this.m_body1.m_R;var t=this.m_body1.m_position.x+(e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y);var n=this.m_body1.m_position.y+(e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y);var r=t-(this.m_ground.m_position.x+this.m_groundAnchor1.x);var i=n-(this.m_ground.m_position.y+this.m_groundAnchor1.y);return Math.sqrt(r*r+i*i)},GetLength2:function(){var e;e=this.m_body2.m_R;var t=this.m_body2.m_position.x+(e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y);var n=this.m_body2.m_position.y+(e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y);var r=t-(this.m_ground.m_position.x+this.m_groundAnchor2.x);var i=n-(this.m_ground.m_position.y+this.m_groundAnchor2.y);return Math.sqrt(r*r+i*i)},GetRatio:function(){return this.m_ratio},initialize:function(e){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=e.type;this.m_prev=null;this.m_next=null;this.m_body1=e.body1;this.m_body2=e.body2;this.m_collideConnected=e.collideConnected;this.m_islandFlag=false;this.m_userData=e.userData;this.m_groundAnchor1=new b2Vec2;this.m_groundAnchor2=new b2Vec2;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_u1=new b2Vec2;this.m_u2=new b2Vec2;var t;var n;var r;this.m_ground=this.m_body1.m_world.m_groundBody;this.m_groundAnchor1.x=e.groundPoint1.x-this.m_ground.m_position.x;this.m_groundAnchor1.y=e.groundPoint1.y-this.m_ground.m_position.y;this.m_groundAnchor2.x=e.groundPoint2.x-this.m_ground.m_position.x;this.m_groundAnchor2.y=e.groundPoint2.y-this.m_ground.m_position.y;t=this.m_body1.m_R;n=e.anchorPoint1.x-this.m_body1.m_position.x;r=e.anchorPoint1.y-this.m_body1.m_position.y;this.m_localAnchor1.x=n*t.col1.x+r*t.col1.y;this.m_localAnchor1.y=n*t.col2.x+r*t.col2.y;t=this.m_body2.m_R;n=e.anchorPoint2.x-this.m_body2.m_position.x;r=e.anchorPoint2.y-this.m_body2.m_position.y;this.m_localAnchor2.x=n*t.col1.x+r*t.col1.y;this.m_localAnchor2.y=n*t.col2.x+r*t.col2.y;this.m_ratio=e.ratio;n=e.groundPoint1.x-e.anchorPoint1.x;r=e.groundPoint1.y-e.anchorPoint1.y;var i=Math.sqrt(n*n+r*r);n=e.groundPoint2.x-e.anchorPoint2.x;r=e.groundPoint2.y-e.anchorPoint2.y;var s=Math.sqrt(n*n+r*r);var o=b2Math.b2Max(.5*b2PulleyJoint.b2_minPulleyLength,i);var u=b2Math.b2Max(.5*b2PulleyJoint.b2_minPulleyLength,s);this.m_constant=o+this.m_ratio*u;this.m_maxLength1=b2Math.b2Clamp(e.maxLength1,o,this.m_constant-this.m_ratio*b2PulleyJoint.b2_minPulleyLength);this.m_maxLength2=b2Math.b2Clamp(e.maxLength2,u,(this.m_constant-b2PulleyJoint.b2_minPulleyLength)/this.m_ratio);this.m_pulleyImpulse=0;this.m_limitImpulse1=0;this.m_limitImpulse2=0},PrepareVelocitySolver:function(){var e=this.m_body1;var t=this.m_body2;var n;n=e.m_R;var r=n.col1.x*this.m_localAnchor1.x+n.col2.x*this.m_localAnchor1.y;var i=n.col1.y*this.m_localAnchor1.x+n.col2.y*this.m_localAnchor1.y;n=t.m_R;var s=n.col1.x*this.m_localAnchor2.x+n.col2.x*this.m_localAnchor2.y;var o=n.col1.y*this.m_localAnchor2.x+n.col2.y*this.m_localAnchor2.y;var u=e.m_position.x+r;var a=e.m_position.y+i;var f=t.m_position.x+s;var l=t.m_position.y+o;var c=this.m_ground.m_position.x+this.m_groundAnchor1.x;var h=this.m_ground.m_position.y+this.m_groundAnchor1.y;var p=this.m_ground.m_position.x+this.m_groundAnchor2.x;var d=this.m_ground.m_position.y+this.m_groundAnchor2.y;this.m_u1.Set(u-c,a-h);this.m_u2.Set(f-p,l-d);var v=this.m_u1.Length();var m=this.m_u2.Length();if(v>b2Settings.b2_linearSlop){this.m_u1.Multiply(1/v)}else{this.m_u1.SetZero()}if(m>b2Settings.b2_linearSlop){this.m_u2.Multiply(1/m)}else{this.m_u2.SetZero()}if(v<this.m_maxLength1){this.m_limitState1=b2Joint.e_inactiveLimit;this.m_limitImpulse1=0}else{this.m_limitState1=b2Joint.e_atUpperLimit;this.m_limitPositionImpulse1=0}if(m<this.m_maxLength2){this.m_limitState2=b2Joint.e_inactiveLimit;this.m_limitImpulse2=0}else{this.m_limitState2=b2Joint.e_atUpperLimit;this.m_limitPositionImpulse2=0}var g=r*this.m_u1.y-i*this.m_u1.x;var y=s*this.m_u2.y-o*this.m_u2.x;this.m_limitMass1=e.m_invMass+e.m_invI*g*g;this.m_limitMass2=t.m_invMass+t.m_invI*y*y;this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2;this.m_limitMass1=1/this.m_limitMass1;this.m_limitMass2=1/this.m_limitMass2;this.m_pulleyMass=1/this.m_pulleyMass;var b=(-this.m_pulleyImpulse-this.m_limitImpulse1)*this.m_u1.x;var w=(-this.m_pulleyImpulse-this.m_limitImpulse1)*this.m_u1.y;var E=(-this.m_ratio*this.m_pulleyImpulse-this.m_limitImpulse2)*this.m_u2.x;var S=(-this.m_ratio*this.m_pulleyImpulse-this.m_limitImpulse2)*this.m_u2.y;e.m_linearVelocity.x+=e.m_invMass*b;e.m_linearVelocity.y+=e.m_invMass*w;e.m_angularVelocity+=e.m_invI*(r*w-i*b);t.m_linearVelocity.x+=t.m_invMass*E;t.m_linearVelocity.y+=t.m_invMass*S;t.m_angularVelocity+=t.m_invI*(s*S-o*E)},SolveVelocityConstraints:function(e){var t=this.m_body1;var n=this.m_body2;var r;r=t.m_R;var i=r.col1.x*this.m_localAnchor1.x+r.col2.x*this.m_localAnchor1.y;var s=r.col1.y*this.m_localAnchor1.x+r.col2.y*this.m_localAnchor1.y;r=n.m_R;var o=r.col1.x*this.m_localAnchor2.x+r.col2.x*this.m_localAnchor2.y;var u=r.col1.y*this.m_localAnchor2.x+r.col2.y*this.m_localAnchor2.y;var a;var f;var l;var c;var h;var p;var d;var v;var m;var g;var y;a=t.m_linearVelocity.x+ -t.m_angularVelocity*s;f=t.m_linearVelocity.y+t.m_angularVelocity*i;l=n.m_linearVelocity.x+ -n.m_angularVelocity*u;c=n.m_linearVelocity.y+n.m_angularVelocity*o;m=-(this.m_u1.x*a+this.m_u1.y*f)-this.m_ratio*(this.m_u2.x*l+this.m_u2.y*c);g=-this.m_pulleyMass*m;this.m_pulleyImpulse+=g;h=-g*this.m_u1.x;p=-g*this.m_u1.y;d=-this.m_ratio*g*this.m_u2.x;v=-this.m_ratio*g*this.m_u2.y;t.m_linearVelocity.x+=t.m_invMass*h;t.m_linearVelocity.y+=t.m_invMass*p;t.m_angularVelocity+=t.m_invI*(i*p-s*h);n.m_linearVelocity.x+=n.m_invMass*d;n.m_linearVelocity.y+=n.m_invMass*v;n.m_angularVelocity+=n.m_invI*(o*v-u*d);if(this.m_limitState1==b2Joint.e_atUpperLimit){a=t.m_linearVelocity.x+ -t.m_angularVelocity*s;f=t.m_linearVelocity.y+t.m_angularVelocity*i;m=-(this.m_u1.x*a+this.m_u1.y*f);g=-this.m_limitMass1*m;y=this.m_limitImpulse1;this.m_limitImpulse1=b2Math.b2Max(0,this.m_limitImpulse1+g);g=this.m_limitImpulse1-y;h=-g*this.m_u1.x;p=-g*this.m_u1.y;t.m_linearVelocity.x+=t.m_invMass*h;t.m_linearVelocity.y+=t.m_invMass*p;t.m_angularVelocity+=t.m_invI*(i*p-s*h)}if(this.m_limitState2==b2Joint.e_atUpperLimit){l=n.m_linearVelocity.x+ -n.m_angularVelocity*u;c=n.m_linearVelocity.y+n.m_angularVelocity*o;m=-(this.m_u2.x*l+this.m_u2.y*c);g=-this.m_limitMass2*m;y=this.m_limitImpulse2;this.m_limitImpulse2=b2Math.b2Max(0,this.m_limitImpulse2+g);g=this.m_limitImpulse2-y;d=-g*this.m_u2.x;v=-g*this.m_u2.y;n.m_linearVelocity.x+=n.m_invMass*d;n.m_linearVelocity.y+=n.m_invMass*v;n.m_angularVelocity+=n.m_invI*(o*v-u*d)}},SolvePositionConstraints:function(){var e=this.m_body1;var t=this.m_body2;var n;var r=this.m_ground.m_position.x+this.m_groundAnchor1.x;var i=this.m_ground.m_position.y+this.m_groundAnchor1.y;var s=this.m_ground.m_position.x+this.m_groundAnchor2.x;var o=this.m_ground.m_position.y+this.m_groundAnchor2.y;var u;var a;var f;var l;var c;var h;var p;var d;var v;var m;var g;var y;var b;var w=0;{n=e.m_R;u=n.col1.x*this.m_localAnchor1.x+n.col2.x*this.m_localAnchor1.y;a=n.col1.y*this.m_localAnchor1.x+n.col2.y*this.m_localAnchor1.y;n=t.m_R;f=n.col1.x*this.m_localAnchor2.x+n.col2.x*this.m_localAnchor2.y;l=n.col1.y*this.m_localAnchor2.x+n.col2.y*this.m_localAnchor2.y;c=e.m_position.x+u;h=e.m_position.y+a;p=t.m_position.x+f;d=t.m_position.y+l;this.m_u1.Set(c-r,h-i);this.m_u2.Set(p-s,d-o);v=this.m_u1.Length();m=this.m_u2.Length();if(v>b2Settings.b2_linearSlop){this.m_u1.Multiply(1/v)}else{this.m_u1.SetZero()}if(m>b2Settings.b2_linearSlop){this.m_u2.Multiply(1/m)}else{this.m_u2.SetZero()}g=this.m_constant-v-this.m_ratio*m;w=b2Math.b2Max(w,Math.abs(g));g=b2Math.b2Clamp(g,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);y=-this.m_pulleyMass*g;c=-y*this.m_u1.x;h=-y*this.m_u1.y;p=-this.m_ratio*y*this.m_u2.x;d=-this.m_ratio*y*this.m_u2.y;e.m_position.x+=e.m_invMass*c;e.m_position.y+=e.m_invMass*h;e.m_rotation+=e.m_invI*(u*h-a*c);t.m_position.x+=t.m_invMass*p;t.m_position.y+=t.m_invMass*d;t.m_rotation+=t.m_invI*(f*d-l*p);e.m_R.Set(e.m_rotation);t.m_R.Set(t.m_rotation)}if(this.m_limitState1==b2Joint.e_atUpperLimit){n=e.m_R;u=n.col1.x*this.m_localAnchor1.x+n.col2.x*this.m_localAnchor1.y;a=n.col1.y*this.m_localAnchor1.x+n.col2.y*this.m_localAnchor1.y;c=e.m_position.x+u;h=e.m_position.y+a;this.m_u1.Set(c-r,h-i);v=this.m_u1.Length();if(v>b2Settings.b2_linearSlop){this.m_u1.x*=1/v;this.m_u1.y*=1/v}else{this.m_u1.SetZero()}g=this.m_maxLength1-v;w=b2Math.b2Max(w,-g);g=b2Math.b2Clamp(g+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);y=-this.m_limitMass1*g;b=this.m_limitPositionImpulse1;this.m_limitPositionImpulse1=b2Math.b2Max(0,this.m_limitPositionImpulse1+y);y=this.m_limitPositionImpulse1-b;c=-y*this.m_u1.x;h=-y*this.m_u1.y;e.m_position.x+=e.m_invMass*c;e.m_position.y+=e.m_invMass*h;e.m_rotation+=e.m_invI*(u*h-a*c);e.m_R.Set(e.m_rotation)}if(this.m_limitState2==b2Joint.e_atUpperLimit){n=t.m_R;f=n.col1.x*this.m_localAnchor2.x+n.col2.x*this.m_localAnchor2.y;l=n.col1.y*this.m_localAnchor2.x+n.col2.y*this.m_localAnchor2.y;p=t.m_position.x+f;d=t.m_position.y+l;this.m_u2.Set(p-s,d-o);m=this.m_u2.Length();if(m>b2Settings.b2_linearSlop){this.m_u2.x*=1/m;this.m_u2.y*=1/m}else{this.m_u2.SetZero()}g=this.m_maxLength2-m;w=b2Math.b2Max(w,-g);g=b2Math.b2Clamp(g+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);y=-this.m_limitMass2*g;b=this.m_limitPositionImpulse2;this.m_limitPositionImpulse2=b2Math.b2Max(0,this.m_limitPositionImpulse2+y);y=this.m_limitPositionImpulse2-b;p=-y*this.m_u2.x;d=-y*this.m_u2.y;t.m_position.x+=t.m_invMass*p;t.m_position.y+=t.m_invMass*d;t.m_rotation+=t.m_invI*(f*d-l*p);t.m_R.Set(t.m_rotation)}return w<b2Settings.b2_linearSlop},m_ground:null,m_groundAnchor1:new b2Vec2,m_groundAnchor2:new b2Vec2,m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_u1:new b2Vec2,m_u2:new b2Vec2,m_constant:null,m_ratio:null,m_maxLength1:null,m_maxLength2:null,m_pulleyMass:null,m_limitMass1:null,m_limitMass2:null,m_pulleyImpulse:null,m_limitImpulse1:null,m_limitImpulse2:null,m_limitPositionImpulse1:null,m_limitPositionImpulse2:null,m_limitState1:0,m_limitState2:0});b2PulleyJoint.b2_minPulleyLength=b2Settings.b2_lengthUnitsPerMeter;var b2PulleyJointDef=Class.create();Object.extend(b2PulleyJointDef.prototype,b2JointDef.prototype);Object.extend(b2PulleyJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.groundPoint1=new b2Vec2;this.groundPoint2=new b2Vec2;this.anchorPoint1=new b2Vec2;this.anchorPoint2=new b2Vec2;this.type=b2Joint.e_pulleyJoint;this.groundPoint1.Set(-1,1);this.groundPoint2.Set(1,1);this.anchorPoint1.Set(-1,0);this.anchorPoint2.Set(1,0);this.maxLength1=.5*b2PulleyJoint.b2_minPulleyLength;this.maxLength2=.5*b2PulleyJoint.b2_minPulleyLength;this.ratio=1;this.collideConnected=true},groundPoint1:new b2Vec2,groundPoint2:new b2Vec2,anchorPoint1:new b2Vec2,anchorPoint2:new b2Vec2,maxLength1:null,maxLength2:null,ratio:null});var b2RevoluteJoint=Class.create();Object.extend(b2RevoluteJoint.prototype,b2Joint.prototype);Object.extend(b2RevoluteJoint.prototype,{GetAnchor1:function(){var e=this.m_body1.m_R;return new b2Vec2(this.m_body1.m_position.x+(e.col1.x*this.m_localAnchor1.x+e.col2.x*this.m_localAnchor1.y),this.m_body1.m_position.y+(e.col1.y*this.m_localAnchor1.x+e.col2.y*this.m_localAnchor1.y))},GetAnchor2:function(){var e=this.m_body2.m_R;return new b2Vec2(this.m_body2.m_position.x+(e.col1.x*this.m_localAnchor2.x+e.col2.x*this.m_localAnchor2.y),this.m_body2.m_position.y+(e.col1.y*this.m_localAnchor2.x+e.col2.y*this.m_localAnchor2.y))},GetJointAngle:function(){return this.m_body2.m_rotation-this.m_body1.m_rotation},GetJointSpeed:function(){return this.m_body2.m_angularVelocity-this.m_body1.m_angularVelocity},GetMotorTorque:function(e){return e*this.m_motorImpulse},SetMotorSpeed:function(e){this.m_motorSpeed=e},SetMotorTorque:function(e){this.m_maxMotorTorque=e},GetReactionForce:function(e){var t=this.m_ptpImpulse.Copy();t.Multiply(e);return t},GetReactionTorque:function(e){return e*this.m_limitImpulse},initialize:function(e){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=e.type;this.m_prev=null;this.m_next=null;this.m_body1=e.body1;this.m_body2=e.body2;this.m_collideConnected=e.collideConnected;this.m_islandFlag=false;this.m_userData=e.userData;this.K=new b2Mat22;this.K1=new b2Mat22;this.K2=new b2Mat22;this.K3=new b2Mat22;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_ptpImpulse=new b2Vec2;this.m_ptpMass=new b2Mat22;var t;var n;var r;t=this.m_body1.m_R;n=e.anchorPoint.x-this.m_body1.m_position.x;r=e.anchorPoint.y-this.m_body1.m_position.y;this.m_localAnchor1.x=n*t.col1.x+r*t.col1.y;this.m_localAnchor1.y=n*t.col2.x+r*t.col2.y;t=this.m_body2.m_R;n=e.anchorPoint.x-this.m_body2.m_position.x;r=e.anchorPoint.y-this.m_body2.m_position.y;this.m_localAnchor2.x=n*t.col1.x+r*t.col1.y;this.m_localAnchor2.y=n*t.col2.x+r*t.col2.y;this.m_intialAngle=this.m_body2.m_rotation-this.m_body1.m_rotation;this.m_ptpImpulse.Set(0,0);this.m_motorImpulse=0;this.m_limitImpulse=0;this.m_limitPositionImpulse=0;this.m_lowerAngle=e.lowerAngle;this.m_upperAngle=e.upperAngle;this.m_maxMotorTorque=e.motorTorque;this.m_motorSpeed=e.motorSpeed;this.m_enableLimit=e.enableLimit;this.m_enableMotor=e.enableMotor},K:new b2Mat22,K1:new b2Mat22,K2:new b2Mat22,K3:new b2Mat22,PrepareVelocitySolver:function(){var e=this.m_body1;var t=this.m_body2;var n;n=e.m_R;var r=n.col1.x*this.m_localAnchor1.x+n.col2.x*this.m_localAnchor1.y;var i=n.col1.y*this.m_localAnchor1.x+n.col2.y*this.m_localAnchor1.y;n=t.m_R;var s=n.col1.x*this.m_localAnchor2.x+n.col2.x*this.m_localAnchor2.y;var o=n.col1.y*this.m_localAnchor2.x+n.col2.y*this.m_localAnchor2.y;var u=e.m_invMass;var a=t.m_invMass;var f=e.m_invI;var l=t.m_invI;this.K1.col1.x=u+a;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=u+a;this.K2.col1.x=f*i*i;this.K2.col2.x=-f*r*i;this.K2.col1.y=-f*r*i;this.K2.col2.y=f*r*r;this.K3.col1.x=l*o*o;this.K3.col2.x=-l*s*o;this.K3.col1.y=-l*s*o;this.K3.col2.y=l*s*s;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.AddM(this.K3);this.K.Invert(this.m_ptpMass);this.m_motorMass=1/(f+l);if(this.m_enableMotor==false){this.m_motorImpulse=0}if(this.m_enableLimit){var c=t.m_rotation-e.m_rotation-this.m_intialAngle;if(b2Math.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2*b2Settings.b2_angularSlop){this.m_limitState=b2Joint.e_equalLimits}else if(c<=this.m_lowerAngle){if(this.m_limitState!=b2Joint.e_atLowerLimit){this.m_limitImpulse=0}this.m_limitState=b2Joint.e_atLowerLimit}else if(c>=this.m_upperAngle){if(this.m_limitState!=b2Joint.e_atUpperLimit){this.m_limitImpulse=0}this.m_limitState=b2Joint.e_atUpperLimit}else{this.m_limitState=b2Joint.e_inactiveLimit;this.m_limitImpulse=0}}else{this.m_limitImpulse=0}if(b2World.s_enableWarmStarting){e.m_linearVelocity.x-=u*this.m_ptpImpulse.x;e.m_linearVelocity.y-=u*this.m_ptpImpulse.y;e.m_angularVelocity-=f*(r*this.m_ptpImpulse.y-i*this.m_ptpImpulse.x+this.m_motorImpulse+this.m_limitImpulse);t.m_linearVelocity.x+=a*this.m_ptpImpulse.x;t.m_linearVelocity.y+=a*this.m_ptpImpulse.y;t.m_angularVelocity+=l*(s*this.m_ptpImpulse.y-o*this.m_ptpImpulse.x+this.m_motorImpulse+this.m_limitImpulse)}else{this.m_ptpImpulse.SetZero();this.m_motorImpulse=0;this.m_limitImpulse=0}this.m_limitPositionImpulse=0},SolveVelocityConstraints:function(e){var t=this.m_body1;var n=this.m_body2;var r;r=t.m_R;var i=r.col1.x*this.m_localAnchor1.x+r.col2.x*this.m_localAnchor1.y;var s=r.col1.y*this.m_localAnchor1.x+r.col2.y*this.m_localAnchor1.y;r=n.m_R;var o=r.col1.x*this.m_localAnchor2.x+r.col2.x*this.m_localAnchor2.y;var u=r.col1.y*this.m_localAnchor2.x+r.col2.y*this.m_localAnchor2.y;var a;var f=n.m_linearVelocity.x+ -n.m_angularVelocity*u-t.m_linearVelocity.x- -t.m_angularVelocity*s;var l=n.m_linearVelocity.y+n.m_angularVelocity*o-t.m_linearVelocity.y-t.m_angularVelocity*i;var c=-(this.m_ptpMass.col1.x*f+this.m_ptpMass.col2.x*l);var h=-(this.m_ptpMass.col1.y*f+this.m_ptpMass.col2.y*l);this.m_ptpImpulse.x+=c;this.m_ptpImpulse.y+=h;t.m_linearVelocity.x-=t.m_invMass*c;t.m_linearVelocity.y-=t.m_invMass*h;t.m_angularVelocity-=t.m_invI*(i*h-s*c);n.m_linearVelocity.x+=n.m_invMass*c;n.m_linearVelocity.y+=n.m_invMass*h;n.m_angularVelocity+=n.m_invI*(o*h-u*c);if(this.m_enableMotor&&this.m_limitState!=b2Joint.e_equalLimits){var p=n.m_angularVelocity-t.m_angularVelocity-this.m_motorSpeed;var d=-this.m_motorMass*p;var v=this.m_motorImpulse;this.m_motorImpulse=b2Math.b2Clamp(this.m_motorImpulse+d,-e.dt*this.m_maxMotorTorque,e.dt*this.m_maxMotorTorque);d=this.m_motorImpulse-v;t.m_angularVelocity-=t.m_invI*d;n.m_angularVelocity+=n.m_invI*d}if(this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit){var m=n.m_angularVelocity-t.m_angularVelocity;var g=-this.m_motorMass*m;if(this.m_limitState==b2Joint.e_equalLimits){this.m_limitImpulse+=g}else if(this.m_limitState==b2Joint.e_atLowerLimit){a=this.m_limitImpulse;this.m_limitImpulse=b2Math.b2Max(this.m_limitImpulse+g,0);g=this.m_limitImpulse-a}else if(this.m_limitState==b2Joint.e_atUpperLimit){a=this.m_limitImpulse;this.m_limitImpulse=b2Math.b2Min(this.m_limitImpulse+g,0);g=this.m_limitImpulse-a}t.m_angularVelocity-=t.m_invI*g;n.m_angularVelocity+=n.m_invI*g}},SolvePositionConstraints:function(){var e;var t;var n=this.m_body1;var r=this.m_body2;var i=0;var s;s=n.m_R;var o=s.col1.x*this.m_localAnchor1.x+s.col2.x*this.m_localAnchor1.y;var u=s.col1.y*this.m_localAnchor1.x+s.col2.y*this.m_localAnchor1.y;s=r.m_R;var a=s.col1.x*this.m_localAnchor2.x+s.col2.x*this.m_localAnchor2.y;var f=s.col1.y*this.m_localAnchor2.x+s.col2.y*this.m_localAnchor2.y;var l=n.m_position.x+o;var c=n.m_position.y+u;var h=r.m_position.x+a;var p=r.m_position.y+f;var d=h-l;var v=p-c;i=Math.sqrt(d*d+v*v);var m=n.m_invMass;var g=r.m_invMass;var y=n.m_invI;var b=r.m_invI;this.K1.col1.x=m+g;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=m+g;this.K2.col1.x=y*u*u;this.K2.col2.x=-y*o*u;this.K2.col1.y=-y*o*u;this.K2.col2.y=y*o*o;this.K3.col1.x=b*f*f;this.K3.col2.x=-b*a*f;this.K3.col1.y=-b*a*f;this.K3.col2.y=b*a*a;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.AddM(this.K3);this.K.Solve(b2RevoluteJoint.tImpulse,-d,-v);var w=b2RevoluteJoint.tImpulse.x;var E=b2RevoluteJoint.tImpulse.y;n.m_position.x-=n.m_invMass*w;n.m_position.y-=n.m_invMass*E;n.m_rotation-=n.m_invI*(o*E-u*w);n.m_R.Set(n.m_rotation);r.m_position.x+=r.m_invMass*w;r.m_position.y+=r.m_invMass*E;r.m_rotation+=r.m_invI*(a*E-f*w);r.m_R.Set(r.m_rotation);var S=0;if(this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit){var x=r.m_rotation-n.m_rotation-this.m_intialAngle;var T=0;if(this.m_limitState==b2Joint.e_equalLimits){t=b2Math.b2Clamp(x,-b2Settings.b2_maxAngularCorrection,b2Settings.b2_maxAngularCorrection);T=-this.m_motorMass*t;S=b2Math.b2Abs(t)}else if(this.m_limitState==b2Joint.e_atLowerLimit){t=x-this.m_lowerAngle;S=b2Math.b2Max(0,-t);t=b2Math.b2Clamp(t+b2Settings.b2_angularSlop,-b2Settings.b2_maxAngularCorrection,0);T=-this.m_motorMass*t;e=this.m_limitPositionImpulse;this.m_limitPositionImpulse=b2Math.b2Max(this.m_limitPositionImpulse+T,0);T=this.m_limitPositionImpulse-e}else if(this.m_limitState==b2Joint.e_atUpperLimit){t=x-this.m_upperAngle;S=b2Math.b2Max(0,t);t=b2Math.b2Clamp(t-b2Settings.b2_angularSlop,0,b2Settings.b2_maxAngularCorrection);T=-this.m_motorMass*t;e=this.m_limitPositionImpulse;this.m_limitPositionImpulse=b2Math.b2Min(this.m_limitPositionImpulse+T,0);T=this.m_limitPositionImpulse-e}n.m_rotation-=n.m_invI*T;n.m_R.Set(n.m_rotation);r.m_rotation+=r.m_invI*T;r.m_R.Set(r.m_rotation)}return i<=b2Settings.b2_linearSlop&&S<=b2Settings.b2_angularSlop},m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_ptpImpulse:new b2Vec2,m_motorImpulse:null,m_limitImpulse:null,m_limitPositionImpulse:null,m_ptpMass:new b2Mat22,m_motorMass:null,m_intialAngle:null,m_lowerAngle:null,m_upperAngle:null,m_maxMotorTorque:null,m_motorSpeed:null,m_enableLimit:null,m_enableMotor:null,m_limitState:0});b2RevoluteJoint.tImpulse=new b2Vec2;var b2RevoluteJointDef=Class.create();Object.extend(b2RevoluteJointDef.prototype,b2JointDef.prototype);Object.extend(b2RevoluteJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.type=b2Joint.e_revoluteJoint;this.anchorPoint=new b2Vec2(0,0);this.lowerAngle=0;this.upperAngle=0;this.motorTorque=0;this.motorSpeed=0;this.enableLimit=false;this.enableMotor=false},anchorPoint:null,lowerAngle:null,upperAngle:null,motorTorque:null,motorSpeed:null,enableLimit:null,enableMotor:null});
///==============================================================================================
                
    
    var worldAABB;
    var world;

    function init() {


        // init box2d
        worldAABB = new b2AABB();
        worldAABB.minVertex.Set(-5000, -5000);
        worldAABB.maxVertex.Set(window.innerWidth + 5000, window.innerHeight + 5000);

        world = new b2World(worldAABB, new b2Vec2(0, 0), true);

    }

    // Attach the .compare method to Array's prototype to call it on any array
    function arrayCompare(arrayA, arrayB) {
        if (!arrayB)
            return false;

        if (arrayA.length != arrayB.length)
            return false;

        for (var i = 0; i < arrayA.length; i++) {
            if (arrayA[i] instanceof Array && arrayB[i] instanceof Array) {
                if (!arrayCompare(arrayA[i], arrayB[i]))
                    return false;
            }
            else if (arrayA[i] != arrayB[i]) {
                return false;
            }
        }
        return true;
    }
    
    // test if elem exist in array of arrays
    function inArrays(elem,arrays){
        var rt=-1;
        for (var i=0;i<arrays.length;i++){
            rt=$.inArray(elem,arrays[i].elements);
            if(rt!==-1)
                return {index:i,value:rt};
        }
        return rt;
    }
    
    var bool = false;
    var wall_thickness = 100;
    var numInstance = 1;
    var isCollision=false;
    
    function throwable() {
        this.numInstance;
        this.delta = {X: 0, Y: 0};
        this.stage = {X: window.screenX, Y: window.screenY, Width: window.innerWidth, Height: window.innerHeight};
        this.walls = {left: null, right: null, top: null, bottom: null};
        this.isRunning = false;
        this.isMouseDown = false;
        this.mouse = {x: 0, y: 0};

        this.iterations = 1;

        this.wallsSetted = false;

        this.mouseJoint;

        this.elementsInArea=[];
        this.elements = [];
        this.bodies = [];
        this.properties = [];
        
        if (!bool) {
            $.extend(throwable.prototype, {
                // default settings
                defaults: {
                    infinitX: false,
                    gravity: {x: 0, y: 0},
                    timeStep: 1 / 40,
                    bounce: 0, // value between 0 and 1
                    containment: "window",
                    autostart:true,
                    shape: "box", 
                    impulse:null,
                    fixed: false,
                    drag: true,
                    damping:0,
                    collisionDetection:false,
                    areaDetection:[]
                },
                /**
                 * initElem initialize element
                 */
                initElem: function(elem) {

                    // Get box2d elements
                    var property = this.getElementProperties(elem);
                    this.properties.push(property);

                    var element = elem;
                    var $elem = $(element);
                    $elem.css({
                        "position": "absolute",
                        "left": property.X + 'px',
                        "top": property.Y + 'px',
                        "width": property.Width + 'px'
                    });
                    $(element).on('mousedown',function(event){
                        event.preventDefault();
                    });
                    $(element).on('mouseup', function(event){
                        event.preventDefault();
                    });
                    
                    var body;
                    if (this.defaults.shape === "box")
                        body=this.createBox(world, $elem.position().left + ($elem.width() >> 1), $elem.position().top + ($elem.outerHeight() >> 1), $elem.width() / 2, $elem.outerHeight() / 2, false, numInstance, Math.pow(2, 50) - 1);
                    else
                        body=this.createCircle(world, $elem.position().left + ($elem.width() >> 1), $elem.position().top + ($elem.outerHeight() >> 1), Math.max($elem.width() / 2, $elem.outerHeight() / 2), false, numInstance, Math.pow(2, 50) - 1);
                    
                    if(this.defaults.impulse){
                        this.applyImpulse(body);
                    }
                    
                    // Apply damping
                    if(this.defaults.damping>0){
                        body.m_linearDamping=1000/(1000+this.defaults.damping);
                        body.m_angularDamping=1000/(1000+this.defaults.damping);
                    }
                    body.m_userData=elem;
                    this.bodies.push(body);
                    
                    // Clean position dependencies
                    $("body").append($elem);
                    $("body").css({
                            "position":"static",
                            "margin":0
                     });
                },
                // applay options again
                applyOptions:function(o,i){
                        
                        this.defaults = $.extend({}, this.defaults, o);
                        var body=this.bodies[i];
                        if(this.defaults.impulse){
                            body.WakeUp();
                            var f=this.defaults.impulse.f,p=this.defaults.impulse.p;
                            var ant_gravity = new b2Vec2(f * p.x * body.GetMass(), f * p.y * body.GetMass());
                            body.ApplyImpulse(ant_gravity,body.GetCenterPosition());
                        }
                },
                setEnv: function(elements, o) {
                    var _this = this;
                    numInstance *= 2;
                    this.numInstance = numInstance;
                    this.getBrowserDimensions();
                    this.defaults = $.extend({}, this.defaults, o);
                    if (this.defaults.containment !== "window") {
                        var c = this.defaults.containment;
                        if (c !== "parent")
                            this.stage = {X: c[0], Y: c[1], Width: c[2], Height: c[3]};
                        else {
                            var p = $(elements).parent();
                            if(!p.is("body")){
                                var area = $(elements[0]).outerHeight();
                                this.stage = {X: p.offset().left, Y: p.offset().top, Width:p.offset().left+p.outerWidth(), Height:p.offset().top+ p.outerHeight()/* - area*/};
                            }

                            $(window).resize(function() {
                                _this.handleScrollOrResize();
                            });
                        }
                        
                    } else {
                        $(window).scroll(function() {
                            _this.handleScrollOrResize();
                        });
                        $(window).resize(function() {
                            _this.handleScrollOrResize();
                        });
                    }
                    
                    this.elements=elements;
                    
                    this.addEventRemoveElement();
                    // setwalls
                    this.setWalls(numInstance);

                    $(document).on('mousedown', function(event) {

                        _this.isMouseDown = true;

                    });
                    $(document).on('mouseup', function(event) {

                        _this.isMouseDown = false;

                    });
                    $(document).on('mousemove', function(event) {

                        if (!_this.isRunning)
                            _this.run();

                        _this.mouse.x = event.clientX;
                        _this.mouse.y = event.clientY;
                    });

                    $(document).on('touchstart', function(event) {
                        if (event.originalEvent.touches.length == 1) {

                            if (!_this.isRunning) {
                                _this.run();
                            }
                            _this.mouse.x = event.originalEvent.touches[0].pageX;
                            _this.mouse.y = event.originalEvent.touches[0].pageY;
                            _this.isMouseDown = true;
                        }
                    });
                    $(document).on('touchmove', function(event) {

                        if (event.originalEvent.touches.length == 1) {
                            event.preventDefault();
                            _this.mouse.x = event.originalEvent.touches[0].pageX;
                            _this.mouse.y = event.originalEvent.touches[0].pageY;
                        }

                    });
                    $(document).on('touchend', function(event) {

                        if (event.originalEvent.touches.length == 0) {

                            _this.isMouseDown = false;
                        }
                    });

                    $(window).on('deviceorientation', function(event) {
                        if (event.beta) {
                            this.defaults.gravity.x = Math.sin(event.gamma * Math.PI / 180);
                            this.defaults.gravity.y = Math.sin((Math.PI / 4) + event.beta * Math.PI / 180);
                        }
                    });
                    if(this.defaults.autostart==true){
                        if (!this.isRunning)
                                this.run();
                    }

                },
                // init function
                loop: function() {
                    this.applyGravity();

                    this.delta.X += (0 - this.delta.X) * .5;
                    this.delta.Y += (0 - this.delta.Y) * .5;

                    if (this.defaults.drag)
                        this.mouseDrag();

                    world.Step(this.defaults.timeStep, this.iterations);

                    for (var i = 0; i < this.elements.length; i++) {
                        var body = this.bodies[i];
                        var element = this.elements[i];
                        var property=this.properties[i];
                        if(!body || !element || !property) break;
                        
                        if(this.defaults.collisionDetection)
                            this.collisionDetection();
                        if(this.defaults.areaDetection.length>0)
                            this.areaDetection();
                        
                        
                        element.style.left = (body.m_position0.x - (property.Width >> 1)) + 'px';
                        element.style.top = (body.m_position0.y - (property.Height >> 1)) + 'px';
                        //if (i === 1) {
                            //console.log($(element).position().left -(stage.Width - properties[i].Width ))
                            //console.log(this.getProjectedHeight($(element)));
                        //}
                        //if($(element).position().left $(document).width()) alert("out left");
                        var style = 'rotate(' + (body.m_rotation0 * 57.2957795) + 'deg)';

                        element.style.transform = style;
                        element.style.WebkitTransform = style + ' translateZ(0)'; // Force HW Acceleration
                        element.style.MozTransform = style;
                        element.style.OTransform = style;
                        element.style.msTransform = style;
                    }
                },
                removeElement:function(index){
                    this.elements.splice(index, 1);
                    this.bodies.splice(index, 1);
                    this.properties.splice(index, 1);
                },
                addEventRemoveElement:function(){
                    var event= new $.Event("removeElement");
                    var initialremove=$.fn.remove;
                    $.fn.remove=function (){
                         var rt=initialremove.apply(this,arguments);
                         $(document).trigger(event);
                         return rt;
                    };
                    var _this=this;
                    $(document).bind("removeElement",function (){
                        _this.sync();
                    });
                },
                sync: function() {
                    var _this = this;
                    this.elements.each(function(index, element) {
                        if (!$(element).is("html *")) {
                            _this.elements.splice(index, 1);
                        }
                    }); 

                    var i = 0;
                    this.bodies = $.grep(this.bodies, function(el) {
                        if (el.m_userData === _this.elements[i]) {
                            i++;
                            return true;
                        }
                        else {
                            _this.properties.splice(i,1);
                            el.Freeze();
                            return false;
                        }
                    });
                },
                areaDetection:function(){
                    var _this=this;
                    var detectArea = function(i,c,elementsInArea) {
                        var aabb = new b2AABB();
                        aabb.minVertex.Set(c[0], c[1]);
                        aabb.maxVertex.Set(c[2], c[3]);

                        // Query the world for overlapping shapes.
                        var k_maxCount = 100;
                        var shapes = [];
                        var count = world.Query(aabb, shapes, k_maxCount);
                        var elements=[];
                        for(var j=0;j<shapes.length;j++){
                            var elem=shapes[j].m_body.m_userData;
                            if(!$.isPlainObject(elem) && $.inArray(elem,_this.elements)!==-1){
                                elements.push(elem);
                            }
                        }
                     
                        var inArea=$(elements).not(_this.elementsInArea[i]);
                        if (inArea.length !== 0) {
                            $(document).trigger("inarea", [inArea]);
                        }else{
                            var outArea=$(_this.elementsInArea[i]).not(elements);
                            if (outArea.length !== 0) {
                                $(document).trigger("outarea", [outArea]);
                            }
                        }
                         _this.elementsInArea[i]=elements;
                    };  
                   
                    var areas=this.defaults.areaDetection;
                    for(var i=0; i<areas.length;i++){
                        detectArea(i,areas[i],this.elementsInArea[i]);
                    }
                },
                collisionDetection: function() {
                   
                    var _this=this;
                    var contactList = world.m_contactList;
                       
                    var collision=function(shape1,shape2){
                         var e1 = shape1.m_body.m_userData,
                             e2 = shape2.m_body.m_userData;
                        if (!$.isPlainObject(e1) && !$.isPlainObject(e2) ){
                            $(document).trigger("collision", [e1, e2]);
                            isCollision=true;
                        }
                    };
                    var limit=0;    
                    // loop through all collisions
                    while (contactList && limit<100 /* <-- limit */) {
                        var shape1 = contactList.m_shape1,
                            shape2 = contactList.m_shape2;

                        collision(shape1, shape2);
                        contactList = contactList.m_next;
                        limit++;
                    } 
                    
                    // fire "nocollision" once after the end of collision 
                    if(isCollision)  $(document).trigger("nocollision");
                    else isCollision=false;
                },
                // applying gravity to objects 
                applyGravity: function() {
                    var g = this.defaults.gravity;
                    for (var i = 0; i < this.bodies.length; i++) {
                        var ant_gravity = new b2Vec2(350.0 * g.x * this.bodies[i].GetMass(), 350.0 * g.y * this.bodies[i].GetMass());
                        this.bodies[i].ApplyForce(ant_gravity, this.bodies[i].GetCenterPosition());
                    }
                },
                // applying initial impulse to objects
                applyImpulse: function(body) {
                        var f=this.defaults.impulse.f,p=this.defaults.impulse.p;
                        var ant_gravity = new b2Vec2(f * p.x * body.GetMass(), f * p.y * body.GetMass());
                        body.ApplyImpulse(ant_gravity,body.GetCenterPosition());
                },
                handleScrollOrResize: function() {
                    this.getBrowserDimensions();
                    //console.log(this.numInstance + "+");
                    this.setWalls(this.numInstance);
                },
                getProjectedWidth: function(elem) {
                    var rotationAngle = this.getRotation(elem);
                    return  elem.width() * Math.cos(rotationAngle) + elem.outerHeight() * Math.sin(rotationAngle);
                },
                getProjectedHeight: function(elem) {
                    var rotationAngle = this.getRotation(elem);
                    return  elem.width() * Math.sin(rotationAngle) + elem.outerHeight() * Math.cos(rotationAngle);
                },
                getRotation: function(obj) {
                    var matrix = obj.css("-webkit-transform") ||
                            obj.css("-moz-transform") ||
                            obj.css("-ms-transform") ||
                            obj.css("-o-transform") ||
                            obj.css("transform");
                    var angle;
                    if (matrix !== 'none') {
                        var values = matrix.split('(')[1].split(')')[0].split(',');
                        var a = values[0];
                        var b = values[1];
                        angle = Math.atan2(b, a);
                    } else {
                        angle = 0;
                    }
                    return angle;
                },
                run: function() {
                    var _this = this;
                    this.isRunning = true;
                    setInterval(function() {
                        _this.loop();

                    },25);

                },
                // Make box
                createBox: function(world, x, y, width, height, fixed, categoryBits, maskBits, element) {

                    if (typeof(fixed) === 'undefined')
                        fixed = true;
                    
                    var boxSd = new b2BoxDef();
                    if (categoryBits && maskBits) {
                        boxSd.categoryBits = categoryBits;
                        boxSd.maskBits = maskBits;
                    }

                    if (!fixed)
                        boxSd.density = 1.0;
                    var bounce=this.defaults.bounce;
                    if(bounce>0)
                        boxSd.restitution=Math.min(1,bounce);
                   
                  
                        
                    boxSd.extents.Set(width, height);

                    var boxBd = new b2BodyDef();
                    boxBd.AddShape(boxSd);
                    boxBd.position.Set(x, y);
                    boxBd.userData = {element: element};

                    return world.CreateBody(boxBd);
                }, 
                 // Make circle
                 createCircle: function(world, x, y, radius, fixed,categoryBits, maskBits, element) {

                    if (typeof(fixed) === 'undefined')
                        fixed = true;

                    var boxSd = new b2CircleDef();
                    
                    if (categoryBits && maskBits) {
                        boxSd.categoryBits = categoryBits;
                        boxSd.maskBits = maskBits;
                    }
                    
                    if (!fixed)
                        boxSd.density = 1.0;
                    
                    var bounce=this.defaults.bounce;
                    if(bounce>0)
                        boxSd.restitution=Math.min(1,bounce);
                    
                    boxSd.radius = radius;

                    var boxBd = new b2BodyDef();
                    boxBd.AddShape(boxSd);
                    boxBd.position.Set(x, y);
                    boxBd.userData = {element: element};

                    return world.CreateBody(boxBd);
                },
                mouseDrag: function() {

                    // mouse press
                    if (this.isMouseDown && !this.mouseJoint) {

                        var body = this.getBodyAtMouse();

                        if (body) {

                            var md = new b2MouseJointDef();
                            md.body1 = world.m_groundBody;
                            md.body2 = body;
                            md.target.Set(this.mouse.x + window.scrollX, this.mouse.y + window.scrollY);
                            md.maxForce = 30000.0 * body.m_mass;
                            md.timeStep = this.defaults.timeStep;
                            this.mouseJoint = world.CreateJoint(md);
                            body.WakeUp();
                        }
                    }

                    // mouse release
                    if (!this.isMouseDown) {

                        if (this.mouseJoint) {

                            world.DestroyJoint(this.mouseJoint);
                            this.mouseJoint = null;
                        }
                    }

                    // mouse move
                    if (this.mouseJoint) {

                        var p2 = new b2Vec2(this.mouse.x + window.scrollX, this.mouse.y + window.scrollY);
                        this.mouseJoint.SetTarget(p2);
                    }
                },
                getBodyAtMouse: function() {

                    // Make a small box.
                    var mousePVec = new b2Vec2();
                    mousePVec.Set(this.mouse.x + window.scrollX, this.mouse.y + window.scrollY);
                    var aabb = new b2AABB();
                    aabb.minVertex.Set(this.mouse.x + window.scrollX - 2, this.mouse.y + window.scrollY - 2);
                    aabb.maxVertex.Set(this.mouse.x + window.scrollX + 2, this.mouse.y + window.scrollY + 2);

                    // Query the world for overlapping shapes.
                    var k_maxCount = 10;
                    var shapes = [];
                    var count = world.Query(aabb, shapes, k_maxCount);
                    var body = null;

                    for (var i = 0; i < count; i++) {

                        if (shapes[i].m_body.IsStatic() === false) {

                            if (shapes[i].TestPoint(mousePVec)) {
                                var tmpBody = shapes[i].m_body;
                                if ($.inArray(tmpBody, this.bodies) !== -1) {
                                    body = tmpBody;
                                    break;
                                }
                            }
                        }
                    }
                    return body;
                },
                // create contaimnent walls        
                setWalls: function(i) {

                    if (this.wallsSetted) {

                        world.DestroyBody(this.walls.left);
                        world.DestroyBody(this.walls.top);
                        world.DestroyBody(this.walls.right);
                        world.DestroyBody(this.walls.bottom);

                        this.walls.left = null;
                        this.walls.top = null;
                        this.walls.right = null;
                        this.walls.bottom = null;
                    }
                    var x1 = this.stage.X, y1 = this.stage.Y, x2 = this.stage.Width, y2 = this.stage.Height;
                    this.walls.top = this.createBox(world, (x1 + x2) / 2, y1 - wall_thickness, x2 - x1, wall_thickness, true, i, i);
                    this.walls.bottom = this.createBox(world, (x1 + x2) / 2, y2 + wall_thickness, x2 - x1, wall_thickness, true, i, i);
                    this.walls.left = this.createBox(world, x1 - wall_thickness, (y2 + y1) / 2, wall_thickness, y2 - y1, true, i, i);
                    this.walls.right = this.createBox(world, x2 + wall_thickness, (y2 + y1) / 2, wall_thickness, y2 - y1, true, i, i);
                    this.wallsSetted = true;

                },
                // .. UTILS
                getElementProperties: function(element) {

                    var x = 0;
                    var y = 0;
                    var width = element.offsetWidth;
                    var height = element.offsetHeight;
                    do {
                        x += element.offsetLeft;
                        y += element.offsetTop;

                    } while (element = element.offsetParent);

                    return {X: x, Y: y, Width: width, Height: height};
                },
                getBrowserDimensions: function() {
                    if (this.defaults.containment === "window") {
                        var _this = this;
                        var changed = false;

                        $(this.elements).each(function(index, element){
                            var body = _this.bodies[index];
                            var x = body.m_position.x;
                            var y = body.m_position.y;

                            if (_this.stage.Width > window.innerWidth + window.scrollX) {
                                x = window.innerWidth + window.scrollX;
                            }

                            if (_this.stage.Height > window.innerHeight + window.scrollY) {
                                y = window.innerHeight + window.scrollY;
                            }

                            _this.bodies[index].m_position = {x: x, y: y}
                        });

                        if (this.stage.X !== window.scrollX) {
                            this.delta.X = (window.scrollX - this.stage.X) * 50;
                            this.stage.X = window.scrollX;
                            changed = true;
                        }

                        if (this.stage.Y !== window.scrollY) {
                            this.delta.Y = (window.scrollY - this.stage.Y) * 50;
                            this.stage.Y = window.scrollY;
                            changed = true;
                        }

                        if (this.stage.Width !== window.innerWidth + window.scrollX) {
                            this.stage.Width = window.innerWidth + window.scrollX;
                            changed = true;
                        }

                        if (this.stage.Height !== window.innerHeight + window.scrollY) {
                            this.stage.Height = window.innerHeight + window.scrollY;
                            changed = true;
                        }
                        return changed;
                    } else if (this.defaults.containment === "parent") {
                        var _this = this;
                        var changed = false;
                        var parent = $(this.elements).parent();
                        var offset = parent.offset();

                        $(this.elements).each(function(index, element){
                            var body = _this.bodies[index];

                            _this.bodies[index].m_position = {
                              x: body.m_position.x + (offset.left - _this.stage.X),
                              y: body.m_position.y + (offset.top - _this.stage.Y)
                            }
                        });

                        if (this.stage.X !== offset.left) {
                            this.delta.X = (offset.left - this.stage.X) * 50;
                            this.stage.X = offset.left;
                            changed = true;
                        }

                        if (this.stage.Y !== offset.top) {
                            this.delta.Y = (offset.top - this.stage.Y) * 50;
                            this.stage.Y = offset.top;
                            changed = true;
                        }

                        if (this.stage.Width !== offset.left) {
                            this.stage.Width = parent.outerWidth() + offset.left;
                            changed = true;
                        }

                        if (this.stage.Height !== parent.outerHeight() + offset.left) {
                            this.stage.Height = parent.outerHeight() + offset.top;
                            changed = true;
                        }

                        return changed;
                    } else {
                        var c = this.defaults.containment;
                        this.stage = {X: c[0], Y: c[1], Width: c[2], Height: c[3]};
                    }

                }

            });
            bool = true;
        }
    }
    ;
    
    // JQuery.fn.throwable
    $.fn.throwable = function(options) {
        if ($.isFunction(this.each)) {
            var _this = this;

            if ($("body").data('throwable.instance') === undefined) {
                $("body").data('throwable.instance', true);
                init();
            }

            var throwableInstance = new throwable();

            var isEnvSet=false;
            var rt = this.each(function() {
                var i=inArrays(this, $.throwables),
                     exist=(i!==-1);
                if (!exist || !arrayCompare($.throwables[i.index].elements, _this)){  
                    if(exist){
                        $.throwables[i.index].removeElement(i.index);
                        throwableInstance.defaults = $.extend({}, throwableInstance.defaults, $.throwables[i.index].defaults);
                    }

                    if(!isEnvSet){
                         throwableInstance.setEnv(_this, options);
                         isEnvSet=true;
                    }

                    throwableInstance.initElem(this);
                }
                else{ 
                    throwableInstance=$.throwables[i.index];
                    throwableInstance.applyOptions(options,i.value);
                }
            });
          
            if($.inArray(throwableInstance,$.throwables)===-1)
                $.throwables.push(throwableInstance);
            return rt;
        }
    };
    
    // array that will contain arrays
    $.throwables = [];

})(jQuery, window, document);




</script><style>
 /*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/* START BOOTSTRAP STYLES */

/* blink effect */
@-webkit-keyframes blinkerHeader {
  0% { opacity: 1.0; }
  25% { opacity: 1.0; }
  50% { opacity: 0; }
  75% { opacity: 1.0; }
  100% { opacity: 1.0; }
}

html {
  font-family: "bentonsansmedium", "Roboto", sans-serif;
  /*-ms-text-size-adjust: 100%;*/
  /*-webkit-text-size-adjust: 100%;*/
  font-size: 16px !important;
}
html.el_GR,
html.ru_RU {
  font-family: "bentonsansmedium", "Roboto", sans-serif;
  font-size: 14px !important;
}
@media (max-width: 890px) { 
  html {
    font-size: 14px !important;
  }
  html.el_GR,
  html.ru_RU {
    font-size: 12px !important;
  }
}

body {
  margin: 0;
}

#loadingGrid.overlay-loader.gridOverlay{
  display: none !important;
}

#iPageContent {
  margin-top: 0;
}
/*
#iPageContent {
  margin-top: 0;
}
*/
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
menu,
nav,
section,
summary {
  display: block;
}
.mainMenu {
  padding-bottom: 10px;
}
audio,
canvas,
progress,
video {
  display: inline-block;
  vertical-align: baseline;
}
audio:not([controls]) {
  display: none;
  height: 0;
}
[hidden],
template {
  display: none;
}
a {
  background-color: transparent;
}
a:active,
a:hover {
  outline: 0;
}
abbr[title] {
  border-bottom: 1px dotted;
}
b,
strong {
  font-weight: bold;
}
.strong{
  font-weight: bold;
}
.underline{
  text-decoration: underline;
}
dfn {
  font-style: italic;
}
mark {
  background: #ff0;
  color: #000;
}
small {
  font-size: 80%;
}
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
img {
  border: 0;
}
svg:not(:root) {
  overflow: hidden;
}
figure {
  margin: 1em 40px;
}
hr {
  -webkit-box-sizing: content-box;
     -moz-box-sizing: content-box;
          box-sizing: content-box;
  height: 0;
}
pre {
  overflow: auto;
}
code,
kbd,
pre,
samp {
  font-family: monospace, monospace;
  font-size: 1em;
}
input,
optgroup,
select,
textarea {
  color: inherit;
  font: inherit;
  margin: 0;
}
button {
  overflow: visible;
}
select {
  text-transform: none;
}
button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button;
  cursor: pointer;
}
button[disabled],
html input[disabled] {
  cursor: default;
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}
.button {
  background: #ededed;
  padding: 10px 0;
  width: 100px;
}

.button-white {
  background: #fff;
  padding: 10px 0;
  width: 100px;
}
fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  border: 0;
  padding: 0;
}
textarea {
  overflow: auto;
}
optgroup {
  font-weight: bold;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
.videoWrapper {
  position: relative;
  padding-bottom: 55.15%;
  padding-top: 15px;
  height: 0;
}
.videoWrapper iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
.table-display {
  display: table;
}
.table-center {
  margin:0 auto;
}
.absolute-center{
  left:0;
  right:0;
  position:absolute;
}
.table-display-middle {
  display: table-cell;
  vertical-align: middle;
}
.vertical-align-middle {
}
.vertical-align-bottom {
  display: flex;
  display: -ms-flexbox;
  display: -webkit-flex;
  -webkit-align-items: flex-end;
  -ms-flex-align: end;
   align-items: flex-end;
}
.bsk-flex-center{
  justify-content: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
}

.center-x{
  left: 50%;
  transform: translate(-50%, 0);
}

.center-y{
  top: 50%;
  transform: translate(0, -50%);
}

.center-xy{
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

td,
th {
  padding: 0;
}
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
/*:before,
*:after {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}*/
input,
select,
textarea {
  font-family: "bentonsansregular", "Roboto", sans-serif;
  font-size: inherit;
  line-height: inherit;
}
a {
  /*color: #000000;*/
  text-decoration: none;
}
a:hover,
a:focus {
  /*color: #000000;*/
  /*text-decoration: underline;*/
}
a:focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
figure {
  margin: 0;
}
img {
  /*vertical-align: middle;*/
}

h1.h1,
h2.h2,
h3.h3,
h5.h5,
h6.h5,
.h1,
.h2,
.h3,
.h4,
.h5,
.h6 {
  font-family: "bentonsansmedium", "Roboto", sans-serif;
  font-weight: bold;
  text-transform: lowercase;
  line-height: 1.1;
  color: inherit;
  margin: 0;
}
h1,
h2,
h3,
h4,
h5,
h6, span{
  letter-spacing: inherit;
}
h1 small,
h2 small,
h3 small,
h4 small,
h5 small,
h6 small,
.h1 small,
.h2 small,
.h3 small,
.h4 small,
.h5 small,
.h6 small,
h1 .small,
h2 .small,
h3 .small,
h4 .small,
h5 .small,
h6 .small,
.h1 .small,
.h2 .small,
.h3 .small,
.h4 .small,
.h5 .small,
.h6 .small {
  font-weight: normal;
  line-height: 1;
  color: #777777;
}
h1.h1 {
  letter-spacing: 4px;
}
h2.h2{
  letter-spacing: 4px;  
}
h3.h3 {
  letter-spacing: 3px;
}
h4.h4 {
  letter-spacing: 3px;
}
@media (max-width: 890px) {
  h1.h1 {
    letter-spacing: 3px;
  }
  h2.h2{
    letter-spacing: 3px;  
  }
  h3.h3 {
    letter-spacing: 2px;
  }
}
h1 small,
.h1 small,
h2 small,
.h2 small,
h3 small,
.h3 small,
h1 .small,
.h1 .small,
h2 .small,
.h2 .small,
h3 .small,
.h3 .small {
  font-size: 65%;
}
h5,
.h5,
h6,
.h6 {
  margin-top: 10px;
  margin-bottom: 10px;
}
h4 small,
.h4 small,
h5 small,
.h5 small,
h6 small,
.h6 small,
h4 .small,
.h4 .small,
h5 .small,
.h5 .small,
h6 .small,
.h6 .small {
  font-size: 75%;
}
.h1 {
  font-size: 3.125rem;
}
.h2 {
  font-size: 1.875rem;
}
.h3 {
  font-size: 2.188rem;
}
.h5 {
  font-size: 0.875rem;
}
.h6 {
  font-size: 0.75rem;
}

@media (max-width: 890px) {
  .h1 {
    font-size: 3.125rem;
  }
  .h2 {
    font-size: 2.225rem;
  }
  .h3 {
    font-size: 1.75rem;
  }
  .h5 {
    font-size: 1.25rem;
  }
  .h6 {
    font-size: 1rem;
  }
}

p {
  /*margin: 0 0 10px;*/
  font-family: "bentonsansregular", "Roboto", sans-serif;
  font-weight: normal;
  /*text-transform: lowercase;*/
  /*font-size: 16px;*/
  line-height: 15px;
}
small,
.small {
  font-size: 85%;
}
mark,
.mark {
  background-color: #fcf8e3;
  padding: .2em;
}
.text-left {
  text-align: left;
}
.text-right {
  text-align: right;
}
.text-center {
  text-align: center;
}
.text-justify {
  text-align: justify;
}
.text-nowrap {
  white-space: nowrap;
}
.text-lowercase {
  text-transform: lowercase;
}
.text-uppercase {
  text-transform: uppercase;
}
.text-capitalize {
  text-transform: capitalize;
}
.text-background {
  background: #fff;
}
.text-inline-table {
  display: inline-table;
}
.line-height-1{
  line-height:1px;
}
.line-height-1-5{
  line-height:1.5px;
}
.line-height-2{
  line-height:2px;
}
.absolute {
  position: absolute !important;
}
.absolute-link {
  z-index: 999;
  height: 100%;
  position: absolute !important;
} 
.img-responsive {
  display: block !important;
  width: 100% !important;
  height: auto !important;
}
.img-rounded {
  border-radius: 6px;
}
.img-thumbnail {
  padding: 4px;
  line-height: 1.42857143;
  background-color: #ffffff;
  border: 1px solid #dddddd;
  border-radius: 4px;
  -webkit-transition: all 0.2s ease-in-out;
  -o-transition: all 0.2s ease-in-out;
  transition: all 0.2s ease-in-out;
  display: inline-block;
  max-width: 100%;
  height: auto;
}
.img-circle {
  border-radius: 50%;
  -moz-border-radius: 50%;
  -webkit-border-radius: 50%;
}
.img-circle-sm {
  background:#fff;
  width: 50px;
  height: 50px;
}
.img-circle-md {
  background:#fff;
  width: 75px;
  height: 75px;
}
.img-circle-sm > a{
  position: relative;
  top: 12px;
}
hr {
  /*margin-top: 20px;
  margin-bottom: 20px;*/
  border: 0;
  /*border-top: 1px solid #eeeeee;*/
}
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}
.sr-only-focusable:active,
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  clip: auto;
}
[role="button"] {
  cursor: pointer;
}
.container {
  margin-right: auto;
  margin-left: auto;
  padding-left: 15px;
  padding-right: 15px;
}
.container-full {
  margin-right: auto;
  margin-left: auto;
  padding: 0;
}
.container-full .section {
  margin-bottom: 0;
}
.container p{
  font-size:1.2rem;
  line-height: 1.8rem;
  font-family: "bentonsansmedium", "Roboto", sans-serif;
  font-weight:bold;
  text-transform: lowercase;
  letter-spacing: 2px;
}
.container p.weight-normal{
  font-weight:normal;
}
.section {
  margin:50px 0;
}
.subsection {
  float: left;
  position: relative;
  width: 100%;
}
.subsection-content {
  float: left;
  position: relative;
  width: 100%;
}
.subsection-content-center {
  width: 100%;
  position: relative;
  float: left;
  margin-top: -55%;
}
.subsection-content-button {
  margin-top: -50px;
}
.subsection-content .note{
  font-size:12px;
}
.container {
  max-width: 1500px;
}
.row {
  margin-left: -15px;
  margin-right: -15px;
}
.row-eq-height {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}
.col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12 {
  position: relative;
  min-height: 1px;
  padding-left: 15px;
  padding-right: 15px;
}
@media (max-width: 890px) {
  .col-xs-1, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9, .col-xs-10, .col-xs-11, .col-xs-12 {
    float: left;
  }
  .col-xs-12 {
    width: 100%;
  }
  .col-xs-11 {
    width: 91.66666667%;
  }
  .col-xs-10 {
    width: 83.33333333%;
  }
  .col-xs-9 {
    width: 75%;
  }
  .col-xs-8 {
    width: 66.66666667%;
  }
  .col-xs-7 {
    width: 58.33333333%;
  }
  .col-xs-6 {
    width: 50%;
  }
  .col-xs-5 {
    width: 41.66666667%;
  }
  .col-xs-4 {
    width: 33.33333333%;
  }
  .col-xs-3 {
    width: 25%;
  }
  .col-xs-2 {
    width: 16.66666667%;
  }
  .col-xs-1 {
    width: 8.33333333%;
  }
  .col-xs-pull-12 {
    right: 100%;
  }
  .col-xs-pull-11 {
    right: 91.66666667%;
  }
  .col-xs-pull-10 {
    right: 83.33333333%;
  }
  .col-xs-pull-9 {
    right: 75%;
  }
  .col-xs-pull-8 {
    right: 66.66666667%;
  }
  .col-xs-pull-7 {
    right: 58.33333333%;
  }
  .col-xs-pull-6 {
    right: 50%;
  }
  .col-xs-pull-5 {
    right: 41.66666667%;
  }
  .col-xs-pull-4 {
    right: 33.33333333%;
  }
  .col-xs-pull-3 {
    right: 25%;
  }
  .col-xs-pull-2 {
    right: 16.66666667%;
  }
  .col-xs-pull-1 {
    right: 8.33333333%;
  }
  .col-xs-pull-0 {
    right: auto;
  }
  .col-xs-push-12 {
    left: 100%;
  }
  .col-xs-push-11 {
    left: 91.66666667%;
  }
  .col-xs-push-10 {
    left: 83.33333333%;
  }
  .col-xs-push-9 {
    left: 75%;
  }
  .col-xs-push-8 {
    left: 66.66666667%;
  }
  .col-xs-push-7 {
    left: 58.33333333%;
  }
  .col-xs-push-6 {
    left: 50%;
  }
  .col-xs-push-5 {
    left: 41.66666667%;
  }
  .col-xs-push-4 {
    left: 33.33333333%;
  }
  .col-xs-push-3 {
    left: 25%;
  }
  .col-xs-push-2 {
    left: 16.66666667%;
  }
  .col-xs-push-1 {
    left: 8.33333333%;
  }
  .col-xs-push-0 {
    left: auto;
  }
  .col-xs-offset-12 {
    margin-left: 100%;
  }
  .col-xs-offset-11 {
    margin-left: 91.66666667%;
  }
  .col-xs-offset-10 {
    margin-left: 83.33333333%;
  }
  .col-xs-offset-9 {
    margin-left: 75%;
  }
  .col-xs-offset-8 {
    margin-left: 66.66666667%;
  }
  .col-xs-offset-7 {
    margin-left: 58.33333333%;
  }
  .col-xs-offset-6 {
    margin-left: 50%;
  }
  .col-xs-offset-5 {
    margin-left: 41.66666667%;
  }
  .col-xs-offset-4 {
    margin-left: 33.33333333%;
  }
  .col-xs-offset-3 {
    margin-left: 25%;
  }
  .col-xs-offset-2 {
    margin-left: 16.66666667%;
  }
  .col-xs-offset-1 {
    margin-left: 8.33333333%;
  }
  .col-xs-offset-0 {
    margin-left: 0%;
  }
}
/*
@media (min-width: 800px) {
  .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12 {
    float: left;
  }
  .col-sm-12 {
    width: 100%;
  }
  .col-sm-11 {
    width: 91.66666667%;
  }
  .col-sm-10 {
    width: 83.33333333%;
  }
  .col-sm-9 {
    width: 75%;
  }
  .col-sm-8 {
    width: 66.66666667%;
  }
  .col-sm-7 {
    width: 58.33333333%;
  }
  .col-sm-6 {
    width: 50%;
  }
  .col-sm-5 {
    width: 41.66666667%;
  }
  .col-sm-4 {
    width: 33.33333333%;
  }
  .col-sm-3 {
    width: 25%;
  }
  .col-sm-2 {
    width: 16.66666667%;
  }
  .col-sm-1 {
    width: 8.33333333%;
  }
  .col-sm-pull-12 {
    right: 100%;
  }
  .col-sm-pull-11 {
    right: 91.66666667%;
  }
  .col-sm-pull-10 {
    right: 83.33333333%;
  }
  .col-sm-pull-9 {
    right: 75%;
  }
  .col-sm-pull-8 {
    right: 66.66666667%;
  }
  .col-sm-pull-7 {
    right: 58.33333333%;
  }
  .col-sm-pull-6 {
    right: 50%;
  }
  .col-sm-pull-5 {
    right: 41.66666667%;
  }
  .col-sm-pull-4 {
    right: 33.33333333%;
  }
  .col-sm-pull-3 {
    right: 25%;
  }
  .col-sm-pull-2 {
    right: 16.66666667%;
  }
  .col-sm-pull-1 {
    right: 8.33333333%;
  }
  .col-sm-pull-0 {
    right: auto;
  }
  .col-sm-push-12 {
    left: 100%;
  }
  .col-sm-push-11 {
    left: 91.66666667%;
  }
  .col-sm-push-10 {
    left: 83.33333333%;
  }
  .col-sm-push-9 {
    left: 75%;
  }
  .col-sm-push-8 {
    left: 66.66666667%;
  }
  .col-sm-push-7 {
    left: 58.33333333%;
  }
  .col-sm-push-6 {
    left: 50%;
  }
  .col-sm-push-5 {
    left: 41.66666667%;
  }
  .col-sm-push-4 {
    left: 33.33333333%;
  }
  .col-sm-push-3 {
    left: 25%;
  }
  .col-sm-push-2 {
    left: 16.66666667%;
  }
  .col-sm-push-1 {
    left: 8.33333333%;
  }
  .col-sm-push-0 {
    left: auto;
  }
  .col-sm-offset-12 {
    margin-left: 100%;
  }
  .col-sm-offset-11 {
    margin-left: 91.66666667%;
  }
  .col-sm-offset-10 {
    margin-left: 83.33333333%;
  }
  .col-sm-offset-9 {
    margin-left: 75%;
  }
  .col-sm-offset-8 {
    margin-left: 66.66666667%;
  }
  .col-sm-offset-7 {
    margin-left: 58.33333333%;
  }
  .col-sm-offset-6 {
    margin-left: 50%;
  }
  .col-sm-offset-5 {
    margin-left: 41.66666667%;
  }
  .col-sm-offset-4 {
    margin-left: 33.33333333%;
  }
  .col-sm-offset-3 {
    margin-left: 25%;
  }
  .col-sm-offset-2 {
    margin-left: 16.66666667%;
  }
  .col-sm-offset-1 {
    margin-left: 8.33333333%;
  }
  .col-sm-offset-0 {
    margin-left: 0%;
  }
}
*/
/*
@media (min-width: 992px) {
  .col-md-1, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-10, .col-md-11, .col-md-12 {
    float: left;
  }
  .col-md-12 {
    width: 100%;
  }
  .col-md-11 {
    width: 91.66666667%;
  }
  .col-md-10 {
    width: 83.33333333%;
  }
  .col-md-9 {
    width: 75%;
  }
  .col-md-8 {
    width: 66.66666667%;
  }
  .col-md-7 {
    width: 58.33333333%;
  }
  .col-md-6 {
    width: 50%;
  }
  .col-md-5 {
    width: 41.66666667%;
  }
  .col-md-4 {
    width: 33.33333333%;
  }
  .col-md-3 {
    width: 25%;
  }
  .col-md-2 {
    width: 16.66666667%;
  }
  .col-md-1 {
    width: 8.33333333%;
  }
  .col-md-pull-12 {
    right: 100%;
  }
  .col-md-pull-11 {
    right: 91.66666667%;
  }
  .col-md-pull-10 {
    right: 83.33333333%;
  }
  .col-md-pull-9 {
    right: 75%;
  }
  .col-md-pull-8 {
    right: 66.66666667%;
  }
  .col-md-pull-7 {
    right: 58.33333333%;
  }
  .col-md-pull-6 {
    right: 50%;
  }
  .col-md-pull-5 {
    right: 41.66666667%;
  }
  .col-md-pull-4 {
    right: 33.33333333%;
  }
  .col-md-pull-3 {
    right: 25%;
  }
  .col-md-pull-2 {
    right: 16.66666667%;
  }
  .col-md-pull-1 {
    right: 8.33333333%;
  }
  .col-md-pull-0 {
    right: auto;
  }
  .col-md-push-12 {
    left: 100%;
  }
  .col-md-push-11 {
    left: 91.66666667%;
  }
  .col-md-push-10 {
    left: 83.33333333%;
  }
  .col-md-push-9 {
    left: 75%;
  }
  .col-md-push-8 {
    left: 66.66666667%;
  }
  .col-md-push-7 {
    left: 58.33333333%;
  }
  .col-md-push-6 {
    left: 50%;
  }
  .col-md-push-5 {
    left: 41.66666667%;
  }
  .col-md-push-4 {
    left: 33.33333333%;
  }
  .col-md-push-3 {
    left: 25%;
  }
  .col-md-push-2 {
    left: 16.66666667%;
  }
  .col-md-push-1 {
    left: 8.33333333%;
  }
  .col-md-push-0 {
    left: auto;
  }
  .col-md-offset-12 {
    margin-left: 100%;
  }
  .col-md-offset-11 {
    margin-left: 91.66666667%;
  }
  .col-md-offset-10 {
    margin-left: 83.33333333%;
  }
  .col-md-offset-9 {
    margin-left: 75%;
  }
  .col-md-offset-8 {
    margin-left: 66.66666667%;
  }
  .col-md-offset-7 {
    margin-left: 58.33333333%;
  }
  .col-md-offset-6 {
    margin-left: 50%;
  }
  .col-md-offset-5 {
    margin-left: 41.66666667%;
  }
  .col-md-offset-4 {
    margin-left: 33.33333333%;
  }
  .col-md-offset-3 {
    margin-left: 25%;
  }
  .col-md-offset-2 {
    margin-left: 16.66666667%;
  }
  .col-md-offset-1 {
    margin-left: 8.33333333%;
  }
  .col-md-offset-0 {
    margin-left: 0%;
  }
}
*/
  .col-lg-1, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-10, .col-lg-11, .col-lg-12 {
    float: left;
  }
  .col-lg-12 {
    width: 100%;
  }
  .col-lg-11 {
    width: 91.66666667%;
  }
  .col-lg-10 {
    width: 83.33333333%;
  }
  .col-lg-9 {
    width: 75%;
  }
  .col-lg-8 {
    width: 66.66666667%;
  }
  .col-lg-7 {
    width: 58.33333333%;
  }
  .col-lg-6 {
    width: 50%;
  }
  .col-lg-5 {
    width: 41.66666667%;
  }
  .col-lg-4 {
    width: 33.33333333%;
  }
  .col-lg-3 {
    width: 25%;
  }
  .col-lg-2 {
    width: 16.66666667%;
  }
  .col-lg-1 {
    width: 8.33333333%;
  }
  .col-lg-pull-12 {
    right: 100%;
  }
  .col-lg-pull-11 {
    right: 91.66666667%;
  }
  .col-lg-pull-10 {
    right: 83.33333333%;
  }
  .col-lg-pull-9 {
    right: 75%;
  }
  .col-lg-pull-8 {
    right: 66.66666667%;
  }
  .col-lg-pull-7 {
    right: 58.33333333%;
  }
  .col-lg-pull-6 {
    right: 50%;
  }
  .col-lg-pull-5 {
    right: 41.66666667%;
  }
  .col-lg-pull-4 {
    right: 33.33333333%;
  }
  .col-lg-pull-3 {
    right: 25%;
  }
  .col-lg-pull-2 {
    right: 16.66666667%;
  }
  .col-lg-pull-1 {
    right: 8.33333333%;
  }
  .col-lg-pull-0 {
    right: auto;
  }
  .col-lg-push-12 {
    left: 100%;
  }
  .col-lg-push-11 {
    left: 91.66666667%;
  }
  .col-lg-push-10 {
    left: 83.33333333%;
  }
  .col-lg-push-9 {
    left: 75%;
  }
  .col-lg-push-8 {
    left: 66.66666667%;
  }
  .col-lg-push-7 {
    left: 58.33333333%;
  }
  .col-lg-push-6 {
    left: 50%;
  }
  .col-lg-push-5 {
    left: 41.66666667%;
  }
  .col-lg-push-4 {
    left: 33.33333333%;
  }
  .col-lg-push-3 {
    left: 25%;
  }
  .col-lg-push-2 {
    left: 16.66666667%;
  }
  .col-lg-push-1 {
    left: 8.33333333%;
  }
  .col-lg-push-0 {
    left: auto;
  }
  .col-lg-offset-12 {
    margin-left: 100%;
  }
  .col-lg-offset-11 {
    margin-left: 91.66666667%;
  }
  .col-lg-offset-10 {
    margin-left: 83.33333333%;
  }
  .col-lg-offset-9 {
    margin-left: 75%;
  }
  .col-lg-offset-8 {
    margin-left: 66.66666667%;
  }
  .col-lg-offset-7 {
    margin-left: 58.33333333%;
  }
  .col-lg-offset-6 {
    margin-left: 50%;
  }
  .col-lg-offset-5 {
    margin-left: 41.66666667%;
  }
  .col-lg-offset-4 {
    margin-left: 33.33333333%;
  }
  .col-lg-offset-3 {
    margin-left: 25%;
  }
  .col-lg-offset-2 {
    margin-left: 16.66666667%;
  }
  .col-lg-offset-1 {
    margin-left: 8.33333333%;
  }
  .col-lg-offset-0 {
    margin-left: 0%;
  }
@media (max-width: 890px) {
  .col-xs-1, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9, .col-xs-10, .col-xs-11, .col-xs-12 {
    float: left;
  }
  .col-xs-12 {
    width: 100%;
  }
  .col-xs-11 {
    width: 91.66666667%;
  }
  .col-xs-10 {
    width: 83.33333333%;
  }
  .col-xs-9 {
    width: 75%;
  }
  .col-xs-8 {
    width: 66.66666667%;
  }
  .col-xs-7 {
    width: 58.33333333%;
  }
  .col-xs-6 {
    width: 50%;
  }
  .col-xs-5 {
    width: 41.66666667%;
  }
  .col-xs-4 {
    width: 33.33333333%;
  }
  .col-xs-3 {
    width: 25%;
  }
  .col-xs-2 {
    width: 16.66666667%;
  }
  .col-xs-1 {
    width: 8.33333333%;
  }
  .col-xs-pull-12 {
    right: 100%;
  }
  .col-xs-pull-11 {
    right: 91.66666667%;
  }
  .col-xs-pull-10 {
    right: 83.33333333%;
  }
  .col-xs-pull-9 {
    right: 75%;
  }
  .col-xs-pull-8 {
    right: 66.66666667%;
  }
  .col-xs-pull-7 {
    right: 58.33333333%;
  }
  .col-xs-pull-6 {
    right: 50%;
  }
  .col-xs-pull-5 {
    right: 41.66666667%;
  }
  .col-xs-pull-4 {
    right: 33.33333333%;
  }
  .col-xs-pull-3 {
    right: 25%;
  }
  .col-xs-pull-2 {
    right: 16.66666667%;
  }
  .col-xs-pull-1 {
    right: 8.33333333%;
  }
  .col-xs-pull-0 {
    right: auto;
  }
  .col-xs-push-12 {
    left: 100%;
  }
  .col-xs-push-11 {
    left: 91.66666667%;
  }
  .col-xs-push-10 {
    left: 83.33333333%;
  }
  .col-xs-push-9 {
    left: 75%;
  }
  .col-xs-push-8 {
    left: 66.66666667%;
  }
  .col-xs-push-7 {
    left: 58.33333333%;
  }
  .col-xs-push-6 {
    left: 50%;
  }
  .col-xs-push-5 {
    left: 41.66666667%;
  }
  .col-xs-push-4 {
    left: 33.33333333%;
  }
  .col-xs-push-3 {
    left: 25%;
  }
  .col-xs-push-2 {
    left: 16.66666667%;
  }
  .col-xs-push-1 {
    left: 8.33333333%;
  }
  .col-xs-push-0 {
    left: auto;
  }
  .col-xs-offset-12 {
    margin-left: 100%;
  }
  .col-xs-offset-11 {
    margin-left: 91.66666667%;
  }
  .col-xs-offset-10 {
    margin-left: 83.33333333%;
  }
  .col-xs-offset-9 {
    margin-left: 75%;
  }
  .col-xs-offset-8 {
    margin-left: 66.66666667%;
  }
  .col-xs-offset-7 {
    margin-left: 58.33333333%;
  }
  .col-xs-offset-6 {
    margin-left: 50%;
  }
  .col-xs-offset-5 {
    margin-left: 41.66666667%;
  }
  .col-xs-offset-4 {
    margin-left: 33.33333333%;
  }
  .col-xs-offset-3 {
    margin-left: 25%;
  }
  .col-xs-offset-2 {
    margin-left: 16.66666667%;
  }
  .col-xs-offset-1 {
    margin-left: 8.33333333%;
  }
  .col-xs-offset-0 {
    margin-left: 0%;
  }
}
.mrg-top-1 {
  margin-top: 10px;
}
.mrg-top-2 {
  margin-top: 25px;
}
.mrg-top-3 {
  margin-top: 50px;
}
.mrg-top-4 {
  margin-top: 100px;
}
.mrg-bottom-1{
  margin-bottom:10px;
}
.mrg-bottom-2 {
  margin-bottom: 25px;
}
.mrg-bottom-3 {
  margin-bottom: 50px;
}
.mrg-bottom-4 {
  margin-bottom: 100px;
}
.mrg-left-1{
  margin-left:10px;
}
.mrg-left-2 {
  margin-left: 25px;
}
.mrg-left-3 {
  margin-left: 50px;
}
.mrg-left-4 {
  margin-left: 100px;
}
.mrg-right-1{
  margin-right:10px;
}
.mrg-right-2 {
  margin-right: 25px;
}
.mrg-right-3 {
  margin-right: 50px;
}
.mrg-right-4 {
  margin-right: 100px;
}
.pdg-top-1 {
  padding-top: 5px;
}
.pdg-top-2 {
  padding-top: 10px;
}
.pdg-top-3 {
  padding-top: 25px;
}
.pdg-top-4 {
  padding-top: 50px;
}
.pdg-bottom-1{
  padding-bottom:5px;
}
.pdg-bottom-2 {
  padding-bottom: 10px;
}
.pdg-bottom-3 {
  padding-bottom: 25px;
}
.pdg-bottom-4 {
  padding-bottom: 50px;
}
.pdg-left-1 {
  padding-left:5px;
}
.pdg-left-2 {
  padding-left: 10px;
}
.pdg-left-3 {
  padding-left: 25px;
}
.pdg-left-4 {
  padding-left: 50px;
}
.pdg-right-1{
  padding-right:5px;
}
.pdg-right-2 {
  padding-right: 10px;
}
.pdg-right-3 {
  padding-right: 25px;
}
.pdg-right-4 {
  padding-right: 50px;
}
.no-padding {
   padding: 0 !important;
}
.no-margin {
   margin: 0 !important;
}
.bottom-1{
  bottom: 20px;
}
.bottom-2{
  bottom: 40px;
}
/* media for max800px */
@media (max-width: 890px) {
  .section {
    margin:15px 0;
  }
  .mrg-top-1 {
    margin-top: 5px;
  }
  .mrg-top-2 {
    margin-top: 10px;
  }
  .mrg-top-3 {
    margin-top: 25px;
  }
  .mrg-top-4 {
    margin-top: 50px;
  }
  .mrg-bottom-1{
    margin-bottom:5px;
  }
  .mrg-bottom-2 {
    margin-bottom: 10px;
  }
  .mrg-bottom-3 {
    margin-bottom: 25px;
  }
  .mrg-bottom-4 {
    margin-bottom: 50px;
  }
  .mrg-left-1{
    margin-left:5px;
  }
  .mrg-left-2 {
    margin-left: 10px;
  }
  .mrg-left-3 {
    margin-left: 25x;
  }
  .mrg-left-4 {
    margin-left: 50px;
  }
  .mrg-right-1{
    margin-right:5px;
  }
  .mrg-right-2 {
    margin-right: 10px;
  }
  .mrg-right-3 {
    margin-right: 25px;
  }
  .mrg-right-4 {
    margin-right: 50px;
  }
  .mrg-top-xs-1 {
    margin-top: 5px;
  }
  .mrg-bottom-xs-1 {
    margin-bottom: 5x;
  }
  .mrg-top-xs-2 {
    margin-top: 10px;
  }
  .mrg-bottom-xs-2 {
    margin-bottom: 10x;
  }
  .mrg-top-xs-3 {
    margin-top: 15px;
  }
  .mrg-bottom-xs-3 {
    margin-bottom: 15px;
  }
  .mrg-top-xs-4 {
    margin-top: 20px;
  }
  .mrg-bottom-xs-4 {
    margin-bottom: 20x;
  }
  .pdg-bottom-xs-1 {
    padding-bottom:5px;
  }
  .pdg-bottom-xs-2 {
    padding-bottom: 10px;
  }
  .pdg-bottom-xs-3 {
    padding-bottom: 20px;
  }
  .pdg-bottom-xs-4 {
    padding-bottom: 50px;
  }
  .pdg-left-xs-1 {
    padding-left:5px;
  }
  .pdg-left-xs-2 {
    padding-left: 10px;
  }
  .pdg-left-xs-3 {
    padding-left: 20px;
  }
  .pdg-left-xs-4 {
    padding-left: 50px;
  }
  .pdg-right-xs-1 {
    padding-right:5px;
  }
  .pdg-right-xs-2 {
    padding-right: 10px;
  }
  .pdg-right-xs-3 {
    padding-right: 20px;
  }
  .pdg-right-xs-4 {
    padding-right: 50px;
  }
  .pdg-top-xs-1 {
    padding-top:5px;
  }
  .pdg-top-xs-2 {
    padding-top: 10px;
  }
  .pdg-top-xs-3 {
    padding-top: 20px;
  }
  .pdg-top-xs-4 {
    padding-top: 50px;
  }
}
.clearfix:before,
.clearfix:after,
.container:before,
.container:after,
.container-full:before,
.container-full:after,
.row:before,
.row:after {
  content: " ";
  display: table;
}
.clearfix:after,
.container:after,
.container-full:after,
.row:after {
  clear: both;
}
.center-block {
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.pull-right {
  float: right !important;
}
.pull-left {
  float: left !important;
}
.hide {
  display: none !important;
}
.show {
  display: block !important;
}
@media (max-width: 890px) { 
  .no-mobile {
    display: none !important;
  }
}
@media (min-width: 890px) { 
  .no-desktop {
    display: none !important;
  }
}
.invisible {
  visibility: hidden;
}
.affix {
  position: fixed;
}
/* Overlay and Pop up Def */
.bsk-modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}
.bsk-modal-content {
    background-color: #fefefe;
    margin: 25% auto; /* 15% from the top and centered */
    padding: 20px;
    width: 80%; /* Could be more or less, depending on screen size */
}
.bsk-modal-content .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}
.bsk-modal-content .close:hover,
.bsk-modal-content .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}
@media (max-width: 890px) { 
  .bsk-modal-content {
      width: 92%; /* Could be more or less, depending on screen size */
      padding: 5px;
  }
}


/* END BOOTSTRAP STYLES*/

/* START BSK CUSTOM STYLES */
/* Text Generic styles */
.bsk-text {
  font-family: "bentonsansmedium", "Roboto", sans-serif !important;
  background: #fff;
  font-size: 2rem;
  line-height: 2.5rem;
  font-weight: bold;
  text-transform: lowercase;
  letter-spacing: 4px;
}
.bsk-text-lg {
  font-family: "bentonsansmedium", "Roboto", sans-serif !important;
  background: #fff;
  font-size: 4rem;
  line-height: 6.5rem;
  font-weight: bold;
  text-transform: lowercase;
  letter-spacing: 4px;
}
@media (max-width: 890px) {
  .bsk-text-lg {
    font-size: 2rem;
    line-height: 3.5rem;
  }
}
.bsk-text-md {
  font-family: "bentonsansmedium", "Roboto", sans-serif !important;
  background: #fff;
  font-size: 1rem;
  line-height: 2.5rem;
  font-weight: bold;
  text-transform: lowercase;
  letter-spacing: 2px;
}
.bsk-text-xs {
  font-family: "bentonsansmedium", "Roboto", sans-serif !important;
  background: #fff;
  font-size: 0.7rem;
  line-height: 1.1rem;
  font-weight: normal;
  letter-spacing: 2px;
}
.bsk-title-slide {
  font-family: "bentonsansmedium", "Roboto", sans-serif !important;
  background: #fff !important;
  font-size: 2rem !important;
  font-weight: bold !important;
  text-transform: lowercase !important;
  letter-spacing: 4px !important;
}
.bsk-button-container {
  background: #fff !important;
  padding: 17px 22px !important;
}
.bsk-master-module .bsk-button-container {
 background: #fff !important; 
 padding: 18px 27px !important;
}
.bsk-button {
  font-family: "bentonsansmedium", "Roboto", sans-serif !important;
  font-size: 1.25rem !important;
  text-transform: lowercase !important;
  font-weight: bold !important;
  padding-bottom: 4px !important;
  letter-spacing: 3px !important;
  border-bottom: 3px solid #000 !important;
}
.bsk-master-module .bsk-button {
  font-size: 1.55rem !important;
}
/* END BSK CUSTOM STYLES */

/* START CUSTOM MODULE STYLES */ 

/* MASTER CSS */
.bsk-master-module .absolute{
  left: 50%;
  top: 50%;
}
.bsk-master-module .absolute a{
  left: -50%;
  position: relative;
}
/* END MASTER CSS */

/* BANNER SALES */
#sales-banner-module a {
  padding: 15px 0;
  background: #f03722;
  float: left;
  position: relative;
  width: 100%;
}
#sales-banner-module span {
  color: #fff;
  font-size: 1.2rem;
  font-weight: bold;
  text-transform: lowercase;
  font-family: "bentonsansmedium", "Roboto", sans-serif !important;
  letter-spacing: 3px;
}
.tooltip-sales {
  position: relative;
  display: inline-block;
}
#sales-banner-module .tooltip-sales p.tooltiptext-sales span  {
  margin: 0 0 10px; 
  font-family: "bentonsansregular", "Roboto", sans-serif !important;
  letter-spacing: 1px;
  font-weight: normal;
  font-size: 12px;
  color: #000;
  line-height: 20px;
  text-transform: inherit;
  text-transform: initial;
  text-align: left;
}
.tooltip-sales .tooltiptext-sales {
  visibility: hidden;
  width: 400px;
  background-color: #fff;
  color: #000;
  border-radius: 0;
  padding: 15px;
  position: fixed;
  text-align: center;
  z-index: 1;
  -webkit-box-shadow: 0px 0px 25px -6px rgba(0,0,0,0.75);
  -moz-box-shadow: 0px 0px 25px -6px rgba(0,0,0,0.75);
  box-shadow: 0px 0px 25px -6px rgba(0,0,0,0.75);
}
.tooltip-sales:hover .tooltiptext-sales {
    visibility: visible;
}
.sales-banner-module-mobile {
  text-align: center;
  line-height: 14px;
  margin-top: 5px;
  margin-bottom: 10px;
  padding: 0 5px;
}
.sales-banner-module-mobile span {
  font-size: 11px;
}
/* END BANNER SALES */

/* Olapic Module */
.olapic .olapic-slider-widget.olapic-slider {
  margin-top: 10px;
}
.olapic .olapic-header-column h3 {
  font-size: 2.188rem;
  letter-spacing: 3px;
}
@media (max-width: 890px) { 
  .olapic .olapic-header-column h3 {
    font-size: 1.75rem;
    letter-spacing: 4px;
  }
}

/* Slide Generic content */
.slider-content{
  margin-top:-230px;
}
@media (max-width: 890px) { 
  #slider .second-button{
    margin-top: 40px;
  }
  #slider .second-button .bsk-button-container{
    padding: 10px!important;
    background: #000!important;
  }
  #slider .second-button .bsk-button-container .bsk-button{
    font-size: 1rem!important;
    padding: 3px!important;
    border-bottom: 2px solid #fff!important;
    color: #fff!important;
  }
  #slider .slider-content{
    margin-top: -180px;
  }
}
/* End Slide Generic content */

/* Modules Content */
@media (max-width: 890px) {
  #categories .bottom-2{
    bottom: 49%;
  }
  #categories .subsection-content{
    padding: 0 15px 15px 15px;
  }
  #categories .subsection-content:last-child{
    padding: 0 15px 0 15px;
  }
}
/* End Modules Content */

/* Services ES content */
.bskcod-module{
  background: #cccccc;
  padding: 20px 0;
  color: #fff;
  width: 100%;
}
.bskcod-module:hover{
  background: #000;
}
.bskcod-text{
  letter-spacing: 2px;
  font-weight: bold;
  font-size:16px;
}
.ico.contra-reembolso{
  background-position: -343px -485px; 
  width: 44px;
  height: 33px;
  margin-right:15px;
}
.ico.tarjeta-regalo{
  background-position: -464px -483px; 
  width: 41px;
  height: 32px;
  margin-right:15px;
}
.ico.wallet{
  background-position: -404px -483px; 
  width: 41px;
  height: 32px;
  margin-right:15px;
}
a:hover .ico.contra-reembolso,
a:hover .ico.tarjeta-regalo,
a:hover .ico.wallet{
  opacity: 1;
}
@media (max-width: 890px) { 
  #bskservices-container .table-center{
    margin: 0 20px;
  }
  #bskservices-container .bskservices-content{
    padding: 0 0 2px 0;
  }
  #bskservices-container .bskservices-content:last-child{
    padding: 0;
  }
  #bskservices-container .ico.ico-arrow{
    float: right;
    background-position: -246px -380px;
    width: 20px;
    margin-right: 30px;
    height: 25px;
  }
  #bskservices-container a:hover .ico.ico-arrow{
    opacity: 1;
  }
}
/* End Services ES content */

/* END CUSTOM MODULE STYLES */ 

/* START dvPromos - beta */
/*
div.homeModule.dvPromos.promociones {
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  overflow: hidden;
  margin-top: 8px;
  margin-bottom: 10px;
}
*/
div.homeModule.dvPromos.promociones {
  display: none;
}
.homeModule.dvPromos > a{
  flex: 1;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 3px 10px;
  padding: 10px;
  background: #FFF;
  -webkit-box-shadow: 3px 3px 0px 0px rgba(170,170,170,1);
  -moz-box-shadow: 3px 3px 0px 0px rgba(170,170,170,1);
  box-shadow: 3px 3px 0px 0px rgba(170,170,170,1);
  border: 1px solid #aaaaaa;
  text-transform: uppercase;
  text-align: center;
}
/* START TK TR style news*/
.homeModule.dvPromos > a.gtmPromoNewsletter {
  flex: 1;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 3px 10px;
  padding: 10px;
  background: #fff;
  -webkit-box-shadow: 3px 3px 0px 0px rgba(170,170,170,1);
  -moz-box-shadow: 3px 3px 0px 0px rgba(170,170,170,1);
  box-shadow: 3px 3px 0px 0px rgba(170,170,170,1);
  border: 1px solid #aaa;
  text-transform: uppercase;
  text-align: center;
}
.homeModule.dvPromos > a.gtmPromoNewsletter:hover {
  -webkit-box-shadow: 3px 3px 0px 0px rgba(0,0,0,1);
  -moz-box-shadow: 3px 3px 0px 0px rgba(0,0,0,1);
  box-shadow: 3px 3px 0px 0px rgba(0,0,0,1);
  border: 1px solid #000;
}
.dvPromos a.gtmPromoNewsletter span.clr04 {
  color: #000;
}
.homeModule.dvPromos > a.gtmPromoNewsletter > span {
  color: #fe0000;
}
/* END TK TRK style news */
.homeModule.dvPromos > a.promoFreeShipping {
  background:#fff;
}
.homeModule.dvPromos > a.promoFreeShipping  .clr03 {
  color: #000;
  font-weight: bold;
}
/* BOTON MID SEASON */
.homeModule.dvPromos > a .txtPromoDctoWomen03,
.homeModule.dvPromos > a .txtPromoDctoMen03 {
  text-transform: none;
}
.homeModule.dvPromos > a:first-child {
  margin-left: 20px;
}
.homeModule.dvPromos > a:last-child {
  margin-right: 20px;
}
.homeModule.dvPromos > a:hover {
  -webkit-box-shadow: 3px 3px 0px 0px rgba(0,0,0,1);
  -moz-box-shadow: 3px 3px 0px 0px rgba(0,0,0,1);
  box-shadow: 3px 3px 0px 0px rgba(0,0,0,1);
  border: 1px solid #000;
}
/*
.homeModule.dvPromos > a.promoFreeShipping:hover,
.homeModule.dvPromos > a.gtmPromoExpress:hover {
  -webkit-box-shadow: 3px 3px 0px 0px rgba(199,199,199,1);
  -moz-box-shadow: 3px 3px 0px 0px rgba(199,199,199,1);
  box-shadow: 3px 3px 0px 0px rgba(199,199,199,1);
  border: 1px solid #c7c7c7;
  cursor: default;
}
*/
.homeModule.dvPromos > a > span{
  vertical-align: middle;
  float: left;
  width: 100%;
  position: relative;
  text-transform: uppercase;
  color: #000;
  font: 13px/22px bentonsansmedium,arial,sans-serif;
  letter-spacing: 2px;
}
.dvPromos b.clr04, 
.dvPromos span.clr03, 
.dvPromos b.clr03, 
.dvPromos span.clr04 {
  color: #F9284A;
}
.dvPromos span.clr02, 
.dvPromos b.clr02,
.promoFreeShipping .txtPromo23 {
  display: inline-block;
}
.dvPromos .gtmPromoNewsletterNew .clr04, 
.dvPromos .promoFreeShipping .clr03 {
  font-size: 15px;
}
.dvPromos .promoHello {
  pointer-events: none;
}
@media screen and (max-width: 768px) { 
  div.homeModule.dvPromos.promociones {
    display: block !important;
    margin-top: -15px;
    margin-bottom: 0;
  }
  .homeModule.dvPromos > a {
    display: table;
    flex: inherit;
    margin: 15px 10px;
  }
  .dvPromos > a > span > span {
    vertical-align: middle;
  }
  .homeModule.dvPromos > a:first-child {
    margin-left: 10px;
  }
  .returnPeriod{
    margin-top:0 !important;
  }
}
.homeModule.dvPromos > .gtmPromoNewsWoman{
  flex: 1;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 3px 10px;
  padding: 10px;
  background: #000;
  -webkit-box-shadow: inherit;
  -moz-box-shadow: inherit;
  box-shadow: inherit;
  border: 1px solid #aaaaaa;
  text-transform: lowercase;
  text-align: center;
  display: none;
  font-size:16px;
}
.homeModule.dvPromos > .gtmPromoNewsMan{
  flex: 1;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 3px 10px;
  padding: 10px;
  background: #000;
  -webkit-box-shadow: inherit;
  -moz-box-shadow: inherit;
  box-shadow: inherit;
  border: 1px solid #aaaaaa;
  text-transform: lowercase;
  text-align: center;
  display: none;
  font-size:16px;
}
.homeModule.dvPromos > .gtmPromoNewsMan:hover {
  -webkit-box-shadow: inherit;
  -moz-box-shadow: inherit;
  box-shadow: inherit;
}
.homeModule.dvPromos > .gtmPromoNewsWoman:hover {
  -webkit-box-shadow: inherit;
  -moz-box-shadow: inherit;
  box-shadow: inherit;
}
.homeModule.dvPromos > .gtmPromoNewsWoman > span{
  vertical-align: middle;
  float: left;
  width: 100%;
  position: relative;
  text-transform: lowercase;
  color: #FFF;
  font: 13px/22px bentonsansmedium,arial,sans-serif;
  letter-spacing: 2px;
  font-size:16px;
}
.homeModule.dvPromos > .gtmPromoNewsMan > span{
  vertical-align: middle;
  float: left;
  width: 100%;
  position: relative;
  text-transform: lowercase;
  color: #FFF;
  font: 13px/22px bentonsansmedium,arial,sans-serif;
  letter-spacing: 2px;
  font-size:16px;
}
@media screen and (max-width: 800px) { /*768px*/ 
  .dvPromos{
    display: block;    
    width: 100%;    
  }
  .dvPromos.mobile1Promo{overflow-x: visible;}

  .dvPromos > a > span{
    display: block;
    white-space: normal;
    width: 100%;
  }
  .dvPromos > a, .dvPromos.wdt50p > a{
    background-color: #fff;
    border: 1px solid #c7c7c7;
    box-shadow: 4px 4px 0 0 #c7c7c7;
    display: block;
    margin:  20px 12px;
    padding: 5px;
    width: 92%;
    width: calc(100% - 24px);
  }
  .dvPromos > a.gtmPromoNewsletter{padding-top: 16px;}
  .dvPromos > a.gtmPromo50itemSelected{
    padding-bottom: 11px;
    padding-top: 15px;
  }
  .dvPromos > a.promoHello{padding-bottom: 11px;}
}
/* END dvPromos - beta */

</style>



<style>

    @-webkit-keyframes slide-fwd-center{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}100%{-webkit-transform:translateZ(160px);transform:translateZ(160px)}}@keyframes slide-fwd-center{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}100%{-webkit-transform:translateZ(160px);transform:translateZ(160px)}}
    @-webkit-keyframes text-focus-in{0%{-webkit-filter:blur(12px);filter:blur(12px);opacity:0}100%{-webkit-filter:blur(0);filter:blur(0);opacity:1}}@keyframes text-focus-in{0%{-webkit-filter:blur(12px);filter:blur(12px);opacity:0}100%{-webkit-filter:blur(0);filter:blur(0);opacity:1}}
        
    .col-lg-1.woman {
        -webkit-transform: rotate(-90deg);
        -moz-transform: rotate(-90deg);
        -ms-transform: rotate(-90deg);
        transform: rotate(-90deg);
        top: 140px;
        z-index: 500;
    }
    .bsk-master-module .bsk-button-container {
        background: transparent !important;
    }
    .bsk-master-module .col-lg-1.woman .bsk-button-container {
        background: transparent !important;
    }
    .bsk-master-module .col-lg-1.woman .bsk-button-container span,
    .bsk-master-module .col-lg-1.man .bsk-button-container span {
        border: 0 !important;
    }
    .bsk-master-module .col-lg-5.woman {
        margin-left: 40px;
    }
    .bsk-master-module .col-lg-11.man {
        margin-top: 7%;
    }
    .col-lg-1.man {
        -webkit-transform: rotate(-90deg);
        -moz-transform: rotate(-90deg);
        -ms-transform: rotate(-90deg);
        transform: rotate(-90deg);
        bottom: 90px;
        position: absolute;
        z-index: 500;
    }
    .bsk-master-module .col-lg-11 {
        padding: 0;
    }
    .cont-50 {
        width: 50%;
        float: left;
        position: relative;
    }
    .footer {
        border-top: 2px solid #000000 !important;
        margin-top: -15px;
    }
    .bsk-master-module .mask-content {
        -webkit-transition: opacity .25s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        -moz-transition: opacity .25s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        -o-transition: opacity .25s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        transition: opacity .25s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        opacity: 0;
    }
    .bsk-master-module .dark-container:hover .mask-content .bsk-button {
        -webkit-animation: text-focus-in .7s cubic-bezier(0.550, 0.085, 0.680, 0.530) both;
        -moz-animation: text-focus-in .7s cubic-bezier(0.550, 0.085, 0.680, 0.530) both;
        animation: text-focus-in .7s cubic-bezier(0.550, 0.085, 0.680, 0.530) both;
    }
    .bsk-master-module .table-cell {
        display: table-cell;
        vertical-align: middle;
        text-align: center;
        width: 100%;
        height: 100%;
    }
    .bsk-master-module .dropdown-overlay {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #111;
        opacity: 0;
    }
    .bsk-master-module .mask-content .bsk-button  {
        color: #fff !important;
        border: 0 !important;
        font-size: 2.2rem !important;
    }
    .bsk-master-module .dark-container:hover .dropdown-overlay {
        opacity: .8;
    }
    .bsk-master-module .dark-container .dropdown-overlay {
        -webkit-transition: opacity .5s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        -moz-transition: opacity .5s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        -o-transition: opacity .5s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        transition: opacity .5s cubic-bezier(0.645, 0.045, 0.355, 1.000);
        
    }
    .bsk-master-module .dark-container:hover .mask-content  {
        opacity: 1;
    } 
    /*especificaciones idioma chino, buena lectura */
    .zh_CN .bsk-button-container {
        padding: 0 !important;
        line-height: 25px;
    }
    .zh_CN .col-lg-1.woman,
    .zh_CN .col-lg-1.man {
        -webkit-transform: rotate(0deg);
        -moz-transform: rotate(0deg);
        -ms-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    @media (max-width:890px){
        .cont-50 {
            width: 100%;
        }
        .bsk-master-module .col-lg-11.man.pull-right {
            float: left !important;
        }
        .bsk-master-module .col-lg-1.man.no-desktop{
            right: 0;
            top: 170px;
            bottom: inherit;
            bottom: initial;
        }
        .col-lg-11 {
            width: 84.666667%;
        }
        .col-lg-1 {
            width: 15.333333%;
        }
        .bsk-master-module .col-lg-11.man {
            margin-top: 13%;
        }
    }
</style>

<div class="container-full info-module bsk-master-module" bershka-translations="home/json/data_home_master.json" data-translations="home_march_lookbook" ng-controller="ItxHomeTrackingController">
    <div class="row no-margin">
        <!-- Module WOMAN -->
        <div class="cont-50">
            <div class="col-lg-1 woman">
                <a ng-click="trackHomeBanner('1010193132','button','20170602','LANDING_WOMAN','button','module_1_1')" class="bsk-button-container lnkHomeWomanSales" href="#">
                    <span class="bsk-button txtShopwoman"></span>
                </a>
            </div>
            <div class="col-lg-11 woman pull-right">
                <a ng-click="trackHomeBanner('1010193132','image','20170602','LANDING_WOMAN','image','module_1_1')" href="#" class="lnkHomeWomanSales dark-container"><img src="https://static.bershka.net/4/static/itxwebstandard/images/home/2018/master/woman.jpg?20190517033500" class="img-responsive">
                <div class="dropdown-overlay"></div>
                <div class="absolute mask-content center-xy">
                    <div class="table absolute"></div>
                        <div class="table-cell">
                        <span class="bsk-button txtShopwoman"></span>
                    </div>
                </div>
                </a>
            </div>
        </div>
        <!-- Module MAN -->
        <div class="cont-50">
            <div class="col-lg-1 man no-mobile">
                <a ng-click="trackHomeBanner('1010193133','button','20170602','LANDING_MAN','button','module_1_2')" class="bsk-button-container lnkHomeManSales" href="#">
                    <span class="bsk-button txtShopman"></span>
                </a>
            </div>
            <div class="col-lg-11 man pull-right">
                <a ng-click="trackHomeBanner('1010193133','image','20170602','LANDING_MAN','image','module_1_2')" href="#" class="lnkHomeManSales dark-container"><img src="https://static.bershka.net/4/static/itxwebstandard/images/home/2018/master/man.jpg?20190517033500" class="img-responsive">
                    <div class="dropdown-overlay"></div>
                    <div class="absolute mask-content center-xy">
                        <div class="table absolute"></div>
                        <div class="table-cell">
                            <span class="bsk-button txtShopman"></span>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-1 man no-desktop">
                <a class="bsk-button-container lnkmanmaster" href="#">
                    <span class="bsk-button txtShopman"></span>
                </a>
            </div>
        </div>
        </div>
    </div> 

<!-- BANNER MASTER HOME 
<div class="container-full info-module bsk-master-module" data-translations="home_master">
  <div class="row no-margin">
    <div class="col-xs-12 col-lg-6 no-padding vertical-align-middle mrg-bottom-1" data-labelgtm="home-woman">
        <div class="subsection-content">
          <a href="#" class="lnkwomanmaster" data-actiongtm="image"><img src="https://static.bershka.net/4/static/itxwebstandard/images/home/2017/master/woman.jpg?20190517033500" class="img-responsive"></a>
        </div>
        <div class="absolute">
        <a class="bsk-button-container lnkwomanmaster" href="#" data-actiongtm="button">
              <span class="bsk-button txtShopwoman"></span>
          </a>
        </div>
    </div>
    <div class="col-xs-12 col-lg-6 no-padding vertical-align-middle" data-labelgtm="home-man">
        <div class="subsection-content">
          <a href="#" class="lnkmanmaster" data-actiongtm="image"><img src="https://static.bershka.net/4/static/itxwebstandard/images/home/2017/master/man.jpg?20190517033500" class="img-responsive"></a>
        </div>
        <div class="absolute">
        <a class="bsk-button-container lnkmanmaster" href="#" data-actiongtm="button">
              <span class="bsk-button txtShopman"></span>
          </a>
        </div>
    </div>
  </div>
</div>
-->
<!-- END SPOT=BK3_ESpot_Home -->
				</div>
				<div class="clearfix">&nbsp;</div>
			</div>
    <script>
       
    </script>
<footer class="footer ng-hide">
	<!-- BEGIN SPOT=BK3_ESpot_Footer_Begin -->

<!-- END SPOT=BK3_ESpot_Footer_Begin -->
<!-- BEGIN SPOT=BK3_ESpot_footerPaymentMethods -->
<script>
    inditex.xFooterPaymentMethods = [{
        country: "ES",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "7"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "70"
        }]
    }, {
        country: "IC",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "7"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "70"
        }]
    }, {
        country: "FR",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }]
    }, {
        country: "GR",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "17"
        }, {
            code: "74"
        }]
    }, {
        country: "IT",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "17"
        }, {
            code: "72"
        }, {
            code: "70"
        }]
    }, {
        country: "MT",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }]
    }, {
        country: "PT",
        methods: [ {
            code: "18"
        }, {
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }]
    }, {
        country: "RO",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }]
    }, {
        country: "BG",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "17"
        }, {
            code: "9"
        }]
    }, {
        country: "AT",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "17"
        }, {
            code: "26"
        }]
    }, {
        country: "DE",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "17"
        }, {
            code: "26"
        }, {
            code: "27"
        }]
    }, {
        country: "PL",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "14"
        }, {
            code: "17"
        }, {
            code: "70"
        }]
    }, {
        country: "SE",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }]
    }, {
        country: "DK",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }]
    }, {
        country: "SK",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "17"
        }]
    }, {
        country: "CZ",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "17"
        }]
    }, {
        country: "LT",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code:"6"
        }, {
            code: "8"
        }]
    }, {
        country: "HR",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code:"5"
        }, {
            code: "9"
        }, {
            code: "17"
        }]
    }, {
        country: "SI",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }]
    }, {
        country: "EE",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "6"
        }, {
            code: "8"
        }]
    }, {
        country: "LV",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "6"
        }, {
            code: "8"
        }]
    }, {
        country: "HR",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "5"
        }, {
            code: "9"
        }, {
            code: "17"
        }]
    }, {
        country: "FI",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "26"
        }]
    }, {
        country: "BE",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "17"
        }]
    }, {
        country: "CH",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "17"
        }]
    }, {
        country: "LU",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }]
    }, {
        country: "MX",
        methods: [{
            code: "8"
        }, {
            code: "17"
        }, {
            code: "19"
        }, {
            code: "20"
        }, {
            code: "23"
        }, {
            code: "28"
        }, {
            code: "73"
        }, {
            code: "70"
        }]
    }, {
        country: "NL",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "13"
        }, {
            code: "17"
        }, {
            code: "26"
        }, {
            code: "70"
        }]
    }, {
        country: "GB",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "17"
        }, {
            code: "70"
        }]
    }, {
        country: "IE",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "8"
        }, {
            code: "9"
        }, {
            code: "17"
        }, {
            code: "70"
        }]
    }, {
        country: "RU",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "16"
        }, {
            code: "82"
        }]
    }, {
        country: "TR",
        methods: [{
            code: "19"
        }, {
            code: "20"
        }, {
            code: "28"
        }, {
            code: "17"
        }, {
            code: "9"
        }]
    },
    {
        country: "US",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "4"
        }, {
            code: "5"
        }, {
            code: "6"
        }, {
            code: "8"
        }, {
            code: "17"
        }]
    },
    {
        country: "JP",
        methods: [{
            code: "1"
        }, {
            code: "2"
        }, {
            code: "3"
        }, {
            code: "6"
        }, {
            code: "16"
        }]
    }
];

</script>
<!-- END SPOT=BK3_ESpot_footerPaymentMethods -->
	<div class="footer-newsletter">
		<label for="footerEmail">Newsletter</label>
		<form name="footerNewsletter" class="flex" method="POST">			
			<div class="footer-newsletterText">	
				<p class="newsletter-text">
					<span class="newsletter-text-literal">Subscribe to our newsletter and be the first to receive the latest fashion news, promotions and more!</span>
					<span class="newsletter-text-unsubscribe hide-mobile">
						<a class="link" ng-click="openNewsletterModal(true)"> Would you like to stop receiving our newsletter?</a>
					</span>
				</p>
			</div>
			<div class="newsletter-fields flex formControl">
				<input id="footerEmail" type="email" full-email valid-email placeholder="Enter your email address" name="footerEmail" ng-model="newsletterEmail">
				<form-error-messages for="footerEmail"></form-error-messages>
				<button class="btn-cta1" ng-disabled="!footerNewsletter.footerEmail.$valid || !newsletterEmail" ng-click="openNewsletterModal(false)">
					Subscribe
				</button>	
			</div>			
			<div class="newsletter-text-unsubscribe newsletter-fields flex is-mobile">
				<a class="link" ng-click="openNewsletterModal(true)">Would you like to stop receiving our newsletter?</a>
			</div>
		</form>
	</div>
<!-- BEGIN SPOT=BK3_ESpot_Footer_Mid_01 -->

<!-- END SPOT=BK3_ESpot_Footer_Mid_01 -->
	
	<div class="footer-separator"></div>

<!-- BEGIN SPOT=BK3_ESpot_Footer_Mid_02 -->

<!-- END SPOT=BK3_ESpot_Footer_Mid_02 -->
	<div class="footer-menu">
		<div class="footerMenu-mobile">
			<contact class="centered footer-contact"></contact>
			<!-- 
			<div class="footerMenu-mobile-message"><span class="footerMenu-mobile-text">Need Help?</span></div>
			<div class="footer-phoneContainer">
				<i class="ico help-phone"></i>
				<a href="tel:{{::core.iStoreJSON.details.supportPhone}}" class="footer-phoneNumber">{{::core.iStoreJSON.details.supportPhone}}</a>
				<div class="openHourContainer">
					<p class="openHours strong">Monday to Friday from 08:00 to 17:00 <br> Saturday from 09:00 to 15:00</p>
				</div>
			</div>
			 -->
		</div>
		<div class="footerMenu-desktop">
			<div class="footer-menuAyuda">
<!-- BEGIN SPOT=BK3_ESpot_Footer_Contact_Begin -->

<!-- END SPOT=BK3_ESpot_Footer_Contact_Begin -->
				<contact class="footer-contact"></contact>
				<!-- 
				<h3>Need Help?</h3>
				<ul>
					<li ng-click="trackFooterEvent('contacto-online')"><a ng-click="openContactModal('particular')" ng-show="::core.isOpenForSale()">Contact (Online Store)</a></li>
					<li ng-click="trackFooterEvent('contacto-tienda')"><a ng-click="openContactModal('company')">Contact (Store and company)</a></li>
					<li ng-click="trackPhoneEvent()">
						<div class="footer-phoneContainer" ng-if="::core.isOpenForSale()">
							<i class="ico help-phone"></i>
							<a href="tel:{{::core.iStoreJSON.details.supportPhone}}" class="footer-phoneNumber">{{::core.iStoreJSON.details.supportPhone}}</a>
							<div class="openHourContainer">
								<p class="openHours strong">Monday to Friday from 08:00 to 17:00 <br> Saturday from 09:00 to 15:00</p>
							</div>
						</div>
					</li>
				</ul>
				-->
<!-- BEGIN SPOT=BK3_ESpot_Footer_Contact_End -->

<!-- END SPOT=BK3_ESpot_Footer_Contact_End -->
			</div>
			<div class="footer-menuGuia" ng-if="::core.isOpenForSale()">
<!-- BEGIN SPOT=BK3_ESpot_Footer_Shopguide_Begin -->

<!-- END SPOT=BK3_ESpot_Footer_Shopguide_Begin -->
				<h3>Shopguide</h3>
				<ul>
					<li ng-click="trackFooterEvent('general-info')"><a ng-href="{{::getShoppingGuideSectionUrl('general-info')}}">Information</a></li>
					<li ng-click="trackFooterEvent('ver-pago')"><a ng-href="{{::getShoppingGuideSectionUrl('payment')}}">Payment</a></li>
					<li ng-click="trackFooterEvent('ver-envio')"><a ng-href="{{::getShoppingGuideSectionUrl('shipping')}}">Delivery</a></li>
					<li ng-click="trackFooterEvent('ver-devoluciones')"><a ng-href="{{::getShoppingGuideSectionUrl('orders-returns')}}">Returns</a></li>
					<li ng-click="trackFooterEvent('ver-gift-card')" ng-if="::(core.iStoreJSON.details.isPhysicalGiftCardEnable=='1'|| core.iStoreJSON.details.isVirtualGiftCardEnable == '1')">
						<a ng-href="{{::getShoppingGuideSectionUrl('gift-card')}}">Gift Card</a>
					</li>
					<li ng-click="trackFooterEvent('ver-ticket-regalo')" ng-if="::(core.iStoreJSON.details.isGiftTicketEnable=='1')">
						<a ng-href="{{::getShoppingGuideSectionUrl('gift-ticket')}}">Gift Ticket</a>
					</li>
					<li ng-click="trackFooterEvent('compra-guest')" ng-if="::core.iStoreJSON.details.checkoutAsGuest">
						<a ng-href="{{::getShoppingGuideSectionUrl('shop-guest')}}">Guest purchase</a>
					</li>
					<li ng-if="::core.iStoreJSON.details.isPaperLessEnabled">
						<a ng-href="{{::getShoppingGuideSectionUrl('eticket')}}">Electronic receipt</a>
					</li>
					<!--  <li><a ng-href="{{getShoppingGuideSectionUrl('terms-conditions')}}">Terms & Conditions</a></li> -->
				</ul>
<!-- BEGIN SPOT=BK3_ESpot_Footer_Shopguide_End -->
<!--<ul class="subList sidebar-submenu sidebar-submenu-thirdlevel">
	<li class="shopguide-last">
	    <a href="https://static.bershka.net/4/static/formularios_desistimiento/formularios_desistimiento_uk.pdf?20190517033500" target="_blank">
		Online Order Cancellation Form
          </a>
	</li>
</ul>-->
<!-- END SPOT=BK3_ESpot_Footer_Shopguide_End -->
			</div>
			<div class="footer-menuBershka">
<!-- BEGIN SPOT=BK3_ESpot_Footer_About_Begin -->

<!-- END SPOT=BK3_ESpot_Footer_About_Begin -->
				<h3>About Bershka</h3>
				<ul>
					<li ng-click="trackFooterEvent('ver-empresa')"><a ng-href="{{::getCompanySectionUrl('aboutUs')}}">About us</a></li>
					<li ng-click="trackFooterEvent('ver-oficinas')"><a ng-href="{{::getCompanySectionUrl('offices')}}">Offices</a></li>
					<li ng-click="trackFooterEvent('trabaja-con-nosotros')"><a ng-href="{{::getCompanySectionUrl('workWithUs')}}">Work with us</a></li>
					<li ng-click="trackFooterEvent('ver-politicas')"><a ng-href="{{::getCompanySectionUrl('policy')}}">Our policies</a></li>
					<li ng-click="trackFooterEvent('ver-affinity')" ng-if="::affinityHelpers.available">
						<a href="javascript:;" ng-click="affinityHelpers.openPage()">Affinity card</a>
						<span class="ico ico-centered ico-external-link"></span>
					</li>
					<li ng-if="::affinityHelpers.infoAvailable">
                        <a href="javascript:;" ng-click="affinityHelpers.openInfo()">What is Affinity?</a>
              		</li>

					<li ng-click="trackFooterEvent('ver-press')">
						<a href="http://press.bershka.com/" target="_blank">Press</a>
						<span class="ico ico-centered ico-external-link"></span>
					</li>
				</ul>
<!-- BEGIN SPOT=BK3_ESpot_Footer_About_End -->

<!-- END SPOT=BK3_ESpot_Footer_About_End -->
			</div>
			<div class="footer-menuRegalo" ng-if="::(core.iStoreJSON.details.isPhysicalGiftCardEnable=='1'|| core.iStoreJSON.details.isVirtualGiftCardEnable == '1')" ng-click="core.goToGiftCardPage(); trackFooterEvent('ver-gift-card-button')">
				<i class="ico ico-gift"></i>
				<span class="footer-giftCard">Gift Card</span>
			</div>
		</div>
	</div>
<!-- BEGIN SPOT=BK3_ESpot_Footer_Mid_03 -->

<!-- END SPOT=BK3_ESpot_Footer_Mid_03 -->
	<div class="footer-extra">
		<div class="footer-separator"></div>
		<div class="footer-store">
			<div class="footer-store-search" ng-show="::core.iStoreJSON.details.hasPhisicalStores">
				<form id="footerFindStoreForm" class="footer-searchInputContainer" method="POST">
					<label for="footerSearchStore">Find your store</label>
					<input type="search" valtype="foreverAlone" id="footerFindStore" placeholder="Enter a province, city or zip code" ng-model="searchStoreText" google-places-autocomplete="searchStore()">
				</form>
				<button id="searchStore" class="btn-cta1" bsk-click="searchStore()" ng-disabled="!searchStoreText">Search</button>
			</div>
			<div class="footer-store-dropdowns">
				<div class="country-selector-container">
					<label for="footerCountries">Market</label>
					<input id="footerCountries" class="country-selector" ng-model="selectedCountry" bsk-click="openCountriesModal()" readonly>
					<i class="ico ico-edit" bsk-click="openCountriesModal()"></i>
				</div>
				<div class="language-selector-container">
					<label for="footerLanguages">Language:</label>				
					<select id="footerLanguages" class="language-selector" ng-model="currentLang"
							ng-options="language.id as language.name for language in ::languages" ng-change="selectLang()">
					</select>
				</div>
			</div>
		</div>
	
		<div class="footer-info">
			<div class="footer-infoCards" ng-if="::core.isOpenForSale()">
				<span class="infoCard-icons">
					<span ng-repeat="method in ::iPaymentMethods" class="footer-summary-info-payment-method footer-summary-info-payment-method-{{::method.code}}">
						<img ng-src="{{::core.getPaymentMethodImageUrl(method, 'png')}}">
					</span>
					<span class="infoCards-security">
						<span><i class="ico ico-lock"></i></span>
						<span>Secure online payment</span>
					</span>
				</span>
				<span class="infoCards-security-mobile">
					<span><i class="ico ico-lock"></i></span>
					<span>Secure online payment</span>
				</span>
			</div>
			<div class="footer-infoNetworks">
				<div class="footer-appContainer apps">
					<span class="apps-names">
						<img src="/static/itxwebstandard/images/iconAppsFooter.png?t=2019042416012446db2121485607">
						<a ng-href="{{::bershkaAppsUrl}}" class="appLink">Bershka Apps</a>
					</span>
					<div class="footer-appImage">
						<a href="https://itunes.apple.com/es/app/bershka/id427769832" target="_blank">
						    <img src="/static/itxwebstandard/images/footerAppStore.png?t=2019042416012446db2121485607">
						</a>
						<a ng-if="::(countryCode != 'CN')" href="https://play.google.com/store/apps/details?id=com.inditex.ecommerce.bershka&hl=es" target="_blank">
							<img src="/static/itxwebstandard/images/footerGooglePlay.png?t=2019042416012446db2121485607">
						</a>
					</div>
				</div>
				<div class="footer_socialNetworkContainer">
					<span>Follow us on</span>
					<div class="footer-networksIcons social-links">
<!-- BEGIN SPOT=BK3_ESpot_Footer_Social_Media -->
<a href="http://www.facebook.com/bershka" title="facebook" target="_blank"><i class="ico ico-facebook"></i></a>
<a href="http://www.twitter.com/bershka" title="twitter" target="_blank"><i class="ico ico-twitter"></i></a>
<a href="http://www.instagram.com/bershkacollection" title="instagram" target="_blank"><i class="ico ico-instagram"></i></a>
<a href="https://play.spotify.com/user/bershka" title="spotify" target="_blank"><i class="ico ico-spotify"></i></a>
<a href="http://www.youtube.com/bershka" title="youtube" target="_blank"><i class="ico ico-youtube"></i></a> 

<!-- END SPOT=BK3_ESpot_Footer_Social_Media -->
					</div>
				</div>
			</div>
		</div>
		<div class="footer-bottom">
			<div class="footer-desktop">
				<div class="footer-brand">&copy; 2018 Bershka</div>
				<div class="footer-legal">
					<a href="javascript:;" class="footer-legal-terms-and-conditions" ng-if="::core.isOpenForSale()" ng-click="openTermsAndConditions();trackFooterEvent('ver-terminos-condiciones')">Terms and conditions of purchase</a>
					<a href="javascript:;" ng-if="hasWithdrawal" ng-click="openWithdrawal()">Form and right of withdrawal</a>
					<a href="javascript:;" class="footer-legal-cookies-policy" ng-click="openCookiesPolicy();">Cookies policy</a>
					<a href="javascript:;" class="footer-legal-privacy-policy" ng-if="::core.isOpenForSale()" ng-click="openPrivacyPolicy();">Privacy policy	</a>
				</div>
			</div>
			<div class="footer-mobile">
				<div class="footer-brand">
					<span>&copy; 2018 Bershka</span>
					<a href="javascript:;" class="footer-legal-terms-and-conditions" ng-if="::core.isOpenForSale()" ng-click="openTermsAndConditions()">Terms and conditions of purchase</a>
				</div>
				<div class="footer-legal">
					<a href="javascript:;" class="footer-legal-cookies-policy" ng-click="openCookiesPolicy();">Cookies policy</a>
					<a href="javascript:;" class="footer-legal-privacy-policy" ng-if="::core.isOpenForSale()" ng-click="openPrivacyPolicy()">Privacy policy	</a>
				</div>
			</div>
		</div>
<!-- BEGIN SPOT=BK3_ESpot_Legal_Info -->

<!-- END SPOT=BK3_ESpot_Legal_Info -->
<!-- BEGIN SPOT=BK3_ESpot_Footer_End -->
<script>
$(".footer-legal").append($("<a />").attr({
	href: "https://www.inditex.com/documents/10279/364755/Inditex+Modern+Slavery+Statement/82b2f138-5bfe-9134-bcf4-8a7fbf16e470",
	target: "_blank"
}).html("UK Act on Modern Slavery")).append($("<a />").attr({
	href: "https://static.bershka.net/4/static/itxwebstandard/docs/footer/gb/tax_strategy.pdf?t=20190517033500",
	target: "_blank"
}).html("UK tax strategy and aproach"));
</script>

<!-- END SPOT=BK3_ESpot_Footer_End -->
	</div>
</footer><!-- BEGIN SPOT=BK3_ESpot_BodyEnd -->
<style>
.sg-backToShop {
  display: none !important;
}

</style><script>
/* FIX PARA CAMBIAR EL COLOR CRUDO A BLANCO EN EL PRODUCTO: 100293004 */

(function() {
  var replacements={
		"100959963": {
			"808": {
				"100": "Kaki",
				"-1": "Khaki",
				"-2": "Kaki",
				"-3": "Khaki",
				"-4": "Kaki",
				"-5": "Kaki",
				"-6": "Caqui",
				"-7": "卡其色",
				"-11": "Kakia",
				"-12": "Caqui",
				"-13": "Caqui",
				"-14": "Χακί",
				"-20": "Хаки",
				"-21": "Kaki",
				"-22": "Khaki",
				"-25": "Kaki",
				"-27": "Kaki",
				"-28": "Kaki",
				"-30": "Цвят каки",
				"-33": "Rusvai žalsva",
				"-34": "Khaki",
				"-35": "Haki",
				"-36": "Khaki",
				"-38": "Kaki",
				"-39": "Khakigrøn",
				"-42": "Khaki",
				"-46": "Kaki"
			}
		},
		"100944106": {
			"620": {
				"100": "Rood",
				"-1": "Red",
				"-2": "Rouge",
				"-3": "Rot",
				"-4": "Rosso",
				"-5": "Rojo",
				"-6": "Vermelho",
				"-7": "红色",
				"-11": "Gorria",
				"-12": "Vermello",
				"-13": "Vermell",
				"-14": "Κόκκινο",
				"-20": "Красный",
				"-21": "Roșu",
				"-22": "Czerwony",
				"-25": "Röd",
				"-27": "Červená",
				"-28": "Červená",
				"-30": "Червено",
				"-33": "Raudona",
				"-34": "Punane",
				"-35": "Sarkans",
				"-36": "Red",
				"-38": "Crvena",
				"-39": "Rød",
				"-42": "Piros",
				"-46": "Punainen"
			}
		}
  };

  var oldIExecute=inditex.execute;
  inditex.execute=function(req) {
    for(var i=0;i<req.actions.length;i++) {
      var action=req.actions[i];
      if(action.action=="catalog:productDetail" && replacements[action.params.productId+""]) {
		    var oldOnFinish=req.onFinish||$.noop;
        var actionId=i;
        req.onFinish=function(result) {
          if(result==1) {
            var product=arguments[actionId+1];
						var replacement=replacements[product.id+""];
						if(replacement && product.detail.colors) {
							for(var i=0, len=product.detail.colors.length; i<len; i++) {
								var color=product.detail.colors[i];
								if(replacement[color.id]) {
									color.name=replacement[color.id][inditex.iLangId] || replacement[color.id]["-1"];
								}
							}
						}
          }
          oldOnFinish.apply(this,arguments);
        };
        break;
      }
    }

    oldIExecute.apply(this,arguments);
  };
})();
</script><script>
(function() {
  $(".footer-info .apps-names img").attr("ng-src","{{core.getStaticResourceUrl('/images/iconAppsFooter.png')}}");
})();
</script><script type="text/ng-template" id="tplProductList">
<bsk-carousel class="cross-selling-slider" settings="$ctrl.settings" ng-if="$ctrl.products">
	<related-product bsk-carousel-slide ng-repeat="product in $ctrl.products" on-repeat-end-notify class="item cross-selling-slider-item" product="product"
		index="$index" cart="{{::$ctrl.cart}}" wishlist="{{::$ctrl.wishlist}}" quickshop="{{::$ctrl.quickshop}}" source="{{::$ctrl.source}}" image-type="{{::$ctrl.imageType}}" image-size="{{::$ctrl.imageSize}}"></related-product>
</bsk-carousel>
</script>

<script type="text/ng-template" id="fixTplRelatedProduct" fixes="tplRelatedProduct">
<div class="grid-item-container related-product-container">
	<div class="image">
		<a ng-href="{{$ctrl.sProductUrl}}" ng-click="$ctrl.showQuickShop($event)" ng-if="::$ctrl.hasLinks">
			<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAM1CAMAAADXY7BjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTQyREQxQTNBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTQyREQxQTJBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjJGREM5MkFEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjJGREM5M0FEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrQaECUAAAAGUExURQAAAAAAAKVnuc8AAAABdFJOUwBA5thmAAACF0lEQVR42uzBAQ0AAADCoPdPbQ8HFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcGECDAAILQABH8QQ9gAAAABJRU5ErkJggg=="
				ng-src="{{$ctrl.sCurrentImageUrl}}" bsk-alt="$ctrl.product.name">
		</a>		
		<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAM1CAMAAADXY7BjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTQyREQxQTNBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTQyREQxQTJBREExMTFFNzk4MTZDNTAwRDc0RjE1MkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjJGREM5MkFEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjJGREM5M0FEQTAxMUU3OTRDRUE1M0FBQzlFN0U5OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrQaECUAAAAGUExURQAAAAAAAKVnuc8AAAABdFJOUwBA5thmAAACF0lEQVR42uzBAQ0AAADCoPdPbQ8HFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcGECDAAILQABH8QQ9gAAAABJRU5ErkJggg=="
			ng-src="{{$ctrl.sCurrentImageUrl}}" bsk-alt="$ctrl.product.name" ng-if="::(!$ctrl.hasLinks)">
		<div ng-if="::($ctrl.showWishlist==1)" class="cross-selling-shortcut-container hide-mobile">
			<div ng-click="$ctrl.showQuickWish($event)" class="cross-selling-shortcut cross-selling-shortcut-wishlist">
				<span class="ico" ng-class="$ctrl.isProductInWishlist()?'ico-wish-min-selected':'ico-wish-min'"></span>
				<span class="hide-mobile">Save</span> 
			</div>
		</div>
	</div>
	<div class="prodinfo">
		<a ng-href="{{$ctrl.sProductUrl}}" ng-click="$ctrl.showQuickShop($event)" ng-if="::$ctrl.hasLinks">
			<span class="hashtags ellipsis" ng-bind-html="$ctrl.product.name | to_trusted"></span>
		</a>
		<span class="hashtags ellipsis" ng-bind-html="$ctrl.product.name | to_trusted" ng-if="::(!$ctrl.hasLinks)"></span>
		<static-product-price class="prices" range="$ctrl.product.price" delta-position="back"></static-product-price>
		<button class="btn cross-selling-button hide-mobile" ng-if="::$ctrl.showCart" ng-click="$ctrl.showQuickShop($event)" >Add to shopping cart</button>
	</div>
</div>
</script><script type="text/ng-template" id="experimentTplCategoryDetail" fixes="tplCategoryDetail">
	<div class="category-page-container" ng-class="{'min-height-80': $ctrl.hasValidCategory && $ctrl.hasProducts() }">
		<div class="category-table grid-cols-{{$ctrl.gridCols}}" ng-cloak ng-class="{'filters-hidden': !$ctrl.filtersOpened}">
			<category-countdown category="$ctrl.loadedCategory" ng-if="$ctrl.categoryCountdown.enabled"></category-countdown>
      <!-- <div ng-if="$ctrl.recommendedCarousel.length && $ctrl.deviceService.getActualState()!='mobile'" class="recommended-container">
        <div class="title recommended-title strong" ng-bind="$ctrl.categoryFactory.oCategory.name | to_trusted"></div>
        <div class="title rest-title strong">Picked out just for you</div>
        <product-list products="$ctrl.recommendedCarousel" slider-settings="{ slides: 4, move: 4, breakpoints: { '1024': { slides: 4, move: 4 }, '768': { slides: 2, move: 2, controls: false } } }" image-type="PRODUCT_PAGE" cart="0" quickshop="0" class="recommended-list"></product-list>
      </div> -->

      <div id="gridHeader" class="grid-product-header clearfix ng-hide" ng-show="$ctrl.hasProducts()" fixed-element fixed-element-scroll="false" fixed-element-visibility="$ctrl.hasProducts()"> 
				<div class="push-left filter-button" ng-click="$ctrl.toggleFilters()">
					<div class="hide-mobile">
						<span class="text" ng-if="$ctrl.filtersOpened">Hide filters</span>
						<span class="text" ng-if="!$ctrl.filtersOpened">Show filters</span>
						<span class="filter-title-ico ico ico-arrow-down-gray-sm"></span>
					</div>
					<div class="is-mobile">
						<span class="ico ico-mobile ico-centered ico-filter-small"></span><span class="grid-product-header-filter ico-centered">Filter</span>
					</div>
				</div>
				<bsk-breadcrumb class="category-breadcrumb limit-max-width hide-mobile push-left" category="$ctrl.loadedCategory"></bsk-breadcrumb>
				<div class="grid-product-header-element grid-product-header-sort">
					<bsk-sort class="sort-elements-container"></bsk-sort>
				</div>
				<bsk-grid-size storage-key="GRID_COLUMNS" change="$ctrl.updateGridColumns(columns)" class="grid-product-header-element view push-right"></bsk-grid-size>
			</div>
			<div class="clearfix category-container" ng-if="$ctrl.hasProducts()">
				<div fixed-element fixed-element-offset-top="35" fixed-element-visibility="$ctrl.filtersOpened" ng-show="$ctrl.filtersOpened" class="fixed-filters-container">
					<bsk-filters close="$ctrl.closeFilters()" class="fixed-filters-container" ng-show="$ctrl.filtersOpened"></bsk-filters>
				</div>
				<div class="productGrid clearfix" id="productGrid">
<!-- BEGIN SPOT=BK3_ESpot_Top_Grid -->
<style>

        /**
         * Swiper 4.4.6
         * Most modern mobile touch slider and framework with hardware accelerated transitions
         * http://www.idangero.us/swiper/
         *
         * Copyright 2014-2018 Vladimir Kharlampidi
         *
         * Released under the MIT License
         *
         * Released on: December 19, 2018
         */
        
        .swiper-container {
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            list-style: none;
            padding: 0;
            z-index: 1
        }
        
        .swiper-container-no-flexbox .swiper-slide {
            float: left
        }
        
        .swiper-container-vertical>.swiper-wrapper {
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -webkit-flex-direction: column;
            -ms-flex-direction: column;
            flex-direction: column
        }
        
        .swiper-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            z-index: 1;
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-transition-property: -webkit-transform;
            transition-property: -webkit-transform;
            -o-transition-property: transform;
            transition-property: transform;
            transition-property: transform, -webkit-transform;
            -webkit-box-sizing: content-box;
            box-sizing: content-box
        }
        
        .swiper-container-android .swiper-slide,
        .swiper-wrapper {
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0)
        }
        
        .swiper-container-multirow>.swiper-wrapper {
            -webkit-flex-wrap: wrap;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap
        }
        
        .swiper-container-free-mode>.swiper-wrapper {
            -webkit-transition-timing-function: ease-out;
            -o-transition-timing-function: ease-out;
            transition-timing-function: ease-out;
            margin: 0 auto
        }
        
        .swiper-slide {
            -webkit-flex-shrink: 0;
            -ms-flex-negative: 0;
            flex-shrink: 0;
            width: 100%;
            height: 100%;
            position: relative;
            -webkit-transition-property: -webkit-transform;
            transition-property: -webkit-transform;
            -o-transition-property: transform;
            transition-property: transform;
            transition-property: transform, -webkit-transform
        }
        
        .swiper-slide-invisible-blank {
            visibility: hidden
        }
        
        .swiper-container-autoheight,
        .swiper-container-autoheight .swiper-slide {
            height: auto
        }
        
        .swiper-container-autoheight .swiper-wrapper {
            -webkit-box-align: start;
            -webkit-align-items: flex-start;
            -ms-flex-align: start;
            align-items: flex-start;
            -webkit-transition-property: height, -webkit-transform;
            transition-property: height, -webkit-transform;
            -o-transition-property: transform, height;
            transition-property: transform, height;
            transition-property: transform, height, -webkit-transform
        }
        
        .swiper-container-3d {
            -webkit-perspective: 1200px;
            perspective: 1200px
        }
        
        .swiper-container-3d .swiper-cube-shadow,
        .swiper-container-3d .swiper-slide,
        .swiper-container-3d .swiper-slide-shadow-bottom,
        .swiper-container-3d .swiper-slide-shadow-left,
        .swiper-container-3d .swiper-slide-shadow-right,
        .swiper-container-3d .swiper-slide-shadow-top,
        .swiper-container-3d .swiper-wrapper {
            -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d
        }
        
        .swiper-container-3d .swiper-slide-shadow-bottom,
        .swiper-container-3d .swiper-slide-shadow-left,
        .swiper-container-3d .swiper-slide-shadow-right,
        .swiper-container-3d .swiper-slide-shadow-top {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10
        }
        
        .swiper-container-3d .swiper-slide-shadow-left {
            background-image: -webkit-gradient(linear, right top, left top, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));
            background-image: -webkit-linear-gradient(right, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: -o-linear-gradient(right, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: linear-gradient(to left, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))
        }
        
        .swiper-container-3d .swiper-slide-shadow-right {
            background-image: -webkit-gradient(linear, left top, right top, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));
            background-image: -webkit-linear-gradient(left, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: -o-linear-gradient(left, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: linear-gradient(to right, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))
        }
        
        .swiper-container-3d .swiper-slide-shadow-top {
            background-image: -webkit-gradient(linear, left bottom, left top, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));
            background-image: -webkit-linear-gradient(bottom, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: -o-linear-gradient(bottom, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: linear-gradient(to top, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))
        }
        
        .swiper-container-3d .swiper-slide-shadow-bottom {
            background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));
            background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: -o-linear-gradient(top, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));
            background-image: linear-gradient(to bottom, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))
        }
        
        .swiper-container-wp8-horizontal,
        .swiper-container-wp8-horizontal>.swiper-wrapper {
            -ms-touch-action: pan-y;
            touch-action: pan-y
        }
        
        .swiper-container-wp8-vertical,
        .swiper-container-wp8-vertical>.swiper-wrapper {
            -ms-touch-action: pan-x;
            touch-action: pan-x
        }
        
        .swiper-button-next,
        .swiper-button-prev {
            position: absolute;
            top: 50%;
            width: 27px;
            height: 44px;
            margin-top: -22px;
            z-index: 10;
            cursor: pointer;
            background-size: 27px 44px;
            background-position: center;
            background-repeat: no-repeat
        }
        
        .swiper-button-next.swiper-button-disabled,
        .swiper-button-prev.swiper-button-disabled {
            opacity: .35;
            cursor: auto;
            pointer-events: none
        }
        
        .swiper-button-prev,
        .swiper-container-rtl .swiper-button-next {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M0%2C22L22%2C0l2.1%2C2.1L4.2%2C22l19.9%2C19.9L22%2C44L0%2C22L0%2C22L0%2C22z'%20fill%3D'%23007aff'%2F%3E%3C%2Fsvg%3E");
            left: 10px;
            right: auto
        }
        
        .swiper-button-next,
        .swiper-container-rtl .swiper-button-prev {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M27%2C22L27%2C22L5%2C44l-2.1-2.1L22.8%2C22L2.9%2C2.1L5%2C0L27%2C22L27%2C22z'%20fill%3D'%23007aff'%2F%3E%3C%2Fsvg%3E");
            right: 10px;
            left: auto
        }
        
        .swiper-button-prev.swiper-button-white,
        .swiper-container-rtl .swiper-button-next.swiper-button-white {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M0%2C22L22%2C0l2.1%2C2.1L4.2%2C22l19.9%2C19.9L22%2C44L0%2C22L0%2C22L0%2C22z'%20fill%3D'%23ffffff'%2F%3E%3C%2Fsvg%3E")
        }
        
        .swiper-button-next.swiper-button-white,
        .swiper-container-rtl .swiper-button-prev.swiper-button-white {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M27%2C22L27%2C22L5%2C44l-2.1-2.1L22.8%2C22L2.9%2C2.1L5%2C0L27%2C22L27%2C22z'%20fill%3D'%23ffffff'%2F%3E%3C%2Fsvg%3E")
        }
        
        .swiper-button-prev.swiper-button-black,
        .swiper-container-rtl .swiper-button-next.swiper-button-black {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M0%2C22L22%2C0l2.1%2C2.1L4.2%2C22l19.9%2C19.9L22%2C44L0%2C22L0%2C22L0%2C22z'%20fill%3D'%23000000'%2F%3E%3C%2Fsvg%3E")
        }
        
        .swiper-button-next.swiper-button-black,
        .swiper-container-rtl .swiper-button-prev.swiper-button-black {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M27%2C22L27%2C22L5%2C44l-2.1-2.1L22.8%2C22L2.9%2C2.1L5%2C0L27%2C22L27%2C22z'%20fill%3D'%23000000'%2F%3E%3C%2Fsvg%3E")
        }
        
        .swiper-button-lock {
            display: none
        }
        
        .swiper-pagination {
            position: absolute;
            text-align: center;
            -webkit-transition: .3s opacity;
            -o-transition: .3s opacity;
            transition: .3s opacity;
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
            z-index: 10
        }
        
        .swiper-pagination.swiper-pagination-hidden {
            opacity: 0
        }
        
        .swiper-container-horizontal>.swiper-pagination-bullets,
        .swiper-pagination-custom,
        .swiper-pagination-fraction {
            bottom: 10px;
            left: 0;
            width: 100%
        }
        
        .swiper-pagination-bullets-dynamic {
            overflow: hidden;
            font-size: 0
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet {
            -webkit-transform: scale(.33);
            -ms-transform: scale(.33);
            transform: scale(.33);
            position: relative
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active {
            -webkit-transform: scale(1);
            -ms-transform: scale(1);
            transform: scale(1)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main {
            -webkit-transform: scale(1);
            -ms-transform: scale(1);
            transform: scale(1)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev {
            -webkit-transform: scale(.66);
            -ms-transform: scale(.66);
            transform: scale(.66)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev {
            -webkit-transform: scale(.33);
            -ms-transform: scale(.33);
            transform: scale(.33)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next {
            -webkit-transform: scale(.66);
            -ms-transform: scale(.66);
            transform: scale(.66)
        }
        
        .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next {
            -webkit-transform: scale(.33);
            -ms-transform: scale(.33);
            transform: scale(.33)
        }
        
        .swiper-pagination-bullet {
            width: 8px;
            height: 8px;
            display: inline-block;
            border-radius: 100%;
            background: #000;
            opacity: .2
        }
        
        button.swiper-pagination-bullet {
            border: none;
            margin: 0;
            padding: 0;
            -webkit-box-shadow: none;
            box-shadow: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none
        }
        
        .swiper-pagination-clickable .swiper-pagination-bullet {
            cursor: pointer
        }
        
        .swiper-pagination-bullet-active {
            opacity: 1;
            background: #007aff
        }
        
        .swiper-container-vertical>.swiper-pagination-bullets {
            right: 10px;
            top: 50%;
            -webkit-transform: translate3d(0, -50%, 0);
            transform: translate3d(0, -50%, 0)
        }
        
        .swiper-container-vertical>.swiper-pagination-bullets .swiper-pagination-bullet {
            margin: 6px 0;
            display: block
        }
        
        .swiper-container-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic {
            top: 50%;
            -webkit-transform: translateY(-50%);
            -ms-transform: translateY(-50%);
            transform: translateY(-50%);
            width: 8px
        }
        
        .swiper-container-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet {
            display: inline-block;
            -webkit-transition: .2s top, .2s -webkit-transform;
            transition: .2s top, .2s -webkit-transform;
            -o-transition: .2s transform, .2s top;
            transition: .2s transform, .2s top;
            transition: .2s transform, .2s top, .2s -webkit-transform
        }
        
        .swiper-container-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet {
            margin: 0 4px
        }
        
        .swiper-container-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic {
            left: 50%;
            -webkit-transform: translateX(-50%);
            -ms-transform: translateX(-50%);
            transform: translateX(-50%);
            white-space: nowrap
        }
        
        .swiper-container-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet {
            -webkit-transition: .2s left, .2s -webkit-transform;
            transition: .2s left, .2s -webkit-transform;
            -o-transition: .2s transform, .2s left;
            transition: .2s transform, .2s left;
            transition: .2s transform, .2s left, .2s -webkit-transform
        }
        
        .swiper-container-horizontal.swiper-container-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet {
            -webkit-transition: .2s right, .2s -webkit-transform;
            transition: .2s right, .2s -webkit-transform;
            -o-transition: .2s transform, .2s right;
            transition: .2s transform, .2s right;
            transition: .2s transform, .2s right, .2s -webkit-transform
        }
        
        .swiper-pagination-progressbar {
            background: rgba(0, 0, 0, .25);
            position: absolute
        }
        
        .swiper-pagination-progressbar .swiper-pagination-progressbar-fill {
            background: #007aff;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            -webkit-transform: scale(0);
            -ms-transform: scale(0);
            transform: scale(0);
            -webkit-transform-origin: left top;
            -ms-transform-origin: left top;
            transform-origin: left top
        }
        
        .swiper-container-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill {
            -webkit-transform-origin: right top;
            -ms-transform-origin: right top;
            transform-origin: right top
        }
        
        .swiper-container-horizontal>.swiper-pagination-progressbar,
        .swiper-container-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite {
            width: 100%;
            height: 4px;
            left: 0;
            top: 0
        }
        
        .swiper-container-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,
        .swiper-container-vertical>.swiper-pagination-progressbar {
            width: 4px;
            height: 100%;
            left: 0;
            top: 0
        }
        
        .swiper-pagination-white .swiper-pagination-bullet-active {
            background: #fff
        }
        
        .swiper-pagination-progressbar.swiper-pagination-white {
            background: rgba(255, 255, 255, .25)
        }
        
        .swiper-pagination-progressbar.swiper-pagination-white .swiper-pagination-progressbar-fill {
            background: #fff
        }
        
        .swiper-pagination-black .swiper-pagination-bullet-active {
            background: #000
        }
        
        .swiper-pagination-progressbar.swiper-pagination-black {
            background: rgba(0, 0, 0, .25)
        }
        
        .swiper-pagination-progressbar.swiper-pagination-black .swiper-pagination-progressbar-fill {
            background: #000
        }
        
        .swiper-pagination-lock {
            display: none
        }
        
        .swiper-scrollbar {
            border-radius: 10px;
            position: relative;
            -ms-touch-action: none;
            background: rgba(0, 0, 0, .1)
        }
        
        .swiper-container-horizontal>.swiper-scrollbar {
            position: absolute;
            left: 1%;
            bottom: 3px;
            z-index: 50;
            height: 5px;
            width: 98%
        }
        
        .swiper-container-vertical>.swiper-scrollbar {
            position: absolute;
            right: 3px;
            top: 1%;
            z-index: 50;
            width: 5px;
            height: 98%
        }
        
        .swiper-scrollbar-drag {
            height: 100%;
            width: 100%;
            position: relative;
            background: rgba(0, 0, 0, .5);
            border-radius: 10px;
            left: 0;
            top: 0
        }
        
        .swiper-scrollbar-cursor-drag {
            cursor: move
        }
        
        .swiper-scrollbar-lock {
            display: none
        }
        
        .swiper-zoom-container {
            width: 100%;
            height: 100%;
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-pack: center;
            -webkit-justify-content: center;
            -ms-flex-pack: center;
            justify-content: center;
            -webkit-box-align: center;
            -webkit-align-items: center;
            -ms-flex-align: center;
            align-items: center;
            text-align: center
        }
        
        .swiper-zoom-container>canvas,
        .swiper-zoom-container>img,
        .swiper-zoom-container>svg {
            max-width: 100%;
            max-height: 100%;
            -o-object-fit: contain;
            object-fit: contain
        }
        
        .swiper-slide-zoomed {
            cursor: move
        }
        
        .swiper-lazy-preloader {
            width: 42px;
            height: 42px;
            position: absolute;
            left: 50%;
            top: 50%;
            margin-left: -21px;
            margin-top: -21px;
            z-index: 10;
            -webkit-transform-origin: 50%;
            -ms-transform-origin: 50%;
            transform-origin: 50%;
            -webkit-animation: swiper-preloader-spin 1s steps(12, end) infinite;
            animation: swiper-preloader-spin 1s steps(12, end) infinite
        }
        
        .swiper-lazy-preloader:after {
            display: block;
            content: '';
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D'0%200%20120%20120'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20xmlns%3Axlink%3D'http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink'%3E%3Cdefs%3E%3Cline%20id%3D'l'%20x1%3D'60'%20x2%3D'60'%20y1%3D'7'%20y2%3D'27'%20stroke%3D'%236c6c6c'%20stroke-width%3D'11'%20stroke-linecap%3D'round'%2F%3E%3C%2Fdefs%3E%3Cg%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(30%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(60%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(90%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(120%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(150%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.37'%20transform%3D'rotate(180%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.46'%20transform%3D'rotate(210%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.56'%20transform%3D'rotate(240%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.66'%20transform%3D'rotate(270%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.75'%20transform%3D'rotate(300%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.85'%20transform%3D'rotate(330%2060%2C60)'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E");
            background-position: 50%;
            background-size: 100%;
            background-repeat: no-repeat
        }
        
        .swiper-lazy-preloader-white:after {
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D'0%200%20120%20120'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20xmlns%3Axlink%3D'http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink'%3E%3Cdefs%3E%3Cline%20id%3D'l'%20x1%3D'60'%20x2%3D'60'%20y1%3D'7'%20y2%3D'27'%20stroke%3D'%23fff'%20stroke-width%3D'11'%20stroke-linecap%3D'round'%2F%3E%3C%2Fdefs%3E%3Cg%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(30%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(60%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(90%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(120%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.27'%20transform%3D'rotate(150%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.37'%20transform%3D'rotate(180%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.46'%20transform%3D'rotate(210%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.56'%20transform%3D'rotate(240%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.66'%20transform%3D'rotate(270%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.75'%20transform%3D'rotate(300%2060%2C60)'%2F%3E%3Cuse%20xlink%3Ahref%3D'%23l'%20opacity%3D'.85'%20transform%3D'rotate(330%2060%2C60)'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E")
        }
        
        @-webkit-keyframes swiper-preloader-spin {
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg)
            }
        }
        
        @keyframes swiper-preloader-spin {
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg)
            }
        }
        
        .swiper-container .swiper-notification {
            position: absolute;
            left: 0;
            top: 0;
            pointer-events: none;
            opacity: 0;
            z-index: -1000
        }
        
        .swiper-container-fade.swiper-container-free-mode .swiper-slide {
            -webkit-transition-timing-function: ease-out;
            -o-transition-timing-function: ease-out;
            transition-timing-function: ease-out
        }
        
        .swiper-container-fade .swiper-slide {
            pointer-events: none;
            -webkit-transition-property: opacity;
            -o-transition-property: opacity;
            transition-property: opacity
        }
        
        .swiper-container-fade .swiper-slide .swiper-slide {
            pointer-events: none
        }
        
        .swiper-container-fade .swiper-slide-active,
        .swiper-container-fade .swiper-slide-active .swiper-slide-active {
            pointer-events: auto
        }
        
        .swiper-container-cube {
            overflow: visible
        }
        
        .swiper-container-cube .swiper-slide {
            pointer-events: none;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            z-index: 1;
            visibility: hidden;
            -webkit-transform-origin: 0 0;
            -ms-transform-origin: 0 0;
            transform-origin: 0 0;
            width: 100%;
            height: 100%
        }
        
        .swiper-container-cube .swiper-slide .swiper-slide {
            pointer-events: none
        }
        
        .swiper-container-cube.swiper-container-rtl .swiper-slide {
            -webkit-transform-origin: 100% 0;
            -ms-transform-origin: 100% 0;
            transform-origin: 100% 0
        }
        
        .swiper-container-cube .swiper-slide-active,
        .swiper-container-cube .swiper-slide-active .swiper-slide-active {
            pointer-events: auto
        }
        
        .swiper-container-cube .swiper-slide-active,
        .swiper-container-cube .swiper-slide-next,
        .swiper-container-cube .swiper-slide-next+.swiper-slide,
        .swiper-container-cube .swiper-slide-prev {
            pointer-events: auto;
            visibility: visible
        }
        
        .swiper-container-cube .swiper-slide-shadow-bottom,
        .swiper-container-cube .swiper-slide-shadow-left,
        .swiper-container-cube .swiper-slide-shadow-right,
        .swiper-container-cube .swiper-slide-shadow-top {
            z-index: 0;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden
        }
        
        .swiper-container-cube .swiper-cube-shadow {
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            background: #000;
            opacity: .6;
            -webkit-filter: blur(50px);
            filter: blur(50px);
            z-index: 0
        }
        
        .swiper-container-flip {
            overflow: visible
        }
        
        .swiper-container-flip .swiper-slide {
            pointer-events: none;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            z-index: 1
        }
        
        .swiper-container-flip .swiper-slide .swiper-slide {
            pointer-events: none
        }
        
        .swiper-container-flip .swiper-slide-active,
        .swiper-container-flip .swiper-slide-active .swiper-slide-active {
            pointer-events: auto
        }
        
        .swiper-container-flip .swiper-slide-shadow-bottom,
        .swiper-container-flip .swiper-slide-shadow-left,
        .swiper-container-flip .swiper-slide-shadow-right,
        .swiper-container-flip .swiper-slide-shadow-top {
            z-index: 0;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden
        }
        
        .swiper-container-coverflow .swiper-wrapper {
            -ms-perspective: 1200px
        }
        
        </style>
        
          <!-- Demo styles -->
          <style>
            .swiper-container {
              width: 100%;
              height: 100%;
            }
            .swiper-slide {
              text-align: center;
              font-size: 18px;
              background: #fff;
              /* Center slide text vertically */
              display: block;
            }
        
        
            .swiper-container .img-responsive{
                width:100%;
            }
        
            .carousel-pants{
                margin: 20px 20px;
            }
        
            .carousel-pants h2{
                font-size: 23px;
                font-weight: bold;
                text-transform: initial;
                letter-spacing: 0.9px;
                margin-bottom: 20px;
            }
        
            .carousel-pants p{
                font-size: 16px;
                margin-top: 25px;
                display: inline-block;
            }
        
            .carousel-pants .close{
                margin-left: 7px;
                display: none;
            }
        
            .carousel-pants .close img{
                width: 13px;
                vertical-align: middle;
            }
        
            .carousel-pants .swiper-button-next {
                background-image: url("https://static.bershka.net/4/static/itxwebstandard/images/home/carrusel/pants/Icn_arrow_right.svg?20190517033500");
                top: calc(50% - 25px);
                right: 0;
            }
            .carousel-pants .swiper-button-prev {
                background-image: url("https://static.bershka.net/4/static/itxwebstandard/images/home/carrusel/pants/Icn_arrow_left.svg?20190517033500");
                top: calc(50% - 25px);
                left: 0;
            }
            .carousel-pants .swiper-button-next, .swiper-button-prev{
                width: 40px;
                background-size: 40px 44px;
            }
            .carousel-pants .swiper-button-next.swiper-button-disabled, .swiper-button-prev.swiper-button-disabled{
                opacity: 0;
            }
            .carousel-pants .swiper-container .swiper-slide.active .close{
                display: inline-block;
            }
            .carousel-pants .swiper-container .swiper-slide.active p{
                font-weight: bold;
            }
            .carousel-pants .swiper-container .swiper-slide{
                cursor: pointer;
                opacity: 1;
            }
            .carousel-pants .swiper-container .swiper-slide.opacity{
                cursor: pointer;
                opacity: 0.5;
            }
            .carousel-pants .swiper-number-products{
                color: #B2B2B2;
            }
        
        
        
        .carousel-pants .scrolling-wrapper {
          overflow-x: scroll;
          overflow-y: hidden;
          white-space: nowrap;
        }
        .carousel-pants .scrolling-wrapper .card {
          display: inline-block;
        }
        
        .carousel-pants .scrolling-wrapper-flexbox {
          display: flex;
          flex-wrap: nowrap;
          overflow-x: auto;
        }
        .carousel-pants .scrolling-wrapper-flexbox .card {
          flex: 0 0 auto;
          margin-right: 3px;
        }
        
        .carousel-pants .card {
          border: 1px solid white;
          width: 150px;
        }
        
        .carousel-pants .card p{
            font-weight: bold;
            font-size: 14px;
        }
        
        .carousel-pants .scrolling-wrapper, .carousel-pants .scrolling-wrapper-flexbox {
          width: 100%;
          -webkit-overflow-scrolling: touch;
          text-align: center;
        }
        .carousel-pants .scrolling-wrapper::-webkit-scrollbar, .carousel-pants .scrolling-wrapper-flexbox::-webkit-scrollbar {
          display: none;
        }
        
        .carousel-pants .hr{
            height: 1px;
            color: #E1E1E1;
            display: block;
            opacity: 0.5;
            margin-top: 35px;
        }
        
        @media (min-width: 769px){
            .carousel-pants.no-desktop {
                display: none;
            }
            /* #pantone-man .swiper-wrapper,
            #pantone-woman .swiper-wrapper{
                display: flex;
                justify-content: center;
            } */
            #pantone-man,
            #pantone-woman{
                display: none;
            }
        }
        
        @media (max-width: 768px){
            .carousel-pants.no-mobile {
                display: none;
            }
            .carousel-pants{
                margin: 10px 8px;
            }
            .carousel-pants p {
                font-size: 14px;
                margin-top: 15px;
                display: inline-block;
                margin-bottom: 10px;
            }
            .carousel-pants .hr{
                height: 1px;
                color: #E1E1E1;
                display: block;
                opacity: 0.5;
                margin-top: inherit;
            }
        }
        
        
          </style>
        
          <!-- Swiper -->
          <div class="carousel-pants" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193216">
            <div data-translations="Carousel">
                <!--<h2 class="no-mobile txtFit"></h2>-->
                <div class="swiper-container" swiper category-id="1010193216">
                    <div class="swiper-wrapper">
                    </div>
                    <!-- Add Arrows -->
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
        
        
            <!-- Swiper -->
          <div class="carousel-pants" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193217">
            <div data-translations="Carousel">
                <!--<h2 class="no-mobile txtShirts"></h2>-->
                <div class="swiper-container" swiper category-id="1010193217">
                    <div class="swiper-wrapper">
                    </div>
                    <!-- Add Arrows -->
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
        
        <!-- Swiper -->
          <div class="carousel-pants" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010276029">
            <div data-translations="Carousel">
                <!--<h2 class="no-mobile txtFit"></h2>-->
                <div class="swiper-container" swiper category-id="1010276029">
                    <div class="swiper-wrapper">
                    </div>
                    <!-- Add Arrows -->
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
        
          <!-- Swiper -->
          <div class="carousel-pants" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193238">
            <div data-translations="Carousel">
                <!--<h2 class="no-mobile txtFit"></h2>-->
                <div class="swiper-container" swiper category-id="1010193238">
                    <div class="swiper-wrapper">
                    </div>
                    <!-- Add Arrows -->
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
        
        
          <!-- Swiper pantone woman-->
          <div class="carousel-pants" id="pantone-woman" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010358016">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010358016">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
          <!-- Swiper pantone man-->
          <div class="carousel-pants" id="pantone-man" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010358017">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010358017">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->


          <!-- Swiper shoes woman-->
          <div class="carousel-pants" id="shoes-woman" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193192">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010193192">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->


          <!-- Swiper shoes man-->
          <div class="carousel-pants" id="shoes-man" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193202">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010193202">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->


        <!-- Swiper shoes man-->
          <div class="carousel-pants" id="camisetas-man" bershka-translations="home/json/nou/carousel.json" bershka-on-category="1010193239">
            <div data-translations="Carousel">
                <div class="swiper-container" swiper category-id="1010193239">
                    <div class="swiper-wrapper">
                    </div>
                    <div class="no-mobile swiper-button-next"></div>
                    <div class="no-mobile swiper-button-prev"></div>
                </div>
            </div>
            <hr class="hr"></hr>
          </div>
        
          <!-- Swiper JS -->
        
<!-- END SPOT=BK3_ESpot_Top_Grid -->
<!-- BEGIN SPOT=BK3_ESpot_Top_Grid_null -->

<!-- END SPOT=BK3_ESpot_Top_Grid_null -->

					<!-- <div ng-if="$ctrl.recommendedCarousel.length && $ctrl.deviceService.getActualState()=='mobile'" class="recommended-container"> -->
					<div ng-if="$ctrl.recommendedCarousel.length" class="recommended-container">
						<div class="title recommended-title strong" ng-bind="$ctrl.categoryFactory.oCategory.name | to_trusted"></div>
						<div class="title rest-title strong">Picked out just for you</div>
						<div class="container-scroller">
							<div class="container">
								<related-product ng-repeat="product in $ctrl.recommendedCarousel" class="container-scroller-item" product="product"
									index="$index" cart="0" wishlist="0" quickshop="0" image-type="PRODUCT_PAGE"></related-product>
							</div>
						</div>
						<product-list products="$ctrl.recommendedCarousel" 
							slider-settings="{ 	slides: 4, 
												move: 4, 
												leftArrow: 'https://static.bershka.net/4/static/itxwebstandard/images/assets/Icn_arrow_left.svg?20190517033500', 
												rightArrow: 'https://static.bershka.net/4/static/itxwebstandard/images/assets/Icn_arrow_right.svg?20190517033500',
												breakpoints: { '1024': { slides: 4, move: 4 }, '768': { slides: 2, move: 2, controls: false } } 
											}" 
							image-type="PRODUCT_PAGE" 
							cart="0" 
							quickshop="0" 
							class="recommended-list">
						</product-list>
					</div>

					<bsk-category-seo-links ng-if="$ctrl.hasProducts() && $ctrl.showSeoHeader" category="$ctrl.loadedCategory" class="category-seo-links" ng-class="{'top-category-seo-links': $ctrl.showSeoHeader}"></bsk-category-seo-links>
					<div id="grid_images">
						<div class="no-results ng-hide" ng-show="!$ctrl.hasVisibleProducts() && !$ctrl.loadingGrid">
							<div class="no-results-content">
								<h2 class="no-results-title">OOOPS!</h2>
								<p class="no-results-text">Sorry, no items have been found with the selected characteristics</p>
							</div>							
						</div>
		
						

						<br ng-repeat-start="product in $ctrl.gridProductService.products"
							ng-cloak
							ng-if="product.isSeparator && $ctrl.showSeparators && $ctrl.isFiltered(product) && product.visibleIndex!=0"
							on-repeat-end="$ctrl.goToProduct()">
						<grid-product
							ng-repeat-end
							class="item item-{{::product.bundleId}}"
							product="product"
							ng-show="$ctrl.isFiltered(product)"
							ng-class="{'double-size': product.isDoubleSize, 'has-videos': product.hasVideos, 'is-separator': product.isSeparator, 'is-banner': product.isBanner}"></grid-product>
						<div ng-if="$ctrl.lastSizesProductService.hasVisibleProducts() && $ctrl.loadedCategory._config.showLastSizes">
							<div class="last-sizes-title-container clearfix">
								<span class="last-sizes-title-text">{{$ctrl.loadedCategory._config.lastSizesTitle}}</span>
								<span class="last-sizes-title-quantity">{{$ctrl.getNumberResultsText($ctrl.lastSizesProductService)}}</span>
							</div>
							<grid-product
								ng-repeat="product in $ctrl.lastSizesProductService.products"
								class="item item-{{::product.bundleId}}"
								product="product"
								ng-show="$ctrl.isFiltered(product)"
								ng-class="{'double-size': product.isDoubleSize, 'has-videos': product.hasVideos}"></grid-product>
						</div>
						<bsk-category-seo ng-if="$ctrl.hasProducts()" category="$ctrl.loadedCategory" class="category-seo-footer"></bsk-category-seo>
						<bsk-category-seo-links exclusive ng-if="$ctrl.hasProducts() && !$ctrl.showSeoHeader" category="$ctrl.loadedCategory" class="category-seo-links"></bsk-category-seo-links>
					</div>
					<!-- Category mobile navigation -->
					<div class="category-nav">
						<a class="nav-button prev btn btn-cta2" ng-href="{{$ctrl.prevCategory._config.url}}" ng-if="$ctrl.prevCategory" ng-click="$ctrl.goToCategory($ctrl.prevCategory,$event)">
							<span class="ico ico-arrow-left"></span>
							<span class="nav-button-text" ng-bind-html="$ctrl.prevCategory.name | to_trusted"></span>
						</a>
						<a class="nav-button next btn btn-cta2" ng-href="{{$ctrl.nextCategory._config.url}}" ng-if="$ctrl.nextCategory" ng-click="$ctrl.goToCategory($ctrl.nextCategory, $event)">
							<span class="nav-button-text" ng-bind-html="$ctrl.nextCategory.name | to_trusted"></span>
							<span class="ico ico-arrow-right"></span>
						</a>
					</div>
<!-- BEGIN SPOT=BK3_ESpot_Bottom_Grid -->

<!-- END SPOT=BK3_ESpot_Bottom_Grid -->
<!-- BEGIN SPOT=BK3_ESpot_Bottom_Grid_null -->

<!-- END SPOT=BK3_ESpot_Bottom_Grid_null -->
				</div>
			</div>
		</div>
		
		<bsk-top bsk-outside="footer" class="bskToTop" ng-if="$ctrl.hasProducts()"></bsk-top>
		
		<div id="fixed-chat" class="fixed-chat table full-width" ng-if="$ctrl.gridChatEnabled" bsk-outside="footer">
			<span class="full-width table-cell need-help-text strong">Need Help?</span>
			<div class="table-cell">
				<contact show-title="0" show-email-info="0" show-phone-info="0" show-hours-info="0"></contact>
			</div>
		</div>
		
		<bsk-last-viewed cart="1" wishlist="1" class="last-viewed-container" ng-if="$ctrl.hasProducts()"></bsk-last-viewed>
	</div>
</script>
<!-- END SPOT=BK3_ESpot_BodyEnd -->
	
<script type="text/javascript">
	inditex.initialize();
</script>

	<script type="text/javascript">var _cf = _cf || []; _cf.push(['_setFsp', true]); _cf.push(['_setBm', true]); _cf.push(['_setAu', '/assets/f8253d1a14234fd7a433afcbd92e']);</script><script type="text/javascript" src="/assets/f8253d1a14234fd7a433afcbd92e"></script><noscript><img src="https://www.bershka.com/akam/10/pixel_4abbf91c?a=dD0zYzUzNzNkM2M1NGEyNjhkNWQ1NjIwMmM1NmUxZDY0MTE5MzY3MDRjJmpzPW9mZg==" style="visibility: hidden; position: absolute; left: -999px; top: -999px;" /></noscript></body>
</html>


<!-- BEGIN Monitor -->
<!--TagPageName="ItxHomePage"-->
<!--itxStoreId="BershkaGB"-->
<!--itxStoreLang="en"-->
<!--itxStoreType="VENTA"-->
<!-- END Monitor -->
